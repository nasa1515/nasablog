{"componentChunkName":"component---src-templates-blog-template-js","path":"/linux-lvm/","result":{"data":{"cur":{"id":"845ef170-ee44-5689-a678-0e8f07708de8","html":"<p>머리말  </p>\n<p>안녕하세요 NASA 입니다. 이번 포스트는 LVM에서 다뤄보겠습니다.</p>\n<hr>\n<h2 id=\"-lvmlogical-volume-manager-이란\" style=\"position:relative;\"><a href=\"#-lvmlogical-volume-manager-%EC%9D%B4%EB%9E%80\" aria-label=\" lvmlogical volume manager 이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ LVM(Logical Volume Manager) 이란?</h2>\n<p>Logical Volume을 효율적이고 유연하게 관리하기 위한 커널의 한 부분이자 프로그램입니다.<br>\n기존에는 파일시스템이 블록 장치에 직접 접근해서 읽고/쓰기를 했다면<br>\nLVM을 사용하면 파일 시스템이 가상의 블록 장치에 읽고/쓰기를 하게 됩니다.  </p>\n<br/>\n<h3 id=\"lvm의-장점\" style=\"position:relative;\"><a href=\"#lvm%EC%9D%98-%EC%9E%A5%EC%A0%90\" aria-label=\"lvm의 장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LVM의 장점</h3>\n<ol>\n<li>유연한 용량  </li>\n<li>크기 조정 가능한 스토리지 풀(Pool)  </li>\n<li>온라인 데이터 재배치  </li>\n<li>편의에 따라 장치 이름 지정  </li>\n<li>디스크 스트라이핑  </li>\n<li>미러 볼륨  </li>\n<li>볼륨 스냅샷   </li>\n</ol>\n<br/>\n<ul>\n<li>\n<p>아래 이미지 처럼 LVM은 물리적 스토리지 이상의 추상적 레이어를 생성해서<br>\n논리적 스토리지(가상의 블록 장치)를 생성할 수 있게 해줍니다.  </p>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/2503D43D54B95EA712\"></p>\n</li>\n</ul>\n<hr>\n<h2 id=\"-lvm-로직\" style=\"position:relative;\"><a href=\"#-lvm-%EB%A1%9C%EC%A7%81\" aria-label=\" lvm 로직 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ LVM 로직</h2>\n<p>LVM은 아래 3개의 로직을 가지고 구성이 가능합니다.  </p>\n<h3 id=\"pvphysical-volume\" style=\"position:relative;\"><a href=\"#pvphysical-volume\" aria-label=\"pvphysical volume permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PV(Physical Volume)</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">LVM에서 블록 장치를 사용하려면 PV로 초기화를 해야한다<span class=\"token punctuation\">.</span> \n즉<span class=\"token punctuation\">,</span> 블록 장치 전체 또는 그 블록 장치를 이루고 있는 파티션들을 LVM에서 사용할 수있게 변환한것이다<span class=\"token punctuation\">.</span>\n예를 들어 <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sda1<span class=\"token punctuation\">,</span> <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sda2들을 LVM으로 쓰기 위해 \nPV라는 형식으로 변환한 것이다<span class=\"token punctuation\">.</span> \nPV는 일정한 크기의 <span class=\"token function\">PE</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Pysyical</span> Extent<span class=\"token punctuation\">)</span>들로 구성이 된다<span class=\"token punctuation\">.</span>\n\t  \n<span class=\"token operator\">*</span> 블록 장치 <span class=\"token punctuation\">:</span> 블록 단위로 접근하는 스토리지<span class=\"token punctuation\">.</span> 예를 들어 대용량 하드 디스크_  </code></pre></div>\n<br/>\n<h3 id=\"pephysical-extent\" style=\"position:relative;\"><a href=\"#pephysical-extent\" aria-label=\"pephysical extent permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PE(Physical Extent)</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">PV를 구성하는 일정한 크기의 블록으로 LVM2에서의 기본크기는 4MB이다<span class=\"token punctuation\">.</span> \n<span class=\"token function\">LV</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Logical</span> Volume<span class=\"token punctuation\">)</span>의 <span class=\"token function\">LE</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Logical</span> Extent<span class=\"token punctuation\">)</span>들과 <span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">1</span>로 맵핑된다<span class=\"token punctuation\">.</span>\n그렇기에 항상 PE와 LE의 크기는 동일하다<span class=\"token punctuation\">.</span> \n즉<span class=\"token punctuation\">,</span> 아래 그림과 같은 모습이다<span class=\"token punctuation\">.</span> \n블록 장치<span class=\"token punctuation\">(</span>물리적 디스크<span class=\"token punctuation\">)</span>의 파티션들을 PV들로 초기화 시킨 모습이다<span class=\"token punctuation\">.</span> \n각각의 PV들은 동일한 크기의 PE들로 구성이된다<span class=\"token punctuation\">.</span></code></pre></div>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/241D5F4154B78E5E21\"></p>\n<br/>\n<h3 id=\"vgvolume-group\" style=\"position:relative;\"><a href=\"#vgvolume-group\" aria-label=\"vgvolume group permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VG(Volume Group)</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">PV들의 집합으로 LV를 할당할 수 있는 공간이다<span class=\"token punctuation\">.</span> \n즉<span class=\"token punctuation\">,</span> PV들로 VG를 생성하는 과정은 LV로 할당할 수 있는 디스크 공간의 풀<span class=\"token punctuation\">(</span>Pool<span class=\"token punctuation\">)</span>을 생성하는 것으로 보면 된다<span class=\"token punctuation\">.</span> \n사용자는 VG 안에서 원하는 대로 공간을 쪼개서 LV로 만들 수 있다<span class=\"token punctuation\">.</span> \n아래 그림과 같이 위에서 만든 PV들을 하나의 VG1로 묶었다<span class=\"token punctuation\">.</span></code></pre></div>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/2710804154B78E5E30\"></p>\n<br/>\n<h3 id=\"lvlogical-volume\" style=\"position:relative;\"><a href=\"#lvlogical-volume\" aria-label=\"lvlogical volume permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LV(Logical Volume)</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">사용자가 최종적으로 다루게 되는 논리적인 스토리지이다<span class=\"token punctuation\">.</span> \n위에서도 언급했지만<span class=\"token punctuation\">,</span> LV를 구성하는 LE들이 PV의 PE들과 맵핑 하면서 존재하게 된다<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<h3 id=\"lelogical-extent\" style=\"position:relative;\"><a href=\"#lelogical-extent\" aria-label=\"lelogical extent permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LE(Logical Extent)</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">LV를 구성하는 일정한 크기의 블록으로 LVM2에서 기본크기는 4MB이다<span class=\"token punctuation\">.</span>\n위에서 언급했지만<span class=\"token punctuation\">,</span> 항상 PE와 LE의 크기는 동일하다<span class=\"token punctuation\">.</span>\n위의 그림은 위에서 만든 VG1에서 사용자가 원하는 크기대로 분할해서 LV1과 LV2를 만든 모습이다<span class=\"token punctuation\">.</span>\n꼭 VG의 모든 공간을 다 써야 되는건 아니다<span class=\"token punctuation\">.</span> \n각각의 LV들은 동일한 크기의 LE로 구성이 되며 그림에는 표시 안됐지만 PE들과 맵핑된다<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<hr>\n<h2 id=\"-lvm의-기본-개념\" style=\"position:relative;\"><a href=\"#-lvm%EC%9D%98-%EA%B8%B0%EB%B3%B8-%EA%B0%9C%EB%85%90\" aria-label=\" lvm의 기본 개념 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👍 LVM의 기본 개념</h2>\n<br/>\n<ol>\n<li>PV로 초기화된 장치들을 VG(Volume Group)으로 통합된다.  </li>\n<li>PV들을 VG로 통합하는 과정은 LV를 생성할 수 있는 디스크 공간의 풀(Pool)을 생성 하는 것과 같다.    </li>\n<li>\n<p>VG는 일정한 크기의 PE(Physical Extent)로 분할된다.</p>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/2710804154B78E5E30\"></p>\n</li>\n</ol>\n<br/>\n<ul>\n<li>\n<ol start=\"4\">\n<li>VG는 LE들을 PE로 맵핑함을 통해 LV를 생성한다.</li>\n</ol>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/22308C4154B78E5E0C\"></p>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<ol start=\"5\">\n<li>생성된 LV는 파일 시스템 및 어플리케이션 (예를 들어 Database)로 사용된다.<br>\n즉, 사용자가 최종적으로 다루게 되는 것은 LV라는 뜻이다.  </li>\n</ol>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-lvm-생성-방법\" style=\"position:relative;\"><a href=\"#-lvm-%EC%83%9D%EC%84%B1-%EB%B0%A9%EB%B2%95\" aria-label=\" lvm 생성 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👏 LVM 생성 방법</h2>\n<p>생성 순서</p>\n<ul>\n<li>Step 1. fdisk를 이용해 저장장치에 파티션을 설정한다(파티션 타입을 LVM 타입으로)  </li>\n<li>Step 2. pvcreate을 이용해 1.에서 설정한 파티션으로 PV를 생성한다.  </li>\n<li>Step 3. vgcreate으로 2.에서 만든 PV들을 묶어 VG를 생성한다.  </li>\n<li>Step 4. vgdisplay로 VG가 제대로 생성됬는지 확인한다.  </li>\n<li>Step 5. lvcreate로 LV를 사용자가 원하는대로 생성한다.  </li>\n<li>Step 6. mkfs를 이용해 5.에서 생성한 LV에 파일시스템 포멧을 한다.  </li>\n<li>Step 7. 부팅시 자동으로 저장장치를 읽도록 /etc/fstab에 기술</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"1--파티션-생성하기\" style=\"position:relative;\"><a href=\"#1--%ED%8C%8C%ED%8B%B0%EC%85%98-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"1  파티션 생성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.  파티션 생성하기</h3>\n<p>(disk 1개당 1개 파티션, systemtype(ID)이 linux lvm(8e) 변경 (fdisk/parted)</p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"2-pvcreate-생성-pvcreate-파티션번호입력\" style=\"position:relative;\"><a href=\"#2-pvcreate-%EC%83%9D%EC%84%B1-pvcreate-%ED%8C%8C%ED%8B%B0%EC%85%98%EB%B2%88%ED%98%B8%EC%9E%85%EB%A0%A5\" aria-label=\"2 pvcreate 생성 pvcreate 파티션번호입력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. pvcreate 생성 (pvcreate 파티션번호입력)</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># pvcreate /dev/sdb1 /dev/sdc1 /dev/sdd1</span>\n\n<span class=\"token preprocessor property\"># 확인 pvs 또는 pvdisplay</span>\n\n<span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo lvmdiskscan\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdb1 <span class=\"token punctuation\">[</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8.00</span> GiB<span class=\"token punctuation\">]</span> LVM physical volume\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc1 <span class=\"token punctuation\">[</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8.00</span> GiB<span class=\"token punctuation\">]</span> LVM physical volume\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdd1 <span class=\"token punctuation\">[</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8.00</span> GiB<span class=\"token punctuation\">]</span> LVM physical volume\n\n<span class=\"token number\">0</span> disks\n<span class=\"token number\">1</span> partition\n<span class=\"token number\">0</span> LVM physical volume whole disks\n<span class=\"token number\">3</span> LVM physical volumes</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"3-vg볼륨그룹-생성\" style=\"position:relative;\"><a href=\"#3-vg%EB%B3%BC%EB%A5%A8%EA%B7%B8%EB%A3%B9-%EC%83%9D%EC%84%B1\" aria-label=\"3 vg볼륨그룹 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. vg(볼륨그룹) 생성</h3>\n<p>[형식 : vgcreate 볼륨그룹이름 pv나열]</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># vgcreate lee /dev/sdb1 /dev/sdc1 /dev/sdd1</span>\n\n<span class=\"token preprocessor property\"># 확인 vgs 또는 vgdisplay</span>\n  \n<span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  vgs\nVG     #PV #LV #SN Attr   VSize   VFree \ncentos   <span class=\"token number\">1</span>   <span class=\"token number\">2</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">19</span><span class=\"token punctuation\">.</span>00g     <span class=\"token number\">0</span> \nlee      <span class=\"token number\">3</span>   <span class=\"token number\">0</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">60</span><span class=\"token punctuation\">.</span>00g     0g</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"4--lv로지컬-볼륨-생성\" style=\"position:relative;\"><a href=\"#4--lv%EB%A1%9C%EC%A7%80%EC%BB%AC-%EB%B3%BC%EB%A5%A8-%EC%83%9D%EC%84%B1\" aria-label=\"4  lv로지컬 볼륨 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.  lv(로지컬 볼륨) 생성</h3>\n<p>[형식 : lvcreate -n 논리볼륨이름 -l PE개수 볼륨그룹명]</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># lvcreate -n 논리볼륨이름 또는 -L 디스크사이즈 볼륨그룹명</span>\n<span class=\"token preprocessor property\"># lvcreate -n lee.lv -L 10G lee</span>\n\n<span class=\"token preprocessor property\"># 확인 lvs 또는 lvdisplay</span>\n\n<span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo lvs\n\nLV VG Attr LSize Pool Origin Data<span class=\"token operator\">%</span> Meta<span class=\"token operator\">%</span> Move Log Cpy<span class=\"token operator\">%</span>Sync Convert\nroot centos <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span> <span class=\"token number\">26</span><span class=\"token punctuation\">.</span>99g\nswap centos <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>00g\nlee_lv lee <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span> <span class=\"token number\">1000.00m</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"5-볼륨그룹을-생성하면-dev-내에-동일한-디렉토리-생성-lvm-링크-생성됨\" style=\"position:relative;\"><a href=\"#5-%EB%B3%BC%EB%A5%A8%EA%B7%B8%EB%A3%B9%EC%9D%84-%EC%83%9D%EC%84%B1%ED%95%98%EB%A9%B4-dev-%EB%82%B4%EC%97%90-%EB%8F%99%EC%9D%BC%ED%95%9C-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%EC%83%9D%EC%84%B1-lvm-%EB%A7%81%ED%81%AC-%EC%83%9D%EC%84%B1%EB%90%A8\" aria-label=\"5 볼륨그룹을 생성하면 dev 내에 동일한 디렉토리 생성 lvm 링크 생성됨 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 볼륨그룹을 생성하면 /dev 내에 동일한 디렉토리 생성, lvm 링크 생성됨.</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>lvm 경로 <span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>볼륨그룹명<span class=\"token operator\">/</span>논리볼륨명<span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ ls <span class=\"token operator\">-</span>ld <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>lee\n\tdrwxr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span> <span class=\"token number\">2</span> root root <span class=\"token number\">80</span> Jul <span class=\"token number\">3</span> <span class=\"token number\">14</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span> <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>lee\n\n<span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ ls <span class=\"token operator\">-</span>l <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>vg_test<span class=\"token operator\">/</span>\ntotal <span class=\"token number\">0</span>\nlrwxrwxrwx<span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root root <span class=\"token number\">7</span> Jul <span class=\"token number\">3</span> <span class=\"token number\">14</span><span class=\"token punctuation\">:</span><span class=\"token number\">33</span> lee<span class=\"token punctuation\">.</span>lv <span class=\"token operator\">-></span> <span class=\"token range operator\">..</span><span class=\"token operator\">/</span>dm<span class=\"token operator\">-</span><span class=\"token number\">1</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"6-파일-시스템-생성-후ext4-수동마운트\" style=\"position:relative;\"><a href=\"#6-%ED%8C%8C%EC%9D%BC-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%83%9D%EC%84%B1-%ED%9B%84ext4-%EC%88%98%EB%8F%99%EB%A7%88%EC%9A%B4%ED%8A%B8\" aria-label=\"6 파일 시스템 생성 후ext4 수동마운트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 파일 시스템 생성 후(ext4) 수동마운트</h3>\n<p>(마운트포인트: /mnt/lvm1)</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># mkfs.ext4 /dev/lee/lee_lv</span>\n<span class=\"token preprocessor property\"># blkid 또는 lsblk -f 로 파일시스템 ext4 확인</span>\n\n<span class=\"token preprocessor property\"># mkdir /mnt/lvm1</span>\n<span class=\"token preprocessor property\"># mount -t ext4 /dev/lee/lee_lv /mnt/lvm1</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"7-마운트확인\" style=\"position:relative;\"><a href=\"#7-%EB%A7%88%EC%9A%B4%ED%8A%B8%ED%99%95%EC%9D%B8\" aria-label=\"7 마운트확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. 마운트확인</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># df -h</span>\n<span class=\"token preprocessor property\"># mount | grep </span><span class=\"token string\">\"lvm1\"</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<br/>\n<h2 id=\"🤣-vg-축소하기--소속된-pv을-제거\" style=\"position:relative;\"><a href=\"#%F0%9F%A4%A3-vg-%EC%B6%95%EC%86%8C%ED%95%98%EA%B8%B0--%EC%86%8C%EC%86%8D%EB%90%9C-pv%EC%9D%84-%EC%A0%9C%EA%B1%B0\" aria-label=\"🤣 vg 축소하기  소속된 pv을 제거 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤣 VG 축소하기 : 소속된 pv을 제거</h2>\n<ul>\n<li>\n<h3 id=\"1--vg-사이즈-축소\" style=\"position:relative;\"><a href=\"#1--vg-%EC%82%AC%EC%9D%B4%EC%A6%88-%EC%B6%95%EC%86%8C\" aria-label=\"1  vg 사이즈 축소 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.  vg 사이즈 축소</h3>\n<p>[형식 : vgreduce vg이름 제거 pv지정]</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo vgreduce vg_test <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdg1\nRemoved <span class=\"token string\">\"/dev/sdg1\"</span> <span class=\"token keyword\">from</span> volume <span class=\"token keyword\">group</span> <span class=\"token string\">\"vg_test\"</span>\n<span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo vgs\nVG #PV #LV #SN Attr VSize VFree\ncentos <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">29</span><span class=\"token punctuation\">.</span>00g <span class=\"token number\">4.00m</span>\nvg_test <span class=\"token number\">5</span> <span class=\"token number\">2</span> <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token number\">39</span><span class=\"token punctuation\">.</span>98g <span class=\"token number\">38</span><span class=\"token punctuation\">.</span>22g\n\n<span class=\"token preprocessor property\">#\tpvs 명령어로 확인</span>\n<span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo pvs\nPV VG Fmt Attr PSize PFree\n\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdb1 lee lvm2 a<span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g <span class=\"token operator\">&lt;</span><span class=\"token number\">6</span><span class=\"token punctuation\">.</span>24g\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc1 lee lvm2 a<span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdd1 lvm2 <span class=\"token operator\">--</span><span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g     <span class=\"token operator\">&lt;</span><span class=\"token operator\">-</span> VG에 소속되어 있지 않음<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n</li>\n<li>\n<h3 id=\"2--pv-제거\" style=\"position:relative;\"><a href=\"#2--pv-%EC%A0%9C%EA%B1%B0\" aria-label=\"2  pv 제거 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.  pv 제거</h3>\n<p>[형식 : remove pv명]</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># 제거 전 디스크 사용 여부 확인</span>\n<span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo lvmdiskscan\n\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdb1 <span class=\"token punctuation\">[</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8.00</span> GiB<span class=\"token punctuation\">]</span> LVM physical volume\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc1 <span class=\"token punctuation\">[</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8.00</span> GiB<span class=\"token punctuation\">]</span> LVM physical volume\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdd1 <span class=\"token punctuation\">[</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8.00</span> GiB<span class=\"token punctuation\">]</span> LVM physical volume  </code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<br/>\n<h2 id=\"-vg-확장하기\" style=\"position:relative;\"><a href=\"#-vg-%ED%99%95%EC%9E%A5%ED%95%98%EA%B8%B0\" aria-label=\" vg 확장하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>😢 VG 확장하기</h2>\n<p>[방식 : 1. 디스크 추가장착, 2. 파티셔닝, 3.pv생성, 4.vg확장]</p>\n<ul>\n<li>\n<h3 id=\"1-디스크-추가-장착-확인\" style=\"position:relative;\"><a href=\"#1-%EB%94%94%EC%8A%A4%ED%81%AC-%EC%B6%94%EA%B0%80-%EC%9E%A5%EC%B0%A9-%ED%99%95%EC%9D%B8\" aria-label=\"1 디스크 추가 장착 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 디스크 추가 장착 확인</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo lvmdiskscan\n   \n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdb1 <span class=\"token punctuation\">[</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8.00</span> GiB<span class=\"token punctuation\">]</span> LVM physical volume\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc1 <span class=\"token punctuation\">[</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8.00</span> GiB<span class=\"token punctuation\">]</span> LVM physical volume\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdd1 <span class=\"token punctuation\">[</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8.00</span> GiB<span class=\"token punctuation\">]</span> LVM physical volume\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sde1 <span class=\"token punctuation\">[</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8.00</span> GiB<span class=\"token punctuation\">]</span>\n   \n<span class=\"token number\">0</span> disks\n<span class=\"token number\">2</span> partitions\n<span class=\"token number\">0</span> LVM physical volume whole disks\n<span class=\"token number\">3</span> LVM physical volumes</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"2-pv-추가-생성\" style=\"position:relative;\"><a href=\"#2-pv-%EC%B6%94%EA%B0%80-%EC%83%9D%EC%84%B1\" aria-label=\"2 pv 추가 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. PV 추가 생성</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo pvcreate <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sde1\nPhysical volume <span class=\"token string\">\"/dev/sdg1\"</span> successfully created<span class=\"token punctuation\">.</span>\n\n\n<span class=\"token preprocessor property\"># 추가 생성 확인</span>\n<span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo pvs\nPV VG Fmt Attr PSize PFree\n\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdb1 vg_test lvm2 a<span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g <span class=\"token operator\">&lt;</span><span class=\"token number\">6</span><span class=\"token punctuation\">.</span>24g\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc1 vg_test lvm2 a<span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdd1 vg_test lvm2 a<span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g\n<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sde1 lvm2 <span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g</code></pre></div>\n</li>\n</ul>\n<br/> \n<ul>\n<li>\n<h3 id=\"3-vg-에-pv추가\" style=\"position:relative;\"><a href=\"#3-vg-%EC%97%90-pv%EC%B6%94%EA%B0%80\" aria-label=\"3 vg 에 pv추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. VG 에 PV추가</h3>\n<p>[형식 : vgextend vg그룹 추가 할 PV]</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo vgextend lee <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdg1\n Volume <span class=\"token keyword\">group</span> <span class=\"token string\">\"vg_test\"</span> successfully extended\n\n\n <span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo pvs\n\n PV VG Fmt Attr PSize PFree\n <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdb1 lee2 a<span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g\n <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc1 lee2 a<span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g\n <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdd1 lee2 a<span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g\n <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sde1 lee2 a<span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g <span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">.</span>00g\n\n <span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo vgs\n   \n VG #PV #LV #SN Attr VSize VFree\n\n centos <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">29</span><span class=\"token punctuation\">.</span>00g <span class=\"token number\">4.00m</span>\n lee <span class=\"token number\">4</span> <span class=\"token number\">2</span> <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">47</span><span class=\"token punctuation\">.</span>98g <span class=\"token operator\">&lt;</span><span class=\"token number\">46</span><span class=\"token punctuation\">.</span>22g</code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<ul>\n<li>\n<h3 id=\"xfs-leelv-1g-확장하기\" style=\"position:relative;\"><a href=\"#xfs-leelv-1g-%ED%99%95%EC%9E%A5%ED%95%98%EA%B8%B0\" aria-label=\"xfs leelv 1g 확장하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(xfs) lee.lv 1G 확장하기</h3>\n<p>[형식 : lvextend -L 1G lv 절대경로]</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo lvextend <span class=\"token operator\">-</span>L <span class=\"token operator\">+</span>1G <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>leet<span class=\"token operator\">/</span>lee_lv\nSize of logical volume lee<span class=\"token operator\">/</span>lee<span class=\"token punctuation\">.</span>lv changed <span class=\"token keyword\">from</span> <span class=\"token number\">1000.00</span> MiB <span class=\"token punctuation\">(</span><span class=\"token number\">250</span> extents<span class=\"token punctuation\">)</span> to <span class=\"token operator\">&lt;</span><span class=\"token number\">1.98</span> GiB <span class=\"token punctuation\">(</span><span class=\"token number\">506</span> extents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n\nLogical volume lee<span class=\"token operator\">/</span>lee_lv successfully resized<span class=\"token punctuation\">.</span>\n\n<span class=\"token preprocessor property\">#용량 확장 확인</span>\n<span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo lvs\n\nLV VG Attr LSize Pool Origin Data<span class=\"token operator\">%</span> Meta<span class=\"token operator\">%</span> Move Log Cpy<span class=\"token operator\">%</span>Sync Convert\n\nlee<span class=\"token punctuation\">.</span>lv lee <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>98g</code></pre></div>\n</li>\n</ul>\n<br/>\n  \n<ul>\n<li>\n<p>파일시스템은 늘어나지 않음. 파일시스템은 별도 처리 필요</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>admin@localhost <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ sudo xfs_growfs <span class=\"token operator\">/</span>mnt<span class=\"token operator\">/</span>lvm2\n\nmeta<span class=\"token operator\">-</span>data<span class=\"token operator\">=</span><span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>mapper<span class=\"token operator\">/</span>lee<span class=\"token operator\">-</span><span class=\"token class-name\">lee<span class=\"token punctuation\">.</span>lv</span> isize<span class=\"token operator\">=</span><span class=\"token number\">512</span> agcount<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> agsize<span class=\"token operator\">=</span><span class=\"token number\">64000</span> blks<span class=\"token operator\">=</span> sectsz<span class=\"token operator\">=</span><span class=\"token number\">512</span> attr<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> \nprojid32bit<span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token operator\">=</span> crc<span class=\"token operator\">=</span><span class=\"token number\">1</span> finobt<span class=\"token operator\">=</span><span class=\"token number\">0</span> spinodes<span class=\"token operator\">=</span><span class=\"token number\">0</span> data <span class=\"token operator\">=</span> bsize<span class=\"token operator\">=</span><span class=\"token number\">4096</span> blocks<span class=\"token operator\">=</span><span class=\"token number\">256000</span><span class=\"token punctuation\">,</span> imaxpct<span class=\"token operator\">=</span><span class=\"token number\">25</span><span class=\"token operator\">=</span> sunit<span class=\"token operator\">=</span><span class=\"token number\">0</span> \nswidth<span class=\"token operator\">=</span><span class=\"token number\">0</span> <span class=\"token class-name\">blks</span> naming <span class=\"token operator\">=</span>version <span class=\"token number\">2</span> bsize<span class=\"token operator\">=</span><span class=\"token number\">4096</span> ascii<span class=\"token operator\">-</span>ci<span class=\"token operator\">=</span><span class=\"token number\">0</span> ftype<span class=\"token operator\">=</span><span class=\"token number\">1</span> log <span class=\"token operator\">=</span><span class=\"token keyword\">internal</span> bsize<span class=\"token operator\">=</span><span class=\"token number\">4096</span> blocks<span class=\"token operator\">=</span><span class=\"token number\">855</span><span class=\"token punctuation\">,</span>\nversion<span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token operator\">=</span> sectsz<span class=\"token operator\">=</span><span class=\"token number\">512</span> sunit<span class=\"token operator\">=</span><span class=\"token number\">0</span> blks<span class=\"token punctuation\">,</span> lazy<span class=\"token operator\">-</span>count<span class=\"token operator\">=</span><span class=\"token number\">1</span> realtime <span class=\"token operator\">=</span><span class=\"token class-name\">none</span> extsz<span class=\"token operator\">=</span><span class=\"token number\">4096</span> blocks<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> rtextents<span class=\"token operator\">=</span><span class=\"token number\">0</span>\n\ndata blocks changed <span class=\"token keyword\">from</span> <span class=\"token number\">256000</span> to <span class=\"token number\">518144</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>(ext4) lee.lv 1G 확장하기 </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># LV 확장의 경우 위의 작업과 동일함</span>\nresize2fs <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>lee<span class=\"token operator\">/</span>lee<span class=\"token punctuation\">.</span>vg\n\ndf <span class=\"token operator\">-</span>h 파일시스템 확장 확인</code></pre></div>\n</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-lvmlogical-volume-manager-%EC%9D%B4%EB%9E%80\">✔ LVM(Logical Volume Manager) 이란?</a></p>\n<ul>\n<li><a href=\"#lvm%EC%9D%98-%EC%9E%A5%EC%A0%90\">LVM의 장점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-lvm-%EB%A1%9C%EC%A7%81\">✌ LVM 로직</a></p>\n<ul>\n<li><a href=\"#pvphysical-volume\">PV(Physical Volume)</a></li>\n<li><a href=\"#pephysical-extent\">PE(Physical Extent)</a></li>\n<li><a href=\"#vgvolume-group\">VG(Volume Group)</a></li>\n<li><a href=\"#lvlogical-volume\">LV(Logical Volume)</a></li>\n<li><a href=\"#lelogical-extent\">LE(Logical Extent)</a></li>\n</ul>\n</li>\n<li><a href=\"#-lvm%EC%9D%98-%EA%B8%B0%EB%B3%B8-%EA%B0%9C%EB%85%90\">👍 LVM의 기본 개념</a></li>\n<li><a href=\"#-lvm-%EC%83%9D%EC%84%B1-%EB%B0%A9%EB%B2%95\">👏 LVM 생성 방법</a></li>\n<li><a href=\"#%F0%9F%A4%A3-vg-%EC%B6%95%EC%86%8C%ED%95%98%EA%B8%B0--%EC%86%8C%EC%86%8D%EB%90%9C-pv%EC%9D%84-%EC%A0%9C%EA%B1%B0\">🤣 VG 축소하기 : 소속된 pv을 제거</a></li>\n<li><a href=\"#-vg-%ED%99%95%EC%9E%A5%ED%95%98%EA%B8%B0\">😢 VG 확장하기</a></li>\n</ul>\n</div>","excerpt":"머리말   안녕하세요 NASA 입니다. 이번 포스트는 LVM에서 다뤄보겠습니다. ✔ LVM(Logical Volume Manager) 이란? Logical Volume을 효율적이고 유연하게 관리하기 위한 커널의 한 부분이자 프로그램입니다. 기존에는 파일시스템이 블록 장치에 직접 접근해서 읽고/쓰기를 했다면 LVM을 사용하면 파일 시스템이 가상의 블록 장치에 읽고/쓰기를 하게 됩니다.   LVM의 장점 유연한 용량   크기 조정 가능한 스토리지 풀(Pool)   온라인 데이터 재배치   편의에 따라 장치 이름 지정   디스크 스트라이핑   미러 볼륨   볼륨 스냅샷    아래 이미지 처럼 LVM은 물리적 스토리지 이상의…","frontmatter":{"date":"June 23, 2021","title":"[LINUX] - LVM","categories":"LINUX","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/linux-lvm/"}},"next":{"id":"c2037712-9aa6-51d1-bb6e-68c362426cd0","html":"<h2 id=\"-raid란\" style=\"position:relative;\"><a href=\"#-raid%EB%9E%80\" aria-label=\" raid란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ RAID란?</h2>\n<p> RAID는 Redundant Array of Inexpensive Disks의 약자입니다.<br>\n여러 개의 디스크를 배열해 속도의 증대, 안정성의 증대, 효율성, 가용성의 증대를  하는데 쓰이는 <code class=\"language-text\">기술</code><br>\n즉 쉽게 말해 <code class=\"language-text\">여러 개의 하드디스크를 하나의 하드디스크처럼 사용하는 방식</code>입니다.  </p>\n<br/>\n<ul>\n<li>RAID의 사용 목적<br>\n서버 운영에 있어 가장 크리티컬 이슈는 하드디스크의 장애로 인한 DATA 손실일 것 입니다.<br>\n하드디스크는 사실상 소모품으로 분류되며 I/O가 많은 서버에는 고장이 잦은 것은 당연하죠.<br>\n하지만 서버에 저장되는 데이터의 경우 손실 또는 유출 되었을 때 치명적인 것이 대부분일 것으로<br>\n대표적으로 은행과 같은 금융, 군사적 목적의 데이터가 있을 것입니다.<br>\n이로 인해 백업이 절대적으로 필요한 경우가 있고 또한 여분의 디스크가 있어 용량을 증설하려고 할 때<br>\n데이터 손실 없이 증설이 필요한 경우가 있습니다. 그래서 RAID 구성을 통해 하드디스크의 가용성을 높이거나 서버 데이터의 안정성을 확보해야 합니다.</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>RAID 의 장점   </p>\n<ul>\n<li>운용 가용성, 데이터 안정성 증대</li>\n<li>디스크 용량 증설의 용이성</li>\n<li>디스크 I/O 성능 향상</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"-raid의-종류와-특징\" style=\"position:relative;\"><a href=\"#-raid%EC%9D%98-%EC%A2%85%EB%A5%98%EC%99%80-%ED%8A%B9%EC%A7%95\" aria-label=\" raid의 종류와 특징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ RAID의 종류와 특징</h2>\n<h3 id=\"1-raid-0\" style=\"position:relative;\"><a href=\"#1-raid-0\" aria-label=\"1 raid 0 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. RAID 0</h3>\n<p>RAID 0 에는 <code class=\"language-text\">Concatenate</code> 방식과 <code class=\"language-text\">Stripe</code> 방식 두가지 방식이 있습니다.  </p>\n<p>최소 필요한 하드디스크 개수 : 2개 이상 </p>\n<ul>\n<li>\n<p>방식.1) Concatenate 방식 (두개 이상의 디스크에 데이터를 순차적으로 쓰는 방법)</p>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/99AB91495A36096E02\"></p>\n<p>장점 : 디스크 기본 공간이 부족할 때 데이터는 보존하며<br>\n여분의 디스크를 볼륨에 포함하여 용량 증설이 가능하게 됩니다.</p>\n<p>단점 : RAID 0의 특성상 디스크 중 하나의 디스크라도 장애가 발생하면 복구가 어렵고<br>\n패리티(오류검출기능)를 지원하지 않습니다.</p>\n<p>용량 : 모든 디스크의 용량을 합친 용량 (300GB disk * 2ea = 600GB)</p>\n</li>\n</ul>\n <br/> \n<ul>\n<li>\n<p>방식.2) Stripe 방식 (흔히 RAID 0라고 하면 Stripe 방식을 말합니다)<br>\n두개 이상의 디스크에 데이터를 랜덤하게 쓰는 방법입니다.</p>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/995949475A3609B223\"></p>\n<p>장점 : 데이터를 사용할 때 I/O를 디스크 수만큼 분할하여 쓰기 때문에 I/O 속도가 향상되고<br>\nI/O Controller나 I/O board 등 I/O를 담당하는 장치가 별도로 장착된 경우 더 큰 I/O 속도 향상 효과를 볼 수 있습니다.</p>\n<p>단점 : Stripe를 구성할 시 기존 데이터는 모두 삭제 되어야 합니다. 그외의 단점은 위의 Concat 방식과 같습니다.</p>\n<p>용량 : 위의 Concat 방식과 같습니다.</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"2-raid-1mirror\" style=\"position:relative;\"><a href=\"#2-raid-1mirror\" aria-label=\"2 raid 1mirror permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. RAID 1(Mirror)</h3>\n<p>Mirror 볼륨 내의 패리티를 사용하지 않고<br>\n디스크에 같은 데이터를 중복 기록하여 데이터를 보존합니다.  </p>\n<p>최소 필요한 하드디스크 개수 : 2개 이상​</p>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/99557F3E5A360AAE2E\"></p>\n<p>장점 : 볼륨 내 디스크 중 하나의 디스크만 정상이어도<br>\n데이터는 보존되어 운영이 가능하기 때문에 가용성이 높고, 복원이 비교적 매우 간단합니다.</p>\n<p>단점 : 용량이 절반으로 줄고, 쓰기 속도가 조금 느려집니다.</p>\n<p>용량 : 모든 디스크의 절반의 용량 (300GB x 2ea = 300GB)</p>\n<hr>\n<h3 id=\"3-raid-5\" style=\"position:relative;\"><a href=\"#3-raid-5\" aria-label=\"3 raid 5 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. RAID 5</h3>\n<p>RAID 5는 RAID 3,4에서 별도의 패리티 정보 디스크를 사용함으로써 발생하는 문제점을 \t보완하는 방식으로<br>\n패리티 정보를 stripe로 구성된 디스크 내에서 처리하게 만들었습니다.<br>\n만약 1개의 하드가 고장나더라도 남은 하드들을 통해 데이터를 복구할 수 있다는 \t장점이 있습니다. </p>\n<p>최소 필요한 하드디스크 개수 : 3개 이상</p>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/9948F8355A360D9735\"></p>\n<p>용량 : 만약 하드디스크 1G x 3 총 3개의 하드디스크가 있으면 <code class=\"language-text\">Total 2G</code>를 사용할 수 있다.<br>\n<code class=\"language-text\">하드디스크 개수 N-1</code>만큼의 공간을 사용할 수 있다. - 1개의 패리티를 사용해서)</p>\n<p><code class=\"language-text\">RAID 5</code>는 대개 5개 이상의 하드디스크로 구성한다.<br>\n또한 하드디스크 1개가 고장나면 패리티를 이용하여 데이터를 복구할 수 있다.  (결함 허용을 제공한다.)</p>\n<p>하지만 하드디스크가 2개 이상 고장나면 데이터가 손상된다.</p>\n<hr>\n<h3 id=\"4-raid-6\" style=\"position:relative;\"><a href=\"#4-raid-6\" aria-label=\"4 raid 6 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. RAID 6</h3>\n<p>RAID 6은 RAID 5와 같은 개념이지만 다른 드라이브들 간에 분포되어 있는 2차 패리티 \t정보를 넣어<br>\n2개의 하드에 문제가 생겨도 복구할 수 있게 설계 되었습니다. RAID 5보다 더욱 데이터의 안전성을 고려하는 시스템에서 사용됩니다. </p>\n<p>최소 필요한 하드디스크 개수 : 4개 이상</p>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/9910E23B5A360DE80E\"></p>\n<p>용량 : 만약 하드디스크 1G x 4 총 4개의 하드디스크가 있으면  Total 2G를 사용할 수 있다.<br>\n(<code class=\"language-text\">하드디스크 개수 N-2</code>만큼의 공간을 사용할 수 있다. - <code class=\"language-text\">2개의 패리티</code>를 사용해서)<br>\n하드디스크 2개가 고장나도 패리티를 이용하여 데이터를 복구할 수 있다. (결함 허용을 제공한다.)</p>\n<hr>\n<h3 id=\"5-raid-10\" style=\"position:relative;\"><a href=\"#5-raid-10\" aria-label=\"5 raid 10 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. RAID 1+0</h3>\n<p>RAID1을 구성한 Disk가 양쪽에 1개씩 고장나도 데이터는 보존합니다. (RAID1)<br>\n구성한 RAID 1을 스트라이핑 방식으로 데이터를 사용(RAID0)하여 높은 성능을 \t제공합니다.  </p>\n<p>최소 4개의 Disk를 필요로 하며, 전체 용량의 50%만 사용이 가능합니다.</p>\n<br/>\n<p>RAID+Spare  </p>\n<ul>\n<li>디스크에 고장이 발생할 경우 데이터를 바로 동기화할 수 있는 “핫 스페어” 기능을 통해<br>\n볼륨의 하드 디스크에 고장이 발생하면 데이터가 예비 디스크와 동기화한다.  </li>\n<li>\n<p>예비 디스크가 있는 RAID 구성 대체 디스크 추가를 기다릴 필요가 없다</p>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/262AEE43590051A81C\"></p>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-raid-구축하기\" style=\"position:relative;\"><a href=\"#-raid-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\" aria-label=\" raid 구축하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👍 RAID 구축하기</h2>\n<ul>\n<li>\n<p>기본 설정</p>\n<ol>\n<li>하드디스크 2개를 추가 한다.  </li>\n<li>fdisk or parted 명령어로 파티션을 생성한다.</li>\n<li>LV,VG 구성</li>\n</ol>\n</li>\n</ul>\n<br/>\n<h3 id=\"1-raid-0-구축하기\" style=\"position:relative;\"><a href=\"#1-raid-0-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\" aria-label=\"1 raid 0 구축하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>​1. RAID 0 구축하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">#wonseok 이라는 VG를 사용해 설정</span>\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  vgs\n  VG      #PV #LV #SN Attr   VSize   VFree \n  centos    <span class=\"token number\">1</span>   <span class=\"token number\">2</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">19</span><span class=\"token punctuation\">.</span>00g     <span class=\"token number\">0</span> \n  lee       <span class=\"token number\">6</span>   <span class=\"token number\">1</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">47</span><span class=\"token punctuation\">.</span>98g <span class=\"token operator\">&lt;</span><span class=\"token number\">7</span><span class=\"token punctuation\">.</span>98g\n  wonseok   <span class=\"token number\">4</span>   <span class=\"token number\">0</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span>  <span class=\"token number\">39</span><span class=\"token punctuation\">.</span>98g <span class=\"token number\">39</span><span class=\"token punctuation\">.</span>98g</code></pre></div>\n<br/>\n<p>명령어 : lvcreate -n won_stripe -L 6G -i 2 wonseok</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>옵션<span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span>i <span class=\"token punctuation\">:</span> 스트라이프 디스크 갯수\n \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> home<span class=\"token punctuation\">]</span>$  lvcreate <span class=\"token operator\">-</span>n won_stripe <span class=\"token operator\">-</span>L 6G <span class=\"token operator\">-</span>i <span class=\"token number\">2</span> wonseok\n  Using <span class=\"token keyword\">default</span> stripesize <span class=\"token number\">64.00</span> KiB<span class=\"token punctuation\">.</span>\n  Logical volume <span class=\"token string\">\"won_stripe\"</span> created<span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> home<span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> home<span class=\"token punctuation\">]</span>$  lvs\n  LV         VG      Attr       LSize   Pool Origin Data<span class=\"token operator\">%</span>  Meta<span class=\"token operator\">%</span>  Move Log Cpy<span class=\"token operator\">%</span>Sync Convert\n  root       centos  <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">17</span><span class=\"token punctuation\">.</span>00g                                                    \n  swap       centos  <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span>   <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>00g                                                    \n  lee<span class=\"token punctuation\">.</span>lv     lee     <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span>  <span class=\"token number\">40</span><span class=\"token punctuation\">.</span>00g                                                    \n  won_stripe wonseok <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>a<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span>   <span class=\"token number\">6</span><span class=\"token punctuation\">.</span>00g \n  </code></pre></div>\n<br/>\n<p>RAID 0 설정 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  lvdisplay  <span class=\"token operator\">-</span>m <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>wonseok<span class=\"token operator\">/</span>won_stripe \n  <span class=\"token operator\">--</span><span class=\"token operator\">-</span> Logical volume <span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n  LV Path                <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>wonseok<span class=\"token operator\">/</span>won_stripe\n  LV Name                won_stripe\n  VG Name                wonseok\n  LV UUID                m59Vi4<span class=\"token operator\">-</span>AnPT<span class=\"token operator\">-</span>GAAV<span class=\"token operator\">-</span>18AN<span class=\"token operator\">-</span>BK9T<span class=\"token operator\">-</span>JlHH<span class=\"token operator\">-</span>1Xtz5u\n  LV Write Access        read<span class=\"token operator\">/</span>write\n  LV <span class=\"token class-name\">Creation</span> host<span class=\"token punctuation\">,</span> <span class=\"token class-name\">time</span> centos<span class=\"token punctuation\">,</span> <span class=\"token number\">2020</span><span class=\"token operator\">-</span><span class=\"token number\">07</span><span class=\"token operator\">-</span><span class=\"token number\">08</span> <span class=\"token number\">16</span><span class=\"token punctuation\">:</span><span class=\"token number\">39</span><span class=\"token punctuation\">:</span><span class=\"token number\">55</span> <span class=\"token operator\">+</span><span class=\"token number\">0900</span>\n  LV Status              available\n  <span class=\"token preprocessor property\"># open                 0</span>\n  LV Size                <span class=\"token number\">6.00</span> GiB\n  Current LE             <span class=\"token number\">1536</span>\n  Segments               <span class=\"token number\">1</span>\n  Allocation             inherit\n  Read ahead sectors     auto\n  <span class=\"token operator\">-</span> currently <span class=\"token keyword\">set</span> to     <span class=\"token number\">512</span>\n  Block device           <span class=\"token number\">253</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span>\n\n  <span class=\"token operator\">--</span><span class=\"token operator\">-</span> Segments <span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n  Logical extents <span class=\"token number\">0</span> to <span class=\"token number\">1535</span><span class=\"token punctuation\">:</span>\nType\t\tstriped\nStripes\t\t<span class=\"token number\">2</span>\nStripe size\t\t<span class=\"token number\">64.00</span> KiB\nStripe <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n  Physical volume\t<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdb1\n  Physical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">767</span>\nStripe <span class=\"token number\">1</span><span class=\"token punctuation\">:</span>\n  Physical volume\t<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc1\n  Physical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">767</span></code></pre></div>\n<hr>\n<br/>\n<h3 id=\"2-raid-1-구축하기\" style=\"position:relative;\"><a href=\"#2-raid-1-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\" aria-label=\"2 raid 1 구축하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. ​RAID 1 구축하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">#wonseok 이라는 VG를 사용해 설정</span>\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  vgs\n  VG      #PV #LV #SN Attr   VSize   VFree \n  centos    <span class=\"token number\">1</span>   <span class=\"token number\">2</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">19</span><span class=\"token punctuation\">.</span>00g     <span class=\"token number\">0</span> \n  lee       <span class=\"token number\">6</span>   <span class=\"token number\">1</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">47</span><span class=\"token punctuation\">.</span>98g <span class=\"token operator\">&lt;</span><span class=\"token number\">7</span><span class=\"token punctuation\">.</span>98g\n  wonseok   <span class=\"token number\">4</span>   <span class=\"token number\">0</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span>  <span class=\"token number\">39</span><span class=\"token punctuation\">.</span>98g <span class=\"token number\">39</span><span class=\"token punctuation\">.</span>98g</code></pre></div>\n<br/>\n<p>명령어 : lvcreate -n won_mirror -L 1G -m 2 wonseok</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> home<span class=\"token punctuation\">]</span>$  lvcreate <span class=\"token operator\">-</span>n won_mirror <span class=\"token operator\">-</span>L 1G <span class=\"token operator\">-</span>m <span class=\"token number\">2</span> wonseok\n  Logical volume <span class=\"token string\">\"won_mirror\"</span> created<span class=\"token punctuation\">.</span>\n  \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> home<span class=\"token punctuation\">]</span>$  lvs\n  LV         VG      Attr       LSize   Pool Origin Data<span class=\"token operator\">%</span>  Meta<span class=\"token operator\">%</span>  Move Log Cpy<span class=\"token operator\">%</span>Sync Convert\n  root       centos  <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">17</span><span class=\"token punctuation\">.</span>00g                                                    \n  swap       centos  <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span>   <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>00g                                                    \n  lee<span class=\"token punctuation\">.</span>lv     lee     <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span>  <span class=\"token number\">40</span><span class=\"token punctuation\">.</span>00g                                                    \n  won_mirror wonseok rwi<span class=\"token operator\">-</span>a<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span><span class=\"token operator\">-</span>   <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>00g                                    <span class=\"token number\">25.02</span></code></pre></div>\n<br/>\n<p>RAID 1 설정 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  lvdisplay <span class=\"token operator\">-</span>m <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>wonseok<span class=\"token operator\">/</span>won_mirror \n  <span class=\"token operator\">--</span><span class=\"token operator\">-</span> Logical volume <span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n  LV Path                <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>wonseok<span class=\"token operator\">/</span>won_mirror\n  LV Name                won_mirror\n  VG Name                wonseok\n  LV UUID                0OUcsy<span class=\"token operator\">-</span>FtvN<span class=\"token operator\">-</span>KP6R<span class=\"token operator\">-</span>ZqqM<span class=\"token operator\">-</span>Bl1d<span class=\"token operator\">-</span>yRFE<span class=\"token operator\">-</span>Nm16b4\n  LV Write Access        read<span class=\"token operator\">/</span>write\n  LV <span class=\"token class-name\">Creation</span> host<span class=\"token punctuation\">,</span> <span class=\"token class-name\">time</span> centos<span class=\"token punctuation\">,</span> <span class=\"token number\">2020</span><span class=\"token operator\">-</span><span class=\"token number\">07</span><span class=\"token operator\">-</span><span class=\"token number\">08</span> <span class=\"token number\">16</span><span class=\"token punctuation\">:</span><span class=\"token number\">38</span><span class=\"token punctuation\">:</span><span class=\"token number\">31</span> <span class=\"token operator\">+</span><span class=\"token number\">0900</span>\n  LV Status              available\n  <span class=\"token preprocessor property\"># open                 0</span>\n  LV Size                <span class=\"token number\">1.00</span> GiB\n  Current LE             <span class=\"token number\">256</span>\n  Mirrored volumes       <span class=\"token number\">3</span>\n  Segments               <span class=\"token number\">1</span>\n  Allocation             inherit\n  Read ahead sectors     auto\n  <span class=\"token operator\">-</span> currently <span class=\"token keyword\">set</span> to     <span class=\"token number\">8192</span>\n  Block device           <span class=\"token number\">253</span><span class=\"token punctuation\">:</span><span class=\"token number\">8</span>\n\n  <span class=\"token operator\">--</span><span class=\"token operator\">-</span> Segments <span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n  Logical extents <span class=\"token number\">0</span> to <span class=\"token number\">255</span><span class=\"token punctuation\">:</span>\nType\t\traid1\nMonitoring\t\tmonitored\nRaid Data LV <span class=\"token number\">0</span>\n  Logical volume\twon_mirror_rimage_0\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">255</span>\nRaid Data LV <span class=\"token number\">1</span>\n  Logical volume\twon_mirror_rimage_1\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">255</span>\nRaid Data LV <span class=\"token number\">2</span>\n  Logical volume\twon_mirror_rimage_2\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">255</span>\nRaid Metadata LV <span class=\"token number\">0</span>\twon_mirror_rmeta_0\nRaid Metadata LV <span class=\"token number\">1</span>\twon_mirror_rmeta_1\nRaid Metadata LV <span class=\"token number\">2</span>\twon_mirror_rmeta_2</code></pre></div>\n<hr>\n<br/>\n<h3 id=\"3-raid-5-구축하기\" style=\"position:relative;\"><a href=\"#3-raid-5-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\" aria-label=\"3 raid 5 구축하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. ​RAID 5 구축하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">#wonseok 이라는 VG를 사용해 설정</span>\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  vgs\n  VG      #PV #LV #SN Attr   VSize   VFree \n  centos    <span class=\"token number\">1</span>   <span class=\"token number\">2</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">19</span><span class=\"token punctuation\">.</span>00g     <span class=\"token number\">0</span> \n  lee       <span class=\"token number\">6</span>   <span class=\"token number\">1</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">47</span><span class=\"token punctuation\">.</span>98g <span class=\"token operator\">&lt;</span><span class=\"token number\">7</span><span class=\"token punctuation\">.</span>98g\n  wonseok   <span class=\"token number\">4</span>   <span class=\"token number\">0</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span>  <span class=\"token number\">39</span><span class=\"token punctuation\">.</span>98g <span class=\"token number\">39</span><span class=\"token punctuation\">.</span>98g</code></pre></div>\n<br/>\n<p>명령어 : lvcreate —type raid5 -n won_raid5 -L 1G -i 2 wonseok\n</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> home<span class=\"token punctuation\">]</span>$  lvcreate <span class=\"token operator\">--</span>type raid5 <span class=\"token operator\">-</span>n won_raid5 <span class=\"token operator\">-</span>L 1G <span class=\"token operator\">-</span>i <span class=\"token number\">2</span> wonseok\n  Using <span class=\"token keyword\">default</span> stripesize <span class=\"token number\">64.00</span> KiB<span class=\"token punctuation\">.</span>\n  Logical volume <span class=\"token string\">\"won_raid5\"</span> created<span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> home<span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  lvs\n  LV        VG      Attr       LSize   Pool Origin Data<span class=\"token operator\">%</span>  Meta<span class=\"token operator\">%</span>  Move Log Cpy<span class=\"token operator\">%</span>Sync Convert\n  root      centos  <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">17</span><span class=\"token punctuation\">.</span>00g                                                    \n  swap      centos  <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span>   <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>00g                                                    \n  won_raid5 wonseok rwi<span class=\"token operator\">-</span>a<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span><span class=\"token operator\">-</span>   <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>00g                                    <span class=\"token number\">37.50</span> \n  won_raid5 wonseok rwi<span class=\"token operator\">-</span>a<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span><span class=\"token operator\">-</span>   <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>00g                                    <span class=\"token number\">25.00</span> </code></pre></div>\n<br/>\n<p>RAID 5 설정 확인\n</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  lvdisplay <span class=\"token operator\">-</span>m <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>wonseok<span class=\"token operator\">/</span>won_raid5 \n  <span class=\"token operator\">--</span><span class=\"token operator\">-</span> Logical volume <span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n  LV Path                <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>wonseok<span class=\"token operator\">/</span>won_raid5\n  LV Name                won_raid5\n  VG Name                wonseok\n  LV UUID                VUqUEV<span class=\"token operator\">-</span>vtix<span class=\"token operator\">-</span>3Nze<span class=\"token operator\">-</span>GcDs<span class=\"token operator\">-</span>TfXd<span class=\"token operator\">-</span>SnoW<span class=\"token operator\">-</span>cuu3cH\n  LV Write Access        read<span class=\"token operator\">/</span>write\n  LV <span class=\"token class-name\">Creation</span> host<span class=\"token punctuation\">,</span> <span class=\"token class-name\">time</span> centos<span class=\"token punctuation\">,</span> <span class=\"token number\">2020</span><span class=\"token operator\">-</span><span class=\"token number\">07</span><span class=\"token operator\">-</span><span class=\"token number\">08</span> <span class=\"token number\">16</span><span class=\"token punctuation\">:</span><span class=\"token number\">36</span><span class=\"token punctuation\">:</span><span class=\"token number\">46</span> <span class=\"token operator\">+</span><span class=\"token number\">0900</span>\n  LV Status              available\n  <span class=\"token preprocessor property\"># open                 0</span>\n  LV Size                <span class=\"token number\">1.00</span> GiB\n  Current LE             <span class=\"token number\">256</span>\n  Segments               <span class=\"token number\">1</span>\n  Allocation             inherit\n  Read ahead sectors     auto\n  <span class=\"token operator\">-</span> currently <span class=\"token keyword\">set</span> to     <span class=\"token number\">768</span>\n  Block device           <span class=\"token number\">253</span><span class=\"token punctuation\">:</span><span class=\"token number\">8</span>\n\n  <span class=\"token operator\">--</span><span class=\"token operator\">-</span> Segments <span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n  Logical extents <span class=\"token number\">0</span> to <span class=\"token number\">255</span><span class=\"token punctuation\">:</span>\nType\t\traid5\nMonitoring\t\tmonitored\nRaid Data LV <span class=\"token number\">0</span>\n  Logical volume\twon_raid5_rimage_0\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">127</span>\nRaid Data LV <span class=\"token number\">1</span>\n  Logical volume\twon_raid5_rimage_1\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">127</span>\nRaid Data LV <span class=\"token number\">2</span>\n  Logical volume\twon_raid5_rimage_2\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">127</span>\nRaid Metadata LV <span class=\"token number\">0</span>\twon_raid5_rmeta_0\nRaid Metadata LV <span class=\"token number\">1</span>\twon_raid5_rmeta_1\nRaid Metadata LV <span class=\"token number\">2</span>\twon_raid5_rmeta_2</code></pre></div>\n<hr>\n<br/>\n<h3 id=\"4-raid-6-구축하기\" style=\"position:relative;\"><a href=\"#4-raid-6-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\" aria-label=\"4 raid 6 구축하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. ​RAID 6 구축하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">#wonseok 이라는 VG를 사용해 설정</span>\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  vgs\n  VG      #PV #LV #SN Attr   VSize   VFree  \n  centos    <span class=\"token number\">1</span>   <span class=\"token number\">2</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">19</span><span class=\"token punctuation\">.</span>00g      <span class=\"token number\">0</span> \n  wonseok   <span class=\"token number\">6</span>   <span class=\"token number\">0</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">47</span><span class=\"token punctuation\">.</span>98g <span class=\"token operator\">&lt;</span><span class=\"token number\">47</span><span class=\"token punctuation\">.</span>98g</code></pre></div>\n<br/>\n<p>명령어 : lvcreate —type raid6 -n won_raid6 -L 4G -i 4 wonseok</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  lvcreate <span class=\"token operator\">--</span>type raid6 <span class=\"token operator\">-</span>i <span class=\"token number\">4</span> <span class=\"token operator\">-</span>L 4G <span class=\"token operator\">-</span>n won_raid6 wonseok\n  Using <span class=\"token keyword\">default</span> stripesize <span class=\"token number\">64.00</span> KiB<span class=\"token punctuation\">.</span>\n  Logical volume <span class=\"token string\">\"won_raid6\"</span> created<span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  lvs\n  LV        VG      Attr       LSize   Pool Origin Data<span class=\"token operator\">%</span>  Meta<span class=\"token operator\">%</span>  Move Log Cpy<span class=\"token operator\">%</span>Sync Convert\n  root      centos  <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">17</span><span class=\"token punctuation\">.</span>00g                                                    \n  swap      centos  <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span>   <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>00g                                                    \n  won_raid6 wonseok rwi<span class=\"token operator\">-</span>a<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span><span class=\"token operator\">-</span>   <span class=\"token number\">4</span><span class=\"token punctuation\">.</span>00g                                    <span class=\"token number\">6.25</span>   </code></pre></div>\n<br/>\n<p>RAID 6 설정 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  lvdisplay <span class=\"token operator\">-</span>m <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>wonseok<span class=\"token operator\">/</span>won_raid6 \n  <span class=\"token operator\">--</span><span class=\"token operator\">-</span> Logical volume <span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n  LV Path                <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>wonseok<span class=\"token operator\">/</span>won_raid6\n  LV Name                won_raid6\n  VG Name                wonseok\n  LV UUID                xeOz4d<span class=\"token operator\">-</span>2LFO<span class=\"token operator\">-</span>Q1gH<span class=\"token operator\">-</span>WQQN<span class=\"token operator\">-</span>bw6D<span class=\"token operator\">-</span>lban<span class=\"token operator\">-</span>WWgEMe\n  LV Write Access        read<span class=\"token operator\">/</span>write\n  LV <span class=\"token class-name\">Creation</span> host<span class=\"token punctuation\">,</span> <span class=\"token class-name\">time</span> centos<span class=\"token punctuation\">,</span> <span class=\"token number\">2020</span><span class=\"token operator\">-</span><span class=\"token number\">07</span><span class=\"token operator\">-</span><span class=\"token number\">08</span> <span class=\"token number\">16</span><span class=\"token punctuation\">:</span><span class=\"token number\">34</span><span class=\"token punctuation\">:</span><span class=\"token number\">29</span> <span class=\"token operator\">+</span><span class=\"token number\">0900</span>\n  LV Status              available\n  <span class=\"token preprocessor property\"># open                 0</span>\n  LV Size                <span class=\"token number\">4.00</span> GiB\n  Current LE             <span class=\"token number\">1024</span>\n  Segments               <span class=\"token number\">1</span>\n  Allocation             inherit\n  Read ahead sectors     auto\n  <span class=\"token operator\">-</span> currently <span class=\"token keyword\">set</span> to     <span class=\"token number\">1536</span>\n  Block device           <span class=\"token number\">253</span><span class=\"token punctuation\">:</span><span class=\"token number\">14</span>\n\n  <span class=\"token operator\">--</span><span class=\"token operator\">-</span> Segments <span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n  Logical extents <span class=\"token number\">0</span> to <span class=\"token number\">1023</span><span class=\"token punctuation\">:</span>\n    Type\t\traid6\nMonitoring\t\tmonitored\nRaid Data LV <span class=\"token number\">0</span>\n  Logical volume\twon_raid6_rimage_0\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">255</span>\nRaid Data LV <span class=\"token number\">1</span>\n  Logical volume\twon_raid6_rimage_1\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">255</span>\nRaid Data LV <span class=\"token number\">2</span>\n  Logical volume\twon_raid6_rimage_2\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">255</span>\nRaid Data LV <span class=\"token number\">3</span>\n  Logical volume\twon_raid6_rimage_3\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">255</span>\nRaid Data LV <span class=\"token number\">4</span>\n  Logical volume\twon_raid6_rimage_4\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">255</span>\nRaid Data LV <span class=\"token number\">5</span>\n  Logical volume\twon_raid6_rimage_5\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">255</span>\nRaid Metadata LV <span class=\"token number\">0</span>\twon_raid6_rmeta_0\nRaid Metadata LV <span class=\"token number\">1</span>\twon_raid6_rmeta_1\nRaid Metadata LV <span class=\"token number\">2</span>\twon_raid6_rmeta_2\nRaid Metadata LV <span class=\"token number\">3</span>\twon_raid6_rmeta_3\nRaid Metadata LV <span class=\"token number\">4</span>\twon_raid6_rmeta_4\nRaid Metadata LV <span class=\"token number\">5</span>\twon_raid6_rmeta_5</code></pre></div>\n<hr>\n<br/>\n<h3 id=\"4-raid-10-구축하기\" style=\"position:relative;\"><a href=\"#4-raid-10-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\" aria-label=\"4 raid 10 구축하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. ​RAID 1+0 구축하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">#wonseok 이라는 VG를 사용해 설정</span>\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  vgs\n  VG      #PV #LV #SN Attr   VSize   VFree  \n  centos    <span class=\"token number\">1</span>   <span class=\"token number\">2</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">19</span><span class=\"token punctuation\">.</span>00g      <span class=\"token number\">0</span> \n  wonseok   <span class=\"token number\">6</span>   <span class=\"token number\">0</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">47</span><span class=\"token punctuation\">.</span>98g <span class=\"token operator\">&lt;</span><span class=\"token number\">47</span><span class=\"token punctuation\">.</span>98g</code></pre></div>\n<br/>\n<p>명령어 : lvcreate —type raid10 -i3 -m1 -L 3G -n won_raid10 wonseok\n</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  lvcreate <span class=\"token operator\">--</span>type raid10 <span class=\"token operator\">-</span>i3 <span class=\"token operator\">-</span>m1 <span class=\"token operator\">-</span>L 3G <span class=\"token operator\">-</span>n won_raid10 wonseok\n  Using <span class=\"token keyword\">default</span> stripesize <span class=\"token number\">64.00</span> KiB<span class=\"token punctuation\">.</span>\n  Logical volume <span class=\"token string\">\"won_raid10\"</span> created<span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  lvs\nLV         VG      Attr       LSize   Pool Origin Data<span class=\"token operator\">%</span>  Meta<span class=\"token operator\">%</span>  Move Log Cpy<span class=\"token operator\">%</span>Sync Convert\nroot       centos  <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">17</span><span class=\"token punctuation\">.</span>00g                                                    \nswap       centos  <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span>   <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>00g                                                    \nwon_raid10 wonseok rwi<span class=\"token operator\">-</span>a<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span><span class=\"token operator\">-</span>   <span class=\"token number\">3</span><span class=\"token punctuation\">.</span>00g                                    <span class=\"token number\">6.25</span>            </code></pre></div>\n<br/>\n<p>RAID 10 설정 확인\n</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  lvdisplay <span class=\"token operator\">-</span>m <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>wonseok<span class=\"token operator\">/</span>won_raid10 \n  <span class=\"token operator\">--</span><span class=\"token operator\">-</span> Logical volume <span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n  LV Path                <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>wonseok<span class=\"token operator\">/</span>won_raid10\n  LV Name                won_raid10\n  VG Name                wonseok\n  LV UUID                WfOkSA<span class=\"token operator\">-</span>CgUC<span class=\"token operator\">-</span>sGNS<span class=\"token operator\">-</span>tn14<span class=\"token operator\">-</span>GYcE<span class=\"token operator\">-</span>coNK<span class=\"token operator\">-</span>V3No15\n  LV Write Access        read<span class=\"token operator\">/</span>write\n  LV <span class=\"token class-name\">Creation</span> host<span class=\"token punctuation\">,</span> <span class=\"token class-name\">time</span> centos<span class=\"token punctuation\">,</span> <span class=\"token number\">2020</span><span class=\"token operator\">-</span><span class=\"token number\">07</span><span class=\"token operator\">-</span><span class=\"token number\">08</span> <span class=\"token number\">16</span><span class=\"token punctuation\">:</span><span class=\"token number\">42</span><span class=\"token punctuation\">:</span><span class=\"token number\">04</span> <span class=\"token operator\">+</span><span class=\"token number\">0900</span>\n  LV Status              available\n  <span class=\"token preprocessor property\"># open                 0</span>\n  LV Size                <span class=\"token number\">3.00</span> GiB\n  Current LE             <span class=\"token number\">768</span>\n  Mirrored volumes       <span class=\"token number\">6</span>\n  Segments               <span class=\"token number\">1</span>\n  Allocation             inherit\n  Read ahead sectors     auto\n  <span class=\"token operator\">-</span> currently <span class=\"token keyword\">set</span> to     <span class=\"token number\">1536</span>\n  Block device           <span class=\"token number\">253</span><span class=\"token punctuation\">:</span><span class=\"token number\">14</span>\n\n  <span class=\"token operator\">--</span><span class=\"token operator\">-</span> Segments <span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n  Logical extents <span class=\"token number\">0</span> to <span class=\"token number\">767</span><span class=\"token punctuation\">:</span>\nType\t\traid10\nMonitoring\t\tmonitored\nRaid Data LV <span class=\"token number\">0</span>\n  Logical volume\twon_raid10_rimage_0\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">767</span>\nRaid Data LV <span class=\"token number\">1</span>\n  Logical volume\twon_raid10_rimage_1\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">767</span>\nRaid Data LV <span class=\"token number\">2</span>\n  Logical volume\twon_raid10_rimage_2\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">767</span>\nRaid Data LV <span class=\"token number\">3</span>\n  Logical volume\twon_raid10_rimage_3\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">767</span>\nRaid Data LV <span class=\"token number\">4</span>\n  Logical volume\twon_raid10_rimage_4\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">767</span>\nRaid Data LV <span class=\"token number\">5</span>\n  Logical volume\twon_raid10_rimage_5\n  Logical extents\t<span class=\"token number\">0</span> to <span class=\"token number\">767</span>\nRaid Metadata LV <span class=\"token number\">0</span>\twon_raid10_rmeta_0\nRaid Metadata LV <span class=\"token number\">1</span>\twon_raid10_rmeta_1\nRaid Metadata LV <span class=\"token number\">2</span>\twon_raid10_rmeta_2\nRaid Metadata LV <span class=\"token number\">3</span>\twon_raid10_rmeta_3\nRaid Metadata LV <span class=\"token number\">4</span>\twon_raid10_rmeta_4\nRaid Metadata LV <span class=\"token number\">5</span>\twon_raid10_rmeta_5</code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-raid%EB%9E%80\">✔ RAID란?</a></li>\n<li>\n<p><a href=\"#-raid%EC%9D%98-%EC%A2%85%EB%A5%98%EC%99%80-%ED%8A%B9%EC%A7%95\">✌ RAID의 종류와 특징</a></p>\n<ul>\n<li><a href=\"#1-raid-0\">1. RAID 0</a></li>\n<li><a href=\"#2-raid-1mirror\">2. RAID 1(Mirror)</a></li>\n<li><a href=\"#3-raid-5\">3. RAID 5</a></li>\n<li><a href=\"#4-raid-6\">4. RAID 6</a></li>\n<li><a href=\"#5-raid-10\">5. RAID 1+0</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-raid-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\">👍 RAID 구축하기</a></p>\n<ul>\n<li><a href=\"#1-raid-0-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\">​1. RAID 0 구축하기</a></li>\n<li><a href=\"#2-raid-1-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\">2. ​RAID 1 구축하기</a></li>\n<li><a href=\"#3-raid-5-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\">3. ​RAID 5 구축하기</a></li>\n<li><a href=\"#4-raid-6-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\">4. ​RAID 6 구축하기</a></li>\n<li><a href=\"#4-raid-10-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\">4. ​RAID 1+0 구축하기</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 23, 2021","title":"[LINUX] - RAID","categories":"LINUX","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/linux-raid/"}},"prev":{"id":"745de7e4-5502-550a-8d57-8812747acd7f","html":"<p>머리말  </p>\n<p>Thin provisioning은 경험해본 적도 들어본 적도 한번도 없는 기술입니다.<br>\n어디서 쓸까? 생각해보면 메일이나, 클라우드를 제공하는 회사들에서 많이 쓸 것 같은 느낌입니다.</p>\n<hr>\n<h2 id=\"-thin-provisioning이란\" style=\"position:relative;\"><a href=\"#-thin-provisioning%EC%9D%B4%EB%9E%80\" aria-label=\" thin provisioning이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ Thin provisioning이란?</h2>\n<p>Thin provisioning 이란 쉽게 얘기하면 사용한 만큼만의 용량을 할당하는 방식입니다.<br>\n10G를 할당 받았지만 3G의 공간만을 사용한다면 실제 사용분만큼의 용량을 제공하는 방식입니다.<br>\n용량을 더 사용한다면 용량을 확보해주고 줄일 경우 사용했던 공간을 회수해 가는 방식으로.<br>\n잉여 자원을 최대한 억제 할 수 있게 됩니다.  </p>\n<br/>\n<ul>\n<li>그림을 보면 이해가 쉽습니다!!<br>\n<img src=\"https://user-images.githubusercontent.com/69498804/90118378-1cb86900-dd93-11ea-93f4-09740a93bd5e.png\" alt=\"스크린샷, 2020-08-13 18-30-30\"></li>\n</ul>\n<br/>\n<h3 id=\"thin-provisioning-의-장점\" style=\"position:relative;\"><a href=\"#thin-provisioning-%EC%9D%98-%EC%9E%A5%EC%A0%90\" aria-label=\"thin provisioning 의 장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Thin provisioning 의 장점</h3>\n<ol>\n<li>사용되지 않는 많은 양의 스토리지를 절약할 수 있습니다.  </li>\n<li>필요 스토리지 용량이 줄어들게 되므로 직접 자본 비용(capex)이 절감.  </li>\n<li>데이터 센터에서 스토리지 운영 비용(opex)이 절감됩니다.  </li>\n<li>단일 여유 스토리지 풀을 관리할 수 있기 때문에 용량 계획이 단순하다. 여러 사용자가 동일한 여유 공간 풀에서 스토리지를 할당하므로 일부 볼륨에서는 용량이 제한되거나 용량이 남는 상황이 발생하지 않습니다    </li>\n<li>스토리지 환경이 더욱 민첩해지며 변화에 더 쉽게 대응할 수 있게 됩니다.</li>\n</ol>\n<br/>  \n<hr>\n<h2 id=\"-구성방법\" style=\"position:relative;\"><a href=\"#-%EA%B5%AC%EC%84%B1%EB%B0%A9%EB%B2%95\" aria-label=\" 구성방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ 구성방법</h2>\n<p>구성의 경우 OS 설치시 GUI를 사용하면 매우 쉽게 구축이 가능하나 이번 포스트에서는 명령어를 이용해서 구성 해보았습니다.  </p>\n<br/>\n<h3 id=\"구축-순서\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%EC%B6%95-%EC%88%9C%EC%84%9C\" aria-label=\"구축 순서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구축 순서</h3>\n<ol>\n<li>물리 볼륨 생성  </li>\n<li>볼륨 그룹 생성 씬 풀/thin pool  </li>\n<li>논리 볼륨 생성/씬프로비저닝    </li>\n</ol>\n<br/>\n<p>[이전 LVM 포스트로 PV, VG 구성 방법은 설명하였기에 이번 포스트는 씬풀부터 설명]<br>\n미리 설정해놓은 wonseok VG로 진행하겠습니다.\n</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  vgs\nVG      #PV #LV #SN Attr   VSize   VFree \ncentos    <span class=\"token number\">1</span>   <span class=\"token number\">2</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">19</span><span class=\"token punctuation\">.</span>00g     <span class=\"token number\">0</span> \nlee       <span class=\"token number\">6</span>   <span class=\"token number\">1</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">47</span><span class=\"token punctuation\">.</span>98g <span class=\"token operator\">&lt;</span><span class=\"token number\">7</span><span class=\"token punctuation\">.</span>98g\nwonseok   <span class=\"token number\">2</span>   <span class=\"token number\">0</span>   <span class=\"token number\">0</span> wz<span class=\"token operator\">--</span>n<span class=\"token operator\">-</span>  <span class=\"token number\">19</span><span class=\"token punctuation\">.</span>99g <span class=\"token number\">19</span><span class=\"token punctuation\">.</span>99g</code></pre></div>\n<br/>\n<ul>\n<li>\n<h3 id=\"씬-풀thin-pool-생성\" style=\"position:relative;\"><a href=\"#%EC%94%AC-%ED%92%80thin-pool-%EC%83%9D%EC%84%B1\" aria-label=\"씬 풀thin pool 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>씬 풀/thin pool 생성</h3>\n<p>  명령어 : <code class=\"language-text\">lvcreate -T -L 15G wonseok/thinpool</code> (씬 풀 생성) 프로비저닝을 위한 영역설정</p>\n<p>  [옵션] -T 씬프로비저닝 형태, -L 사이즈</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  lvcreate <span class=\"token operator\">-</span>T <span class=\"token operator\">-</span>L 15G wonseok<span class=\"token operator\">/</span>thinpool \nThin pool volume with chunk size <span class=\"token number\">64.00</span> KiB can address at most <span class=\"token number\">15.81</span> TiB of data<span class=\"token punctuation\">.</span>\nLogical volume <span class=\"token string\">\"thinpool\"</span> created<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<p>thinpool LV 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  lvs\nLV       VG      Attr       LSize   Pool Origin Data<span class=\"token operator\">%</span>  Meta<span class=\"token operator\">%</span>  Move Log Cpy<span class=\"token operator\">%</span>Sync Convert\nroot     centos  <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">17</span><span class=\"token punctuation\">.</span>00g                                                    \nswap     centos  <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span>   <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>00g                                                    \nlee<span class=\"token punctuation\">.</span>lv   lee     <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span>  <span class=\"token number\">40</span><span class=\"token punctuation\">.</span>00g                                                    \nthinpool wonseok twi<span class=\"token operator\">-</span>a<span class=\"token operator\">-</span>tz<span class=\"token operator\">--</span>  <span class=\"token number\">15</span><span class=\"token punctuation\">.</span>00g             <span class=\"token number\">0.00</span>   <span class=\"token number\">10.57</span> </code></pre></div>\n<br/>\n</li>\n<li>\n<h3 id=\"thin-provisioning-lv-설정\" style=\"position:relative;\"><a href=\"#thin-provisioning-lv-%EC%84%A4%EC%A0%95\" aria-label=\"thin provisioning lv 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Thin provisioning LV 설정</h3>\n<p>  명령어 : <code class=\"language-text\">lvcreate -T -V 1T -n won_thin wonseok/thinpool</code>\n씬풀 wonseok/thinpool에서 1T 사이즈로(-T : thin,-V : 가상 사이즈 ) lvm 생성(이름 lv_thin)</p>\n<p>  [옵션] -T 씬프로비저닝, -V 사이즈, 가상으로 큰 사이즈 지정, -n 이름, 생성할 논리볼륨 이름 지정</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  lvcreate <span class=\"token operator\">-</span>T <span class=\"token operator\">-</span>V 1T <span class=\"token operator\">-</span>n won_thin wonseok<span class=\"token operator\">/</span><span class=\"token class-name\">thinpool</span>\nWARNING<span class=\"token punctuation\">:</span> Sum of all thin <span class=\"token return-type class-name\">volume</span> sizes <span class=\"token punctuation\">(</span><span class=\"token number\">1.00</span> TiB<span class=\"token punctuation\">)</span> exceeds the size of thin pool wonseok<span class=\"token operator\">/</span>thinpool <span class=\"token keyword\">and</span> the size of whole volume <span class=\"token keyword\">group</span> <span class=\"token punctuation\">(</span><span class=\"token number\">19.99</span> GiB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\nWARNING<span class=\"token punctuation\">:</span> You have <span class=\"token keyword\">not</span> turned <span class=\"token keyword\">on</span> protection against thin pools running <span class=\"token keyword\">out</span> of space<span class=\"token punctuation\">.</span>\nWARNING<span class=\"token punctuation\">:</span> Set activation<span class=\"token operator\">/</span>thin_pool_autoextend_threshold below <span class=\"token number\">100</span> to trigger automatic extension of thin pools before they <span class=\"token keyword\">get</span> full<span class=\"token punctuation\">.</span>\nLogical volume <span class=\"token string\">\"won_thin\"</span> created<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"won_thin-lv-생성-및-용량-확인\" style=\"position:relative;\"><a href=\"#won_thin-lv-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EC%9A%A9%EB%9F%89-%ED%99%95%EC%9D%B8\" aria-label=\"won_thin lv 생성 및 용량 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>won_thin LV 생성 및 용량 확인</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  lvs\nLV       VG      Attr       LSize   Pool     Origin Data<span class=\"token operator\">%</span>  Meta<span class=\"token operator\">%</span>  Move Log Cpy<span class=\"token operator\">%</span>Sync Convert\nroot     centos  <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">17</span><span class=\"token punctuation\">.</span>00g                                                        \nswap     centos  <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span>   <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>00g                                                        \nlee<span class=\"token punctuation\">.</span>lv   lee     <span class=\"token operator\">-</span>wi<span class=\"token operator\">-</span>ao<span class=\"token operator\">--</span><span class=\"token operator\">--</span>  <span class=\"token number\">40</span><span class=\"token punctuation\">.</span>00g                                                        \nthinpool wonseok twi<span class=\"token operator\">-</span>aotz<span class=\"token operator\">--</span>  <span class=\"token number\">15</span><span class=\"token punctuation\">.</span>00g                 <span class=\"token number\">0.00</span>   <span class=\"token number\">10.60</span>                           \nwon_thin wonseok Vwi<span class=\"token operator\">-</span>a<span class=\"token operator\">-</span>tz<span class=\"token operator\">--</span>   <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>00t thinpool        <span class=\"token number\">0.00</span>                </code></pre></div>\n</li>\n<li>\n<h3 id=\"fdisk--l-명령어로-사용가능-영역-확인\" style=\"position:relative;\"><a href=\"#fdisk--l-%EB%AA%85%EB%A0%B9%EC%96%B4%EB%A1%9C-%EC%82%AC%EC%9A%A9%EA%B0%80%EB%8A%A5-%EC%98%81%EC%97%AD-%ED%99%95%EC%9D%B8\" aria-label=\"fdisk  l 명령어로 사용가능 영역 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>fdisk -l 명령어로 사용가능 영역 확인</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  fdisk <span class=\"token operator\">-</span>l <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>mapper<span class=\"token operator\">/</span>wonseok<span class=\"token operator\">-</span>won_thi\t\nDisk <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>mapper<span class=\"token operator\">/</span>wonseok<span class=\"token operator\">-</span>won_thin<span class=\"token punctuation\">:</span> <span class=\"token number\">1099.5</span> GB<span class=\"token punctuation\">,</span> <span class=\"token number\">1099511627776</span> bytes<span class=\"token punctuation\">,</span> <span class=\"token number\">2147483648</span> <span class=\"token class-name\">sectors</span>\nUnits <span class=\"token operator\">=</span> sectors of <span class=\"token number\">1</span> <span class=\"token operator\">*</span> <span class=\"token number\">512</span> <span class=\"token operator\">=</span> <span class=\"token number\">512</span> bytes\n<span class=\"token return-type class-name\">Sector</span> size <span class=\"token punctuation\">(</span>logical<span class=\"token operator\">/</span>physical<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token number\">512</span> bytes <span class=\"token operator\">/</span> <span class=\"token number\">512</span> bytes\nI<span class=\"token operator\">/</span><span class=\"token return-type class-name\">O</span> size <span class=\"token punctuation\">(</span>minimum<span class=\"token operator\">/</span>optimal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token number\">65536</span> bytes <span class=\"token operator\">/</span> <span class=\"token number\">65536</span> bytes</code></pre></div>\n</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-thin-provisioning%EC%9D%B4%EB%9E%80\">✔ Thin provisioning이란?</a></p>\n<ul>\n<li><a href=\"#thin-provisioning-%EC%9D%98-%EC%9E%A5%EC%A0%90\">Thin provisioning 의 장점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EA%B5%AC%EC%84%B1%EB%B0%A9%EB%B2%95\">✌ 구성방법</a></p>\n<ul>\n<li><a href=\"#%EA%B5%AC%EC%B6%95-%EC%88%9C%EC%84%9C\">구축 순서</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 23, 2021","title":"[LINUX] - This-Provisioning","categories":"LINUX","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/linux-thin-provisioning/"}},"site":{"siteMetadata":{"siteUrl":"https://nasa1515.com","comments":{"utterances":{"repo":"nasa1515/nasablog"}}}}},"pageContext":{"slug":"/linux-lvm/","nextSlug":"/linux-raid/","prevSlug":"/linux-thin-provisioning/"}},"staticQueryHashes":["1073350324","2938748437"]}