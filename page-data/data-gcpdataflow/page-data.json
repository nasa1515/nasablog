{"componentChunkName":"component---src-templates-blog-template-js","path":"/data-gcpdataflow/","result":{"data":{"cur":{"id":"d7e3e240-ef5e-5891-af05-6c06162c25f1","html":"<p>ë¨¸ë¦¬ë§  </p>\n<p>ìš”ì¦˜ í¬ìŠ¤íŠ¸ë¥¼ ì‘ì„± í•  ì‹œê°„ì´ ë¶€ì¡±í–ˆìŠµë‹ˆë‹¤â€¦(ì¼â€¦) ê·¸ë˜ì„œ ì˜¤ëœë§Œì— í¬ìŠ¤íŠ¸ë¥¼ ì˜¬ë¦° ê¸°ë…ìœ¼ë¡œ ì´ë²ˆ ë‚´ìš©ì„ ë”ìš± ì•Œì°¨ê²Œ ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤.<br>\nì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” GCPì˜ DataFlowë¥¼ ì‚¬ìš©í•´ GCSì— ìˆëŠ” CSV íŒŒì¼ì„ ê°„ë‹¨í•œ Parsing ì‘ì—…ì„ í•œ ë’¤<br>\nBigQuery Tableì— ì ì¬í•˜ëŠ” ë¶€ë¶„ì„ ë‹¤ë¤˜ìŠµë‹ˆë‹¤. ë¬¼ë¡  íŒŒì´ì¬ì„ ì²¨ê°€í•´ì„œ  </p>\n<br/>\n<hr>\n<h2 id=\"-dataflowì—-ëŒ€í•´ì„œ\" style=\"position:relative;\"><a href=\"#-dataflow%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C\" aria-label=\" dataflowì— ëŒ€í•´ì„œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœ” DataFlowì— ëŒ€í•´ì„œ..</h2>\n<p>DataFlowëŠ” GCPì—ì„œ DataPipeline(ETL, MR ë“±)ì„ Apache Beam ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ ë§Œë“  Runtime Service ì…ë‹ˆë‹¤.<br>\nìŒ ê°„ë‹¨í•˜ê²Œ ë§í•˜ë©´ Spark Stremingì´ë‚˜ Batch ì²˜ë¦¬ë¥¼ Cloudë¥¼ ì‚¬ìš©í•´ PaaSë¡œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.<br>\në‹¨ Apache beamì— ì¢…ì†ë˜ì–´ ìˆì–´ì„œ beam SDKë¥¼ ë´ì•¼í•˜ëŠ” ë¶ˆí¸í•œ ë¶€ë¶„ì€ ìˆìŠµë‹ˆë‹¤..   </p>\n<br/>\n<ul>\n<li>\n<p>ì¼ë‹¨ ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œ ê°„ë‹¨í•˜ê²Œ êµ¬ì„±í•˜ë ¤ê³  í•˜ëŠ” ì•„í‚¤í…ì³ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/116188577-9bf39e80-a762-11eb-8d0a-ad2989bbaa14.JPG\" alt=\"ìº¡ì²˜\"></p>\n<ul>\n<li>Batch í˜•íƒœì˜ Data [CSV]ë¥¼ GCSì— Uploadí•˜ë©´ í•´ë‹¹ File Parsing í›„ DWì— ì ì¬. </li>\n</ul>\n<br/>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-dataflow-ì‚¬ìš©ì„-ìœ„í•œ-í™˜ê²½-êµ¬ì„±\" style=\"position:relative;\"><a href=\"#-dataflow-%EC%82%AC%EC%9A%A9%EC%9D%84-%EC%9C%84%ED%95%9C-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1\" aria-label=\" dataflow ì‚¬ìš©ì„ ìœ„í•œ í™˜ê²½ êµ¬ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœŒ DataFlow ì‚¬ìš©ì„ ìœ„í•œ í™˜ê²½ êµ¬ì„±</h2>\n<p>ì €ëŠ” Localì˜ VScodeì—ì„œ Codeë¥¼ ì‚¬ìš© í•  ê²ƒì´ê¸° ë•Œë¬¸ì—<br>\nDataFlow ì‚¬ìš©í•˜ê¸° ìœ„í•œ í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” ê²ƒë¶€í„° ì§„í–‰í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. </p>\n<br/>\n<ul>\n<li>\n<h4 id=\"dataflowë¥¼-ì‚¬ìš©í•˜ê¸°-ìœ„í•´ì„œëŠ”-ì•„ë˜-apië“¤ì´-í•„ìš”í•©ë‹ˆë‹¤-ì¶”ê°€í•´ì¤ë‹ˆë‹¤\" style=\"position:relative;\"><a href=\"#dataflow%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%B4%EC%84%9C%EB%8A%94-%EC%95%84%EB%9E%98-api%EB%93%A4%EC%9D%B4-%ED%95%84%EC%9A%94%ED%95%A9%EB%8B%88%EB%8B%A4-%EC%B6%94%EA%B0%80%ED%95%B4%EC%A4%8D%EB%8B%88%EB%8B%A4\" aria-label=\"dataflowë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ apië“¤ì´ í•„ìš”í•©ë‹ˆë‹¤ ì¶”ê°€í•´ì¤ë‹ˆë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DataFlowë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ APIë“¤ì´ í•„ìš”í•©ë‹ˆë‹¤. [ì¶”ê°€í•´ì¤ë‹ˆë‹¤.]</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/113811074-806e2700-97a6-11eb-9e4b-384907be0558.JPG\" alt=\"ìº¡ì²˜2\"></p>\n<p>ì„¤ì¹˜ API ëª©ë¡</p>\n<ul>\n<li>Cloud Dataflow</li>\n<li>Stackdriver</li>\n<li>Cloud Storage</li>\n<li>Cloud Storage JSON</li>\n<li>BigQuery</li>\n<li>Cloud Pub/Sub</li>\n<li>Cloud Datastore</li>\n<li>Cloud Resource Manager APIs</li>\n</ul>\n<br/>\n<br/>\n</li>\n<li>\n<h4 id=\"ì´í›„-ìƒˆë¡œìš´-service-accountë¥¼-ìƒì„±í•©ë‹ˆë‹¤\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%ED%9B%84-%EC%83%88%EB%A1%9C%EC%9A%B4-service-account%EB%A5%BC-%EC%83%9D%EC%84%B1%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\"ì´í›„ ìƒˆë¡œìš´ service accountë¥¼ ìƒì„±í•©ë‹ˆë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì´í›„ ìƒˆë¡œìš´ Service Accountë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/113811448-30439480-97a7-11eb-9a42-4e8425375130.JPG\" alt=\"ìº¡ì²˜3\"></p>\n<ul>\n<li>ê¶Œí•œ : ì†Œìœ ì  </li>\n<li>\n<p>KeyFile : Json  </p>\n<ul>\n<li>KeyFilwì„ Localë¡œ ë°›ì•„ë†”ì•¼ í•©ë‹ˆë‹¤!</li>\n</ul>\n</li>\n</ul>\n<br/> \n<br/>\n</li>\n<li>\n<h4 id=\"ì´ì œ-gcsgoogle-cloud-storageë¥¼-ìƒì„±í•©ë‹ˆë‹¤\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EC%A0%9C-gcsgoogle-cloud-storage%EB%A5%BC-%EC%83%9D%EC%84%B1%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\"ì´ì œ gcsgoogle cloud storageë¥¼ ìƒì„±í•©ë‹ˆë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì´ì œ GCS(Google Cloud Storage)ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/113811803-d68f9a00-97a7-11eb-8cc0-0d6463f8a42b.JPG\" alt=\"ìº¡ì²˜4\"></p>\n<ul>\n<li>Storage Class : Standard</li>\n<li>\n<p>Single Region </p>\n<ul>\n<li>ê°€ê¸‰ì ì´ë©´ ë¹„ìš©ì ìœ¼ë¡œë¼ë„ BigQueryë¥¼ ì‚¬ìš© í•  Regionê³¼ ë§ì¶°ì£¼ì„¸ìš”!</li>\n</ul>\n</li>\n</ul>\n<br/>\n<br/>\n</li>\n<li>\n<h4 id=\"ìµœì¢…ì ìœ¼ë¡œ-dataë¥¼-ì ì¬-í• -bigquery-datasetì„-ìƒì„±í•©ë‹ˆë‹¤\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A2%85%EC%A0%81%EC%9C%BC%EB%A1%9C-data%EB%A5%BC-%EC%A0%81%EC%9E%AC-%ED%95%A0-bigquery-dataset%EC%9D%84-%EC%83%9D%EC%84%B1%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\"ìµœì¢…ì ìœ¼ë¡œ dataë¥¼ ì ì¬ í•  bigquery datasetì„ ìƒì„±í•©ë‹ˆë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìµœì¢…ì ìœ¼ë¡œ Dataë¥¼ ì ì¬ í•  Bigquery DataSetì„ ìƒì„±í•©ë‹ˆë‹¤.</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/116189103-6dc28e80-a763-11eb-88f6-1a8e49ea32b8.JPG\" alt=\"ìº¡ì²˜2\"></p>\n<ul>\n<li>BigQuery Project : lws-cloocus</li>\n<li>BigQuery DataSet : Test </li>\n</ul>\n</li>\n</ul>\n<p>ì ì—¬ê¸°ê¹Œì§€ ê°„ë‹¨í•œ í™˜ê²½ì„¤ì •ì€ ì™„ë£Œë˜ì—ˆê³  Codeë¥¼ ì„¤ëª…í•˜ë©´ì„œ ì¶”ê°€ì ìœ¼ë¡œ ë³´ê² ìŠµë‹ˆë‹¤.  </p>\n<br/>\n<hr>\n<h2 id=\"-python-code-a-namea1a\" style=\"position:relative;\"><a href=\"#-python-code-a-namea1a\" aria-label=\" python code a namea1a permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘ python code <a name=\"a1\"></a></h2>\n<ul>\n<li>\n<p>ìµœì¢…ì ì¸ DataPipelineì˜ Python Code ì…ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> __future__ <span class=\"token keyword\">import</span> absolute_import\n<span class=\"token keyword\">import</span> argparse\n<span class=\"token keyword\">import</span> logging\n<span class=\"token keyword\">import</span> re\n<span class=\"token keyword\">import</span> apache_beam <span class=\"token keyword\">as</span> beam\n<span class=\"token keyword\">import</span> json\n<span class=\"token keyword\">import</span> os\n\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>io <span class=\"token keyword\">import</span> ReadFromText\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>io <span class=\"token keyword\">import</span> WriteToText\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>metrics <span class=\"token keyword\">import</span> Metrics\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>pipeline_options <span class=\"token keyword\">import</span> PipelineOptions\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>pipeline_options <span class=\"token keyword\">import</span> SetupOptions\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>pipeline_options <span class=\"token keyword\">import</span> StandardOptions\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>pipeline_options <span class=\"token keyword\">import</span> GoogleCloudOptions\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>pipeline <span class=\"token keyword\">import</span> PipelineOptions\n<span class=\"token keyword\">from</span> google<span class=\"token punctuation\">.</span>cloud <span class=\"token keyword\">import</span> storage\n<span class=\"token keyword\">from</span> google<span class=\"token punctuation\">.</span>oauth2 <span class=\"token keyword\">import</span> service_account\n<span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n\n\n<span class=\"token comment\"># GCP Service Account Key env ìœˆë„ìš°ì—ì„œëŠ” í™˜ê²½ë³€ìˆ˜ë¡œ ì„¤ì •ê°€ëŠ¥</span>\nstorage_client <span class=\"token operator\">=</span> storage<span class=\"token punctuation\">.</span>Client<span class=\"token punctuation\">.</span>                            from_service_account_json                                                   <span class=\"token punctuation\">(</span><span class=\"token string\">'C:\\GCP\\lws-cloocus-d4fde98375c7.json'</span><span class=\"token punctuation\">)</span>\n    \n\n<span class=\"token comment\"># for linux \"service account key\" </span>\n\n<span class=\"token comment\">#GOOGLE_APPLICATION_CREDENTIALS('/home/nasa1515/dataflow/lwskey.json')</span>\n\n<span class=\"token comment\"># word length code</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">WordExtractingDoFn</span><span class=\"token punctuation\">(</span>beam<span class=\"token punctuation\">.</span>DoFn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">process</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    \n    splited <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span>\n    writestring <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> splited<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'price'</span><span class=\"token punctuation\">:</span> splited<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'manufacturer'</span><span class=\"token punctuation\">:</span> splited<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'condition'</span><span class=\"token punctuation\">:</span> splited<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">#writestring = {'splited[0], splited[1], splited[2], splited[3]'}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>writestring<span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># parser option code</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span>argv<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> save_main_session<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\nparser <span class=\"token operator\">=</span> argparse<span class=\"token punctuation\">.</span>ArgumentParser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nparser<span class=\"token punctuation\">.</span>add_argument<span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'--input'</span><span class=\"token punctuation\">,</span>dest<span class=\"token operator\">=</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>required<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">help</span><span class=\"token operator\">=</span><span class=\"token string\">'default'</span>\n    <span class=\"token punctuation\">,</span>default<span class=\"token operator\">=</span><span class=\"token string\">'gs://storage_nasa1515/data/batch2.csv'</span><span class=\"token punctuation\">)</span>\nparser<span class=\"token punctuation\">.</span>add_argument<span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'--output'</span><span class=\"token punctuation\">,</span>dest<span class=\"token operator\">=</span><span class=\"token string\">'output'</span><span class=\"token punctuation\">,</span>required<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">help</span><span class=\"token operator\">=</span><span class=\"token string\">'default'</span>\n    <span class=\"token punctuation\">,</span>default<span class=\"token operator\">=</span><span class=\"token string\">'lws-cloocus:nasa1515.batchtest'</span><span class=\"token punctuation\">)</span>\n\nknown_args<span class=\"token punctuation\">,</span> pipeline_args <span class=\"token operator\">=</span> parser<span class=\"token punctuation\">.</span>parse_known_args<span class=\"token punctuation\">(</span>argv<span class=\"token punctuation\">)</span>\npipeline_options <span class=\"token operator\">=</span> PipelineOptions<span class=\"token punctuation\">(</span>pipeline_args<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># pipline option</span>\n\ngoogle_cloud_options <span class=\"token operator\">=</span> pipeline_options<span class=\"token punctuation\">.</span>view_as<span class=\"token punctuation\">(</span>GoogleCloudOptions<span class=\"token punctuation\">)</span>\ngoogle_cloud_options<span class=\"token punctuation\">.</span>project <span class=\"token operator\">=</span> <span class=\"token string\">'lws-cloocus'</span>\ngoogle_cloud_options<span class=\"token punctuation\">.</span>job_name <span class=\"token operator\">=</span> <span class=\"token string\">'test-to-big'</span>\ngoogle_cloud_options<span class=\"token punctuation\">.</span>staging_location <span class=\"token operator\">=</span> <span class=\"token string\">'gs://storage_nasa1515/staging'</span>\ngoogle_cloud_options<span class=\"token punctuation\">.</span>temp_location <span class=\"token operator\">=</span> <span class=\"token string\">'gs://storage_nasa1515/temp'</span>\ngoogle_cloud_options<span class=\"token punctuation\">.</span>region <span class=\"token operator\">=</span> <span class=\"token string\">'asia-northeast3'</span>\npipeline_options<span class=\"token punctuation\">.</span>view_as<span class=\"token punctuation\">(</span>StandardOptions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>runner <span class=\"token operator\">=</span> <span class=\"token string\">'DataflowRunner'</span>\n\n\n<span class=\"token comment\"># # test1</span>\n\np <span class=\"token operator\">=</span> beam<span class=\"token punctuation\">.</span>Pipeline<span class=\"token punctuation\">(</span>options <span class=\"token operator\">=</span> PipelineOptions<span class=\"token punctuation\">(</span>pipeline_args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">with</span> beam<span class=\"token punctuation\">.</span>Pipeline<span class=\"token punctuation\">(</span>options<span class=\"token operator\">=</span>pipeline_options<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> p<span class=\"token punctuation\">:</span>\n\n    table_schema <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'fields'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"STRING\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mode\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"NULLABLE\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> \n            <span class=\"token punctuation\">{</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"price\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"INTEGER\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mode\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"NULLABLE\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"manufacturer\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"STRING\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mode\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"NULLABLE\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"condition\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"STRING\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mode\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"NULLABLE\"</span><span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token punctuation\">(</span>p \n        <span class=\"token operator\">|</span> <span class=\"token string\">'Read Data'</span> <span class=\"token operator\">>></span> ReadFromText<span class=\"token punctuation\">(</span>known_args<span class=\"token punctuation\">.</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token operator\">|</span> beam<span class=\"token punctuation\">.</span>ParDo<span class=\"token punctuation\">(</span>WordExtractingDoFn<span class=\"token punctuation\">(</span>WordExtractingDoFn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">|</span> <span class=\"token string\">'write to BigQuery'</span> <span class=\"token operator\">>></span> beam<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>WriteToBigQuery<span class=\"token punctuation\">(</span>\n            known_args<span class=\"token punctuation\">.</span>output<span class=\"token punctuation\">,</span>\n            schema <span class=\"token operator\">=</span> table_schema<span class=\"token punctuation\">,</span>\n            method<span class=\"token operator\">=</span>beam<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>WriteToBigQuery<span class=\"token punctuation\">.</span>Method<span class=\"token punctuation\">.</span>FILE_LOADS<span class=\"token punctuation\">,</span>\n            create_disposition <span class=\"token operator\">=</span> beam<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>BigQueryDisposition<span class=\"token punctuation\">.</span>CREATE_IF_NEEDED<span class=\"token punctuation\">,</span>\n            write_disposition <span class=\"token operator\">=</span> beam<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>BigQueryDisposition<span class=\"token punctuation\">.</span>WRITE_TRUNCATE\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n\nresult <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nresult<span class=\"token punctuation\">.</span>wait_until_finish<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    logging<span class=\"token punctuation\">.</span>getLogger<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>setLevel<span class=\"token punctuation\">(</span>logging<span class=\"token punctuation\">.</span>INFO<span class=\"token punctuation\">)</span>\n    run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<br/>\n<ul>\n<li>\n<p>ê¸°ë³¸ì ìœ¼ë¡œ GCP DataFlowì—ì„œ beam SDKë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  ì•„ë˜ SDKì˜ ì„¤ì¹˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">pip install apache<span class=\"token operator\">-</span>beam<span class=\"token punctuation\">[</span>gcp<span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<br/>\n<ul>\n<li>\n<p>SDK ì„ ì–¸ ì½”ë“œ </p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> __future__ <span class=\"token keyword\">import</span> absolute_import\n<span class=\"token keyword\">import</span> argparse\n<span class=\"token keyword\">import</span> logging\n<span class=\"token keyword\">import</span> re\n<span class=\"token keyword\">import</span> apache_beam <span class=\"token keyword\">as</span> beam\n<span class=\"token keyword\">import</span> json\n<span class=\"token keyword\">import</span> os\n<span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>io <span class=\"token keyword\">import</span> ReadFromText\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>io <span class=\"token keyword\">import</span> WriteToText\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>metrics <span class=\"token keyword\">import</span> Metrics\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>pipeline_options <span class=\"token keyword\">import</span> PipelineOptions\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>pipeline_options <span class=\"token keyword\">import</span> SetupOptions\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>pipeline_options <span class=\"token keyword\">import</span> StandardOptions\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>pipeline_options <span class=\"token keyword\">import</span> GoogleCloudOptions\n<span class=\"token keyword\">from</span> apache_beam<span class=\"token punctuation\">.</span>pipeline <span class=\"token keyword\">import</span> PipelineOptions\n<span class=\"token keyword\">from</span> google<span class=\"token punctuation\">.</span>cloud <span class=\"token keyword\">import</span> storage\n<span class=\"token keyword\">from</span> google<span class=\"token punctuation\">.</span>oauth2 <span class=\"token keyword\">import</span> service_account</code></pre></div>\n</li>\n</ul>\n<br/>\n<br/>\n<ul>\n<li>\n<p>ê¶Œí•œì„ ì–»ê¸° ìœ„í•œ ì½”ë“œ </p>\n<p>ì•„ê¹Œ Service Accountë¥¼ ìƒì„±í•˜ë©° ë°œê¸‰ ë°›ì•˜ë˜ Keyì˜ ìœ„ì¹˜ë¥¼ ì„ ì–¸í•´ì¤ë‹ˆë‹¤.<br>\nWindow/Linux ëª¨ë‘ í™˜ê²½ë³€ìˆ˜ë¡œ GOOGLE<em>APPLICATION</em>CREDENTIALS ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># GCP Service Account Key env</span>\nstorage_client <span class=\"token operator\">=</span> storage<span class=\"token punctuation\">.</span>Client<span class=\"token punctuation\">.</span>from_service_account_json<span class=\"token punctuation\">(</span><span class=\"token string\">'C:\\GCP\\lws-cloocus-d4fde98375c7.json'</span><span class=\"token punctuation\">)</span>\n    \n\n<span class=\"token comment\"># for linux/window \"service account key\" </span>\n\n<span class=\"token comment\">#GOOGLE_APPLICATION_CREDENTIALS('/home/nasa1515/dataflow/lwskey.json')</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<br/>\n<ul>\n<li>\n<p>íŒŒì´í”„ë¼ì¸ ì„¤ì • ì½”ë“œ</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">## ,ìœ¼ë¡œ êµ¬ë¶„ëœ CSV Fileì„ Bigqueryê°€ ì¸ì‹í•˜ëŠ” ,ìœ¼ë¡œ êµ¬ë¶„ëœ Json Fileë¡œ ë³€í™˜í•˜ëŠ” ì½”ë“œ</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">WordExtractingDoFn</span><span class=\"token punctuation\">(</span>beam<span class=\"token punctuation\">.</span>DoFn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">process</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    \n    splited <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span>\n    writestring <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> splited<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'price'</span><span class=\"token punctuation\">:</span> splited<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'manufacturer'</span><span class=\"token punctuation\">:</span> splited<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'condition'</span><span class=\"token punctuation\">:</span> splited<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">#writestring = {'splited[0], splited[1], splited[2], splited[3]'}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>writestring<span class=\"token punctuation\">]</span>\n\n\n<span class=\"token comment\">## pasing í•  ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  write í•  Bigqueryì— ëŒ€í•œ ì •ë³´ë“¤ì„ ì…ë ¥</span>\n\n<span class=\"token comment\"># parser option code</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span>argv<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> save_main_session<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\nparser <span class=\"token operator\">=</span> argparse<span class=\"token punctuation\">.</span>ArgumentParser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nparser<span class=\"token punctuation\">.</span>add_argument<span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'--input'</span><span class=\"token punctuation\">,</span>dest<span class=\"token operator\">=</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>required<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">help</span><span class=\"token operator\">=</span><span class=\"token string\">'default'</span>\n    <span class=\"token punctuation\">,</span>default<span class=\"token operator\">=</span><span class=\"token string\">'gs://storage_nasa1515/data/batch2.csv'</span><span class=\"token punctuation\">)</span>\nparser<span class=\"token punctuation\">.</span>add_argument<span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'--output'</span><span class=\"token punctuation\">,</span>dest<span class=\"token operator\">=</span><span class=\"token string\">'output'</span><span class=\"token punctuation\">,</span>required<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">help</span><span class=\"token operator\">=</span><span class=\"token string\">'default'</span>\n    <span class=\"token punctuation\">,</span>default<span class=\"token operator\">=</span><span class=\"token string\">'lws-cloocus:nasa1515.batchtest'</span><span class=\"token punctuation\">)</span>\n\nknown_args<span class=\"token punctuation\">,</span> pipeline_args <span class=\"token operator\">=</span> parser<span class=\"token punctuation\">.</span>parse_known_args<span class=\"token punctuation\">(</span>argv<span class=\"token punctuation\">)</span>\npipeline_options <span class=\"token operator\">=</span> PipelineOptions<span class=\"token punctuation\">(</span>pipeline_args<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># pipline option</span>\n\ngoogle_cloud_options <span class=\"token operator\">=</span> pipeline_options<span class=\"token punctuation\">.</span>view_as<span class=\"token punctuation\">(</span>GoogleCloudOptions<span class=\"token punctuation\">)</span>\ngoogle_cloud_options<span class=\"token punctuation\">.</span>project <span class=\"token operator\">=</span> <span class=\"token string\">'lws-cloocus'</span>\ngoogle_cloud_options<span class=\"token punctuation\">.</span>job_name <span class=\"token operator\">=</span> <span class=\"token string\">'test-to-big'</span>\ngoogle_cloud_options<span class=\"token punctuation\">.</span>staging_location <span class=\"token operator\">=</span> <span class=\"token string\">'gs://storage_nasa1515/staging'</span>\ngoogle_cloud_options<span class=\"token punctuation\">.</span>temp_location <span class=\"token operator\">=</span> <span class=\"token string\">'gs://storage_nasa1515/temp'</span>\ngoogle_cloud_options<span class=\"token punctuation\">.</span>region <span class=\"token operator\">=</span> <span class=\"token string\">'asia-northeast3'</span>\npipeline_options<span class=\"token punctuation\">.</span>view_as<span class=\"token punctuation\">(</span>StandardOptions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>runner <span class=\"token operator\">=</span> <span class=\"token string\">'DataflowRunner'</span></code></pre></div>\n<ul>\n<li>ì´ë¶€ë¶„ì—ì„œ ì£¼ìš”í•˜ê²Œ ë´ì•¼ í•  ì ì„ Bigqueryê°€ ë°›ì•„ ë“¤ì¼ ìˆ˜ ìˆëŠ” íŒŒì¼ì˜ í˜•ì‹ì…ë‹ˆë‹¤.  </li>\n</ul>\n</li>\n</ul>\n<br/>\n<br/>\n<ul>\n<li>\n<p>ì œê°€ Pasing í•˜ë ¤ê³  í•˜ëŠ” Batch ì„± ë°ì´í„°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/116191285-06a6d900-a767-11eb-8860-ad389d2b7e0f.JPG\" alt=\"ìº¡ì²˜\"></p>\n</li>\n</ul>\n<br/>\n<br/>\n<ul>\n<li>\n<p>ê·¸ëŸ¬ë‚˜ Bigqueryì—ì„œëŠ” ë¯¸ë¦¬ ì •ì˜í•œ Schema í˜•íƒœì˜ ,JSONìœ¼ë¡œë§Œ Dataë¥¼ Load í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/116191459-4cfc3800-a767-11eb-9b76-9717d755dfca.JPG\" alt=\"ìº¡ì²˜2\"></p>\n</li>\n</ul>\n<br/>\n<br/>\n<ul>\n<li>\n<p>ë§Œì•½ í•´ë‹¹ Data í˜•íƒœë¡œ Parsingì´ ë˜ì§€ ì•Šìœ¼ë©´ ì•„ë˜ì™€ ê°™ì€ Errorê°€ ë°œìƒí•˜ë©° Jobì´ ë©ˆì¶¥ë‹ˆë‹¤.. </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/116191628-9ea4c280-a767-11eb-8c0c-f78ab7588ad3.png\" alt=\"MicrosoftTeams-image\"></p>\n<ul>\n<li>ë•Œë¬¸ì— ìœ„ì˜ ìë£Œí˜•ëŒ€ë¡œ í˜•ì‹ì„ ë§ì¶°ì£¼ëŠ” ê±´ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤..[ì—¬ê¸°ì„œ ë»˜ì§“ì„ ë„ˆë¬´ ë§ì´í–ˆì–´ìš”..]</li>\n</ul>\n</li>\n</ul>\n<br/>\n<br/>\n<ul>\n<li>\n<p>ë˜í•œ google<em>cloud</em>optionsì— GCSì˜ ê²½ë¡œë“¤ì€ ì „ë¶€ ë¯¸ë¦¬ ìƒì„±ë˜ì–´ìˆì–´ì•¼ í•©ë‹ˆë‹¤. </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/116192136-6487f080-a768-11eb-9054-337c87a348be.JPG\" alt=\"ìº¡ì²˜3\"></p>\n<ul>\n<li>staging</li>\n<li>temp </li>\n</ul>\n</li>\n</ul>\n<br/>\n<br/>\n<hr>\n<h2 id=\"-ì´ì œ-ì½”ë“œì—-ëŒ€í•œ-ì„¤ëª…ì„-ì´ì–´ì„œ-í•˜ê² ìŠµë‹ˆë‹¤\" style=\"position:relative;\"><a href=\"#-%EC%9D%B4%EC%A0%9C-%EC%BD%94%EB%93%9C%EC%97%90-%EB%8C%80%ED%95%9C-%EC%84%A4%EB%AA%85%EC%9D%84-%EC%9D%B4%EC%96%B4%EC%84%9C-%ED%95%98%EA%B2%A0%EC%8A%B5%EB%8B%88%EB%8B%A4\" aria-label=\" ì´ì œ ì½”ë“œì— ëŒ€í•œ ì„¤ëª…ì„ ì´ì–´ì„œ í•˜ê² ìŠµë‹ˆë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘€ ì´ì œ ì½”ë“œì— ëŒ€í•œ ì„¤ëª…ì„ ì´ì–´ì„œ í•˜ê² ìŠµë‹ˆë‹¤.</h2>\n<ul>\n<li>\n<p>íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ì½”ë“œ </p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">p <span class=\"token operator\">=</span> beam<span class=\"token punctuation\">.</span>Pipeline<span class=\"token punctuation\">(</span>options <span class=\"token operator\">=</span> PipelineOptions<span class=\"token punctuation\">(</span>pipeline_args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">with</span> beam<span class=\"token punctuation\">.</span>Pipeline<span class=\"token punctuation\">(</span>options<span class=\"token operator\">=</span>pipeline_options<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> p<span class=\"token punctuation\">:</span>\n\n    table_schema <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'fields'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"STRING\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mode\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"NULLABLE\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> \n            <span class=\"token punctuation\">{</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"price\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"INTEGER\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mode\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"NULLABLE\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"manufacturer\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"STRING\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mode\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"NULLABLE\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"condition\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"STRING\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mode\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"NULLABLE\"</span><span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token punctuation\">(</span>p \n        <span class=\"token operator\">|</span> <span class=\"token string\">'Read Data'</span> <span class=\"token operator\">>></span> ReadFromText<span class=\"token punctuation\">(</span>known_args<span class=\"token punctuation\">.</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token operator\">|</span> beam<span class=\"token punctuation\">.</span>ParDo<span class=\"token punctuation\">(</span>WordExtractingDoFn<span class=\"token punctuation\">(</span>WordExtractingDoFn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">|</span> <span class=\"token string\">'write to BigQuery'</span> <span class=\"token operator\">>></span> beam<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>WriteToBigQuery<span class=\"token punctuation\">(</span>\n            known_args<span class=\"token punctuation\">.</span>output<span class=\"token punctuation\">,</span>\n            schema <span class=\"token operator\">=</span> table_schema<span class=\"token punctuation\">,</span>\n            method<span class=\"token operator\">=</span>beam<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>WriteToBigQuery<span class=\"token punctuation\">.</span>Method<span class=\"token punctuation\">.</span>FILE_LOADS<span class=\"token punctuation\">,</span>\n            create_disposition <span class=\"token operator\">=</span> beam<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>BigQueryDisposition<span class=\"token punctuation\">.</span>CREATE_IF_NEEDED<span class=\"token punctuation\">,</span>\n            write_disposition <span class=\"token operator\">=</span> beam<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>BigQueryDisposition<span class=\"token punctuation\">.</span>WRITE_TRUNCATE\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n\nresult <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nresult<span class=\"token punctuation\">.</span>wait_until_finish<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    logging<span class=\"token punctuation\">.</span>getLogger<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>setLevel<span class=\"token punctuation\">(</span>logging<span class=\"token punctuation\">.</span>INFO<span class=\"token punctuation\">)</span>\n    run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>ì €ëŠ” ìœ„ì²˜ëŸ¼ table_schemaë¡œ JSON í˜•íƒœì˜ Schemaë¥¼ ë¯¸ë¦¬ ì •ì˜í•´ì„œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.  </li>\n<li>\n<p>create<em>disposition = beam.io.BigQueryDisposition.CREATE</em>IF_NEEDED</p>\n<ul>\n<li>í•´ë‹¹ êµ¬ë¬¸ì€ BigQuery DataSetì— Tableì´ ì—†ìœ¼ë©´ ë§Œë“¤ì–´ ì£¼ëŠ” ì˜µì…˜ì…ë‹ˆë‹¤.  </li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<br/>\n<br/>\n<hr>\n<h2 id=\"-ì‹¤í–‰-ê²°ê³¼\" style=\"position:relative;\"><a href=\"#-%EC%8B%A4%ED%96%89-%EA%B2%B0%EA%B3%BC\" aria-label=\" ì‹¤í–‰ ê²°ê³¼ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ™Œ ì‹¤í–‰ ê²°ê³¼</h2>\n<p>ì½”ë“œê°€ ëª¨ë‘ ì§œì—¬ì¡Œìœ¼ë‹ˆ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œì¼œë³´ì£ .  </p>\n<br/>\n<ul>\n<li>\n<p>ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìœ¼ DataFlow Tabì—ì„œ ê²°ê³¼ë¥¼ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/116193716-bcbff200-a76a-11eb-887a-6bf57009c06c.JPG\" alt=\"ìº¡ì²˜4\"></p>\n<ul>\n<li>í•­ëª©ë§ˆë‹¤ ì–´ë–¤ ë¶€ë¶„ì„ ì„±ê³µí–ˆëŠ”ì§€ ìì„¸í•˜ê²Œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </li>\n</ul>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>DataFlow Jobì´ ì„±ê³µì´ë‹ˆ BigQuery Tableì„ í™•ì¸ í•´ ë³¼ê¹Œìš”?  </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/116193951-20e2b600-a76b-11eb-8827-666ff168be00.JPG\" alt=\"ìº¡ì²˜5\"></p>\n<ul>\n<li>ë‹¤ìŒê³¼ ê°™ì´ ê°„ë‹¨í•œ ì¿¼ë¦¬ë¬¸ì„ BigQueryì— ë‚ ë ¤ë³´ë‹ˆ Dataê°€ ì œëŒ€ë¡œ ë“¤ì–´ê°”ë„¤ìš”!  </li>\n</ul>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"ë§ˆì¹˜ë©°\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"ë§ˆì¹˜ë©° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆì¹˜ë©°â€¦</h2>\n<p>í•œ 2~3ì¼ì •ë„ ì‚½ì§ˆì„ ê²½í—˜í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.<br>\nì´ë²ˆì—ëŠ” Batch í˜•íƒœì˜ ë°ì´í„°ë§Œ DataFlowë¥¼ ì´ìš©í–ˆì§€ë§Œ ì‚¬ì‹¤ Stremingì˜ ì—­í• ì´ ë” ì¤‘ìš”í•©ë‹ˆë‹¤.<br>\nê·¸ë˜ì„œ ì¶”í›„ì— Pub/Subê³¼ ì—°ë™í•˜ì—¬ Streming Dataë¥¼ ì ì¬í•˜ëŠ” ë¶€ë¶„ë„ í¬ìŠ¤íŠ¸ í•˜ê² ìŠµë‹ˆë‹¤.   </p>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-dataflow%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C\">âœ” DataFlowì— ëŒ€í•´ì„œ..</a></li>\n<li><a href=\"#-dataflow-%EC%82%AC%EC%9A%A9%EC%9D%84-%EC%9C%84%ED%95%9C-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1\">âœŒ DataFlow ì‚¬ìš©ì„ ìœ„í•œ í™˜ê²½ êµ¬ì„±</a></li>\n<li><a href=\"#-python-code-a-namea1a\">ğŸ‘ python code <a name=\"a1\"></a></a></li>\n<li><a href=\"#-%EC%9D%B4%EC%A0%9C-%EC%BD%94%EB%93%9C%EC%97%90-%EB%8C%80%ED%95%9C-%EC%84%A4%EB%AA%85%EC%9D%84-%EC%9D%B4%EC%96%B4%EC%84%9C-%ED%95%98%EA%B2%A0%EC%8A%B5%EB%8B%88%EB%8B%A4\">ğŸ‘€ ì´ì œ ì½”ë“œì— ëŒ€í•œ ì„¤ëª…ì„ ì´ì–´ì„œ í•˜ê² ìŠµë‹ˆë‹¤.</a></li>\n<li><a href=\"#-%EC%8B%A4%ED%96%89-%EA%B2%B0%EA%B3%BC\">ğŸ™Œ ì‹¤í–‰ ê²°ê³¼</a></li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">ë§ˆì¹˜ë©°â€¦</a></li>\n</ul>\n</div>","excerpt":"ë¨¸ë¦¬ë§   ìš”ì¦˜ í¬ìŠ¤íŠ¸ë¥¼ ì‘ì„± í•  ì‹œê°„ì´ ë¶€ì¡±í–ˆìŠµë‹ˆë‹¤â€¦(ì¼â€¦) ê·¸ë˜ì„œ ì˜¤ëœë§Œì— í¬ìŠ¤íŠ¸ë¥¼ ì˜¬ë¦° ê¸°ë…ìœ¼ë¡œ ì´ë²ˆ ë‚´ìš©ì„ ë”ìš± ì•Œì°¨ê²Œ ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤. ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” GCPì˜ DataFlowë¥¼ ì‚¬ìš©í•´ GCSì— ìˆëŠ” CSV íŒŒì¼ì„ ê°„ë‹¨í•œ Parsing ì‘ì—…ì„ í•œ ë’¤ BigQuery Tableì— ì ì¬í•˜ëŠ” ë¶€ë¶„ì„ ë‹¤ë¤˜ìŠµë‹ˆë‹¤. ë¬¼ë¡  íŒŒì´ì¬ì„ ì²¨ê°€í•´ì„œ   âœ” DataFlowì— ëŒ€í•´ì„œ.. DataFlowëŠ” GCPì—ì„œ DataPipeline(ETL, MR ë“±)ì„ Apache Beam ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ ë§Œë“  Runtime Service ì…ë‹ˆë‹¤. ìŒ ê°„ë‹¨í•˜ê²Œ ë§í•˜ë©´ Spark Stremingì´ë‚˜ Batch ì²˜ë¦¬ë¥¼ Cloudë¥¼ ì‚¬ìš©í•´ Paaâ€¦","frontmatter":{"date":"September 02, 2021","title":"[DATA] - GCP DataFlow, csv from GCS to BigQuery With Python","categories":"DATA CLOUD","author":"nasa1515","emoji":"ğŸ¤¦â€â™‚ï¸"},"fields":{"slug":"/data-gcpdataflow/"}},"next":{"id":"44a1ef15-7454-5c7f-9869-55e001e067ce","html":"<p>ë¨¸ë¦¬ë§  </p>\n<p>ì´ë²ˆì— ìƒˆë¡­ê²Œ Azure PASSë¥¼ ì „ë‹¬ë°›ì•„ì„œ í•´ë‹¹ êµ¬ë…ìœ¼ë¡œ Cloud Shellì„ ì‚¬ìš©í•˜ë ¤ê³  í–ˆìœ¼ë‚˜<br>\nCloudshell error = Error creating Azure Storage Account - code : 409 error<br>\në°œìƒìœ¼ë¡œ Storageê°€ ìƒì„±ë˜ì§€ ì•Šì•„ ê´€ë ¨ í¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.  </p>\n<hr>\n<h2 id=\"-error\" style=\"position:relative;\"><a href=\"#-error\" aria-label=\" error permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœ” Error!</h2>\n<h4 id=\"cloud-shellì—-ì—°ê²°ì„-ìœ„í•œ-storageë¥¼-ìƒì„±í•˜ë ¤ëŠ”ë°-ë‹¤ìŒê³¼-ê°™ì€-error-ë°œìƒ\" style=\"position:relative;\"><a href=\"#cloud-shell%EC%97%90-%EC%97%B0%EA%B2%B0%EC%9D%84-%EC%9C%84%ED%95%9C-storage%EB%A5%BC-%EC%83%9D%EC%84%B1%ED%95%98%EB%A0%A4%EB%8A%94%EB%8D%B0-%EB%8B%A4%EC%9D%8C%EA%B3%BC-%EA%B0%99%EC%9D%80-error-%EB%B0%9C%EC%83%9D\" aria-label=\"cloud shellì— ì—°ê²°ì„ ìœ„í•œ storageë¥¼ ìƒì„±í•˜ë ¤ëŠ”ë° ë‹¤ìŒê³¼ ê°™ì€ error ë°œìƒ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cloud Shellì— ì—°ê²°ì„ ìœ„í•œ Storageë¥¼ ìƒì„±í•˜ë ¤ëŠ”ë° ë‹¤ìŒê³¼ ê°™ì€ Error ë°œìƒ</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/112244518-cb5e4980-8c92-11eb-9688-bddeb6457fbf.JPG\" alt=\"11111\"></p>\n<ul>\n<li>í•´ë‹¹ Error Code : 409ê°€ ë°œìƒì „ì— 403 Errorë„ ë°œìƒí–ˆìœ¼ë‚˜ í•´ê²°í–ˆìŠµë‹ˆë‹¤.  </li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"403-error-í•´ê²°--stackoverflowì—ì„œ-êµ¬ë…ì˜-resource-providersì˜-microsoftstorage-ê¶Œí•œ-ì„¤ì •\" style=\"position:relative;\"><a href=\"#403-error-%ED%95%B4%EA%B2%B0--stackoverflow%EC%97%90%EC%84%9C-%EA%B5%AC%EB%8F%85%EC%9D%98-resource-providers%EC%9D%98-microsoftstorage-%EA%B6%8C%ED%95%9C-%EC%84%A4%EC%A0%95\" aria-label=\"403 error í•´ê²°  stackoverflowì—ì„œ êµ¬ë…ì˜ resource providersì˜ microsoftstorage ê¶Œí•œ ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>403 ERROR í•´ê²° : <a href=\"https://stackoverflow.com/questions/44107943/unable-to-create-storage-for-persisting-account-files-in-azure-cloud-shell-cli\">StackOverFlow</a>ì—ì„œ êµ¬ë…ì˜ Resource providersì˜ Microsoft.Storage ê¶Œí•œ ì„¤ì •</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/112245160-b504bd80-8c93-11eb-96cc-11449ff92060.png\" alt=\"ehMUs\"></p>\n<ul>\n<li>í•´ë‹¹ ERRORëŠ” êµ¬ë…ì—ì„œ providersì˜ ê¶Œí•œì´ ì—†ì–´ì„œ ë°œìƒí•œ ë¬¸ì œì˜€ìŒ  </li>\n</ul>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"409-error-í•´ê²°--stackoverflowì—ì„œ-customí•˜ê²Œ-storage-ìƒì„±\" style=\"position:relative;\"><a href=\"#409-error-%ED%95%B4%EA%B2%B0--stackoverflow%EC%97%90%EC%84%9C-custom%ED%95%98%EA%B2%8C-storage-%EC%83%9D%EC%84%B1\" aria-label=\"409 error í•´ê²°  stackoverflowì—ì„œ customí•˜ê²Œ storage ìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>409 ERROR í•´ê²° : <a href=\"https://stackoverflow.com/questions/60620035/unable-to-open-cloud-shell-because-of-storage-account-error\">StackOverFlow</a>ì—ì„œ Customí•˜ê²Œ Storage ìƒì„±</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/112245280-e4b3c580-8c93-11eb-9514-14be46875521.png\" alt=\"KKoo7\"></p>\n<ul>\n<li>ë‹¤ìŒê³¼ ê°™ì´ <code class=\"language-text\">show advanced settings</code> tabì„ ì„ íƒí•´ Customí•˜ê²Œ ìƒì„±   </li>\n</ul>\n<p>StorageAccountAlreadyTaken errorëŠ” ìŠ¤í† ë¦¬ì§€ ê³„ì • ìƒì„± ë¬¸ì œì…ë‹ˆë‹¤.<br>\nì´ëŠ” ìƒˆë¡œìš´ ìŠ¤í† ë¦¬ì§€ ê³„ì •ì„ ë§Œë“¤ê³  ìˆì§€ë§Œ ë™ì¼í•œ ì´ë¦„ì˜ ìŠ¤í† ë¦¬ì§€ ê³„ì •ì´ ì „ ì„¸ê³„ì˜ ì´ë¯¸ ì¡´ì¬í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.<br>\n(ì™œëƒí•˜ë©´ ìŠ¤í† ë¦¬ì§€ ê³„ì • ì´ë¦„ì€ ëª¨ë“  Azure ê³„ì •ì—ì„œ ê³ ìœ í•´ì•¼ í•˜ê¸° ë–„ë¬¸).<br>\në˜í•œ êµ¬ë…ì— ìƒì†ë˜ì–´ìˆëŠ” Default Regionì˜ ë¬¸ì œì¼ ìˆ˜ë„ ìˆì–´ í•´ë‹¹ Regionë„ ì§€ì •í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.  </p>\n</li>\n</ul>\n<br/>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-error\">âœ” Error!</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#cloud-shell%EC%97%90-%EC%97%B0%EA%B2%B0%EC%9D%84-%EC%9C%84%ED%95%9C-storage%EB%A5%BC-%EC%83%9D%EC%84%B1%ED%95%98%EB%A0%A4%EB%8A%94%EB%8D%B0-%EB%8B%A4%EC%9D%8C%EA%B3%BC-%EA%B0%99%EC%9D%80-error-%EB%B0%9C%EC%83%9D\">Cloud Shellì— ì—°ê²°ì„ ìœ„í•œ Storageë¥¼ ìƒì„±í•˜ë ¤ëŠ”ë° ë‹¤ìŒê³¼ ê°™ì€ Error ë°œìƒ</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"August 20, 2021","title":"[AZURE] Cloudshell error = Error creating Azure Storage Account - code : 409","categories":"CLOUD Error-Report","author":"nasa1515","emoji":"ğŸ¤¦â€â™‚ï¸"},"fields":{"slug":"/azure-coludshellerror/"}},"prev":{"id":"899a2ae9-4b12-5939-9578-b5831fff8cb9","html":"<p>ë¨¸ë¦¬ë§  </p>\n<p>ìš” ê·¼ë˜ ë¸”ë¡œê·¸ Rebuild, ì—…ë¬´ ë“±ë“±ë“±â€¦ë„ˆë¬´ ë°”ìœ í•˜ë£¨ì˜€ìŠµë‹ˆë‹¤. (ğŸ¤¦â€â™‚ï¸ ì•„ì§ë„ ë°”ì˜ê¸´ í•˜ì§€ë§Œ;;)<br>\nê·¸ë˜ë„ ì£¼ë§, í‡´ê·¼ ì´í›„ì— ê¸°ìˆ ê³µë¶€ í•˜ëŠ” ì‹œê°„ ì¤‘ì— ìª¼ë”ì´ë‚˜ë§ˆ ì§¬ì„ë‚´ ë¸”ë¡œê·¸ ì—…ë°ì´íŠ¸ë¥¼ í•˜ë ¤ê³  ë…¸ë ¥ì¤‘ì…ë‹ˆë‹¤!!<br>\nì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” Azureì˜ DataFactoryì˜ ì´ë¡ ì ì¸ ë‚´ìš©ê³¼ ì‹¤ì œ Oracle DBì˜ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤.</p>\n<hr>\n<h2 id=\"-azure-datafactory\" style=\"position:relative;\"><a href=\"#-azure-datafactory\" aria-label=\" azure datafactory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœ” Azure DataFactory?</h2>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/136335857-f2cd40c3-07b9-4991-b3c4-116438c1fe11.png\" alt=\"image\">\në°ì´í„° ì´ë™ì„ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜í•˜ê³  ë°ì´í„°ë¥¼ ë³€í™˜í•˜ëŠ” ë°ì´í„° ì›Œí¬í”Œë¡œë¥¼ ë§Œë“¤ ìˆ˜ ìˆëŠ” í´ë¼ìš°ë“œ ê¸°ë°˜ ETL ë° ë°ì´í„° í†µí•© ì„œë¹„ìŠ¤<br>\nì„œë¡œ ë‹¤ë¥¸ ë°ì´í„° ì €ì¥ì†Œì˜ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆëŠ” ë°ì´í„° ê¸°ë°˜ ì›Œí¬í”Œë¡œ(íŒŒì´í”„ë¼ì¸ì´ë¼ê³  í•¨)ë¥¼ ë§Œë“¤ê³  ì˜ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>\në°ì´í„° íë¦„ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ì»´í“¨íŒ… ì„œë¹„ìŠ¤(ì˜ˆ: Azure HDInsight Hadoop, Azure Databricks ë° Azure SQL Database)ë¥¼ ì‚¬ìš©í•´<br>\në°ì´í„°ë¥¼ ì‹œê°ì ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë³µì¡í•œ ETL í”„ë¡œì„¸ìŠ¤ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ë¼ê³  ì´ë¡ ì ìœ¼ë¡œëŠ” ì¨ìˆëŠ”ë° ê·¸ëƒ¥ GCPì˜ DataFusionê³¼ ë¹„ìŠ·í•œ ì•„ì´ ê°™ìŠµë‹ˆë‹¤.<br>\në³µì¡í•˜ê²Œ ì´ë¡ ë³´ë‹¤ëŠ” ì‹¤ìŠµì„ í•´ë³´ë©´ì„œ ê¹¨ë‹«ëŠ”ê²Œ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.  </p>\n<br/>\n<hr>\n<h2 id=\"-êµ¬ì¶•-ì˜ˆì •-architecture\" style=\"position:relative;\"><a href=\"#-%EA%B5%AC%EC%B6%95-%EC%98%88%EC%A0%95-architecture\" aria-label=\" êµ¬ì¶• ì˜ˆì • architecture permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘Œ êµ¬ì¶• ì˜ˆì • Architecture</h2>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/136305623-de2ac3d2-18b7-4284-a976-e1413686acde.png\" alt=\"image\"></p>\n<p>On-Premise ê°™ì´ ë„¤íŠ¸ì›Œí¬ê°€ ê²©ë¦¬ë˜ì–´ìˆëŠ” í™˜ê²½ì„ ë§Œë“¤ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.<br>\në•Œë¬¸ì— Azureì—ì„œëŠ” Subnetìœ¼ë¡œ ë¹„ìŠ·í•œ í™˜ê²½ì„ êµ¬ì„±í•´ì„œ Private í™˜ê²½ìœ¼ë¡œ DataFactoryë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.<br>\nì´ ì„œë¸Œë„· ì¢…ë¥˜ ë° ìš©ë„ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>Subnet 01 [Private] (Oracle VM) - On-premiseì˜ ì—­í• </li>\n<li>Subnet 02 [Private] (DataFactory) - Private í™˜ê²½ì˜ ìˆ˜ì§‘</li>\n<li>Subnet 03 [Private] (Jump Server) - Pirvate í™˜ê²½ì— ì ‘ì†í•˜ê¸° ìœ„í•œ Jump</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-datafactory-ìƒì„±\" style=\"position:relative;\"><a href=\"#-datafactory-%EC%83%9D%EC%84%B1\" aria-label=\" datafactory ìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœŒ DataFactory ìƒì„±.</h2>\n<p>DataFactory ìƒì„±ì€ <a href=\"https://docs.microsoft.com/ko-kr/azure/data-factory/quickstart-create-data-factory-portal\">ê³µì‹DOCS</a>ë¥¼ ë³´ê³  ì§„í–‰í•©ë‹ˆë‹¤.</p>\n<br/>\n<ul>\n<li>\n<p>DataFactoryë¥¼ ë™ì¼ RGë“±ì˜ ê°œì¸ì„¤ì •ì— ë§ì¶°ì„œ ìƒì„±í•©ë‹ˆë‹¤.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/135404274-8671e65e-26c3-4ffa-b589-9ab418aba4a9.png\" alt=\"image\"></p>\n<br/>\n</li>\n<li>\n<p>ë‹¤ë§Œ Private í•˜ê²Œ DataFactory Resourceê°€ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ Network ë¶€ë¶„ì€ Private EndPointë¡œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/136308452-5bb43348-50bb-4486-bffb-8ef401507385.png\" alt=\"image\"></p>\n</li>\n</ul>\n<p>ì´ ì™¸ì˜ ì„¤ì •ì€ ê±´ë“œì‹¤ í•„ìš” ì—†ìŠµë‹ˆë‹¤.</p>\n<br/>\n<hr>\n<h2 id=\"-oracle-db-êµ¬ì¶•-azure-vm\" style=\"position:relative;\"><a href=\"#-oracle-db-%EA%B5%AC%EC%B6%95-azure-vm\" aria-label=\" oracle db êµ¬ì¶• azure vm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘ Oracle DB êµ¬ì¶• (Azure VM)</h2>\n<ul>\n<li>Oracle DB êµ¬ì¶•ë°©ë²•ì˜ ê²½ìš° <a href=\"https://docs.microsoft.com/ko-kr/azure/virtual-machines/workloads/oracle/oracle-database-quick-create\">ê³µì‹ DOCS</a>ë¥¼ ë³´ì‹œê³  ì„¤ì¹˜í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</li>\n</ul>\n<br/>\n<p>Azrue VM ìƒì„± (Azureì—ì„œ ì œê³µí•´ì£¼ëŠ” Oracle DB Imageë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">az vm create \\\n    <span class=\"token operator\">--</span>resource<span class=\"token operator\">-</span><span class=\"token keyword\">group</span> nasatest \\\n    <span class=\"token operator\">--</span>name nasa<span class=\"token operator\">-</span>oracle \\\n    <span class=\"token operator\">--</span><span class=\"token class-name\">image</span> Oracle<span class=\"token punctuation\">:</span>oracle<span class=\"token operator\">-</span>database<span class=\"token operator\">-</span><span class=\"token number\">19</span><span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">:</span>oracle<span class=\"token operator\">-</span>database<span class=\"token operator\">-</span><span class=\"token number\">19</span><span class=\"token operator\">-</span><span class=\"token number\">0904</span><span class=\"token punctuation\">:</span>latest \\\n    <span class=\"token operator\">--</span>size Standard_DS2_v2 \\\n    <span class=\"token operator\">--</span>admin<span class=\"token operator\">-</span>username nasa1515 \\\n    <span class=\"token operator\">--</span>admin<span class=\"token operator\">-</span>password @dldnjstjr123 \\\n    <span class=\"token operator\">--</span><span class=\"token keyword\">public</span><span class=\"token operator\">-</span>ip<span class=\"token operator\">-</span>address<span class=\"token operator\">-</span>allocation <span class=\"token keyword\">static</span> \\\n    <span class=\"token operator\">--</span><span class=\"token keyword\">public</span><span class=\"token operator\">-</span>ip<span class=\"token operator\">-</span>address<span class=\"token operator\">-</span>dns<span class=\"token operator\">-</span>name nasa<span class=\"token operator\">-</span>dns</code></pre></div>\n<br/>\n<p>Oracle Data FILEìš© ë””ìŠ¤í¬ ìƒì„±</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">az vm disk attach <span class=\"token operator\">--</span>name disk01 <span class=\"token operator\">--</span><span class=\"token keyword\">new</span> <span class=\"token operator\">--</span>resource<span class=\"token operator\">-</span><span class=\"token keyword\">group</span> nasatest <span class=\"token operator\">--</span>size<span class=\"token operator\">-</span>gb <span class=\"token number\">64</span> <span class=\"token operator\">--</span>sku StandardSSD_LRS <span class=\"token operator\">--</span>vm<span class=\"token operator\">-</span>name nasa<span class=\"token operator\">-</span>oracle</code></pre></div>\n<br/>\n<p>ì—°ê²°ì„ ìœ„í•œ Port ë°©í™”ë²½ ìˆ˜ì •</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">az network nsg rule create \\\n    <span class=\"token operator\">--</span>resource<span class=\"token operator\">-</span><span class=\"token keyword\">group</span> nasatest \\\n    <span class=\"token operator\">--</span>nsg<span class=\"token operator\">-</span>name nasa<span class=\"token operator\">-</span>oracleNSG \\\n    <span class=\"token operator\">--</span>name nasa<span class=\"token operator\">-</span>oracle \\\n    <span class=\"token operator\">--</span>protocol tcp \\\n    <span class=\"token operator\">--</span>priority <span class=\"token number\">1001</span> \\\n    <span class=\"token operator\">--</span>destination<span class=\"token operator\">-</span>port<span class=\"token operator\">-</span>range <span class=\"token number\">1521</span></code></pre></div>\n<br/>\n<p>ì´ì œ ê¸°ë³¸ì ì¸ ì„¤ì •ì€ ì™„ë£Œë˜ì—ˆìœ¼ë‹ˆ VMì— ì ‘ì† í•œ ë’¤ ëª‡ê°€ì§€ ì‚¬í•­ì„ í™•ì¸í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># sudo su -</span>\n<span class=\"token preprocessor property\"># ls -alt /dev/sd*|head -1</span>\n<span class=\"token punctuation\">[</span>root@nasa<span class=\"token operator\">-</span>oracle <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># ls <span class=\"token operator\">-</span>alt <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sd<span class=\"token operator\">*</span><span class=\"token operator\">|</span>head <span class=\"token operator\">-</span><span class=\"token number\">1</span>\nbrw<span class=\"token operator\">-</span>rw<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root disk <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">32</span> Sep <span class=\"token number\">29</span> <span class=\"token number\">07</span><span class=\"token punctuation\">:</span><span class=\"token number\">31</span> <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc</code></pre></div>\n<br/>\n<p>ì¶”ê°€í•œ Diskë¥¼ í•©ì¹˜ê¸° ìœ„í•´ ë””ìŠ¤í¬ ì„¤ì • ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># parted /dev/sdc mklabel gpt</span>\n<span class=\"token preprocessor property\"># parted -a optimal /dev/sdc mkpart primary 0GB 64GB   </span>\n<span class=\"token preprocessor property\"># parted /dev/sdc print</span>\n\nModel<span class=\"token punctuation\">:</span> Msft <span class=\"token return-type class-name\">Virtual</span> Disk <span class=\"token punctuation\">(</span>scsi<span class=\"token punctuation\">)</span>\nDisk <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc<span class=\"token punctuation\">:</span> <span class=\"token number\">68</span><span class=\"token punctuation\">.</span>7GB\n<span class=\"token return-type class-name\">Sector</span> size <span class=\"token punctuation\">(</span>logical<span class=\"token operator\">/</span>physical<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> 512B<span class=\"token operator\">/</span>4096B\n<span class=\"token class-name\">Partition</span> Table<span class=\"token punctuation\">:</span> gpt\n<span class=\"token class-name\">Disk</span> Flags<span class=\"token punctuation\">:</span>\n\nNumber  Start   End     Size    File system  Name     Flags\n <span class=\"token number\">1</span>      1049kB  <span class=\"token number\">64</span><span class=\"token punctuation\">.</span>0GB  <span class=\"token number\">64</span><span class=\"token punctuation\">.</span>0GB               primary\n\n\n<span class=\"token preprocessor property\"># mkfs -t ext4 /dev/sdc1</span>\n<span class=\"token preprocessor property\"># mkdir /u02</span>\n<span class=\"token preprocessor property\"># mount /dev/sdc1 /u02</span>\n<span class=\"token preprocessor property\"># chmod 777 /u02</span></code></pre></div>\n<br/>\n<p>fstab ë° hosts íŒŒì¼ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># echo </span><span class=\"token string\">\"/dev/sdc1               /u02                    ext4    defaults        0 0\"</span> <span class=\"token operator\">>></span> <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>fstab\n<span class=\"token preprocessor property\"># echo </span><span class=\"token string\">\"&lt;Public IP> &lt;VMname>.eastus.cloudapp.azure.com &lt;VMname>\"</span> <span class=\"token operator\">>></span> <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>hosts</code></pre></div>\n<br/>\n<p>VM ë‚´ì˜ ë°©í™”ë²½ Portë¥¼ ì—´ì–´ì¤ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># firewall-cmd --zone=public --add-port=1521/tcp --permanent</span>\n<span class=\"token preprocessor property\"># firewall-cmd --zone=public --add-port=5502/tcp --permanent</span>\n<span class=\"token preprocessor property\"># firewall-cmd --reload</span></code></pre></div>\n<br/>\n<p>Database ë§Œë“¤ê¸°</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># sudo su - oracle</span>\n<span class=\"token preprocessor property\"># lsnrctl start</span>\nLSNRCTL <span class=\"token keyword\">for</span> Linux<span class=\"token punctuation\">:</span> Version <span class=\"token number\">19.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span> <span class=\"token operator\">-</span> Production <span class=\"token keyword\">on</span> <span class=\"token number\">20</span><span class=\"token operator\">-</span>OCT<span class=\"token operator\">-</span><span class=\"token number\">2020</span> <span class=\"token number\">01</span><span class=\"token punctuation\">:</span><span class=\"token number\">58</span><span class=\"token punctuation\">:</span><span class=\"token number\">18</span>\n\nCopyright <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token number\">1991</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2019</span><span class=\"token punctuation\">,</span> Oracle<span class=\"token punctuation\">.</span>  All rights reserved<span class=\"token punctuation\">.</span>\n\nStarting <span class=\"token operator\">/</span>u01<span class=\"token operator\">/</span>app<span class=\"token operator\">/</span>oracle<span class=\"token operator\">/</span>product<span class=\"token operator\">/</span><span class=\"token number\">19.0</span><span class=\"token number\">.0</span><span class=\"token operator\">/</span>dbhome_1<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>tnslsnr<span class=\"token punctuation\">:</span> please wait<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n\nTNSLSNR <span class=\"token keyword\">for</span> Linux<span class=\"token punctuation\">:</span> Version <span class=\"token number\">19.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span> <span class=\"token operator\">-</span> Production\nLog messages written to <span class=\"token operator\">/</span>u01<span class=\"token operator\">/</span>app<span class=\"token operator\">/</span>oracle<span class=\"token operator\">/</span>diag<span class=\"token operator\">/</span>tnslsnr<span class=\"token operator\">/</span>vmoracle19c<span class=\"token operator\">/</span>listener<span class=\"token operator\">/</span>alert<span class=\"token operator\">/</span>log<span class=\"token punctuation\">.</span>xml\n<span class=\"token class-name\">Listening</span> <span class=\"token keyword\">on</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>tcp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST<span class=\"token operator\">=</span>vmoracle19c<span class=\"token punctuation\">.</span>eastus<span class=\"token punctuation\">.</span>cloudapp<span class=\"token punctuation\">.</span>azure<span class=\"token punctuation\">.</span>com<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT<span class=\"token operator\">=</span><span class=\"token number\">1521</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token return-type class-name\">Connecting</span> to <span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>tcp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST<span class=\"token operator\">=</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT<span class=\"token operator\">=</span><span class=\"token number\">1521</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nSTATUS of the LISTENER\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\nAlias                     LISTENER\nVersion                   TNSLSNR <span class=\"token keyword\">for</span> Linux<span class=\"token punctuation\">:</span> Version <span class=\"token number\">19.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span> <span class=\"token operator\">-</span> Production\nStart Date                <span class=\"token number\">20</span><span class=\"token operator\">-</span>OCT<span class=\"token operator\">-</span><span class=\"token number\">2020</span> <span class=\"token number\">01</span><span class=\"token punctuation\">:</span><span class=\"token number\">58</span><span class=\"token punctuation\">:</span><span class=\"token number\">18</span>\nUptime                    <span class=\"token number\">0</span> days <span class=\"token number\">0</span> hr<span class=\"token punctuation\">.</span> <span class=\"token number\">0</span> min<span class=\"token punctuation\">.</span> <span class=\"token number\">0</span> sec\nTrace Level               off\n<span class=\"token class-name\">Security</span>                  ON<span class=\"token punctuation\">:</span> Local OS Authentication\nSNMP                      OFF\nListener Log File         <span class=\"token operator\">/</span>u01<span class=\"token operator\">/</span>app<span class=\"token operator\">/</span>oracle<span class=\"token operator\">/</span>diag<span class=\"token operator\">/</span>tnslsnr<span class=\"token operator\">/</span>vmoracle19c<span class=\"token operator\">/</span>listener<span class=\"token operator\">/</span>alert<span class=\"token operator\">/</span>log<span class=\"token punctuation\">.</span>xml\nListening Endpoints Summary<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n  <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>tcp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST<span class=\"token operator\">=</span>vmoracle19c<span class=\"token punctuation\">.</span>eastus<span class=\"token punctuation\">.</span>cloudapp<span class=\"token punctuation\">.</span>azure<span class=\"token punctuation\">.</span>com<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT<span class=\"token operator\">=</span><span class=\"token number\">1521</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nThe listener supports no services\nThe command completed successfully\n\n<span class=\"token preprocessor property\"># mkdir /u02/oradata</span></code></pre></div>\n<br/>\n<p>DB ìƒì„±ë„ìš°ë¯¸ë¡œ Database ìƒì„±.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">dbca <span class=\"token operator\">-</span>silent \\\n   <span class=\"token operator\">-</span>createDatabase \\\n   <span class=\"token operator\">-</span>templateName General_Purpose<span class=\"token punctuation\">.</span>dbc \\\n   <span class=\"token operator\">-</span>gdbname nasatest \\\n   <span class=\"token operator\">-</span>sid nasatest \\\n   <span class=\"token operator\">-</span>responseFile NO_VALUE \\\n   <span class=\"token operator\">-</span>characterSet AL32UTF8 \\\n   <span class=\"token operator\">-</span>sysPassword @dldnjstjr123 \\\n   <span class=\"token operator\">-</span>systemPassword @dldnjstjr123 \\\n   <span class=\"token operator\">-</span>createAsContainerDatabase <span class=\"token boolean\">false</span> \\\n   <span class=\"token operator\">-</span>databaseType MULTIPURPOSE \\\n   <span class=\"token operator\">-</span>automaticMemoryManagement <span class=\"token boolean\">false</span> \\\n   <span class=\"token operator\">-</span>storageType FS \\\n   <span class=\"token operator\">-</span>datafileDestination <span class=\"token string\">\"/u02/oradata/\"</span> \\\n   <span class=\"token operator\">-</span>ignorePreReqs\n\n\n\ndbca <span class=\"token operator\">-</span>ignorePrereqFailure <span class=\"token operator\">-</span>silent <span class=\"token operator\">-</span>createDatabase <span class=\"token operator\">-</span>templateName General_Purpose<span class=\"token punctuation\">.</span>dbc <span class=\"token operator\">-</span>gdbName ORCL <span class=\"token operator\">-</span><span class=\"token class-name\">nodeinfo</span> node1<span class=\"token punctuation\">,</span>node2 <span class=\"token operator\">-</span>characterset AL32UTF8\n\nPrepare <span class=\"token keyword\">for</span> db operation\n<span class=\"token number\">10</span><span class=\"token operator\">%</span> complete\nCopying database files\n<span class=\"token number\">40</span><span class=\"token operator\">%</span> complete\nCreating <span class=\"token keyword\">and</span> starting Oracle instance\n<span class=\"token number\">42</span><span class=\"token operator\">%</span> complete\n<span class=\"token number\">46</span><span class=\"token operator\">%</span> complete\n<span class=\"token number\">50</span><span class=\"token operator\">%</span> complete\n<span class=\"token number\">54</span><span class=\"token operator\">%</span> complete\n<span class=\"token number\">60</span><span class=\"token operator\">%</span> complete\nCompleting Database Creation\n<span class=\"token number\">66</span><span class=\"token operator\">%</span> complete\n<span class=\"token number\">69</span><span class=\"token operator\">%</span> complete\n<span class=\"token number\">70</span><span class=\"token operator\">%</span> complete\nExecuting Post Configuration Actions\n<span class=\"token number\">100</span><span class=\"token operator\">%</span> complete\nDatabase creation complete<span class=\"token punctuation\">.</span> For details check the <span class=\"token class-name\">logfiles</span> at<span class=\"token punctuation\">:</span>\n <span class=\"token operator\">/</span>u01<span class=\"token operator\">/</span>app<span class=\"token operator\">/</span>oracle<span class=\"token operator\">/</span>cfgtoollogs<span class=\"token operator\">/</span>dbca<span class=\"token operator\">/</span><span class=\"token class-name\">oratest1<span class=\"token punctuation\">.</span>\nDatabase</span> Information<span class=\"token punctuation\">:</span>\nGlobal <span class=\"token class-name\">Database</span> Name<span class=\"token punctuation\">:</span>oratest1\n<span class=\"token return-type class-name\">System</span> <span class=\"token function\">Identifier</span><span class=\"token punctuation\">(</span>SID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>oratest1\nLook at the log file <span class=\"token string\">\"/u01/app/oracle/cfgtoollogs/dbca/oratest1/oratest1.log\"</span> <span class=\"token keyword\">for</span> further details<span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">[</span>oracle@nasa<span class=\"token operator\">-</span>oracle <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$</code></pre></div>\n<br/>\n<p>ì˜¤ë¼í´ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># ORACLE_SID=nasatest; export ORACLE_SID</span>\n<span class=\"token preprocessor property\"># echo </span><span class=\"token string\">\"export ORACLE_SID=nasatest\"</span> <span class=\"token operator\">>></span> <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc</code></pre></div>\n<br/>\n<p>Oracle db init ë“±ë¡</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># sed -i 's/:N/:Y/' /etc/oratab</span></code></pre></div>\n<br/>\n<p>/etc/init.d/dbora íŒŒì¼ ìƒì„± í›„ ì•„ë˜ ë‚´ìš© ì¶”ê°€</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">#!/bin/sh</span>\n<span class=\"token preprocessor property\"># chkconfig: 345 99 10</span>\n<span class=\"token preprocessor property\"># Description: Oracle auto start-stop script.</span>\n<span class=\"token preprocessor property\">#</span>\n<span class=\"token preprocessor property\"># Set ORA_HOME to be equivalent to $ORACLE_HOME.</span>\nORA_HOME<span class=\"token operator\">=</span><span class=\"token operator\">/</span>u01<span class=\"token operator\">/</span>app<span class=\"token operator\">/</span>oracle<span class=\"token operator\">/</span>product<span class=\"token operator\">/</span><span class=\"token number\">19.0</span><span class=\"token number\">.0</span><span class=\"token operator\">/</span><span class=\"token class-name\">dbhome_1</span>\nORA_OWNER<span class=\"token operator\">=</span>oracle\n\n<span class=\"token keyword\">case</span> <span class=\"token string\">\"$1\"</span> <span class=\"token keyword\">in</span>\n'start'<span class=\"token punctuation\">)</span>\n    <span class=\"token preprocessor property\"># Start the Oracle databases:</span>\n    <span class=\"token preprocessor property\"># The following command assumes that the Oracle sign-in</span>\n    <span class=\"token preprocessor property\"># will not prompt the user for any values.</span>\n    <span class=\"token preprocessor property\"># Remove </span><span class=\"token string\">\"&amp;\"</span> <span class=\"token keyword\">if</span> you don't want startup <span class=\"token keyword\">as</span> <span class=\"token class-name\">a</span> background process<span class=\"token punctuation\">.</span>\n    su <span class=\"token operator\">-</span> $ORA_OWNER <span class=\"token operator\">-</span>c <span class=\"token string\">\"$ORA_HOME/bin/dbstart $ORA_HOME\"</span> <span class=\"token operator\">&amp;</span>\n    touch <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span><span class=\"token keyword\">lock</span><span class=\"token operator\">/</span>subsys<span class=\"token operator\">/</span>dbora\n    <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n\n'stop'<span class=\"token punctuation\">)</span>\n    <span class=\"token preprocessor property\"># Stop the Oracle databases:</span>\n    <span class=\"token preprocessor property\"># The following command assumes that the Oracle sign-in</span>\n    <span class=\"token preprocessor property\"># will not prompt the user for any values.</span>\n    su <span class=\"token operator\">-</span> $ORA_OWNER <span class=\"token operator\">-</span>c <span class=\"token string\">\"$ORA_HOME/bin/dbshut $ORA_HOME\"</span> <span class=\"token operator\">&amp;</span>\n    rm <span class=\"token operator\">-</span>f <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span><span class=\"token keyword\">lock</span><span class=\"token operator\">/</span>subsys<span class=\"token operator\">/</span>dbora\n    <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\nesac</code></pre></div>\n<br/>\n<p>ê¶Œí•œ ë³€ê²½ ë° Link ìƒì„±</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># chgrp dba /etc/init.d/dbora</span>\n<span class=\"token preprocessor property\"># chmod 750 /etc/init.d/dbora</span>\n<span class=\"token preprocessor property\"># ln -s /etc/init.d/dbora /etc/rc.d/rc0.d/K01dbora</span>\n<span class=\"token preprocessor property\"># ln -s /etc/init.d/dbora /etc/rc.d/rc3.d/S99dbora</span>\n<span class=\"token preprocessor property\"># ln -s /etc/init.d/dbora /etc/rc.d/rc5.d/S99dbora</span></code></pre></div>\n<br/>\n<p>Oracle Develop ì—°ê²°ì„ ìœ„í•œ DB User ìƒì„±. (DataFactoryì—ì„œëŠ” sys userë¡œ ë°”ë¡œ ì—°ê²°ì´ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># sqlplus sys as sysdba</span>\n\nSQL<span class=\"token operator\">*</span>Plus<span class=\"token punctuation\">:</span> Release <span class=\"token number\">19.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span> <span class=\"token operator\">-</span> Production <span class=\"token keyword\">on</span> Thu Sep <span class=\"token number\">30</span> <span class=\"token number\">05</span><span class=\"token punctuation\">:</span><span class=\"token number\">44</span><span class=\"token punctuation\">:</span><span class=\"token number\">51</span> <span class=\"token number\">2021</span>\nVersion <span class=\"token number\">19.3</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span>\n\nCopyright <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token number\">1982</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2019</span><span class=\"token punctuation\">,</span> Oracle<span class=\"token punctuation\">.</span>  All rights <span class=\"token class-name\">reserved<span class=\"token punctuation\">.</span>\n\nEnter</span> password<span class=\"token punctuation\">:</span>\n\n<span class=\"token class-name\">Connected</span> to<span class=\"token punctuation\">:</span>\nOracle Database 19c Enterprise Edition Release <span class=\"token number\">19.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span> <span class=\"token operator\">-</span> Production\nVersion <span class=\"token number\">19.3</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span>\n\nSQL<span class=\"token operator\">></span> CREATE USER nasa1515 IDENTIFIED <span class=\"token class-name\">BY</span> qwer1234<span class=\"token punctuation\">;</span>\nUser created<span class=\"token punctuation\">.</span>\n\nSQL<span class=\"token operator\">></span> grant all privileges <span class=\"token class-name\">to</span> nasa1515<span class=\"token punctuation\">;</span>\nGrant succeeded<span class=\"token punctuation\">.</span>\n\nSQL<span class=\"token operator\">></span> exit</code></pre></div>\n<br/>\n<p>ìƒì„±í•œ DB USERë¡œ ì ‘ì†í•´ Test ë°ì´í„° ìƒì„±</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># sqlplus nasa1515</span>\n\nSQL<span class=\"token operator\">*</span>Plus<span class=\"token punctuation\">:</span> Release <span class=\"token number\">19.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span> <span class=\"token operator\">-</span> Production <span class=\"token keyword\">on</span> Thu Sep <span class=\"token number\">30</span> <span class=\"token number\">05</span><span class=\"token punctuation\">:</span><span class=\"token number\">42</span><span class=\"token punctuation\">:</span><span class=\"token number\">44</span> <span class=\"token number\">2021</span>\nVersion <span class=\"token number\">19.3</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span>\n\nCopyright <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token number\">1982</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2019</span><span class=\"token punctuation\">,</span> Oracle<span class=\"token punctuation\">.</span>  All rights <span class=\"token class-name\">reserved<span class=\"token punctuation\">.</span>\n\nEnter</span> password<span class=\"token punctuation\">:</span>\n\n<span class=\"token class-name\">Connected</span> to<span class=\"token punctuation\">:</span>\nOracle Database 19c Enterprise Edition Release <span class=\"token number\">19.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span> <span class=\"token operator\">-</span> Production\nVersion <span class=\"token number\">19.3</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span>\n\nSQL<span class=\"token operator\">></span> CREATE <span class=\"token return-type class-name\">TABLE</span> test <span class=\"token punctuation\">(</span> <span class=\"token return-type class-name\">seq</span> <span class=\"token function\">NUMBER</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>  <span class=\"token class-name\">NOT</span> NULL <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nTable created<span class=\"token punctuation\">.</span>\n\nSQL<span class=\"token operator\">></span> insert <span class=\"token keyword\">into</span> <span class=\"token return-type class-name\">test</span> values <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n<span class=\"token number\">1</span> row created<span class=\"token punctuation\">.</span>\n\nSQL<span class=\"token operator\">></span> insert <span class=\"token keyword\">into</span> <span class=\"token return-type class-name\">test</span> values <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n<span class=\"token number\">1</span> row created<span class=\"token punctuation\">.</span>\n\nSQL<span class=\"token operator\">></span> insert <span class=\"token keyword\">into</span> <span class=\"token return-type class-name\">test</span> values <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n<span class=\"token number\">1</span> row created<span class=\"token punctuation\">.</span>\n\nSQL<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> test<span class=\"token punctuation\">;</span>\n\n       SEQ\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\n         <span class=\"token number\">1</span>\n         <span class=\"token number\">2</span>\n         <span class=\"token number\">3</span></code></pre></div>\n<br/>\n<p>ì—°ê²° ìš© Oracle ì™„ë£Œ</p>\n<br/>\n<hr>\n<h2 id=\"ğŸ¤¦â™‚ï¸-azure-infra-network-êµ¬ì„±\" style=\"position:relative;\"><a href=\"#%F0%9F%A4%A6%E2%99%82%EF%B8%8F-azure-infra-network-%EA%B5%AC%EC%84%B1\" aria-label=\"ğŸ¤¦â™‚ï¸ azure infra network êµ¬ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¤¦â€â™‚ï¸ Azure Infra (Network) êµ¬ì„±</h2>\n<br/>\n<h3 id=\"azure-network-logic\" style=\"position:relative;\"><a href=\"#azure-network-logic\" aria-label=\"azure network logic permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Azure Network Logic</h3>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/136329888-548f3328-886d-47f5-a6a5-e803e6584096.png\" alt=\"image\"></p>\n<ul>\n<li>DataFactoryì—ì„œ Privateí•œ Self-hoted VMì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  ë‘˜ ê°„ì˜ Private Endpoint ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.</li>\n</ul>\n<br/>\n<br/>\n<p>ìœ„ë¥¼ ì¬í˜„í•˜ê¸° ìœ„í•œ ì—°ê²°ì„ ìœ„í•œ VPCì˜ Subnetì˜ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ëˆ  ë¶„ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/136308851-a864141d-2dde-48dc-8f31-b1d328f2ebc1.png\" alt=\"image\"></p>\n<ul>\n<li>pub-01 : jumpserverê°€ Public IPë¥¼ í• ë‹¹ ë°›ì„ Subnet</li>\n<li>Pri-01 : DataFactoryì™€ ì—°ê²°ëœ self-hosted VMì´ ì‚¬ìš© í•  Subnet</li>\n</ul>\n<br/>\n<br/>\n<h3 id=\"vpc-endpoint-ìƒì„±\" style=\"position:relative;\"><a href=\"#vpc-endpoint-%EC%83%9D%EC%84%B1\" aria-label=\"vpc endpoint ìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VPC Endpoint ìƒì„±</h3>\n<p>ìì„¸í•œ ì„¤ì •ì˜ ê²½ìš° <a href=\"\">ê³µì‹ DOC</a> í™•ì¸ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.<br>\nì €ëŠ” Private ì—°ê²° ì‹œ í•„ìš”í•œ êµ¬ì„±ì— ëŒ€í•´ì„œë§Œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<br/>\n<p>Azure Potalì—ì„œ Private link Serviceë¡œ ì ‘ì†í•œ ë’¤ Private endpoint Tabìœ¼ë¡œ ì´ë™ í›„ ADD í•©ë‹ˆë‹¤.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/136330216-b9d5e688-101b-4972-a4c2-2fc98701f420.png\" alt=\"image\"></p>\n<br/>\n<br/>\n<p>Basics Tabì—ì„œëŠ” ê¸°ë³¸ ì •ë³´ë¥¼ ì…ë ¥í•˜ê³ , Resource Tabì—ì„œ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•©ë‹ˆë‹¤.\n<img src=\"https://user-images.githubusercontent.com/69498804/136331315-4813eae8-90fa-4a91-8685-90cdd8a0b4e7.png\" alt=\"image\"></p>\n<ul>\n<li>Subscription</li>\n<li>Resource Type</li>\n<li>Resource</li>\n<li>Target sub-resource (í•´ë‹¹ ì„¤ì •ì˜ ê²½ìš° Self-Hosted VMì„ ì‚¬ìš©í•˜ë ¤ë©´ datafactoryë¡œ ê³ ì •ì…ë‹ˆë‹¤.)</li>\n</ul>\n<br/>\n<br/>\n<p>Configuration Tabì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•©ë‹ˆë‹¤.\n<img src=\"https://user-images.githubusercontent.com/69498804/136331788-54a9972d-b228-4930-9410-1781d796882e.png\" alt=\"image\"></p>\n<ul>\n<li>subnet : self-hosted VMì˜ Subnetì„ ì„ íƒ</li>\n<li>Resource Group : Self-hoted VMì´ ìœ„ì¹˜í•˜ê³  ìˆëŠ” RG ì„ íƒ</li>\n</ul>\n<br/>\n<br/>\n<p>ê·¸ëŸ¼ ë‹¤ìŒê³¼ ê°™ì´ ìƒì„±ëœ Endpointë¥¼ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n<img src=\"https://user-images.githubusercontent.com/69498804/136331888-f721eb44-1850-402a-a24c-b9d85ec7dfc1.png\" alt=\"image\"></p>\n<br/>\n<br/>\n<p>ì¶”ê°€ì ìœ¼ë¡œ DataFactory Instance -> Network Tabì—ì„œë„ endpoint ì—°ê²°ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n<img src=\"https://user-images.githubusercontent.com/69498804/136331932-4a19e1a3-cf21-43b1-b170-7d35bc33fd40.png\" alt=\"image\"></p>\n<br/>\n<hr>\n<h2 id=\"-databricks-self-hosted-vm-ì—°ë™\" style=\"position:relative;\"><a href=\"#-databricks-self-hosted-vm-%EC%97%B0%EB%8F%99\" aria-label=\" databricks self hosted vm ì—°ë™ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ˜‚ DataBricks Self-hosted VM ì—°ë™</h2>\n<br/>\n<p>ì ‘ì† ë£¨íŠ¸ : Azure Data Factory Studio â†’ ê´€ë¦¬ â†’ í†µí•©ëŸ°íƒ€ì„ â†’ ìƒˆë¡œë§Œë“¤ê¸° â†’ Azure, ìì²´ í˜¸ìŠ¤íŒ… â†’ ìì²´ í˜¸ìŠ¤íŒ… â†’ ìƒì„±\n<img src=\"https://user-images.githubusercontent.com/69498804/136332154-3d59c2fd-55fd-4d40-8de9-4715078d8fd0.png\" alt=\"image\"></p>\n<br/>\n<br/>\n<p>ìƒì„±ë˜ë©´ ì•„ì§ ì—°ê²°ì´ ë˜ì§€ ì•Šì€ ìì²´ í˜¸ìŠ¤íŒ… ëŸ°íƒ€ì„ì´ ìƒì„±ë˜ëŠ”ë° ì ‘ì†í•˜ì—¬<br>\ní†µí•© ëŸ°íƒ€ì„ íŒŒì¼ì€ ë‹¤ìš´í•œ ë’¤ ì„¤ì • Tabì˜ Key ê°’ì„ ì €ì¥í•´ë‘¡ë‹ˆë‹¤.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/136332397-1e076bef-c666-4551-8eae-cee4986fccee.png\" alt=\"image\"></p>\n<br/>\n<br/>\n<p>ì´ì œ JumpServer -> Self-hosted VMìœ¼ë¡œ RDP ì ‘ì† í›„ Self-Hostedì— ë‹¤ìš´ë¡œë“œ ë°›ì€ ëŸ°íƒ€ì„ íŒŒì¼ì„ ì„¤ì¹˜ í•©ë‹ˆë‹¤.<br>\nì„¤ì¹˜ê°€ ì™„ë£Œë˜ë©´ ì•„ë˜ì™€ ê°™ì€ intergration Runtime managerê°€ ì‹¤í–‰ë˜ëŠ”ë° ì•„ê¹Œ ì €ì¥í•´ë‘” Key ê°’ì„ ì…ë ¥í•˜ì—¬ ì—°ê²°í•©ë‹ˆë‹¤.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/136332713-79287322-d5bf-42c6-b09d-8f297dc4a318.png\" alt=\"image\"></p>\n<br/>\n<br/>\n<p>ì •ìƒì ìœ¼ë¡œ Private endpoint ì„¤ì •ì„ í–ˆë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ Runtimeì´ ì¶”ê°€ë©ë‹ˆë‹¤.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/136332894-38051fbd-717f-443e-8352-3631d0b4cebe.png\" alt=\"image\"></p>\n<br/>\n<hr>\n<h2 id=\"-oracle-data-ingestion\" style=\"position:relative;\"><a href=\"#-oracle-data-ingestion\" aria-label=\" oracle data ingestion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ˜œ Oracle Data Ingestion</h2>\n<br/>\n<p>DataFactory -> Factory Resource -> Data Set -> create -> Oracle ê²€ìƒ‰!</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/136333296-1259339c-afc3-4a61-9a67-fa1ed1b6a87e.png\" alt=\"image\"></p>\n<br/>\n<br/>\n<p>ì´í›„ ì—°ê²°ì •ë³´ì— ëŒ€í•œ ê°’ì€ ìœ„ì—ì„œ ìƒì„±í•œ Oracleì˜ SID ê°’ì´ë‚˜ DB ì ‘ì† ì •ë³´ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/136334629-2d3c334d-2ed4-4fae-b603-7f97d9679ac1.png\" alt=\"image\"></p>\n<ul>\n<li>ì—°ê²°í…ŒìŠ¤íŠ¸ ê²°ê³¼ : ì •ìƒ!</li>\n</ul>\n<br/>\n<br/>\n<p>ì¶”ê°€ ì†ì„±ì„¤ì • ë¶€ë¶„ì—ì„œëŠ” ìœ„ì—ì„œ ìƒì„±í•œ Table ê°’ì„ ë„£ì–´ì¤ë‹ˆë‹¤.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/136334743-9d7b839b-3214-4b1c-911d-80fedf9f2fcb.png\" alt=\"image\"></p>\n<br/>\n<br/>\n<p>ì—°ê²°ì„ ë§ˆì¹˜ê²Œ ë˜ë©´ Oracle DataSetì´ ìƒì„±ì´ ë˜ê³ , í•´ë‹¹ ë°ì´í„°ë¥¼ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n<img src=\"https://user-images.githubusercontent.com/69498804/136335374-af3c07bd-b888-4618-beb8-1f740877625b.png\" alt=\"image\"></p>\n<br/>\n<p>ì´ì œ DataFactoryì˜ íŒŒì´í”„ë¼ì¸ì—ì„œ Flow (ETL), Data Migration ë“± ë‹¤ì–‘í•œ ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n<img src=\"https://user-images.githubusercontent.com/69498804/136335528-cf52026c-c431-4186-ad6b-bb509b0b2c90.png\" alt=\"image\"></p>\n<p>-> í•´ë‹¹ ë¶€ë¶„ì€ ë‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œ ë” ìì„¸íˆ ì •ë¦¬í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<br/>\n<hr>\n<h2 id=\"ë§ˆì¹˜ë©°\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"ë§ˆì¹˜ë©° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆì¹˜ë©°â€¦</h2>\n<p>GCPì˜ ê²½ìš° DataFlow, Proc ë“± ë§ì€ Resource ë“¤ì„ ì‚¬ìš©í•´ë´¤ì§€ë§Œ ì´ì œ Azure ìª½ì˜ Data Rosouceë¥¼ ì‚¬ìš©í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.<br>\në‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œ ëµ™ê² ìŠµë‹ˆë‹¤.</p>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-azure-datafactory\">âœ” Azure DataFactory?</a></li>\n<li><a href=\"#-%EA%B5%AC%EC%B6%95-%EC%98%88%EC%A0%95-architecture\">ğŸ‘Œ êµ¬ì¶• ì˜ˆì • Architecture</a></li>\n<li><a href=\"#-datafactory-%EC%83%9D%EC%84%B1\">âœŒ DataFactory ìƒì„±.</a></li>\n<li><a href=\"#-oracle-db-%EA%B5%AC%EC%B6%95-azure-vm\">ğŸ‘ Oracle DB êµ¬ì¶• (Azure VM)</a></li>\n<li>\n<p><a href=\"#%F0%9F%A4%A6%E2%99%82%EF%B8%8F-azure-infra-network-%EA%B5%AC%EC%84%B1\">ğŸ¤¦â€â™‚ï¸ Azure Infra (Network) êµ¬ì„±</a></p>\n<ul>\n<li><a href=\"#azure-network-logic\">Azure Network Logic</a></li>\n<li><a href=\"#vpc-endpoint-%EC%83%9D%EC%84%B1\">VPC Endpoint ìƒì„±</a></li>\n</ul>\n</li>\n<li><a href=\"#-databricks-self-hosted-vm-%EC%97%B0%EB%8F%99\">ğŸ˜‚ DataBricks Self-hosted VM ì—°ë™</a></li>\n<li><a href=\"#-oracle-data-ingestion\">ğŸ˜œ Oracle Data Ingestion</a></li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">ë§ˆì¹˜ë©°â€¦</a></li>\n</ul>\n</div>","frontmatter":{"date":"September 05, 2021","title":"[DATA, AZURE] Azure DataFactoryë¡œ Oracle Data ìˆ˜ì§‘í•˜ê¸°","categories":"CLOUD DATA","author":"nasa1515","emoji":"ğŸ¤¦â€â™‚ï¸"},"fields":{"slug":"/azure-datafactory/"}},"site":{"siteMetadata":{"siteUrl":"https://nasa1515.com","comments":{"utterances":{"repo":"nasa1515/nasablog"}}}}},"pageContext":{"slug":"/data-gcpdataflow/","nextSlug":"/azure-coludshellerror/","prevSlug":"/azure-datafactory/"}},"staticQueryHashes":["1073350324","2938748437"]}