{"componentChunkName":"component---src-templates-blog-template-js","path":"/linux-systemd/","result":{"data":{"cur":{"id":"662977c8-879a-59cd-8534-7d40a4356f94","html":"<p>머리말  </p>\n<p>기존 CentOS Version 5.x , 6.x 만 경험 해본 저로써는 CentOS 7버전 부터는\n다시 리눅스를 배우고 있다고 생각하게 됩니다.<br>\n이번 포스트에서는 기존 버전에서 사용하던 init 에서 바뀐 systemd에 대해 포스트 합니다.  </p>\n<hr>\n<h2 id=\"-systemd-란\" style=\"position:relative;\"><a href=\"#-systemd-%EB%9E%80\" aria-label=\" systemd 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ SYSTEMD 란?</h2>\n<p>기존 INIT이 사라지고 새롭게 사용하는 프로세스 관리 Demon<br>\n역할 : [시스템, 로그, 서비스, 초기화 스크립트 관리 기능 수행]</p>\n<p>👌 간단 요약<br>\nSYSTEMD를 요약하면 부팅 중 시작하는 서비스(혹 데몬)들을 관리하는 것이라고 볼 수 있습니다.    </p>\n<ul>\n<li>부팅 시점에 정의한 서비스들을 병렬적으로 실행 할 수 있습니다. (init의 경우 직렬 스크립트 실행)</li>\n<li>특정 서비스 동작 후에 원하는 서비스가 동작하도록 정의 할 수 있습니다.</li>\n<li>init은 서비스 실행,중지를 <code class=\"language-text\">service service.name start | stop | restart</code> 으로 제어 합니다.<br>\n</li>\n<li>systemd는 <code class=\"language-text\">systemctl start | stop | restart unit.name</code> 으로 제어합니다.<br>\ninit은 데몬들에 <code class=\"language-text\">service</code> 라는 네이밍을 붙여 사용했고 systemd은 <code class=\"language-text\">unit</code> 이라는 이름을 붙여 사용합니다.<br>\n</li>\n<li>systemd는 <code class=\"language-text\">unit.name.service</code> 파일을 <code class=\"language-text\">systemctl enable unit.name.service or unit.name</code> 명령으로 설치합니다.<br>\n<code class=\"language-text\">systemctl enable unit.name</code> 명령어를 실행하면 관련 서비스를 <code class=\"language-text\">/etc/systemd/system/.target</code> 경로에 링크 파일을 생성하게 됩니다.<br>\n추가로 <code class=\"language-text\">systemctl disable.unit.name</code> 명령어를 실행하면 링크 파일을 삭제한다.  </li>\n<li>systemd는 최소한의 서비스를 실행시키고 병렬화해서 실행시키는데 목표를 두고 있기에 이전보다 부팅 속도가 빠른 편 입니다.  \t\t</li>\n</ul>\n<hr>\n<h2 id=\"-기능-및-특징\" style=\"position:relative;\"><a href=\"#-%EA%B8%B0%EB%8A%A5-%EB%B0%8F-%ED%8A%B9%EC%A7%95\" aria-label=\" 기능 및 특징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ 기능 및 특징</h2>\n<p>  개인적으로 중요하다고 생각 하는 기능만 요약했습니다.  </p>\n<ul>\n<li>init 프로세스에 대한 호환성 제공 [legacy방식의 Run level 사용 X]</li>\n<li>부팅 시 서비스 병렬 실행 [기존 init 의 직렬 방식 대비 효율성 UP]</li>\n<li>\n<p>Service 대신 유닛 사용 [etc/systemd/system/ 아래 유닛의 링크 존재] .Target의 경우 기존의 Run level들의 대체 파일</p>\n<p><code class=\"language-text\">ex) multi-user.target</code></p>\n</li>\n<li>Time Out [약 5분정도의 유예기간 존재]</li>\n</ul>\n<br/>\n<h3 id=\"주요-유닛파일-위치\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9A%94-%EC%9C%A0%EB%8B%9B%ED%8C%8C%EC%9D%BC-%EC%9C%84%EC%B9%98\" aria-label=\"주요 유닛파일 위치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주요 유닛파일 위치</h3>\n<br/>\n<ol>\n<li>/etc/systemd/system  </li>\n<li>/run/systemd/system  </li>\n<li>*/usr/lib/sys-temd/system</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ ls <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>systemd\nbootchart<span class=\"token punctuation\">.</span>conf journald<span class=\"token punctuation\">.</span>conf  logind<span class=\"token punctuation\">.</span>conf  system  system<span class=\"token punctuation\">.</span>conf  user  user<span class=\"token punctuation\">.</span>conf</code></pre></div>\n<br/>\n<h3 id=\"유닛의-개념\" style=\"position:relative;\"><a href=\"#%EC%9C%A0%EB%8B%9B%EC%9D%98-%EA%B0%9C%EB%85%90\" aria-label=\"유닛의 개념 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>유닛의 개념</h3>\n<p>5.X, 6.X Version의 <code class=\"language-text\">Service 와 동일</code>합니다.  </p>\n<ul>\n<li>\n<p>유닛목록</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">service\nsocket\nbusname\ntarget\nsnapshot\ndevice\nmount\nautomount\nswap\ntimer\npath\nslice\nscope</code></pre></div>\n</li>\n</ul>\n<br/>\n<h3 id=\"서브커맨더\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B8%8C%EC%BB%A4%EB%A7%A8%EB%8D%94\" aria-label=\"서브커맨더 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서브커맨더</h3>\n<p>[systemctl subcommand [option]</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> systemctl list<span class=\"token operator\">-</span>units <span class=\"token punctuation\">[</span><span class=\"token operator\">-</span>t<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>a 옵션 사용<span class=\"token punctuation\">]</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> systemctl list<span class=\"token operator\">-</span>units<span class=\"token operator\">-</span>files <span class=\"token punctuation\">[</span>활성화 확인<span class=\"token punctuation\">]</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> systemctl list<span class=\"token operator\">-</span>sockets <span class=\"token punctuation\">[</span>소켓확인<span class=\"token punctuation\">]</span>\n<span class=\"token number\">4</span><span class=\"token punctuation\">)</span> systemctl <span class=\"token keyword\">is</span><span class=\"token operator\">-</span>active <span class=\"token punctuation\">[</span><span class=\"token class-name\">demon</span> name<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>특정 유닛 실행 확인<span class=\"token punctuation\">]</span>\n<span class=\"token number\">5</span><span class=\"token punctuation\">)</span> systemctl <span class=\"token keyword\">is</span><span class=\"token operator\">-</span>enabled <span class=\"token punctuation\">[</span><span class=\"token class-name\">demon</span> name<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>특정 유닛 활성화 확인<span class=\"token punctuation\">]</span>\n<span class=\"token number\">6</span><span class=\"token punctuation\">)</span> systemctl list<span class=\"token operator\">-</span>dependencies <span class=\"token punctuation\">[</span><span class=\"token class-name\">demon</span> name<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>의존성 확인<span class=\"token punctuation\">]</span>\n\t\nex<span class=\"token punctuation\">)</span> systemctl status sshd\n\tsystemctl restart sshd<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<h3 id=\"sshdservice-unit-file-내용\" style=\"position:relative;\"><a href=\"#sshdservice-unit-file-%EB%82%B4%EC%9A%A9\" aria-label=\"sshdservice unit file 내용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>sshd.service UNIT File 내용</h3>\n<p>cat /usr/lib/systemd/system/sshd.service [서비스 유닛 파일 내용]<br>\n<code class=\"language-text\">Unit</code>, <code class=\"language-text\">Service</code>, <code class=\"language-text\">Install</code> 3개의 필드로 나눠져있습니다.\n</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">Unit</span></span><span class=\"token punctuation\">]</span>\nDescription<span class=\"token operator\">=</span>OpenSSH server <span class=\"token class-name\">daemon</span>\nDocumentation<span class=\"token operator\">=</span>man<span class=\"token punctuation\">:</span><span class=\"token function\">sshd</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> man<span class=\"token punctuation\">:</span><span class=\"token function\">sshd_config</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\nAfter<span class=\"token operator\">=</span>network<span class=\"token punctuation\">.</span>target sshd<span class=\"token operator\">-</span><span class=\"token class-name\">keygen<span class=\"token punctuation\">.</span>service</span>\nWants<span class=\"token operator\">=</span>sshd<span class=\"token operator\">-</span>keygen<span class=\"token punctuation\">.</span>service\n<span class=\"token punctuation\">[</span>Service<span class=\"token punctuation\">]</span>\nType<span class=\"token operator\">=</span><span class=\"token class-name\">notify</span>\nEnvironmentFile<span class=\"token operator\">=</span><span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>sysconfig<span class=\"token operator\">/</span><span class=\"token class-name\">sshd</span>\nExecStart<span class=\"token operator\">=</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>sbin<span class=\"token operator\">/</span>sshd <span class=\"token operator\">-</span>D $<span class=\"token class-name\">OPTIONS</span>\nExecReload<span class=\"token operator\">=</span><span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>kill <span class=\"token operator\">-</span>HUP $<span class=\"token class-name\">MAINPID</span>\t\nKillMode<span class=\"token operator\">=</span><span class=\"token class-name\">process</span>\nRestart<span class=\"token operator\">=</span><span class=\"token keyword\">on</span><span class=\"token operator\">-</span><span class=\"token class-name\">failure</span>\nRestartSec<span class=\"token operator\">=</span>42s\n<span class=\"token punctuation\">[</span>Install<span class=\"token punctuation\">]</span>\nWantedBy<span class=\"token operator\">=</span>multi<span class=\"token operator\">-</span>user<span class=\"token punctuation\">.</span>target</code></pre></div>\n<hr>\n<h2 id=\"-부트-프로세스\" style=\"position:relative;\"><a href=\"#-%EB%B6%80%ED%8A%B8-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4\" aria-label=\" 부트 프로세스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>😁 부트 프로세스</h2>\n<p>기존의 regacy 방식에서 부팅 시 사용되던 <code class=\"language-text\">init</code>이 <code class=\"language-text\">Systemd</code>로 변경습니다.<br>\n다만 BIOS/UEFI -> BOOT LOADER -> Kernel 메모리 적재까지는 동일합니다.  </p>\n<br/>\n<h3 id=\"최상위-pid---1-init---systemd\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%83%81%EC%9C%84-pid---1-init---systemd\" aria-label=\"최상위 pid   1 init   systemd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최상위 PID - 1 [init] -> SYSTEMD</h3>\n<p><img src=\"https://image.slidesharecdn.com/rhel7newfeaturesystemdbooting-160327092549/95/enterprise-linux-7-new-featuresystemdbooting-28-1024.jpg?cb=1459070873\"></p>\n<br/>\n<h3 id=\"리눅스-부팅-과정-설명\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EB%88%85%EC%8A%A4-%EB%B6%80%ED%8C%85-%EA%B3%BC%EC%A0%95-%EC%84%A4%EB%AA%85\" aria-label=\"리눅스 부팅 과정 설명 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리눅스 부팅 과정 설명</h3>\n<p><img src=\"https://image.slidesharecdn.com/rhel7newfeaturesystemdbooting-160327092549/95/enterprise-linux-7-new-featuresystemdbooting-29-1024.jpg?cb=1459070873\"></p>\n<p><img src=\"https://image.slidesharecdn.com/rhel7newfeaturesystemdbooting-160327092549/95/enterprise-linux-7-new-featuresystemdbooting-30-1024.jpg?cb=1459070873\"></p>\n<br/>\n<h2 id=\"-run-level-변경\" style=\"position:relative;\"><a href=\"#-run-level-%EB%B3%80%EA%B2%BD\" aria-label=\" run level 변경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👏 Run Level 변경</h2>\n<p>기존 init 커맨드와 달리 숫자 기반이 아닌 런 레벨에 대한 설정 세트를 통해서 런 레벨을 변경합니다.</p>\n<h3 id=\"싱글모드기존-런레벨1\" style=\"position:relative;\"><a href=\"#%EC%8B%B1%EA%B8%80%EB%AA%A8%EB%93%9C%EA%B8%B0%EC%A1%B4-%EB%9F%B0%EB%A0%88%EB%B2%A81\" aria-label=\"싱글모드기존 런레벨1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>싱글모드(기존 런레벨1)</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ systemctl rescue</code></pre></div>\n<h3 id=\"멀티유저모드기존-런레벨3\" style=\"position:relative;\"><a href=\"#%EB%A9%80%ED%8B%B0%EC%9C%A0%EC%A0%80%EB%AA%A8%EB%93%9C%EA%B8%B0%EC%A1%B4-%EB%9F%B0%EB%A0%88%EB%B2%A83\" aria-label=\"멀티유저모드기존 런레벨3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>멀티유저모드(기존 런레벨3)</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ systemctl isolate multi<span class=\"token operator\">-</span>user<span class=\"token punctuation\">.</span>target\n$ systemctl isolate runlevel3<span class=\"token punctuation\">.</span>target</code></pre></div>\n<ul>\n<li>\n<p>과거 init 시스템에 익숙한 사용자를 위해서 runlevel3 라는 이름으로<br>\nmulti-user.target 파일을 링크를 걸어두어 두가지 명령이 모두 사용가능 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ ls <span class=\"token operator\">-</span>l <span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>systemd<span class=\"token operator\">/</span>system<span class=\"token operator\">/</span>runlevel3<span class=\"token punctuation\">.</span>target\nlrwxrwxrwx<span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root root <span class=\"token number\">17</span> Oct <span class=\"token number\">21</span> <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">28</span> <span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>systemd<span class=\"token operator\">/</span>system<span class=\"token operator\">/</span>runlevel3<span class=\"token punctuation\">.</span>target <span class=\"token operator\">-></span> multi<span class=\"token operator\">-</span>user<span class=\"token punctuation\">.</span>target</code></pre></div>\n</li>\n</ul>\n<h3 id=\"그래픽모드기존-런레벨5\" style=\"position:relative;\"><a href=\"#%EA%B7%B8%EB%9E%98%ED%94%BD%EB%AA%A8%EB%93%9C%EA%B8%B0%EC%A1%B4-%EB%9F%B0%EB%A0%88%EB%B2%A85\" aria-label=\"그래픽모드기존 런레벨5 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>그래픽모드(기존 런레벨5)</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ systemctl isolate graphical<span class=\"token punctuation\">.</span>target\n$ systemctl isolate runlevel5<span class=\"token punctuation\">.</span>target</code></pre></div>\n<ul>\n<li>\n<p>멀티유저모드와 마찬가지로 2가지 명령으로 전환이 가능 합니다<br>\n실제 기존 형태의 런레벨+숫자 형태의 Target파일은 아래 링크로 연결되어 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">lrwxrwxrwx<span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root root <span class=\"token number\">15</span> Oct <span class=\"token number\">21</span> <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">28</span> runlevel0<span class=\"token punctuation\">.</span>target <span class=\"token operator\">-></span> poweroff<span class=\"token punctuation\">.</span>target\nlrwxrwxrwx<span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root root <span class=\"token number\">13</span> Oct <span class=\"token number\">21</span> <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">28</span> runlevel1<span class=\"token punctuation\">.</span>target <span class=\"token operator\">-></span> rescue<span class=\"token punctuation\">.</span>target\nlrwxrwxrwx<span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root root <span class=\"token number\">17</span> Oct <span class=\"token number\">21</span> <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">28</span> runlevel2<span class=\"token punctuation\">.</span>target <span class=\"token operator\">-></span> multi<span class=\"token operator\">-</span>user<span class=\"token punctuation\">.</span>target\nlrwxrwxrwx<span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root root <span class=\"token number\">17</span> Oct <span class=\"token number\">21</span> <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">28</span> runlevel3<span class=\"token punctuation\">.</span>target <span class=\"token operator\">-></span> multi<span class=\"token operator\">-</span>user<span class=\"token punctuation\">.</span>target\nlrwxrwxrwx<span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root root <span class=\"token number\">17</span> Oct <span class=\"token number\">21</span> <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">28</span> runlevel4<span class=\"token punctuation\">.</span>target <span class=\"token operator\">-></span> multi<span class=\"token operator\">-</span>user<span class=\"token punctuation\">.</span>target\nlrwxrwxrwx<span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root root <span class=\"token number\">16</span> Oct <span class=\"token number\">21</span> <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">28</span> runlevel5<span class=\"token punctuation\">.</span>target <span class=\"token operator\">-></span> graphical<span class=\"token punctuation\">.</span>target\nlrwxrwxrwx<span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root root <span class=\"token number\">13</span> Oct <span class=\"token number\">21</span> <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">28</span> runlevel6<span class=\"token punctuation\">.</span>target <span class=\"token operator\">-></span> reboot<span class=\"token punctuation\">.</span>target</code></pre></div>\n<p>즉, 시스템 종료/재부팅을 위한 런레벨도 여전히 사용가능합니다.!!</p>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-런레벨-기본-값-설정\" style=\"position:relative;\"><a href=\"#-%EB%9F%B0%EB%A0%88%EB%B2%A8-%EA%B8%B0%EB%B3%B8-%EA%B0%92-%EC%84%A4%EC%A0%95\" aria-label=\" 런레벨 기본 값 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🙌 런레벨 기본 값 설정</h2>\n<p>상기에서 전환하는 런레벨 Target을 아래와 같은 명령을 통해서 기본 값으로 설정 할 수 있습니다.<br>\n또한, 현재 설정된 기본 값을 확인 할 수도 있습니다.<br>\n</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ systemctl <span class=\"token keyword\">set</span><span class=\"token operator\">-</span><span class=\"token keyword\">default</span> multi<span class=\"token operator\">-</span>user<span class=\"token punctuation\">.</span>target\n$ systemctl <span class=\"token keyword\">get</span><span class=\"token operator\">-</span><span class=\"token keyword\">default</span>\nmulti<span class=\"token operator\">-</span>user<span class=\"token punctuation\">.</span>target</code></pre></div>\n<br/>\n<h2 id=\"-시스템-명령\" style=\"position:relative;\"><a href=\"#-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%AA%85%EB%A0%B9\" aria-label=\" 시스템 명령 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎉 시스템 명령</h2>\n<p>앞서 각각의 런레벨 파일이 poweroff.target 등 으로 연결되어있는 것을 확인하였는데<br>\nisolate 명령이 아닌 시스템 명령을 통해서 해당 Target을 바로 적용하는게 가능합니다. </p>\n<ul>\n<li>\n<p>아래 몇가지 예시를 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ <span class=\"token return-type class-name\">systemctl</span> poweroff <span class=\"token punctuation\">(</span>Shutdown처리 후 Power<span class=\"token operator\">-</span>Off처리<span class=\"token punctuation\">)</span>\n$ <span class=\"token return-type class-name\">systemctl</span> emergency <span class=\"token punctuation\">(</span>Rescue와 유사하지만 root 파일시스템만 읽기전용으로 마운트한다<span class=\"token punctuation\">)</span>\n$ <span class=\"token return-type class-name\">systemctl</span> halt <span class=\"token punctuation\">(</span>Shutdown처리 후 Halt처리<span class=\"token punctuation\">)</span>\n$ <span class=\"token return-type class-name\">systemctl</span> reboot <span class=\"token punctuation\">(</span>Shutdown처리 후 리부팅처리<span class=\"token punctuation\">)</span>\n$ <span class=\"token return-type class-name\">systemctl</span> kexec <span class=\"token punctuation\">(</span>kexec를 통해서 리부팅한다<span class=\"token punctuation\">)</span>\n$ <span class=\"token return-type class-name\">systemctl</span> suspend <span class=\"token punctuation\">(</span>시스템 정지<span class=\"token punctuation\">)</span>\n$ <span class=\"token return-type class-name\">systemctl</span> hibernate <span class=\"token punctuation\">(</span>시스템 Hibernate<span class=\"token punctuation\">)</span>\n$ systemctl hybrid<span class=\"token operator\">-</span>sleep <span class=\"token punctuation\">(</span>시스템을 Hibernate하고 정지시킨다<span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\n\t\n<span class=\"token operator\">%</span> System suspend 상태와 System hibernate 의 차이점<span class=\"token punctuation\">.</span>\n\t\nSuspend <span class=\"token punctuation\">:</span> 컴퓨터를 끄지 않습니다<span class=\"token punctuation\">.</span> \n컴퓨터와 모든 주변 장치를 저전력 모드로 설정합니다<span class=\"token punctuation\">.</span> \n어떤 이유로 든 배터리가 방전되거나 컴퓨터가 꺼지면 \n현재 세션 및 저장되지 않은 변경 내용이 손실됩니다\n\t\nHibernate <span class=\"token punctuation\">:</span> 컴퓨터의 상태를 하드 디스크에 저장하고 완전히 전원을 끕니다<span class=\"token punctuation\">.</span> \n다시 시작하면 저장된 상태가 RAM으로 복원됩니다<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<h2 id=\"-systemd-vs-sysv-run-level\" style=\"position:relative;\"><a href=\"#-systemd-vs-sysv-run-level\" aria-label=\" systemd vs sysv run level permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✨ SYSTEMD vs SYSV Run level</h2>\n<ul>\n<li>\n<p>level 2,3의 차이 : NFS 파일 시스템 사용 가능 여부 </p>\n<p><img src=\"https://image.slidesharecdn.com/rhel7newfeaturesystemdbooting-160327092549/95/enterprise-linux-7-new-featuresystemdbooting-13-1024.jpg?cb=1459070873\"></p>\n</li>\n<li>\n<h3 id=\"run-level-접속-변경\" style=\"position:relative;\"><a href=\"#run-level-%EC%A0%91%EC%86%8D-%EB%B3%80%EA%B2%BD\" aria-label=\"run level 접속 변경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Run level 접속 변경</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> Bios 커널 화면에서 <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> 커맨드로 편집모드 진입<span class=\"token punctuation\">.</span>  \n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> LINUX16으로 시작하는 커널의 설정 마지막에 runlevel 구문 추가\n<span class=\"token operator\">%</span> <span class=\"token punctuation\">:</span> systemd<span class=\"token punctuation\">.</span>unit<span class=\"token operator\">=</span>rescure<span class=\"token punctuation\">.</span>target\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> recure 모드로 접속 확인</code></pre></div>\n</li>\n<li>\n<h3 id=\"root-password-복구-방법\" style=\"position:relative;\"><a href=\"#root-password-%EB%B3%B5%EA%B5%AC-%EB%B0%A9%EB%B2%95\" aria-label=\"root password 복구 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Root Password 복구 방법</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> Bios 커널 화면에서 <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> 커맨드로 편집모드 진입<span class=\"token punctuation\">.</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> LINUX16으로 시작하는 커널설정의 마지막 rc<span class=\"token punctuation\">.</span><span class=\"token keyword\">break</span> 구문 추가\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span>sysroot 리마운트\n\t  <span class=\"token operator\">-</span> mount <span class=\"token operator\">|</span> grep <span class=\"token operator\">-</span>w <span class=\"token string\">\"/sysroot\"</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">[</span>루트 마운트 확인<span class=\"token punctuation\">]</span>\n\t  <span class=\"token operator\">-</span> mount <span class=\"token operator\">-</span><span class=\"token class-name\">o</span> remount<span class=\"token punctuation\">,</span>rw <span class=\"token operator\">/</span>sysroot <span class=\"token operator\">-</span> <span class=\"token punctuation\">[</span>루트 마운트 권한 수정 <span class=\"token operator\">-</span> 현재는 권한이 없음<span class=\"token punctuation\">]</span>\n\t  <span class=\"token operator\">-</span> chroot <span class=\"token operator\">/</span>sysroot <span class=\"token operator\">-</span> <span class=\"token punctuation\">[</span>root 디렉토리 권한 변경<span class=\"token punctuation\">]</span>\n\t  <span class=\"token operator\">-</span> 패스워드 재 설정 <span class=\"token punctuation\">[</span>ROOT Shell 접속 후 passwd<span class=\"token punctuation\">]</span>\n\t  <span class=\"token operator\">-</span> touch <span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>autorerabel <span class=\"token operator\">-</span> <span class=\"token punctuation\">[</span>selinux 정책 상 다시 리라벨 설정을 해줘야 적용됨 안만들면 리로드<span class=\"token punctuation\">]</span>\n\t  <span class=\"token operator\">-</span> 재부팅 후 변경된 ROOT 패스워드 확인<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-systemd-%EB%9E%80\">✔ SYSTEMD 란?</a></li>\n<li>\n<p><a href=\"#-%EA%B8%B0%EB%8A%A5-%EB%B0%8F-%ED%8A%B9%EC%A7%95\">✌ 기능 및 특징</a></p>\n<ul>\n<li><a href=\"#%EC%A3%BC%EC%9A%94-%EC%9C%A0%EB%8B%9B%ED%8C%8C%EC%9D%BC-%EC%9C%84%EC%B9%98\">주요 유닛파일 위치</a></li>\n<li><a href=\"#%EC%9C%A0%EB%8B%9B%EC%9D%98-%EA%B0%9C%EB%85%90\">유닛의 개념</a></li>\n<li><a href=\"#%EC%84%9C%EB%B8%8C%EC%BB%A4%EB%A7%A8%EB%8D%94\">서브커맨더</a></li>\n<li><a href=\"#sshdservice-unit-file-%EB%82%B4%EC%9A%A9\">sshd.service UNIT File 내용</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EB%B6%80%ED%8A%B8-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4\">😁 부트 프로세스</a></p>\n<ul>\n<li><a href=\"#%EC%B5%9C%EC%83%81%EC%9C%84-pid---1-init---systemd\">최상위 PID - 1 init -> SYSTEMD</a></li>\n<li><a href=\"#%EB%A6%AC%EB%88%85%EC%8A%A4-%EB%B6%80%ED%8C%85-%EA%B3%BC%EC%A0%95-%EC%84%A4%EB%AA%85\">리눅스 부팅 과정 설명</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-run-level-%EB%B3%80%EA%B2%BD\">👏 Run Level 변경</a></p>\n<ul>\n<li><a href=\"#%EC%8B%B1%EA%B8%80%EB%AA%A8%EB%93%9C%EA%B8%B0%EC%A1%B4-%EB%9F%B0%EB%A0%88%EB%B2%A81\">싱글모드(기존 런레벨1)</a></li>\n<li><a href=\"#%EB%A9%80%ED%8B%B0%EC%9C%A0%EC%A0%80%EB%AA%A8%EB%93%9C%EA%B8%B0%EC%A1%B4-%EB%9F%B0%EB%A0%88%EB%B2%A83\">멀티유저모드(기존 런레벨3)</a></li>\n<li><a href=\"#%EA%B7%B8%EB%9E%98%ED%94%BD%EB%AA%A8%EB%93%9C%EA%B8%B0%EC%A1%B4-%EB%9F%B0%EB%A0%88%EB%B2%A85\">그래픽모드(기존 런레벨5)</a></li>\n</ul>\n</li>\n<li><a href=\"#-%EB%9F%B0%EB%A0%88%EB%B2%A8-%EA%B8%B0%EB%B3%B8-%EA%B0%92-%EC%84%A4%EC%A0%95\">🙌 런레벨 기본 값 설정</a></li>\n<li><a href=\"#-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%AA%85%EB%A0%B9\">🎉 시스템 명령</a></li>\n<li><a href=\"#-systemd-vs-sysv-run-level\">✨ SYSTEMD vs SYSV Run level</a></li>\n</ul>\n</div>","excerpt":"머리말   기존 CentOS Version 5.x , 6.x 만 경험 해본 저로써는 CentOS 7버전 부터는 \n다시 리눅스를 배우고 있다고 생각하게 됩니다. 이번 포스트에서는 기존 버전에서 사용하던 init 에서 바뀐 systemd에 대해 포스트 합니다.   ✔ SYSTEMD 란? 기존 INIT이 사라지고 새롭게 사용하는 프로세스 관리 Demon 역할 : 시스템, 로그, 서비스, 초기화 스크립트 관리 기능 수행 👌 간단 요약 SYSTEMD를 요약하면 부팅 중 시작하는 서비스(혹 데몬)들을 관리하는 것이라고 볼 수 있습니다.     부팅 시점에 정의한 서비스들을 병렬적으로 실행 할 수 있습니다. (init의 경우 직렬…","frontmatter":{"date":"June 23, 2021","title":"[LINUX] - SYSTEMD","categories":"LINUX","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/linux-systemd/"}},"next":{"id":"0237d257-e5a3-57a2-82a8-5f8a341d531f","html":"<p>머리말  </p>\n<p>안녕하세요 NASA 입니다!<br>\n이번 포스트에서는 리눅스 가상메모리 즉 SWAP에 대해서 포스트 했습니다.  </p>\n<hr>\n<h2 id=\"-가상메모리\" style=\"position:relative;\"><a href=\"#-%EA%B0%80%EC%83%81%EB%A9%94%EB%AA%A8%EB%A6%AC\" aria-label=\" 가상메모리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ 가상메모리</h2>\n<br/>\n<h3 id=\"가상메모리-swap\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EC%83%81%EB%A9%94%EB%AA%A8%EB%A6%AC-swap\" aria-label=\"가상메모리 swap permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>가상메모리 (SWAP)</h3>\n<p>swap 은 물리 메모리가 부족할 경우를 대비해 만든 영역입니다.<br>\n간단히 말해서 메모리 부족으로 인한 이슈를 막기위해 HDD로 확보해놓은 메모리 공간입니다.</p>\n<br/>\n<h3 id=\"swap을-쓰는-이유\" style=\"position:relative;\"><a href=\"#swap%EC%9D%84-%EC%93%B0%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"swap을 쓰는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SWAP을 쓰는 이유?</h3>\n<ul>\n<li>\n<ol>\n<li>메모리 부족</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>멀티태스킹(스와핑, 페이징등 우선순위 프로그램의 리사이클을 위해)</li>\n</ol>\n</li>\n<li>\n<ol start=\"3\">\n<li>메모리(full) 덤핑</li>\n</ol>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>스와핑 : 전체 프로세스 주소 공간 또는 공유 할 수 없는 텍스트 데이터<br>\n세그먼트를 스왑 장치에 복사하거나 <code class=\"language-text\">한번에</code> (일반적으로 디스크) 복사하는 것을 말합니다</p>\n<ul>\n<li>swap in : 하드디스크의 프로세스를 메모리에 보내는 행위  </li>\n<li>swap out : 메모리에서 프로세스는 내보내는 행위  </li>\n<li>페이징 : 주소 공간의 하나 이상의 페이지를 복사하는 것을 말합니다.   </li>\n</ul>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-스왑-명령어\" style=\"position:relative;\"><a href=\"#-%EC%8A%A4%EC%99%91-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\" 스왑 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👌 스왑 명령어</h2>\n<br/>\n<p>다음 명령어로 스왑 메모리에 관련된 작업을 수행 할 수 있습니다.</p>\n<ul>\n<li>스왑메모리 생성 : <code class=\"language-text\">mkswap</code>  </li>\n<li>스왑메모리 활성화 : <code class=\"language-text\">swapon</code>  </li>\n<li>스왑메모리 비활성화 : <code class=\"language-text\">swapoff</code></li>\n</ul>\n<br/>\n<p>스왑 파티션 생성 방법</p>\n<p>스왑 파티션 생성 전 아래 명령어로 스왑 영역을 확인 할 수 있습니다.</p>\n<ul>\n<li>swapon -s   </li>\n<li>free</li>\n<li>df </li>\n</ul>\n<br/>\n<h3 id=\"파티셔닝을-통한-스왑-영역-활성화\" style=\"position:relative;\"><a href=\"#%ED%8C%8C%ED%8B%B0%EC%85%94%EB%8B%9D%EC%9D%84-%ED%86%B5%ED%95%9C-%EC%8A%A4%EC%99%91-%EC%98%81%EC%97%AD-%ED%99%9C%EC%84%B1%ED%99%94\" aria-label=\"파티셔닝을 통한 스왑 영역 활성화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>파티셔닝을 통한 스왑 영역 활성화</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token number\">1</span><span class=\"token punctuation\">.</span> 디스크 추가 <span class=\"token punctuation\">(</span>fdisk <span class=\"token operator\">-</span>l <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc<span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> parted 명령어 사용\n<span class=\"token number\">2</span><span class=\"token punctuation\">.</span> 파티셔닝 <span class=\"token punctuation\">(</span><span class=\"token named-parameter punctuation\">fstype</span> <span class=\"token punctuation\">:</span> linux swap <span class=\"token punctuation\">[</span><span class=\"token number\">82</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> 파티션 타입을 LINUX SWAP으로 변경\n<span class=\"token number\">3</span><span class=\"token punctuation\">.</span> 스왑 영역 생성 <span class=\"token punctuation\">(</span>mkswap <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc3<span class=\"token punctuation\">)</span> \n<span class=\"token number\">4</span><span class=\"token punctuation\">.</span> 스왑 영역 활성화 <span class=\"token punctuation\">(</span>swapon <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc3 마운트<span class=\"token punctuation\">)</span>\n<span class=\"token number\">5</span><span class=\"token punctuation\">.</span> 활성화 시킨 SWAP을 fstab에 등록\nblkid 또는 lsblk <span class=\"token operator\">-</span>f 로 <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc3의 UUID 확인 <span class=\"token operator\">-</span> UUID로 하지 않으면 스왑이 풀림\n  \n<span class=\"token preprocessor property\"># vim /etc/fstab</span>\n구문추가<span class=\"token punctuation\">)</span> 파티션 경로 <span class=\"token punctuation\">(</span><span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc6<span class=\"token punctuation\">)</span>또는 UUID\n<span class=\"token preprocessor property\"># UUID swap swap defaults 0 0</span>\n  \n<span class=\"token number\">6</span><span class=\"token punctuation\">.</span> swapon <span class=\"token operator\">-</span>a <span class=\"token punctuation\">(</span><span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>fstab의 파일을 현재 메모리에 활성화 해서 오류 확인<span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\nswap 을 비활성화\n\n<span class=\"token punctuation\">(</span>swapoff <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>sdc3<span class=\"token punctuation\">)</span>   </code></pre></div>\n<br/>\n<h3 id=\"정말-간단한-swap-메모리-증설-방법\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A7%90-%EA%B0%84%EB%8B%A8%ED%95%9C-swap-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%A6%9D%EC%84%A4-%EB%B0%A9%EB%B2%95\" aria-label=\"정말 간단한 swap 메모리 증설 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정말 간단한 swap 메모리 증설 방법</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token number\">1</span><span class=\"token punctuation\">.</span> sudo dd <span class=\"token keyword\">if</span><span class=\"token operator\">=</span><span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span><span class=\"token class-name\">zero</span> of<span class=\"token operator\">=</span><span class=\"token operator\">/</span>root<span class=\"token operator\">/</span><span class=\"token class-name\">fileA</span> count<span class=\"token operator\">=</span><span class=\"token number\">4000</span> bs<span class=\"token operator\">=</span>1024k  \ndd <span class=\"token punctuation\">:</span> 블록단위로 파일을 복사<span class=\"token punctuation\">,</span>저장 하는 명령어\n\n<span class=\"token number\">2</span><span class=\"token punctuation\">.</span> sudo chmod <span class=\"token number\">600</span> <span class=\"token operator\">/</span>root<span class=\"token operator\">/</span>fileA \n권한 설정\n     \n<span class=\"token number\">3</span><span class=\"token punctuation\">.</span> sudo mkswap <span class=\"token operator\">/</span>root<span class=\"token operator\">/</span>fileA                                  \n<span class=\"token comment\">// 해당 파일로 스왑 생성</span>\n<span class=\"token number\">4</span><span class=\"token punctuation\">.</span> sudo swapon <span class=\"token operator\">/</span>root<span class=\"token operator\">/</span>fileA\n<span class=\"token number\">5</span><span class=\"token punctuation\">.</span> fatab 등록</code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EA%B0%80%EC%83%81%EB%A9%94%EB%AA%A8%EB%A6%AC\">✔ 가상메모리</a></p>\n<ul>\n<li><a href=\"#%EA%B0%80%EC%83%81%EB%A9%94%EB%AA%A8%EB%A6%AC-swap\">가상메모리 (SWAP)</a></li>\n<li><a href=\"#swap%EC%9D%84-%EC%93%B0%EB%8A%94-%EC%9D%B4%EC%9C%A0\">SWAP을 쓰는 이유?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EC%8A%A4%EC%99%91-%EB%AA%85%EB%A0%B9%EC%96%B4\">👌 스왑 명령어</a></p>\n<ul>\n<li><a href=\"#%ED%8C%8C%ED%8B%B0%EC%85%94%EB%8B%9D%EC%9D%84-%ED%86%B5%ED%95%9C-%EC%8A%A4%EC%99%91-%EC%98%81%EC%97%AD-%ED%99%9C%EC%84%B1%ED%99%94\">파티셔닝을 통한 스왑 영역 활성화</a></li>\n<li><a href=\"#%EC%A0%95%EB%A7%90-%EA%B0%84%EB%8B%A8%ED%95%9C-swap-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%A6%9D%EC%84%A4-%EB%B0%A9%EB%B2%95\">정말 간단한 swap 메모리 증설 방법</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 23, 2021","title":"[LINUX] - SWAP","categories":"LINUX","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/linux-swap/"}},"prev":{"id":"bc98a4b2-be2d-5ad0-9cd8-3f6e865d6438","html":"<h2 id=\"-firewall-침입차단시스템-란\" style=\"position:relative;\"><a href=\"#-firewall-%EC%B9%A8%EC%9E%85%EC%B0%A8%EB%8B%A8%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%9E%80\" aria-label=\" firewall 침입차단시스템 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ FIREWALL (침입차단시스템) 란?</h2>\n<p>리눅스 방화벽은 외부의 네트워크에서 내부의 시스템으로 접근하는 네트워크 패킷을 차단합니다.<br>\n리눅스 방화벽의 경우 Netfilter에 의해 적용되며 시스템 내부로 전달, 폐기를 결정하는 모듈입니다.</p>\n<ul>\n<li>\n<p>RHEL7부터는 방화벽을 관리하는 데몬이 firewalld로 변경되어 방화벽 설정은<br>\niptables 명령어 대신 아래 명령어를 사용해야 합니다.</p>\n<ul>\n<li>firewall-cmd (콘솔  </li>\n<li>firewall-config (X-Windows)  </li>\n</ul>\n</li>\n</ul>\n<br/>\n<ul>\n<li>기존에 사용했던 <code class=\"language-text\">iptables</code>이 완전이 사라진 것은 아닙니다. firewalld이 iptables를 기반으로 동작하고 있을 뿐 입니다.<br>\n(firewalld은 iptables를 의존 패키지로 두고 있음)</li>\n</ul>\n<br/>\n<ul>\n<li>방화벽에는 <code class=\"language-text\">zone</code>(영역)이라는 것이 존재하는데 개방된 네트워크와 연결되어 있다면 public zone(공개 영역)의 룰이 적용되고,<br>\n개인 네트워크에 있다면 다른 zone의 룰을 적용할 수 있습니다. 네트워크 형태에 따라 적용하는 방화벽 룰을 다르게 할 수 있습니다.<br>\n(서버 용도로 리눅스를 사용한다면 개방된 네트워크 public zone만 필요)  </li>\n</ul>\n<br/>\n<ul>\n<li>iptables의 룰 변경시 서비스 중지 및 설정 변경을 하여야 했지만 firewall의 경우 KVM, openstack과 같은 가상화, 클라우드 환경하에서의 필터링 정책을 동적으로 추가 가능합니다.<br>\n(동적이기때문에 언제든지 설정을 변경할 수 있고 바로 실행되며 방화벽을 다시 로딩할 필요가 없으므로 기존 네트워크 연결에서 의도하지 않은 중단이 발생하지 않습니다.)  </li>\n</ul>\n<br/>\n<ul>\n<li>iptables의 경우 응용프로그램 자체에서 필터링 정책을 구성하는 경우 iptables 정책과 충돌되는 등의 문제가 발생하였으나<br>\nfirewalld는 DBUS API를 통한 정보 공유를 통해 정책 충돌 문제를 해결합니다.  </li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-firewall-구동방식\" style=\"position:relative;\"><a href=\"#-firewall-%EA%B5%AC%EB%8F%99%EB%B0%A9%EC%8B%9D\" aria-label=\" firewall 구동방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✨ firewall 구동방식</h2>\n<ul>\n<li>설정파일은 /etc/firewalld/zones/public.xml 파일로 xml 형식으로 존재합니다.<br>\n해당 파일에는 <code class=\"language-text\">firewall-cmd --permanent --zone=public</code> 명령으로 추가했던 룰들이 저장되어 있으며<br>\nzone의 설정 파일을 변경할 경우 방화벽을 reload 해야 반영이 됩니다.  </li>\n</ul>\n<br/>\n<ul>\n<li>firewall-cmd 에서 <code class=\"language-text\">--permanent</code> 옵션이 들어간다면 바로 반영이 되지않고 zone의 설정파일에서 룰에 대한 추가/수정만 이루어집니다.<br>\n따라서 —permanet 옵션을 넣었다면 방화벽을 reload 해야합니다 (설정파일에 추가된 룰은 영구반영)<br>\n만약 —permanet 옵션을 넣지않으면 일시적으로 즉시 반영되지만 재부팅을 할 경우 zone의 설정파일에 추가되지 않은 룰이므로 전부 삭제가 됩니다.  </li>\n<li>\n<p>특징  </p>\n<ol>\n<li>XML 파일 형태로 정책 보관 가능  </li>\n<li>Runtime(실행중) 및 Permanent(영구) 설정 가능</li>\n</ol>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-관련-보안-시스템\" style=\"position:relative;\"><a href=\"#-%EA%B4%80%EB%A0%A8-%EB%B3%B4%EC%95%88-%EC%8B%9C%EC%8A%A4%ED%85%9C\" aria-label=\" 관련 보안 시스템 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>😂 관련 보안 시스템</h2>\n<h3 id=\"침입차단시스템fw\" style=\"position:relative;\"><a href=\"#%EC%B9%A8%EC%9E%85%EC%B0%A8%EB%8B%A8%EC%8B%9C%EC%8A%A4%ED%85%9Cfw\" aria-label=\"침입차단시스템fw permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>침입차단시스템(FW)</h3>\n<ul>\n<li>packet filter : 패킷의 목적지 소스 등의 룰이 맞으면 통과. (3계층까지만 확인)</li>\n<li>application g/w :  모든 계층의 대한 패킷을 확인  (최상위 계층까지) (느리다 - proxy) - 가장 강력한 보안 </li>\n<li>stateful inspection : 방화벽을 통해 전달된 패킷의 응답패킷은 룰을 보지않고 허용한다. (룰이 많아지기 떄문)</li>\n</ul>\n<br/>\n<h3 id=\"침입탐지시스템ids\" style=\"position:relative;\"><a href=\"#%EC%B9%A8%EC%9E%85%ED%83%90%EC%A7%80%EC%8B%9C%EC%8A%A4%ED%85%9Cids\" aria-label=\"침입탐지시스템ids permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>침입탐지시스템(IDS)</h3>\n<p>이미 침입을 하고 동작을 했을 때 반응을 하는 문제점이 있음. (out of path)\n</p>\n<ul>\n<li>시그니쳐 방식 (패턴을 저장하고 패턴을 확인)</li>\n<li>anomaly 방식</li>\n</ul>\n<br/>\n<h3 id=\"침입방지시스템ips---동작-전에-탐지-즉시-반응--inline\" style=\"position:relative;\"><a href=\"#%EC%B9%A8%EC%9E%85%EB%B0%A9%EC%A7%80%EC%8B%9C%EC%8A%A4%ED%85%9Cips---%EB%8F%99%EC%9E%91-%EC%A0%84%EC%97%90-%ED%83%90%EC%A7%80-%EC%A6%89%EC%8B%9C-%EB%B0%98%EC%9D%91--inline\" aria-label=\"침입방지시스템ips   동작 전에 탐지 즉시 반응  inline permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>침입방지시스템(IPS) - 동작 전에 탐지 즉시 반응 , (inline)</h3>\n<ul>\n<li>bastion host : 공인/사설 망에 연결된 호스트 (즉 외부에서 봤을때 가려져있는 호스트들)  </li>\n<li>dual homed g/w : 외부/내부 2개로 나눠져 있는 방화벽의 경우 들어오는, 나가는 모두의 룰을 정해주는 방식  </li>\n<li>screend subnet : NIC 3개 이상,  외부, 내부, DMA(server farm) 으로 나눈다. 즉 사내/공개로 영역을 나눠 관리.</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/64260883/88243392-3c47fe80-cccb-11ea-87d3-34c9157876cf.png\" alt=\"스크린샷, 2020-07-23 09-59-24\"></p>\n<br/>\n<hr>\n<h2 id=\"-firewall-시스템-확인\" style=\"position:relative;\"><a href=\"#-firewall-%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%99%95%EC%9D%B8\" aria-label=\" firewall 시스템 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👏 FireWall 시스템 확인</h2>\n<h3 id=\"usrlibfirewalld--기본-구성-관련-파일\" style=\"position:relative;\"><a href=\"#usrlibfirewalld--%EA%B8%B0%EB%B3%B8-%EA%B5%AC%EC%84%B1-%EA%B4%80%EB%A0%A8-%ED%8C%8C%EC%9D%BC\" aria-label=\"usrlibfirewalld  기본 구성 관련 파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>/usr/lib/firewalld : 기본 구성 관련 파일</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">/</span><span class=\"token punctuation\">]</span>$  ls <span class=\"token operator\">-</span>alrt <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>firewalld<span class=\"token operator\">/</span>\n합계 <span class=\"token number\">20</span>\ndrwxr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span>  <span class=\"token number\">7</span> root root   <span class=\"token number\">81</span>  <span class=\"token number\">4</span>월  <span class=\"token number\">7</span> <span class=\"token number\">23</span><span class=\"token punctuation\">:</span><span class=\"token number\">37</span> <span class=\"token punctuation\">.</span>\ndrwxr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span>  <span class=\"token number\">2</span> root root  <span class=\"token number\">224</span>  <span class=\"token number\">6</span>월 <span class=\"token number\">29</span> <span class=\"token number\">09</span><span class=\"token punctuation\">:</span><span class=\"token number\">39</span> helpers\ndrwxr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span>  <span class=\"token number\">2</span> root root <span class=\"token number\">4096</span>  <span class=\"token number\">6</span>월 <span class=\"token number\">29</span> <span class=\"token number\">09</span><span class=\"token punctuation\">:</span><span class=\"token number\">39</span> icmptypes\ndrwxr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span>  <span class=\"token number\">2</span> root root   <span class=\"token number\">20</span>  <span class=\"token number\">6</span>월 <span class=\"token number\">29</span> <span class=\"token number\">09</span><span class=\"token punctuation\">:</span><span class=\"token number\">39</span> ipsets\ndrwxr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span>  <span class=\"token number\">2</span> root root <span class=\"token number\">8192</span>  <span class=\"token number\">6</span>월 <span class=\"token number\">29</span> <span class=\"token number\">09</span><span class=\"token punctuation\">:</span><span class=\"token number\">39</span> services\ndrwxr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span>  <span class=\"token number\">2</span> root root  <span class=\"token number\">163</span>  <span class=\"token number\">6</span>월 <span class=\"token number\">29</span> <span class=\"token number\">09</span><span class=\"token punctuation\">:</span><span class=\"token number\">39</span> zones\ndr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span> <span class=\"token number\">42</span> root root <span class=\"token number\">4096</span>  <span class=\"token number\">6</span>월 <span class=\"token number\">29</span> <span class=\"token number\">10</span><span class=\"token punctuation\">:</span><span class=\"token number\">23</span> <span class=\"token range operator\">..</span></code></pre></div>\n<h3 id=\"etcfirewalld--설정-파일-규칙-파일\" style=\"position:relative;\"><a href=\"#etcfirewalld--%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC-%EA%B7%9C%EC%B9%99-%ED%8C%8C%EC%9D%BC\" aria-label=\"etcfirewalld  설정 파일 규칙 파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>/etc/firewalld : 설정 파일, 규칙 파일</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">/</span><span class=\"token punctuation\">]</span>$  ls <span class=\"token operator\">-</span>alrt <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>firewalld<span class=\"token operator\">/</span>\n합계 <span class=\"token number\">20</span>\ndrwxr<span class=\"token operator\">-</span>x<span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">.</span>   <span class=\"token number\">2</span> root root   <span class=\"token number\">46</span>  <span class=\"token number\">4</span>월  <span class=\"token number\">7</span> <span class=\"token number\">23</span><span class=\"token punctuation\">:</span><span class=\"token number\">37</span> zones\ndrwxr<span class=\"token operator\">-</span>x<span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">.</span>   <span class=\"token number\">2</span> root root    <span class=\"token number\">6</span>  <span class=\"token number\">4</span>월  <span class=\"token number\">7</span> <span class=\"token number\">23</span><span class=\"token punctuation\">:</span><span class=\"token number\">37</span> services\n<span class=\"token operator\">-</span>rw<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span>r<span class=\"token operator\">--</span><span class=\"token punctuation\">.</span>   <span class=\"token number\">1</span> root root  <span class=\"token number\">272</span>  <span class=\"token number\">4</span>월  <span class=\"token number\">7</span> <span class=\"token number\">23</span><span class=\"token punctuation\">:</span><span class=\"token number\">37</span> lockdown<span class=\"token operator\">-</span>whitelist<span class=\"token punctuation\">.</span>xml\ndrwxr<span class=\"token operator\">-</span>x<span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">.</span>   <span class=\"token number\">2</span> root root    <span class=\"token number\">6</span>  <span class=\"token number\">4</span>월  <span class=\"token number\">7</span> <span class=\"token number\">23</span><span class=\"token punctuation\">:</span><span class=\"token number\">37</span> ipsets\ndrwxr<span class=\"token operator\">-</span>x<span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">.</span>   <span class=\"token number\">2</span> root root    <span class=\"token number\">6</span>  <span class=\"token number\">4</span>월  <span class=\"token number\">7</span> <span class=\"token number\">23</span><span class=\"token punctuation\">:</span><span class=\"token number\">37</span> icmptypes\ndrwxr<span class=\"token operator\">-</span>x<span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">.</span>   <span class=\"token number\">2</span> root root    <span class=\"token number\">6</span>  <span class=\"token number\">4</span>월  <span class=\"token number\">7</span> <span class=\"token number\">23</span><span class=\"token punctuation\">:</span><span class=\"token number\">37</span> helpers\n<span class=\"token operator\">-</span>rw<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span>r<span class=\"token operator\">--</span><span class=\"token punctuation\">.</span>   <span class=\"token number\">1</span> root root <span class=\"token number\">2706</span>  <span class=\"token number\">4</span>월  <span class=\"token number\">7</span> <span class=\"token number\">23</span><span class=\"token punctuation\">:</span><span class=\"token number\">37</span> firewalld<span class=\"token punctuation\">.</span>conf\ndrwxr<span class=\"token operator\">-</span>x<span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">.</span>   <span class=\"token number\">7</span> root root  <span class=\"token number\">133</span>  <span class=\"token number\">6</span>월 <span class=\"token number\">29</span> <span class=\"token number\">09</span><span class=\"token punctuation\">:</span><span class=\"token number\">39</span> <span class=\"token punctuation\">.</span>\ndrwxr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span> <span class=\"token number\">147</span> root root <span class=\"token number\">8192</span>  <span class=\"token number\">7</span>월  <span class=\"token number\">7</span> <span class=\"token number\">18</span><span class=\"token punctuation\">:</span><span class=\"token number\">44</span> <span class=\"token range operator\">..</span></code></pre></div>\n<hr>\n<h2 id=\"-firewall-사용-방법\" style=\"position:relative;\"><a href=\"#-firewall-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95\" aria-label=\" firewall 사용 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👍 FireWall 사용 방법</h2>\n<p>포스트에서는 자주 사용하는 명령 위주만 정리했다.  </p>\n<h3 id=\"포트\" style=\"position:relative;\"><a href=\"#%ED%8F%AC%ED%8A%B8\" aria-label=\"포트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>포트</h3>\n<ul>\n<li>포트추가</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># firewall-cmd --permanent --zone=public --add-port=포트</span>\nex<span class=\"token punctuation\">)</span> firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>permanent <span class=\"token operator\">--</span>zone<span class=\"token operator\">=</span><span class=\"token keyword\">public</span> <span class=\"token operator\">--</span><span class=\"token keyword\">add</span><span class=\"token operator\">-</span>port<span class=\"token operator\">=</span><span class=\"token number\">80</span><span class=\"token operator\">/</span>tcp\n<span class=\"token preprocessor property\"># firewall-cmd --reload   -- 정책 변경 후 reload 필수!!</span></code></pre></div>\n<br/>\n<ul>\n<li>포트 제거</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># firewall-cmd --permanent --zone=public --remove-port=포트</span>\nex<span class=\"token punctuation\">)</span> firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>permanent <span class=\"token operator\">--</span>zone<span class=\"token operator\">=</span><span class=\"token keyword\">public</span> <span class=\"token operator\">--</span><span class=\"token keyword\">remove</span><span class=\"token operator\">-</span>port<span class=\"token operator\">=</span><span class=\"token number\">80</span><span class=\"token operator\">/</span>tcp\n<span class=\"token preprocessor property\"># firewall-cmd --reload</span></code></pre></div>\n<br/>\n<h3 id=\"서비스\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B9%84%EC%8A%A4\" aria-label=\"서비스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서비스</h3>\n<p>서비스에서 사용하는 룰을 적용하려면 아래와 같이 서비스를 추가하면 된다.<br>\n단, 해당 서비스 xml 룰 파일이 <code class=\"language-text\">/usr/lib/firewalld/services</code> 에 있어야 한다.<br>\n그리고 <code class=\"language-text\">/usr/lib/firewalld/services</code> 디렉토리에 있는 서비스 파일들을 수정하려면  /etc/firewalld/services에 복사 후 수정해야 한다.<br>\n(/etc/firewalld/services에 있는 서비스 파일들이 우선 적용되기에 관리상 편리)    </p>\n<ul>\n<li>서비스 추가</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>permanent <span class=\"token operator\">--</span>zone<span class=\"token operator\">=</span><span class=\"token keyword\">public</span> <span class=\"token operator\">--</span><span class=\"token keyword\">add</span><span class=\"token operator\">-</span>service<span class=\"token operator\">=</span>서비스\nex<span class=\"token punctuation\">)</span> firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>permanent <span class=\"token operator\">--</span>zone<span class=\"token operator\">=</span><span class=\"token keyword\">public</span> <span class=\"token operator\">--</span><span class=\"token keyword\">add</span><span class=\"token operator\">-</span>service<span class=\"token operator\">=</span>http\n<span class=\"token preprocessor property\"># firewall-cmd --reload</span></code></pre></div>\n<ul>\n<li>서비스 제거</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>permanent <span class=\"token operator\">--</span>zone<span class=\"token operator\">=</span><span class=\"token keyword\">public</span> <span class=\"token operator\">--</span><span class=\"token keyword\">remove</span><span class=\"token operator\">-</span>service<span class=\"token operator\">=</span>서비스\nex<span class=\"token punctuation\">)</span> firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>permanent <span class=\"token operator\">--</span>zone<span class=\"token operator\">=</span><span class=\"token keyword\">public</span> <span class=\"token operator\">--</span><span class=\"token keyword\">remove</span><span class=\"token operator\">-</span>service<span class=\"token operator\">=</span>http\n<span class=\"token preprocessor property\"># firewall-cmd --reload</span></code></pre></div>\n<br/>\n<h3 id=\"임의의-룰-rich-rule\" style=\"position:relative;\"><a href=\"#%EC%9E%84%EC%9D%98%EC%9D%98-%EB%A3%B0-rich-rule\" aria-label=\"임의의 룰 rich rule permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>임의의 룰 (Rich rule)</h3>\n<p>포트, 서비스 룰 이외에 원하는 룰을 임의로 적용할 수 있다. 예를 들면 ip차단이다.</p>\n<ul>\n<li>룰 추가</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># firewall-cmd --permanent --zone=public --add-rich-rule=</span><span class=\"token string\">\"임의의 룰\"</span>\nex<span class=\"token punctuation\">)</span> firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>permanent <span class=\"token operator\">--</span>zone<span class=\"token operator\">=</span><span class=\"token keyword\">public</span> <span class=\"token operator\">--</span><span class=\"token keyword\">add</span><span class=\"token operator\">-</span>rich<span class=\"token operator\">-</span>rule<span class=\"token operator\">=</span><span class=\"token string\">\"rulefamily=ipv4 source address=192.168.0.4/24 service name=http accept\"</span>\n<span class=\"token preprocessor property\"># firewall-cmd --reload</span></code></pre></div>\n<ul>\n<li>룰 제거</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># firewall-cmd --permanent --zone=public --remove-rich-rule=</span><span class=\"token string\">\"임의의 룰\"</span>\nex<span class=\"token punctuation\">)</span> firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>permanent <span class=\"token operator\">--</span>zone<span class=\"token operator\">=</span><span class=\"token keyword\">public</span> <span class=\"token operator\">--</span><span class=\"token keyword\">remove</span><span class=\"token operator\">-</span>rich<span class=\"token operator\">-</span>rule<span class=\"token operator\">=</span><span class=\"token string\">\"rulefamily=ipv4 source address=192.168.0.4/24 service name=http accept\"</span>\n<span class=\"token preprocessor property\"># firewall-cmd --reload</span></code></pre></div>\n<br/>\n<h4 id=\"응용-예시---http80번-포트-서비스에서-특정-ip-차단\" style=\"position:relative;\"><a href=\"#%EC%9D%91%EC%9A%A9-%EC%98%88%EC%8B%9C---http80%EB%B2%88-%ED%8F%AC%ED%8A%B8-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%97%90%EC%84%9C-%ED%8A%B9%EC%A0%95-ip-%EC%B0%A8%EB%8B%A8\" aria-label=\"응용 예시   http80번 포트 서비스에서 특정 ip 차단 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>응용 예시 - http(80번 포트) 서비스에서 특정 ip 차단</h4>\n<p>웹서버를 운영하다보면 특정ip(스팸같은)를 차단시키고 싶을 때가 있다.<br>\n그럴경우 아래와 같이 임의의 룰을 활용하면 된다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">차단시<span class=\"token punctuation\">)</span>\n<span class=\"token preprocessor property\"># firewall-cmd --permanent --zone=public --add-rich-rule=</span><span class=\"token string\">\"rule family=ipv4 source address=차단ip service name=http reject\"</span>\n차단해제시<span class=\"token punctuation\">)</span>\n<span class=\"token preprocessor property\"># firewall-cmd --permanent --zone=public --remove-rich-rule=</span><span class=\"token string\">\"rule family=ipv4 source address=차단ip service name=http reject\"</span>\n<span class=\"token preprocessor property\"># firewall-cmd --reload</span>\n위 명령을 실행하면 즉시 영구적으로 해당 ip를 웹사이트에 접속하지못하게 차단시킬 수 있다<span class=\"token punctuation\">.</span>\n이 방법은 웹서버 자체에서 ip를 차단시키는 것보다 효과적이다<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<h4 id=\"방화벽-기타-명령어\" style=\"position:relative;\"><a href=\"#%EB%B0%A9%ED%99%94%EB%B2%BD-%EA%B8%B0%ED%83%80-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"방화벽 기타 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>방화벽 기타 명령어</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token operator\">-</span> zone <span class=\"token operator\">-</span>\n<span class=\"token operator\">*</span> 사전 정의된 존 목록 출력\n<span class=\"token preprocessor property\"># firewall-cmd --get-zone</span>\n<span class=\"token operator\">*</span> 전체 존 목록을 상세하게 출력\n<span class=\"token preprocessor property\"># firewall-cmd --list-all-zone</span>\n<span class=\"token operator\">*</span> 기존 존 출력\n<span class=\"token preprocessor property\"># firewall-cmd --get-default-zon</span>\n<span class=\"token operator\">*</span> 활성화된 존 출력\n<span class=\"token preprocessor property\"># firewall-cmd --get-active-zon</span>\n<span class=\"token operator\">*</span> <span class=\"token keyword\">public</span> zone에 있는 서비스 목록\n<span class=\"token preprocessor property\"># firewall-cmd --zone=public --list-service</span>\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n<span class=\"token operator\">-</span> service \n<span class=\"token operator\">*</span> 현재 존재하는 서비스 목록\n<span class=\"token preprocessor property\"># firewall-cmd --get-servic</span>\n<span class=\"token operator\">*</span> permanent 로 등록된 서비스 목록\n<span class=\"token preprocessor property\"># firewall-cmd --permanent --list-al</span>\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n<span class=\"token operator\">-</span> port \n<span class=\"token operator\">*</span> 허용한 포트 목록\n<span class=\"token preprocessor property\"># firewall-cmd --list-ports</span>\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n<span class=\"token operator\">-</span> other \n<span class=\"token operator\">*</span> 방화벽 상태 확인\n<span class=\"token preprocessor property\"># firewall-cmd --stat</span></code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-firewall-%EC%B9%A8%EC%9E%85%EC%B0%A8%EB%8B%A8%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%9E%80\">✔ FIREWALL (침입차단시스템) 란?</a></li>\n<li><a href=\"#-firewall-%EA%B5%AC%EB%8F%99%EB%B0%A9%EC%8B%9D\">✨ firewall 구동방식</a></li>\n<li>\n<p><a href=\"#-%EA%B4%80%EB%A0%A8-%EB%B3%B4%EC%95%88-%EC%8B%9C%EC%8A%A4%ED%85%9C\">😂 관련 보안 시스템</a></p>\n<ul>\n<li><a href=\"#%EC%B9%A8%EC%9E%85%EC%B0%A8%EB%8B%A8%EC%8B%9C%EC%8A%A4%ED%85%9Cfw\">침입차단시스템(FW)</a></li>\n<li><a href=\"#%EC%B9%A8%EC%9E%85%ED%83%90%EC%A7%80%EC%8B%9C%EC%8A%A4%ED%85%9Cids\">침입탐지시스템(IDS)</a></li>\n<li><a href=\"#%EC%B9%A8%EC%9E%85%EB%B0%A9%EC%A7%80%EC%8B%9C%EC%8A%A4%ED%85%9Cips---%EB%8F%99%EC%9E%91-%EC%A0%84%EC%97%90-%ED%83%90%EC%A7%80-%EC%A6%89%EC%8B%9C-%EB%B0%98%EC%9D%91--inline\">침입방지시스템(IPS) - 동작 전에 탐지 즉시 반응 , (inline)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-firewall-%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%99%95%EC%9D%B8\">👏 FireWall 시스템 확인</a></p>\n<ul>\n<li><a href=\"#usrlibfirewalld--%EA%B8%B0%EB%B3%B8-%EA%B5%AC%EC%84%B1-%EA%B4%80%EB%A0%A8-%ED%8C%8C%EC%9D%BC\">/usr/lib/firewalld : 기본 구성 관련 파일</a></li>\n<li><a href=\"#etcfirewalld--%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC-%EA%B7%9C%EC%B9%99-%ED%8C%8C%EC%9D%BC\">/etc/firewalld : 설정 파일, 규칙 파일</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-firewall-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95\">👍 FireWall 사용 방법</a></p>\n<ul>\n<li><a href=\"#%ED%8F%AC%ED%8A%B8\">포트</a></li>\n<li><a href=\"#%EC%84%9C%EB%B9%84%EC%8A%A4\">서비스</a></li>\n<li>\n<p><a href=\"#%EC%9E%84%EC%9D%98%EC%9D%98-%EB%A3%B0-rich-rule\">임의의 룰 (Rich rule)</a></p>\n<ul>\n<li><a href=\"#%EC%9D%91%EC%9A%A9-%EC%98%88%EC%8B%9C---http80%EB%B2%88-%ED%8F%AC%ED%8A%B8-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%97%90%EC%84%9C-%ED%8A%B9%EC%A0%95-ip-%EC%B0%A8%EB%8B%A8\">응용 예시 - http(80번 포트) 서비스에서 특정 ip 차단</a></li>\n<li><a href=\"#%EB%B0%A9%ED%99%94%EB%B2%BD-%EA%B8%B0%ED%83%80-%EB%AA%85%EB%A0%B9%EC%96%B4\">방화벽 기타 명령어</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 23, 2021","title":"[LINUX] - Firewall","categories":"LINUX","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/linux-firewall/"}},"site":{"siteMetadata":{"siteUrl":"https://nasa1515.com","comments":{"utterances":{"repo":"nasa1515/nasablog"}}}}},"pageContext":{"slug":"/linux-systemd/","nextSlug":"/linux-swap/","prevSlug":"/linux-firewall/"}},"staticQueryHashes":["1073350324","2938748437"]}