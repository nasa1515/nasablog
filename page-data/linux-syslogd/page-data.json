{"componentChunkName":"component---src-templates-blog-template-js","path":"/linux-syslogd/","result":{"data":{"cur":{"id":"bd163128-e0c1-5954-9d41-6fe0196f9cb0","html":"<p>머리말  </p>\n<p>Centos Version이 7로 올라감에 따라 새롭게 기능이 추가된 것 중 하나 입니다.<br>\n실제로 바이너리 로그등을 확인하고, 분석하는데 불편함이 많았었는데 JOUNALCTL은 사용자의 편리함을 제공하는 것 같습니다.  </p>\n<hr>\n<h2 id=\"-syslog-란\" style=\"position:relative;\"><a href=\"#-syslog-%EB%9E%80\" aria-label=\" syslog 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ SYSLOG 란?</h2>\n<p>기존의 SYSLOG에서는 운영로그, 설치로그, 보안로그 등을 (바이너리,텍스트) 파일의 형태로 남겼었습니다.<br>\n그렇지만 RSYSLOG는 journalD이 추가되며 원시적 로그 파일도 남기게 되면서<br>\n시스템 동작, 운영 로그들을 메모리에 Journal 로그(바이너리)로 생성합니다.  </p>\n<p>커널 및 응용 프로그램이 syslog API를 통해 로그 생성시 (r)syslogd 프로세스가 <code class=\"language-text\">(r)syslog.conf</code> 설정 파일을 참조하여<br>\n지정한 로그 파일을 콘솔 또는 외부 서버 등에 로그를 기록하게 됩니다.</p>\n<br/>\n<ul>\n<li>\n<p>로그 관리 데몬</p>\n<ul>\n<li>systemd-journald : 부팅이 시작 되는 순간부터 로그 수집</li>\n<li>이후 rsyslogd로 syslog를 전달하여 각 파일 별로 로그를 저장함</li>\n</ul>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>리눅스 로그파일 종류</p>\n<ul>\n<li>/var/log/messages : 리눅스 시스템의 전반적인 메세지를 저장</li>\n<li>/var/log/dmesg : 리눅스가 부팅될 때 출력되는 메세지를 저장<br>\n[dmesg 명령어로 확인 가능]</li>\n<li>/var/log/secure : 사용자들의 원격 접속 정보들 저장함</li>\n<li>그 외 로그파일 : /var/log/ 경로에 존재. </li>\n</ul>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-rsyslogd\" style=\"position:relative;\"><a href=\"#-rsyslogd\" aria-label=\" rsyslogd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👌 rsyslogd</h2>\n<br/>\n<ul>\n<li>\n<p>syslog를 사용하여 로그를 저장하는 프로세스</p>\n<ul>\n<li>/etc/rsyslog.conf 파일을 사용하여 로그의 종류 및 우선순위 설정<br>\n수신한 로그를 /var/log로 전달함</li>\n<li>rsyslog.conf 변경 후 명령어<br>\nlogger –p authpriv.emerg “hello” 와 같은 형태로 확인 가능</li>\n</ul>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>설정 파일</p>\n<p>/etc/(r)syslog.conf 파일은 시스템 로그 데몬이 실행될 때 참조되는<br>\n로그 설정 파일로서 어떤 로그를 어디에 남길지 로그 저장 규칙이 정의되어 있다.  </p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>포맷</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">facility<span class=\"token punctuation\">.</span>priority<span class=\"token punctuation\">;</span> facility<span class=\"token punctuation\">.</span>priority<span class=\"token punctuation\">;</span> facility<span class=\"token punctuation\">.</span>priority<span class=\"token punctuation\">;</span> ··· ···   <span class=\"token function\">action</span><span class=\"token punctuation\">(</span>logfile<span class=\"token operator\">-</span>location<span class=\"token punctuation\">)</span>\n     A   <span class=\"token punctuation\">.</span>   B          A   <span class=\"token punctuation\">.</span>   B         A   <span class=\"token punctuation\">.</span>   B                     C</code></pre></div>\n<ul>\n<li>A : 서비스(데몬) 설정</li>\n<li>B : 로그 레벨 이상의 상황이 발생한 경우를 설정</li>\n<li>C : (파일, 콘솔, 외부서버 등)으로 로그를 남기라는 의미</li>\n</ul>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"facility--로그-생성-서비스\" style=\"position:relative;\"><a href=\"#facility--%EB%A1%9C%EA%B7%B8-%EC%83%9D%EC%84%B1-%EC%84%9C%EB%B9%84%EC%8A%A4\" aria-label=\"facility  로그 생성 서비스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>facility : 로그 생성 서비스</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">ㆍ <span class=\"token operator\">*</span> <span class=\"token punctuation\">:</span>  모든 서비스\nㆍauthpriv <span class=\"token punctuation\">:</span> 인증 및 보안 관련 메시지  \nㆍcron <span class=\"token punctuation\">:</span> cron 데몬과 atd데몬에 의해 발생되는 메시지\nㆍdaemon <span class=\"token punctuation\">:</span> telnet<span class=\"token punctuation\">,</span> ftp 등과 같은 데몬에 의한 메시지\nㆍkern <span class=\"token punctuation\">:</span> kernel에 의한 메시지\nㆍlpr <span class=\"token punctuation\">:</span> 프린터 데몬인 lpd에 의해 발생되는 메시지\nㆍmail <span class=\"token punctuation\">:</span> sendmail<span class=\"token punctuation\">,</span> pop<span class=\"token punctuation\">,</span> qmail 등의 메일 시스템에서 발생되는 메시지\nㆍnews <span class=\"token punctuation\">:</span> USENET 등과 같은 뉴스시스템에 의해 발생되는 메시지\nㆍuser <span class=\"token punctuation\">:</span> 사용자에 의해 생성된 프로세스\nㆍsyslog <span class=\"token punctuation\">:</span> syslogd에 의해 발생되는 메시지\nㆍlocal0 <span class=\"token operator\">~</span> local7 <span class=\"token punctuation\">:</span> 시스템 부팅 메시지 기록<span class=\"token punctuation\">,</span> 기타 여분 서비스에 사용하기 위함</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"priority--로그-수준level\" style=\"position:relative;\"><a href=\"#priority--%EB%A1%9C%EA%B7%B8-%EC%88%98%EC%A4%80level\" aria-label=\"priority  로그 수준level permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>priority : 로그 수준(Level)</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">    높음    \n     ㆍ         emerg <span class=\"token punctuation\">:</span> 시스템이 전면 중단되는 패닉상태 전체 공지가 필요한 상황 <span class=\"token punctuation\">(</span>system <span class=\"token keyword\">is</span> <span class=\"token class-name\">unusable</span><span class=\"token punctuation\">)</span>\n     ㆍ         alert <span class=\"token punctuation\">:</span> 즉각적인 조치가 필요한 상황 <span class=\"token punctuation\">(</span>action must be <span class=\"token class-name\">taken</span> immediately<span class=\"token punctuation\">)</span>\n     ㆍ         crit  <span class=\"token punctuation\">:</span> 하드웨어 등의 심각한 오류가 발생한 상황 <span class=\"token punctuation\">(</span><span class=\"token class-name\">critical</span> condition<span class=\"token punctuation\">)</span>\n    중간        err   <span class=\"token punctuation\">:</span> 일반적인 에러<span class=\"token operator\">/</span>오류가 발생한 상황\n     ㆍ         warning  <span class=\"token punctuation\">:</span> 경고 메시지\n     ㆍ         notice <span class=\"token punctuation\">:</span> 에러<span class=\"token operator\">/</span>오류는 아니지만 관리자의 조치가 필요한 상황\n     ㆍ         info  <span class=\"token punctuation\">:</span> 의미 있는 정보 관련 메시지\n     ㆍ         debug <span class=\"token punctuation\">:</span> 디버깅용 메시지\n    낮음          </code></pre></div>\n<ul>\n<li>facility에 로그 수준을 지정하게 되면 해당 수준이상의 상황이 발생했을 때 로그가 남게 된다.  </li>\n<li>(r)syslog.conf에 로그 수준을 ” * ” 로 지정하면  모든 로그 수준의 로그를 남기겠다는 의미이며<br>\n“none”으로 설정하면 어떠한 경우라도 로그를 남기지 않겠다는 의미이다.  </li>\n</ul>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"action\" style=\"position:relative;\"><a href=\"#action\" aria-label=\"action permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>action</h3>\n<p>로그를 어디에 남길 것인지를 결정한다. 로그 파일, 콘솔, 원격 로그 서버, 특정 사용자 등에 로그를 남길 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">ㆍ로그 파일 <span class=\"token punctuation\">:</span> 파일명<span class=\"token punctuation\">(</span>경로<span class=\"token punctuation\">)</span> 지정 ex<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>messages\nㆍ콘솔 <span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>console로 지정 시 콘솔 출력\nㆍ원격 로그 서버 <span class=\"token punctuation\">:</span> <span class=\"token string\">\"@호스트 주소\"</span>를 통해 지정한 호스트로 로그를 보낸다 ex<span class=\"token punctuation\">)</span> @<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.3</span>\nㆍuser <span class=\"token punctuation\">:</span> 지정된 사용자의 스크린으로 메시지를 보낸다\nㆍ<span class=\"token operator\">*</span> <span class=\"token punctuation\">:</span> 현재 로그인 되어있는 모든 사용자의 스크린으로 메시지를 보낸다 </code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"resysconf-설정-예시\" style=\"position:relative;\"><a href=\"#resysconf-%EC%84%A4%EC%A0%95-%EC%98%88%EC%8B%9C\" aria-label=\"resysconf 설정 예시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>resys.conf 설정 예시</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">보안 및 승인에 관한 메세지 중에서 모든 경우를 <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>secure 에 보낸다<span class=\"token punctuation\">.</span>\nauthpriv<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>    <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>secure\n\n모든 상황에서 발생하는 메세지 중 info 수준<span class=\"token punctuation\">(</span>통계 및 기본정보<span class=\"token punctuation\">)</span> 이상인 경우를 \n<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>messages에 보낸다<span class=\"token punctuation\">.</span> 단<span class=\"token punctuation\">,</span> mail 관련 메세지는 제외한다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">*</span><span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">;</span>mail<span class=\"token punctuation\">.</span>none    <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>messages\n\n모든 상황에서 발생하는 메세지 중에서 info 수준<span class=\"token punctuation\">(</span>통계 및 기본정보<span class=\"token punctuation\">)</span> 인 경우를\n<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>hihi에 보낸다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">*</span><span class=\"token punctuation\">.</span><span class=\"token operator\">=</span>info    <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>hihi                                                 \n\nmail 관련된 메세지 중에서 info 수준의 메세지를 제외하여 <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>maillog에 기록한다<span class=\"token punctuation\">.</span>\nmail<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span>mail<span class=\"token punctuation\">.</span><span class=\"token operator\">!=</span>info    <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>maillog</code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-logroate\" style=\"position:relative;\"><a href=\"#-logroate\" aria-label=\" logroate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐱‍🏍 logroate</h2>\n<p>리눅스를 운용 할 때 로그를 보고 서버의 상태 혹은 장애를 대비합니다. 대부분의 모든 로그를 남기도록 설정하면 로그 파일의 양은<br>\n시간이 지남에 따라 엄청난 크기로 커져 엄청난 크기로 커지기 전 로그들을 관리하도록 설정하는 기능이 logrotate 입니다.</p>\n<ul>\n<li>\n<p>Config file path</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token operator\">-</span> <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>logrotate<span class=\"token punctuation\">.</span>conf</code></pre></div>\n</li>\n<li>\n<p>config 파일 설명</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">see <span class=\"token string\">\"man logrotate\"</span> <span class=\"token keyword\">for</span> details\nrotate log files weekly\nweekly               <span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">[</span>로그파일 순환 기간 설정 <span class=\"token punctuation\">(</span>daily<span class=\"token punctuation\">,</span> weekly<span class=\"token range operator\">..</span><span class=\"token range operator\">..</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token preprocessor property\"># keep 4 weeks worth of backlogs</span>\nrotate <span class=\"token number\">4</span>             <span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">[</span>순환된 로그파일 보관 기간<span class=\"token punctuation\">,</span> 순환기간<span class=\"token punctuation\">]</span>\n<span class=\"token preprocessor property\"># create new (empty) log files after rotating old ones</span>\ncreate               <span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">[</span>순환 후 새 로그파일 생성 여부<span class=\"token punctuation\">]</span>\n\n<span class=\"token preprocessor property\"># use date as a suffix of the rotated file</span>\ndateext            <span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">[</span>순환된 파일의 파일명 변경 옵션<span class=\"token punctuation\">]</span>\n<span class=\"token preprocessor property\"># uncomment this if you want your log files compressed</span>\n<span class=\"token preprocessor property\">#compress          ---[파일의 압축 옵션]</span>\n<span class=\"token preprocessor property\"># RPM packages drop log rotation information into this directory</span>\ninclude <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>logrotate<span class=\"token punctuation\">.</span>d   <span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">[</span>로그 순환에 대한 추가 설정 파일<span class=\"token punctuation\">]</span>\n<span class=\"token preprocessor property\"># no packages own wtmp and btmp -- we'll rotate them here</span>\n<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>wtmp <span class=\"token punctuation\">{</span>\n    monthly\ncreate <span class=\"token number\">0664</span> root utmp\nminsize <span class=\"token number\">1M</span>\nrotate <span class=\"token number\">1</span>\n<span class=\"token punctuation\">}</span>                       <span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">[</span>사용자의 로그인<span class=\"token operator\">/</span>로그아웃 정보를 저장하는wtmp\n\n로그 설정<span class=\"token punctuation\">]</span>\n<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>btmp <span class=\"token punctuation\">{</span>\n    \t missingok\n\tmonthly\n\tcreate <span class=\"token number\">0600</span> root utmp\n\trotate <span class=\"token number\">1</span>\n<span class=\"token punctuation\">}</span>                       <span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">[</span>로그인 실패 기록을 저장하는 btmp 로그설정<span class=\"token punctuation\">]</span>\n<span class=\"token preprocessor property\"># system-specific logs may be also be configured here.</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"cron등록\" style=\"position:relative;\"><a href=\"#cron%EB%93%B1%EB%A1%9D\" aria-label=\"cron등록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cron등록</h3>\n<ul>\n<li>\n<p>syslog의 순환로그는 /etc/cron.daily/logrotate 파일에 정의되어<br>\ncrontab에서 실행되고 있다.  </p>\n<ul>\n<li>로테이션을 위해 생성한 /data/logs/won_logrotate 파일을 /etc/logrotate.d/ 하위에 두면 같이 로테이션 됩니다.</li>\n<li>또는 해당 원하는 시간에  crontab에 추가하여 별도 관리하여도 된다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h3 id=\"예시\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%8B%9C\" aria-label=\"예시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예시</h3>\n<p>1일치 로그로 관리하기 위하여 0시에 순환되도록 아래와 같이 설정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ sudo crontab <span class=\"token operator\">-</span>e\n\n<span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token operator\">*</span> <span class=\"token operator\">*</span> <span class=\"token operator\">*</span> <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>sbin<span class=\"token operator\">/</span>logrotate <span class=\"token operator\">-</span>f <span class=\"token operator\">/</span>data<span class=\"token operator\">/</span>logs<span class=\"token operator\">/</span>test_logrotate</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>won_logrotate 파일</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">ex<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span>data<span class=\"token operator\">/</span>logs<span class=\"token operator\">/</span>won_logrotate\n\n<span class=\"token operator\">/</span>data<span class=\"token operator\">/</span>logs<span class=\"token operator\">/</span>test<span class=\"token punctuation\">.</span>log\n<span class=\"token operator\">/</span>data<span class=\"token operator\">/</span>logs<span class=\"token operator\">/</span>app<span class=\"token punctuation\">.</span>log\n\n<span class=\"token preprocessor property\"># 또는 /data/logs</span><span class=\"token comment\">/*.log 로 사용\n\n{\nrotate 7\ndaily\nmissingok\nnotifempty\ndate\ndateyesterday\n}</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>logroate 실행 순서\n<img src=\"https://t1.daumcdn.net/cfile/tistory/99FEF73E5C986CD310\"></li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-systemd-journald-프로세스\" style=\"position:relative;\"><a href=\"#-systemd-journald-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4\" aria-label=\" systemd journald 프로세스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ systemd-journald 프로세스</h2>\n<ul>\n<li>시스템 부팅 시부터 발생하는 모든 이벤트를 수집해서 바이너리 형태의 저널 데이터로 저장</li>\n<li>바이너리 파일이라서 cat으로 읽을 수 없고*journalctl 명령을 이용함</li>\n<li>저널 데이터는 /run/log/journal에 위치하여 재부팅 시 데이터가 삭제됨</li>\n<li>\n<p>journal을 영구적으로 저장하는 방법</p>\n<p>① 저장할 디렉토리 만들기 (보통은 /var/log/journal)</p>\n<p>② chown root:systemd-journal /var/log/journal ← 사용자와 그룹 권한을 설정</p>\n<p>③ chmod g+s /var/log/journal/ ← setgid 권한 설정</p>\n<p>④ systemctl restart systemd-journald ← 재시작</p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>journalctl 명령어</p>\n<p><img src=\"https://user-images.githubusercontent.com/64260883/87617267-0eeed400-c752-11ea-9f4a-0030897b19fa.png\" alt=\"스크린샷, 2020-07-16 10-48-21\"></p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>SYSLOG VS Journal  </p>\n<p><img src=\"https://user-images.githubusercontent.com/64260883/87632698-e1ffe880-c774-11ea-96c0-51865855e540.png\" alt=\"스크린샷, 2020-07-16 14-57-56\"></p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>로그 관련 디렉토리들의 역할<br>\n대부분의 리눅스 사용자들은 /var/ 경로는 로그의 저장용도로만 사용하는 줄 알고있다.<br>\n/var/ 디렉토리는 로그 저장을 기본으로 하되 SPOOL 기능의 역할도 같이 수행한다.</p>\n<ul>\n<li>\n<p>/var 역할</p>\n<ol>\n<li>로그 저장</li>\n<li>SPOOL </li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>spool<span class=\"token operator\">/</span>mail<span class=\"token operator\">/</span>\n\n각 계정사용자들의 메일파일이 저장되는 디렉토리<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>spool<span class=\"token operator\">/</span>lpd<span class=\"token operator\">/</span>\n\n프린트를 하기 위한 임시 디렉토리<span class=\"token punctuation\">(</span>스풀링 디렉토리<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>spool<span class=\"token operator\">/</span>mqueue<span class=\"token operator\">/</span>\n\n발송을 위한 메일 일시저장 디렉토리<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>spool<span class=\"token operator\">/</span>cron<span class=\"token operator\">/</span>\n\n각 사용자들의 cron 설정파일들이 저장된 디렉토리<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>spool<span class=\"token operator\">/</span>at<span class=\"token operator\">/</span>\n\natd 즉<span class=\"token punctuation\">,</span> 예약작업에 관한 파일들이 저장되는 디렉토리<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-syslog-%EB%9E%80\">✔ SYSLOG 란?</a></li>\n<li><a href=\"#-rsyslogd\">👌 rsyslogd</a></li>\n<li><a href=\"#-logroate\">🐱‍🏍 logroate</a></li>\n<li><a href=\"#-systemd-journald-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4\">✌ systemd-journald 프로세스</a></li>\n</ul>\n</div>","excerpt":"머리말   Centos Version이 7로 올라감에 따라 새롭게 기능이 추가된 것 중 하나 입니다. 실제로 바이너리 로그등을 확인하고, 분석하는데 불편함이 많았었는데 JOUNALCTL은 사용자의 편리함을 제공하는 것 같습니다.   ✔ SYSLOG 란? 기존의 SYSLOG에서는 운영로그, 설치로그, 보안로그 등을 (바이너리,텍스트) 파일의 형태로 남겼었습니다. 그렇지만 RSYSLOG는 journalD이 추가되며 원시적 로그 파일도 남기게 되면서 시스템 동작, 운영 로그들을 메모리에 Journal 로그(바이너리)로 생성합니다.   커널 및 응용 프로그램이 syslog API를 통해 로그 생성시 (r)syslogd 프로세…","frontmatter":{"date":"June 23, 2021","title":"[LINUX] - SYSLOGD","categories":"LINUX","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/linux-syslogd/"}},"next":{"id":"958f5fd5-f2a2-518e-85ce-899c1a232986","html":"<p>머리말  </p>\n<p>저의 경우에는 LINUX라고는 CENTOS 와 REDHAT의 경험밖에 없다보니 데비안, 우분투, 등등의 여러 리눅스에서 사용하는 패키지 관리자에 대한 배경지식이 없어서 이 포스트 작성이 큰 도움이 되었습니다.  </p>\n<hr>\n<h2 id=\"-패키지-관리자란\" style=\"position:relative;\"><a href=\"#-%ED%8C%A8%ED%82%A4%EC%A7%80-%EA%B4%80%EB%A6%AC%EC%9E%90%EB%9E%80\" aria-label=\" 패키지 관리자란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ 패키지 관리자란?</h2>\n<p>윈도우로 서버를 운영하면 IIS의 가장 장점은 바로 웹 플랫폼 설치관리자 입니다.<br>\n그 이유중에 하나는 복잡한 설치과정을 간단하게 클릭 몇번만으로 설치 및 설정까지 자동으로 해주기 때문에 편리하다고 하였는데<br>\n사실 리눅스에도 이와 비슷한 기능을 가지고 있는 패키지 저장소가 있습니디.  </p>\n<p>리눅스에서의 패키지 관리 시스템은 터미널 명령어로 진행해야 하기 때문에 GUI 방식인<br>\n웹 플랫폼 설치관리자보다 불편했고 처음 사용하는 사용자 입장에서 불편하고 숙달하기 어려웠습니다.  </p>\n<p>대신 장점이라면, 웹 플랫폼 설치 관리자는 IIS 및 서버 구축에만 카테고리들이<br>\n준비되어 있는 반면, 리눅스 저장소에는 서버 관련 항목뿐 아니라,<br>\n각종 유지 및 시스템 전반에 걸쳐서 필요한 프로그램들을 준비해 놓고 있습니다.  </p>\n<br/>\n<h2 id=\"-rpm과-yum\" style=\"position:relative;\"><a href=\"#-rpm%EA%B3%BC-yum\" aria-label=\" rpm과 yum permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👍 RPM과 YUM</h2>\n<p>RPM,YUM은 리눅스 패키지 인스톨 프로그램이자 인스톨 파일이라고 생각하면 됩니다.</p>\n<h3 id=\"rpmredhat-package-manager\" style=\"position:relative;\"><a href=\"#rpmredhat-package-manager\" aria-label=\"rpmredhat package manager permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RPM(Redhat Package Manager)</h3>\n<p>패키지 관리자로, Windows의 setup.exe와 비슷한 설치파일 입니다.<br>\n이러한 설치 파일의 확장자명은 .rpm이며, 이를 패키지라고 부릅니다.<br>\nRPM은 Redhat계열인 CentOS, Redhat, Fedora 에서 호환됩니다. </p>\n<ul>\n<li>\n<p>장점  </p>\n<ul>\n<li>바이너리 파일로 구성되어 컴파일이 필요없음  </li>\n<li>패키지 설치상태 및 정보 제공.  </li>\n<li>기존파일 삭제없이 바로 업그레이드 가능</li>\n</ul>\n</li>\n<li>\n<p>단점  </p>\n<ul>\n<li>패키지 의존성에 따라 관련 패키지가 먼저 설치되어있지 않으면 설치가 안된다.<br>\n즉, 패키지 설치를 위해서 그 패키지의 필요요소를 사전에 전부 다운로드 해야 한다. (패키지 디펜던시).</li>\n<li>그런데 RPM에서는 YUM과 달리 이러한 의존관계를 같이 다운받아주지 않는다는 단점이 있다.<br>\n국내 배포된 리눅스들이 레드햇을 기반으로 하고 있어 사용 범위가 넓다.</li>\n</ul>\n</li>\n</ul>\n<br/>\n<h3 id=\"rpm의-파일-구조\" style=\"position:relative;\"><a href=\"#rpm%EC%9D%98-%ED%8C%8C%EC%9D%BC-%EA%B5%AC%EC%A1%B0\" aria-label=\"rpm의 파일 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RPM의 파일 구조</h3>\n<p>[패키지이름-버전-릴리즈번호.소스여부.시스템.확장자]  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">Ex<span class=\"token punctuation\">)</span> gcc<span class=\"token operator\">-</span><span class=\"token number\">2.96</span><span class=\"token operator\">-</span><span class=\"token number\">98</span><span class=\"token punctuation\">.</span>i386<span class=\"token punctuation\">.</span>rpm\n\n<span class=\"token operator\">*</span> gcc <span class=\"token punctuation\">:</span> 패키지 이름\n\n<span class=\"token operator\">*</span> <span class=\"token number\">2.96</span> <span class=\"token punctuation\">:</span> 패키지 버전\n\n<span class=\"token operator\">*</span> <span class=\"token number\">98</span> <span class=\"token punctuation\">:</span> 패키지의 릴리즈 번호  \n    패키지가 몇 번째로 만들어진 것인지를 나타낸다<span class=\"token punctuation\">.</span>  \n    똑같은 프로그램으로 다시 패키지 하여도 릴리즈는 올라간다<span class=\"token punctuation\">.</span>  \n\n<span class=\"token operator\">*</span> i386 <span class=\"token operator\">-</span> 시스템<span class=\"token punctuation\">,</span> 어떤 시스템에서 쓰이는 것인지를 나타내는 것이다<span class=\"token punctuation\">.</span>  \n    'i386'<span class=\"token punctuation\">,</span> 'i686'등은 인텔계열의 시스템에서  \n    'sparc' SUN의 스팍 시스템용이고  \n    'alpha' 라면 알파 시스템용이다<span class=\"token punctuation\">.</span>  \n\n\n<span class=\"token operator\">*</span>  혹 네 번째 필드에 src라고 적혀있으면 그것은 소스 RPM이다<span class=\"token punctuation\">.</span>  \n    바이너리 패키지를 만들기 위해서 필요하다<span class=\"token punctuation\">.</span>  \n    일반적으로 많이 사용하는 편은 아니다<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<h3 id=\"rpm의-사용법\" style=\"position:relative;\"><a href=\"#rpm%EC%9D%98-%EC%82%AC%EC%9A%A9%EB%B2%95\" aria-label=\"rpm의 사용법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RPM의 사용법</h3>\n<ul>\n<li>\n<p>설치 :  rpm -Uvh [*.rpm]</p>\n<p>  U: 파일을 설치하되, 설치되어 있는 파일은 업그레이드<br>\nv : 설치과정을 확인<br>\nh : 설치 진행과정을 ”#” 마크로 화면에 출력  </p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>삭제  : rpm -e [패키지 이름]</p>\n  <br/>\n</li>\n<li>\n<p>설치되어 있는 패키지 정보 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">설치된 패키지 확인 <span class=\"token punctuation\">:</span> rpm <span class=\"token operator\">-</span>qa <span class=\"token punctuation\">[</span>패키지 이름<span class=\"token punctuation\">]</span>\n\n설치된 패키지의 상세 정보 확인 <span class=\"token punctuation\">:</span> rpm <span class=\"token operator\">-</span>qi <span class=\"token punctuation\">[</span>패키지 이름<span class=\"token punctuation\">]</span>\n\n설치된 패키지에 포함된 파일 목록 확인 <span class=\"token punctuation\">:</span> rpm <span class=\"token operator\">-</span>ql <span class=\"token punctuation\">[</span>패키지 이름<span class=\"token punctuation\">]</span>\n\n설치된 파일이 어느 패키지에 포함되어 있는지 확인 <span class=\"token punctuation\">:</span> rpm <span class=\"token operator\">-</span>qf <span class=\"token punctuation\">[</span>절대경로<span class=\"token operator\">+</span>파일<span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n<li>\n<p>설치되어 있지 않은 패키지 정보 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">패키지에 포함되는 파일 목록 확인 <span class=\"token punctuation\">:</span> rpm <span class=\"token operator\">-</span>qlp <span class=\"token punctuation\">[</span>패키지 이름<span class=\"token punctuation\">]</span>\n\n설치할 패키지의 상세 정보 확인 <span class=\"token punctuation\">:</span> rpm <span class=\"token operator\">-</span>qip <span class=\"token punctuation\">[</span>패키지 이름<span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<h3 id=\"-yumyellodog-updater-modified\" style=\"position:relative;\"><a href=\"#-yumyellodog-updater-modified\" aria-label=\" yumyellodog updater modified permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✨ YUM(Yellodog Updater Modified)</h3>\n<ul>\n<li>rpm과 다르게, 필요한 패키지만 설치 하면, 의존성이 있는 다른 패키지 또한 함께 설치해주는 툴이다.  </li>\n<li>YUM은 외부 레파지토리 서버랑 통신이 가능해야 한다. 즉, 네트워크가 단절되면 yum 명령어 사용이 불가능하다.</li>\n<li>repo 파일의 경우 /etc/yum.repo/ 디렉토리 안에 x.repo 파일로 저장되어있다.</li>\n</ul>\n<br/>\n<h3 id=\"yum의-사용법\" style=\"position:relative;\"><a href=\"#yum%EC%9D%98-%EC%82%AC%EC%9A%A9%EB%B2%95\" aria-label=\"yum의 사용법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>YUM의 사용법</h3>\n<ul>\n<li>\n<p>기본 설치</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">yum install <span class=\"token punctuation\">[</span>패키지 이름<span class=\"token punctuation\">]</span>\n주로 yum <span class=\"token operator\">-</span>y install <span class=\"token punctuation\">[</span>패키지 이름<span class=\"token punctuation\">]</span> 으로 사용\n<span class=\"token operator\">-</span>y <span class=\"token punctuation\">:</span> 설치유무를 모두 yes로 응답</code></pre></div>\n</li>\n<li>\n<p>RPM 설치</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">yum install <span class=\"token punctuation\">[</span><span class=\"token operator\">*</span><span class=\"token punctuation\">.</span>rpm 파일 이름<span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n<li>\n<p>업데이트 가능 목록 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">yum check<span class=\"token operator\">-</span>update</code></pre></div>\n</li>\n<li>\n<p>업데이트 </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">yum update <span class=\"token punctuation\">[</span>패키지 이름<span class=\"token punctuation\">]</span> <span class=\"token comment\">// 패키지 이름을 입력하지 않으면 전부 업데이트</span></code></pre></div>\n</li>\n<li>\n<p>삭제하기</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">yum <span class=\"token keyword\">remove</span> <span class=\"token punctuation\">[</span>패키지 이름<span class=\"token punctuation\">]</span>\nremoveauto <span class=\"token punctuation\">:</span> 사용하지않는 의존성파일까지 모두 삭제\n<span class=\"token operator\">-</span>y <span class=\"token punctuation\">:</span> 삭제유무를 모두 yes로 응답</code></pre></div>\n</li>\n<li>\n<p>패키지 그룹 설치 </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">yum groupinstall <span class=\"token string\">\"[패키지 그룹 이름]\"</span></code></pre></div>\n</li>\n<li>\n<p>특정 파일이 속한 패키지 이름 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">yum provides <span class=\"token punctuation\">[</span>파일 이름<span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n<li>\n<p>GPG 키 검사 생략 </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">yum install <span class=\"token operator\">--</span>nogpgcheck <span class=\"token punctuation\">[</span><span class=\"token operator\">*</span><span class=\"token punctuation\">.</span>rpm<span class=\"token punctuation\">]</span>\n인증되지 않은 rpm 파일을 yum으로 설치시<span class=\"token punctuation\">,</span>\n설치가 불가능하다<span class=\"token punctuation\">.</span> 그럴 때 인증을 생략하는 방식이다<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-웹-다운로드-명령어\" style=\"position:relative;\"><a href=\"#-%EC%9B%B9-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\" 웹 다운로드 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👌 웹 다운로드 명령어</h2>\n<h3 id=\"wget\" style=\"position:relative;\"><a href=\"#wget\" aria-label=\"wget permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>wget</h3>\n<p>  ‘Web Get’의 약어로 웹 상의 파일을 다운로드 받을 때 사용하는 명령어, wget은 <code class=\"language-text\">비상호작용 네트워크 다운로더</code> 이다.<br>\n즉, 네트워크 상에서 데이터를 다운로드하는 기능을 수행한다<br>\nHTTP, HTTPS, FTP 프로토콜을 지원하며, HTTP proxy에서 데이터를 가져올 수도 있다  </p>\n<p>  wget이 상호작용을 필요로 하지 않는다(non-interactive)는 것은<br>\n사용자가 로그인하지 않은 상태 동안에도 백그라운드 상태에서 동작할 수 있음을  의미한다.</p>\n<br/>\n<ul>\n<li>사용법</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ wget <span class=\"token punctuation\">[</span>옵션<span class=\"token punctuation\">]</span><span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">URL</span></span><span class=\"token punctuation\">]</span><span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n옵션 #\n<span class=\"token operator\">-</span>O filename DOWNLOAD<span class=\"token operator\">-</span>URL <span class=\"token punctuation\">:</span> wget을 통해 다운로드 할 경우 저장되는 파일명은 URL의 마지막 <span class=\"token string character\">'/'</span> 뒤에 오는 단어를 파일명으로 저장한다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">--</span>limit<span class=\"token operator\">-</span>rate<span class=\"token operator\">=</span>N DOWNLOAD<span class=\"token operator\">-</span>URL <span class=\"token punctuation\">:</span> wget은 기본 값으로 최대 대역폭을 사용한다<span class=\"token punctuation\">.</span> 필요할 경우 '<span class=\"token operator\">--</span>limit<span class=\"token operator\">-</span>rate' 옵션을 이용하여 다운로드 속도를 조절할 수 있다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span>b DOWNLOAD<span class=\"token operator\">-</span>URL <span class=\"token punctuation\">:</span> 다운로드 작업을 백그라운드에서 실행한다<span class=\"token punctuation\">.</span> 로그는 wget<span class=\"token operator\">-</span>log에 기록된다<span class=\"token punctuation\">.</span> 로그를 실시간으로 확인하려면 tail <span class=\"token operator\">-</span>f wget<span class=\"token operator\">-</span>log를 이용하여 볼 수 있다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">--</span>user<span class=\"token operator\">-</span>agent<span class=\"token operator\">=</span><span class=\"token string\">\"User-info\"</span> DOWNLOAD<span class=\"token operator\">-</span>URL <span class=\"token punctuation\">:</span> 웹브라우저를 이용하지 않을 경우 일부 사이트에서는 다운로드를 제한하는데<span class=\"token punctuation\">,</span> 이 경우 '<span class=\"token operator\">--</span>user<span class=\"token operator\">-</span>agent' 옵션을 이용하여 사이트에 정보를전송한다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span>V<span class=\"token punctuation\">,</span> <span class=\"token operator\">--</span>version <span class=\"token punctuation\">:</span> Wget의 버전을 보여준다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span>h<span class=\"token punctuation\">,</span> <span class=\"token operator\">--</span>help <span class=\"token punctuation\">:</span> Wgwt의 명령 옵션의 전부에 대한 도움말을 출력한다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span>b<span class=\"token punctuation\">,</span> <span class=\"token operator\">--</span>background <span class=\"token punctuation\">:</span> 시작한 후 즉시 백그라운드에서 작동한다<span class=\"token punctuation\">.</span> 결과 파일이 없음이 –o를 통해 지정되었다면<span class=\"token punctuation\">,</span> 결과는 wget<span class=\"token operator\">-</span>log로 다시 보내진다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span><span class=\"token class-name\">e</span> command<span class=\"token punctuation\">,</span> <span class=\"token operator\">--</span><span class=\"token class-name\">execute</span> command <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>wgetrc를 읽어서 명령을 실행한다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span>d<span class=\"token punctuation\">,</span> <span class=\"token operator\">--</span>debug <span class=\"token punctuation\">:</span> 디버그 내용을 출력한다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span><span class=\"token class-name\">i</span> file<span class=\"token punctuation\">,</span> <span class=\"token operator\">--</span>input<span class=\"token operator\">-</span>file<span class=\"token operator\">=</span>file <span class=\"token punctuation\">:</span> 다운받을 URL 주소를 로컬이나 파일에서 찾는다<span class=\"token punctuation\">.</span> \n만약 file에 ‘<span class=\"token operator\">-</span>’를 입력하면 표준 입력으로 URL를 받는다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span>F<span class=\"token punctuation\">,</span> <span class=\"token operator\">--</span>force<span class=\"token operator\">-</span>html <span class=\"token punctuation\">:</span> 파일에서 input을 읽어올 때<span class=\"token punctuation\">,</span> HTML 파일로 처리한다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span>i FILE<span class=\"token operator\">-</span>WHICH<span class=\"token operator\">-</span>HAS<span class=\"token operator\">-</span>URLS <span class=\"token punctuation\">:</span> 한 번에 여러개의 파일을 다운로드 한다<span class=\"token punctuation\">.</span> URL은 개행으로 구분되어 입력된 파일을 통해 입력한다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">--</span>reject<span class=\"token operator\">=</span>FILE<span class=\"token operator\">-</span>EXTENSION DOWNLOAD<span class=\"token operator\">-</span>URL <span class=\"token punctuation\">:</span> 특정 파일 확장자를 제외하고 다운로드 한다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span>r <span class=\"token operator\">-</span>A<span class=\"token punctuation\">.</span>FILE<span class=\"token operator\">-</span>EXTENSION DOWNLOAD<span class=\"token operator\">-</span>URL <span class=\"token punctuation\">:</span> 특정 파일 확장자만 다운로드 한다<span class=\"token punctuation\">.</span> '<span class=\"token operator\">-</span>r'은 재귀적 탐색을<span class=\"token punctuation\">,</span> '<span class=\"token operator\">-</span>A'는 accept할 파일 타입을 지정한다<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<h3 id=\"예제\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%A0%9C\" aria-label=\"예제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예제</h3>\n<ul>\n<li>단일 파일 받기  </li>\n</ul>\n<p>다음의 예는 인터넷에서 단일 파일을 받아 현재 디렉토리에 저장하는 방법입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ wget DOWNLOAD<span class=\"token operator\">-</span>URL\n\n다운로드 하는 동안 진행 경과와 함께 다음의 정보를 보여줍니다\n현재 몇 퍼센트 받았는지에 대한 정보 <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token operator\">%</span><span class=\"token punctuation\">)</span>\n현재까지 다운로드 받은 바이트 수 <span class=\"token punctuation\">(</span><span class=\"token number\">112</span><span class=\"token punctuation\">,</span><span class=\"token number\">550</span><span class=\"token punctuation\">)</span>\n현재 다운로드 속도 <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">.</span>64KB<span class=\"token operator\">/</span>s<span class=\"token punctuation\">)</span>\n다운로드 완료까지 남은 시간 <span class=\"token punctuation\">(</span>35s\n$ <span class=\"token class-name\">wget</span> http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>www<span class=\"token punctuation\">.</span>openss7<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>repos<span class=\"token operator\">/</span>tarballs<span class=\"token operator\">/</span>strx25<span class=\"token operator\">-</span><span class=\"token number\">0.9</span><span class=\"token number\">.2</span><span class=\"token number\">.1</span><span class=\"token punctuation\">.</span>tar<span class=\"token punctuation\">.</span>bz2\nHTTP <span class=\"token class-name\">request</span> sent<span class=\"token punctuation\">,</span> awaiting response<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token number\">200</span> <span class=\"token class-name\">OK</span>\nLength<span class=\"token punctuation\">:</span> <span class=\"token number\">3852374</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3.7M</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span>application<span class=\"token operator\">/</span>x<span class=\"token operator\">-</span>bzip2<span class=\"token punctuation\">]</span>\n<span class=\"token class-name\">Saving</span> to<span class=\"token punctuation\">:</span> ‘strx25<span class=\"token operator\">-</span><span class=\"token number\">0.9</span><span class=\"token number\">.2</span><span class=\"token number\">.1</span><span class=\"token punctuation\">.</span>tar<span class=\"token punctuation\">.</span>bz2\n<span class=\"token number\">2</span><span class=\"token operator\">%</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">=></span>                             <span class=\"token punctuation\">]</span> <span class=\"token number\">112</span><span class=\"token punctuation\">,</span><span class=\"token number\">550</span>     <span class=\"token number\">3</span><span class=\"token punctuation\">.</span>64KB<span class=\"token operator\">/</span>s   <span class=\"token keyword\">in</span> 35s</code></pre></div>\n<br/>\n<ul>\n<li>다른이름으로 저장하기  </li>\n</ul>\n<p>파일을 저장할 때 wget은 기본적으로 다운로드 경로의 마지막 슬래쉬(’/’) 다음에 오는 단어를 파일이름으로 사용합니다.<br>\n그런데 이 방법으로는 올바른 파일이름이 아닌 이상한 이름을 뽑아내는 경우도 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ <span class=\"token class-name\">wget</span> http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>www<span class=\"token punctuation\">.</span>vim<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>scripts<span class=\"token operator\">/</span>download_script<span class=\"token punctuation\">.</span>php<span class=\"token punctuation\">?</span>src_id<span class=\"token operator\">=</span><span class=\"token number\">7701</span>\n위의 경우 다운받은 파일 이름은 'download_script<span class=\"token punctuation\">.</span>php<span class=\"token punctuation\">?</span>src_id<span class=\"token operator\">=</span><span class=\"token number\">7701</span>'이 됩니다<span class=\"token punctuation\">.</span> 이런 상황을 해결하기 위해 '<span class=\"token operator\">-</span>O' 옵션을 사용합니다<span class=\"token punctuation\">.</span> \n$ wget <span class=\"token operator\">-</span>O <span class=\"token class-name\">taglist<span class=\"token punctuation\">.</span>zip</span> http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>www<span class=\"token punctuation\">.</span>vim<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>scripts<span class=\"token operator\">/</span>download_script<span class=\"token punctuation\">.</span>php<span class=\"token punctuation\">?</span>src_id<span class=\"token operator\">=</span><span class=\"token number\">7701</span></code></pre></div>\n<hr>\n<h3 id=\"curl\" style=\"position:relative;\"><a href=\"#curl\" aria-label=\"curl permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>curl</h3>\n<p>서버와 통신할 수 있는 커맨드 명령어 툴입니다. 웹개발에 매우 많이 사용되고 있는 무료 오픈소스입니다.<br>\ncurl의 특징으로는 다음과 같은 수 많은 프로토콜을 지원한다는 장점이 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">프로토콜\nDICT<span class=\"token punctuation\">,</span> FILE<span class=\"token punctuation\">,</span> FTP<span class=\"token punctuation\">,</span> FTPS<span class=\"token punctuation\">,</span> Gopher<span class=\"token punctuation\">,</span> HTTP<span class=\"token punctuation\">,</span> HTTPS<span class=\"token punctuation\">,</span> IMAP<span class=\"token punctuation\">,</span> IMAPS<span class=\"token punctuation\">,</span> LDAP<span class=\"token punctuation\">,</span> LDAPS<span class=\"token punctuation\">,</span> POP3<span class=\"token punctuation\">,</span> POP3S<span class=\"token punctuation\">,</span> RTMP<span class=\"token punctuation\">,</span> RTSP<span class=\"token punctuation\">,</span> SCP<span class=\"token punctuation\">,</span> SFTP<span class=\"token punctuation\">,</span> SMB<span class=\"token punctuation\">,</span> SMBS<span class=\"token punctuation\">,</span> SMTP<span class=\"token punctuation\">,</span> SMTPS<span class=\"token punctuation\">,</span> Telnet<span class=\"token punctuation\">,</span> TFTP</code></pre></div>\n<br/>\n<ul>\n<li>옵션</li>\n</ul>\n<p>curl에 설정 가능한 옵션보기아래는 사용 가능한 다양한 옵션들입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token operator\">-</span>X <span class=\"token punctuation\">:</span> 사용할 방식 메소드 선택하기\n<span class=\"token operator\">-</span>d <span class=\"token punctuation\">:</span> 함께 전달할 파라미터값 설정하기\n<span class=\"token operator\">-</span>G <span class=\"token punctuation\">:</span> 전송할 사이트 url 및 ip 주소\n<span class=\"token operator\">-</span>H <span class=\"token punctuation\">:</span> 헤더 정보를 전달하기\n<span class=\"token operator\">-</span>i <span class=\"token punctuation\">:</span> 사이트의 Header 정보만 가져오기\n<span class=\"token operator\">-</span>I <span class=\"token punctuation\">:</span> 사이트의 Header와 바디 정보를 함께 가져오기\n<span class=\"token operator\">-</span>u <span class=\"token punctuation\">:</span> 사용자 정보</code></pre></div>\n<br/>\n<h3 id=\"예제-1\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%A0%9C-1\" aria-label=\"예제 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예제</h3>\n<ul>\n<li>header 값 설정하기, -H</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token operator\">-</span>H값을 사용히야 헤더에 전달할 값들을 설정합니다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span> Content<span class=\"token operator\">-</span>Type을 application<span class=\"token operator\">/</span>json으로 설정하기\ncurl <span class=\"token operator\">-</span>H <span class=\"token string\">\"Content-Type: application/json\"</span>\n<span class=\"token operator\">-</span> Content<span class=\"token operator\">-</span>Length를 <span class=\"token number\">0</span>으로 설정하기\ncurl <span class=\"token operator\">-</span>H <span class=\"token string\">\"Content-Length: 0\"</span></code></pre></div>\n<br/>\n<ul>\n<li>curl을 사용하여 파라미터를 전달하기 </li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">전달할 파라미터가 있는 경우의 방법입니다<span class=\"token punctuation\">.</span> 파라미터값을 전달하는 경우 아래와 같이 url 뒤에 붙이는 <span class=\"token keyword\">get</span> 방식이나 <span class=\"token operator\">-</span>d 옵션을 사용하여 전달할 수 있습니다<span class=\"token punctuation\">.</span>\ncurl <span class=\"token operator\">-</span><span class=\"token class-name\">G</span> http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>webisfree<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>action<span class=\"token operator\">/</span><span class=\"token punctuation\">?</span>test<span class=\"token operator\">=</span>ok\n또 다른 방법으로 <span class=\"token operator\">-</span>d 옵션을 사용하면 아래처럼 전달합니다<span class=\"token punctuation\">.</span> 만약 전달할 값이 아래와 같다면 다음과 같이 수행합니다<span class=\"token punctuation\">.</span>\n@ Method <span class=\"token operator\">/</span> 전달할 값\nPOST <span class=\"token operator\">/</span> test<span class=\"token operator\">=</span>ok\ncurl <span class=\"token operator\">-</span>X PUT <span class=\"token operator\">-</span><span class=\"token class-name\">G</span> http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>webisfree<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>action <span class=\"token operator\">-</span><span class=\"token class-name\">d</span> test<span class=\"token operator\">=</span>ok</code></pre></div>\n<br/>\n<ul>\n<li>POST 메소드를 사용한 예제</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">기본값으로 메소드는 POST이므로 <span class=\"token operator\">-</span>X 설정이 없이 사용할 수 있습니다<span class=\"token punctuation\">.</span>\n@ Method <span class=\"token operator\">/</span> 전달할 값\nPOST <span class=\"token operator\">/</span> test<span class=\"token operator\">=</span>ok<span class=\"token punctuation\">,</span> test2<span class=\"token operator\">=</span>ok\n<span class=\"token class-name\">curl</span> http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>webisfree<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>action <span class=\"token operator\">-</span><span class=\"token class-name\">d</span> test<span class=\"token operator\">=</span>ok <span class=\"token operator\">-</span><span class=\"token class-name\">d</span> test2<span class=\"token operator\">=</span>ok\n아래와 같이 따옴표를 사용하여 하나로 묶어 사용할 수도 있습니다<span class=\"token punctuation\">.</span>\n<span class=\"token class-name\">curl</span> http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>webisfree<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>action <span class=\"token operator\">-</span>d 'test<span class=\"token operator\">=</span>ok<span class=\"token operator\">&amp;</span>test2<span class=\"token operator\">=</span>ok'\n<span class=\"token operator\">!</span> DELETE 메소드를 사용한 예제아래는 DELETE 메소드로 요청하는 방법입니다<span class=\"token punctuation\">.</span>\ncurl <span class=\"token operator\">-</span>X <span class=\"token string\">\"DELETE\"</span> http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>webisfree<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>action<span class=\"token operator\">/</span>\n예를들어 아래처럼 사용할 수 있습니다<span class=\"token punctuation\">.</span>\ncurl <span class=\"token operator\">-</span>X DELETE <span class=\"token operator\">-</span>H <span class=\"token string\">\"Accept: application/xml\"</span> <span class=\"token operator\">-</span>H <span class=\"token string\">\"Content-type: application/xml\"</span> <span class=\"token operator\">-</span>u <span class=\"token punctuation\">[</span>USER<span class=\"token punctuation\">:</span>PASS<span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span>X\n<span class=\"token operator\">-</span>u를 사용하여 계정 정보를 입력시 아이디만 넘길 수 있습니다<span class=\"token punctuation\">.</span> 이 경우 패스워드 입력창이 나타나며 여기에 패스워드를 입력하면 됩니다<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<ul>\n<li>url이 긴 경우 역슬러쉬 사용하기 </li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">리눅스 쉘 환경에서 입력시 명령어 줄이 긴 경우 다음 줄에 나타나기 위해서 역슬러쉬 \\ 기호를 많이 사용합니다<span class=\"token punctuation\">.</span> 아래 예제를 봐주세요<span class=\"token punctuation\">.</span>\ncurl <span class=\"token operator\">-</span><span class=\"token class-name\">G</span> http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>webisfree<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>action \\\n<span class=\"token operator\">-</span>X DELETE \\\n<span class=\"token operator\">-</span><span class=\"token class-name\">d</span> id<span class=\"token operator\">=</span><span class=\"token number\">123</span>\n이처럼 사용할 수 있죠<span class=\"token punctuation\">.</span>\ncs\n\n<span class=\"token operator\">&lt;</span>br<span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n<span class=\"token operator\">*</span> 여러개의 파라미터를 전달하는 경우\n\n```cs\n하나가 아닌 데이터 값이 여러개인 경우 어떻게 할까요<span class=\"token punctuation\">?</span> 이 경우 두 가지 방법으로 사용할 수 있습니다<span class=\"token punctuation\">.</span> \n<span class=\"token operator\">-</span><span class=\"token class-name\">d</span> id<span class=\"token operator\">=</span><span class=\"token number\">123</span> <span class=\"token operator\">-</span><span class=\"token class-name\">d</span> name<span class=\"token operator\">=</span>webisfree <span class=\"token operator\">-</span><span class=\"token class-name\">d</span> number<span class=\"token operator\">=</span><span class=\"token number\">1004</span>\n<span class=\"token operator\">--</span>data <span class=\"token string\">\"id=123&amp;name=webisfree&amp;number=1004\"</span></code></pre></div>\n <br/>\n<hr>\n<h2 id=\"-wget-vs-curl\" style=\"position:relative;\"><a href=\"#-wget-vs-curl\" aria-label=\" wget vs curl permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐱‍🏍 wget vs. CURL</h2>\n<p>  wget 과 curl 은 둘 다 웹 서버로부터 컨텐츠를 가져오는 Linux 커맨드입니다.<br>\nwget 과 curl 은 거의 유사하지만 조금 다른 부분이 있습니다.  </p>\n<p>  우선 둘의 공통된 내용은 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token operator\">-</span> HTTP<span class=\"token punctuation\">,</span> HTTPS<span class=\"token punctuation\">,</span> FTP 프로토콜을 통해 컨텐츠를 다운로드 하는 커맨트 라인 툴입니다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span> HTTP POST request 를 지원합니다<span class=\"token punctuation\">.</span> <span class=\"token punctuation\">(</span>즉<span class=\"token punctuation\">,</span> 웹사이트로 데이터를 전송할 수 있습니다<span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">-</span> HTTP 쿠키를 지원합니다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span> 스크립트처럼 사용자 인터렉션없이 수행될 수 있도록 설계되었습니다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span> 오픈소스이며 무료입니다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span> <span class=\"token number\">90</span>년대에 시작한 프로젝트입니다<span class=\"token punctuation\">.</span> <span class=\"token punctuation\">(</span>wget 은 <span class=\"token number\">1995</span>년<span class=\"token punctuation\">,</span> curl 은 <span class=\"token number\">1996</span>년에 시작했습니다<span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">-</span> metalink 를 지원합니다<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<p>  wget 과 curl 은 아래와 같은 다른 점이 있습니다.  </p>\n<ul>\n<li>\n<p>wget</p>\n<p>  간단하고 직관적입니다. 별도의 라이브러리를 지원하지 않습니다. 재귀적으로 다운로드합니다.<br>\n(즉, 페이지에 있는 모든 내용이나 FTP 디렉터리에 있는 모든 파일들을 한 번에 그대로 복사해 옵니다.)<br>\ncurl 에 비하여 더 오래되었습니다. GNU 프로젝트입니다.</p>\n</li>\n<li>\n<p>curl</p>\n<p>  libcurl 라이브러리로 더 강력한 기능들을 추가/사용할 수 있습니다.<br>\nstdin 또는 stdout 의 pipe 를 이용하는 전통적인 unix 스타일의 방식도 지원합니다.<br>\nLDAP 이나 Samba 공유도 지원합니다.<br>\n양방향입니다. (wget 은 일반 HTTP POST request 만 지원합니다.)<br>\nSSL 을 지원합니다.<br>\ngzip 압축 및 해지를 지원합니다.<br>\nMIT 라이센스입니다.  </p>\n</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-%ED%8C%A8%ED%82%A4%EC%A7%80-%EA%B4%80%EB%A6%AC%EC%9E%90%EB%9E%80\">✔ 패키지 관리자란?</a></li>\n<li>\n<p><a href=\"#-rpm%EA%B3%BC-yum\">👍 RPM과 YUM</a></p>\n<ul>\n<li><a href=\"#rpmredhat-package-manager\">RPM(Redhat Package Manager)</a></li>\n<li><a href=\"#rpm%EC%9D%98-%ED%8C%8C%EC%9D%BC-%EA%B5%AC%EC%A1%B0\">RPM의 파일 구조</a></li>\n<li><a href=\"#rpm%EC%9D%98-%EC%82%AC%EC%9A%A9%EB%B2%95\">RPM의 사용법</a></li>\n<li><a href=\"#-yumyellodog-updater-modified\">✨ YUM(Yellodog Updater Modified)</a></li>\n<li><a href=\"#yum%EC%9D%98-%EC%82%AC%EC%9A%A9%EB%B2%95\">YUM의 사용법</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EC%9B%B9-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C-%EB%AA%85%EB%A0%B9%EC%96%B4\">👌 웹 다운로드 명령어</a></p>\n<ul>\n<li><a href=\"#wget\">wget</a></li>\n<li><a href=\"#%EC%98%88%EC%A0%9C\">예제</a></li>\n<li><a href=\"#curl\">curl</a></li>\n<li><a href=\"#%EC%98%88%EC%A0%9C-1\">예제</a></li>\n</ul>\n</li>\n<li><a href=\"#-wget-vs-curl\">🐱‍🏍 wget vs. CURL</a></li>\n</ul>\n</div>","frontmatter":{"date":"June 23, 2021","title":"[LINUX] - 패키지 관리자 RPM, YUM","categories":"LINUX","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/linux-package/"}},"prev":{"id":"1c7fdc86-6cbb-5090-9d9e-1cf15f78b2c5","html":"<p>머리말 </p>\n<p>DNS에 대해서 이론적인 내용도 대충 알고 있었습니다만 이번 포스트를 작성하면서 이론적인 내용과 함께<br>\n실제로 구축 실습을 해보면서 정확한 개념을 얻을 수 있었습니다. </p>\n<hr>\n<h2 id=\"-dns-domain-name-server-란\" style=\"position:relative;\"><a href=\"#-dns-domain-name-server-%EB%9E%80\" aria-label=\" dns domain name server 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ DNS (Domain Name Server) 란?</h2>\n<p> DNS는 도메인 네임 서버를 일컫습니다.<br>\n인터넷은 서버들을 유일하게 구분할 수 있는 IP주소를 기본체계로 이용하는데<br>\n숫자로 이루어진 조합이라 인간이 기억하기에는 무리가 따릅니다.<br>\n따라서 DNS를 이용해 IP주소를 인간이 기억하기 편한 언어 체계로 변환하는 작업이 필요한데<br>\n이 역할을 DNS가 하는 것입니다.  </p>\n<br/>\n<h3 id=\"특징\" style=\"position:relative;\"><a href=\"#%ED%8A%B9%EC%A7%95\" aria-label=\"특징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>특징</h3>\n<ul>\n<li>PORT : 53</li>\n<li>PROTOCOL : TCP/UDP</li>\n<li>디렉토리 서비스 [트리 형 구조를 가지고 있다.] - BIND 서비스 기준으로 만들어졌음.</li>\n<li>데이터베이스에서 “레코드” 형식의 단위를 사용</li>\n</ul>\n<p><img src=\"https://img1.daumcdn.net/thumb/R720x0.q80/?scode=mtistory2&#x26;fname=http%3A%2F%2Fcfs15.tistory.com%2Fimage%2F27%2Ftistory%2F2008%2F11%2F16%2F21%2F49%2F492016d564daa\" alt=\"5-3. DNS 설치 및 구성\"></p>\n<br/>\n<h3 id=\"서버의-구성\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84%EC%9D%98-%EA%B5%AC%EC%84%B1\" aria-label=\"서버의 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버의 구성</h3>\n<ol>\n<li>master server</li>\n<li>slave server (Zone data DB를 가지고 있다.)</li>\n<li>cache (only) server (Zone data DB를 가지고 있지 않다.)</li>\n</ol>\n<br/>\n<hr>\n<h2 id=\"-도메인이름의-체계와-dns-질의-과정\" style=\"position:relative;\"><a href=\"#-%EB%8F%84%EB%A9%94%EC%9D%B8%EC%9D%B4%EB%A6%84%EC%9D%98-%EC%B2%B4%EA%B3%84%EC%99%80-dns-%EC%A7%88%EC%9D%98-%EA%B3%BC%EC%A0%95\" aria-label=\" 도메인이름의 체계와 dns 질의 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ 도메인이름의 체계와 DNS 질의 과정</h2>\n<p>인터넷 도메인은 아래 그림같이 하나의 역트리 구조를 하고 있습니다. [디렉토리 구조]</p>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/2316A93F51C462940C\"></p>\n<p>인터넷 도메인의 체계에서 최상위는 <code class=\"language-text\">루트(root)</code>로 인터넷도메인의 시작점이 됩니다.<br>\n루트도메인 바로 아래단계는 <code class=\"language-text\">1단계</code> 도메인이라고 하며 이를 <code class=\"language-text\">최상위 도메인</code>이라고 하고.<br>\n최상위 도메인은 국가명을 나타내는 국가 최상위 도메인이 일반 최상위 도메인으로 구분됩니다.</p>\n<br/>\n<hr>\n<h2 id=\"-도메인-질의-과정\" style=\"position:relative;\"><a href=\"#-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%A7%88%EC%9D%98-%EA%B3%BC%EC%A0%95\" aria-label=\" 도메인 질의 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✨ 도메인 질의 과정</h2>\n<p>도메인 질의는 /etc/resolv.conf 에 지정된 네임서버로 접속하여 아래 그림과 같은 질의 과정을 거치게 됩니다.</p>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/026CF23451C465CE34\"></p>\n<ol>\n<li>Client에서 지정된 NS로 www.yahoo.com에 대한 요청을 전달한다.  </li>\n</ol>\n<br/>\n<ol start=\"2\">\n<li>일반 NS서버는 루트NS서버의 IP주소를 기록한 ‘hint 파일’을 가지고 있다.<br>\n이것을 참조하여 루트에 www.yahoo.com에 대한 요청을 전달합니다.<br>\n루트는 최상위네임서버들의 네임서버명(NS레코드)과 IP주소(A레코드)를 가지고 있다.<br>\n이를 <code class=\"language-text\">글루레코드/glue record</code>라고 합니다.<br>\n이 글루레코드를 참조하여 .com 네임서버를 참조하라고 응답합니다<br>\n(루트 네임서버는 전세계에 13개뿐입니다).</li>\n</ol>\n<br/>\n<ol start=\"3\">\n<li>.com 네임서버에는 .com을 최상위도메인으로 사용하는 도메인들의 글루레코드를 가지고 있기에<br>\n이를 참조하여 www.yahoo.com의 네임서버를 참조하라고 응답한다.</li>\n</ol>\n<br/>\n<ol start=\"4\">\n<li>yahoo.com의 네임서버는 yahoo.com 도메인에 대한 존(zone)파일을 참조하여<br>\nwww.yahoo.com의 IP주소(A레코드)를 클라이언트가 최초 요청을 한 네임서버로 되돌려 준다.</li>\n</ol>\n<br/>\n<ol start=\"5\">\n<li>\n<p>최초 요청을 받은 네임서버는 클라이언트에게 www.yahoo.com의 IP주소를 전송한다.</p>\n<p>DNS서버는 한 번 검색한 결과는 메모리의 캐시에 기록하며<br>\n같은 정보가 요청되면 캐시에 있는 정보를 전송한다.<br>\n캐시에는 유효기간(TTL:Time To Live)이 정해져 있으므로 유효기간이 지난 정보는 캐시에서 삭제된다.</p>\n</li>\n</ol>\n<br/>\n<hr>\n<h2 id=\"-dns-질의-쿼리\" style=\"position:relative;\"><a href=\"#-dns-%EC%A7%88%EC%9D%98-%EC%BF%BC%EB%A6%AC\" aria-label=\" dns 질의 쿼리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👍 DNS 질의 쿼리</h2>\n<h3 id=\"1-재귀적-변환-재귀-쿼리-recursive\" style=\"position:relative;\"><a href=\"#1-%EC%9E%AC%EA%B7%80%EC%A0%81-%EB%B3%80%ED%99%98-%EC%9E%AC%EA%B7%80-%EC%BF%BC%EB%A6%AC-recursive\" aria-label=\"1 재귀적 변환 재귀 쿼리 recursive permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 재귀적 변환/ 재귀 쿼리 RECURSIVE</h3>\n<ul>\n<li>일반적인 네임서버</li>\n<li>클라이언트에 최종 결과값을 반환</li>\n<li>클라이언트(Sub Resolver)로부터 도메인 네임 질의 요청이 들어올 경우<br>\n네임서버가 직접 Name space를 탐색하여 결과 값을 반환하는 방식.</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/90124690-c69bf380-dd9b-11ea-90d7-db937e9b7d00.png\" alt=\"스크린샷, 2020-08-13 19-32-45\"></p>\n<p>위의 그림같이 재귀쿼리는 컴퓨터가 리졸버에게 kr.yahoo.com을 물어보면 resolver는 DNS서버에 물어본다.<br>\nDNS서버가 재귀적변환이면 (Root의 네임서버는 무조건 순환쿼리)<br>\nresolver는 더 이상 찾지않고 재귀적방식인 DNS서버 (이 그림에선 Root네임서버)가 찾아서<br>\nresolver에게 전달해준다, 그럼 resolver는 다시 컴퓨터에게 이 값을 알려준다.</p>\n<br/>\n<hr>\n<h3 id=\"2-반복적-변환-순환-쿼리-terative\" style=\"position:relative;\"><a href=\"#2-%EB%B0%98%EB%B3%B5%EC%A0%81-%EB%B3%80%ED%99%98-%EC%88%9C%ED%99%98-%EC%BF%BC%EB%A6%AC-terative\" aria-label=\"2 반복적 변환 순환 쿼리 terative permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 반복적 변환/ 순환 쿼리 TERATIVE</h3>\n<ul>\n<li>Root 서버는 무조건 순환쿼리, TLD네임서버는 일부만 순환쿼리이다.</li>\n<li>반복적 변환 - 자신이 직접 관리하지 않는 질의 요청의 경우 질의에 응답 가능한 NS목록을 응답.<br>\n(질의에 응답가능한 NS란? 만약 컴퓨터가 질의한 것이 kr.yahoo.com.이고 자신은 com.도메인이고<br>\n자신의 하위도메인에 yahoo.com.이 있을 때, 컴퓨터에게 yahoo.com.을 알려준다.)</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/90124758-e206fe80-dd9b-11ea-9be4-c7d1039c0315.png\" alt=\"스크린샷, 2020-08-13 19-33-32\"></p>\n<p>이렇게 반복적 변환은 컴퓨터가 리졸버에게 kr.yahoo.com을 물어본다면<br>\n리졸버는 DNS에게 kr.yahoo.com.을 IP로 바꿔달라고 요청한다(kr.yahoo.com.에 대해 질의한다)<br>\n이때 리졸버가 물어본 DNS서버가 반복적 변환방식인 이터레이티브라면<br>\n재귀적 변환처럼 찾아주지않고 질의에 응답이 가능한 NS목록을 응답한다.<br>\n이 그림에선 리졸버가 처음에 .(root) DNS에 물어봤기 때문에<br>\nDNS는 자신하위에있는 TLDs중 yahoo.com.을 관리하고있는 com.DNS를 알려주게 된다.<br>\n이렇게 반복하다 보면 kr.yahoo.com.까지 도달한다.\n\n<br/></p>\n<hr>\n<h2 id=\"-dns-구축-방법\" style=\"position:relative;\"><a href=\"#-dns-%EA%B5%AC%EC%B6%95-%EB%B0%A9%EB%B2%95\" aria-label=\" dns 구축 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎶 DNS 구축 방법</h2>\n<h3 id=\"설정-config\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%A0%95-config\" aria-label=\"설정 config permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설정 CONFIG</h3>\n<ul>\n<li>\n<ol>\n<li>/etc/named.conf </li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">NS 데이터베이스 및 zone 파일의 위치<span class=\"token punctuation\">,</span> 접근제어등의  \n보안설정을 할 수 있는 메인 설정파일<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n<li>\n<ol start=\"2\">\n<li>/var/named  </li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">네임서버의 zone 파일 디렉토리의 경로  \nchroot 설정시 <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>named<span class=\"token operator\">/</span> 디렉토리에 설정된 내용을  \n<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>named<span class=\"token operator\">/</span>chroot<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>named로 심볼릭 링크를 걸어준다<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n<li>\n<ol start=\"3\">\n<li>/etc/named.rfc1912.zones </li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">네임서버에 쿼리 요청 시 사용할 도메인 정보<span class=\"token punctuation\">(</span>정방향 영역과 역방향영역<span class=\"token punctuation\">)</span>을 설정해야 될 부분입니다<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n<li>\n<ol start=\"4\">\n<li>/var/named/[도메인].zone </li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">네임서버 설정 시 가장 중요한 도메인 정보 파일이며  \n네임서버를 가동시에 zone 파일을 읽어 네임서버 서비스가 가동되며  \nzone 파일은 도메인을 IP 주소로 변환해 주는 역할을 합니다<span class=\"token punctuation\">.</span>  </code></pre></div>\n</li>\n<li>\n<ol start=\"5\">\n<li>resolv.conf 설정</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">서버가 바라보고 있는 Domain Server의 주소 설정 파일입니다<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<br/>\n<p><strong>1. BIND 설치</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  yum <span class=\"token operator\">-</span>y install bind</code></pre></div>\n<br/>\n<p><strong>2. /etc/named.conf 설정</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"> options <span class=\"token punctuation\">{</span>\nlisten<span class=\"token operator\">-</span><span class=\"token keyword\">on</span> port <span class=\"token number\">53</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nlisten<span class=\"token operator\">-</span><span class=\"token keyword\">on</span><span class=\"token operator\">-</span>v6 port <span class=\"token number\">53</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">::</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\ndirectory \t<span class=\"token string\">\"/var/named\"</span><span class=\"token punctuation\">;</span>\ndump<span class=\"token operator\">-</span>file \t<span class=\"token string\">\"/var/named/data/cache_dump.db\"</span><span class=\"token punctuation\">;</span>\nstatistics<span class=\"token operator\">-</span>file <span class=\"token string\">\"/var/named/data/named_stats.txt\"</span><span class=\"token punctuation\">;</span>\nmemstatistics<span class=\"token operator\">-</span>file <span class=\"token string\">\"/var/named/data/named_mem_stats.txt\"</span><span class=\"token punctuation\">;</span>\nrecursing<span class=\"token operator\">-</span>file  <span class=\"token string\">\"/var/named/data/named.recursing\"</span><span class=\"token punctuation\">;</span>\nsecroots<span class=\"token operator\">-</span>file   <span class=\"token string\">\"/var/named/data/named.secroots\"</span><span class=\"token punctuation\">;</span>\nallow<span class=\"token operator\">-</span>query     <span class=\"token punctuation\">{</span> localhost<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* \n - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.\n - If you are building a RECURSIVE (caching) DNS server, you need to enable \n   recursion. \n - If your recursive DNS server has a public IP address, you MUST enable access \n   control to limit queries to your legitimate users. Failing to do so will\n   cause your server to become part of large scale DNS amplification \n   attacks. Implementing BCP38 within your network would greatly\n   reduce such attack surface \n*/</span>\n<span class=\"token class-name\">recursion</span> yes<span class=\"token punctuation\">;</span>\n\ndnssec<span class=\"token operator\">-</span><span class=\"token class-name\">enable</span> yes<span class=\"token punctuation\">;</span>\ndnssec<span class=\"token operator\">-</span><span class=\"token class-name\">validation</span> yes<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* Path to ISC DLV key */</span>\nbindkeys<span class=\"token operator\">-</span>file <span class=\"token string\">\"/etc/named.root.key\"</span><span class=\"token punctuation\">;</span>\n\nmanaged<span class=\"token operator\">-</span>keys<span class=\"token operator\">-</span>directory <span class=\"token string\">\"/var/named/dynamic\"</span><span class=\"token punctuation\">;</span>\n\npid<span class=\"token operator\">-</span>file <span class=\"token string\">\"/run/named/named.pid\"</span><span class=\"token punctuation\">;</span>\nsession<span class=\"token operator\">-</span>keyfile <span class=\"token string\">\"/run/named/session.key\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nlogging <span class=\"token punctuation\">{</span>\n    <span class=\"token return-type class-name\">channel</span> default_debug <span class=\"token punctuation\">{</span>\n            file <span class=\"token string\">\"data/named.run\"</span><span class=\"token punctuation\">;</span>\n            severity <span class=\"token keyword\">dynamic</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nzone <span class=\"token string\">\".\"</span> IN <span class=\"token punctuation\">{</span>\n<span class=\"token class-name\">type</span> hint<span class=\"token punctuation\">;</span>\nfile <span class=\"token string\">\"named.ca\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\ninclude <span class=\"token string\">\"/etc/named.rfc1912.zones\"</span><span class=\"token punctuation\">;</span>\ninclude <span class=\"token string\">\"/etc/named.root.key\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h4 id=\"변경-사항\" style=\"position:relative;\"><a href=\"#%EB%B3%80%EA%B2%BD-%EC%82%AC%ED%95%AD\" aria-label=\"변경 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>변경 사항</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">변경 전 <span class=\"token operator\">-</span> listen<span class=\"token operator\">-</span><span class=\"token keyword\">on</span> port <span class=\"token number\">53</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n변경 후 <span class=\"token operator\">-</span> listen<span class=\"token operator\">-</span><span class=\"token keyword\">on</span> port <span class=\"token number\">53</span> <span class=\"token punctuation\">{</span> any<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n기본설정은 <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>에 리스닝닝하기 때문에<span class=\"token punctuation\">,</span> 외부에서 접속이 불가능합니다 서버에 설정된 모든 IP에 대해 리스닝하도록 any로 변경합니다\n\n변경 전 <span class=\"token operator\">-</span> allow<span class=\"token operator\">-</span>query <span class=\"token punctuation\">{</span> localhost<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n변경 후 <span class=\"token operator\">-</span> allow<span class=\"token operator\">-</span>query <span class=\"token punctuation\">{</span> any<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n네임서버에 설정된 도메인만 응답하도록 설정하는부분입니다<span class=\"token punctuation\">.</span>\n\n변경없음 <span class=\"token operator\">-</span> <span class=\"token class-name\">recursion</span> no<span class=\"token punctuation\">;</span>\n\nyes로 설정하면 네임서버에 설정되지 않은 도메인에 대한 질의가 있을시 캐싱 네임서버의 역할을 하여 DNS 질의과정을 거치게 되며<span class=\"token punctuation\">,</span> 주 네임서버는 캐싱 네임서버 역할이 필요하지 않으므로no로 설정합니다<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<p><strong>3. named.rfc1912.zones 설정</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">zone <span class=\"token string\">\"won.co.kr\"</span> IN <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">type</span> master<span class=\"token punctuation\">;</span>\n    file <span class=\"token string\">\"won.co.kr.zone\"</span><span class=\"token punctuation\">;</span>\n    allow<span class=\"token operator\">-</span>update <span class=\"token punctuation\">{</span> none<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nzone <span class=\"token string\">\"56.168.192.in-addr.arpa\"</span> IN <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">type</span> master<span class=\"token punctuation\">;</span>\n    file <span class=\"token string\">\"db.192.168.56\"</span><span class=\"token punctuation\">;</span>\n    allow<span class=\"token operator\">-</span>update <span class=\"token punctuation\">{</span> none<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>named.rfc1912.zones의 맨하단부분의 추가할 도메인정보/파일(test.com, test.com.zone)을 입력.<br>\nwon.co.kr 도메인을 사용하려면 won.co.k.rzone([도메인].zone)파일을 만들어야 됩니다</p>\n<br/>\n<p><strong>4. ZONE 파일 설정하기</strong>  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@server</span> named<span class=\"token punctuation\">]</span># cp named<span class=\"token punctuation\">.</span>localhost won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone</code></pre></div>\n<p>/var/named의 디렉토리로 이동하면 named.localhost 파일이 있습니다<br>\nnamed.localhost의 파일을 사용할 도메인의 zone파일의 파일명으로 복사합니다.  </p>\n<br/>\n<p><strong>설정 내용 확인</strong></p>\n<br/>\n<p>정방향 파일\n</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  cat won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone \n$TTL <span class=\"token number\">1D</span>\n@\tIN SOA\tns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr root<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span> <span class=\"token punctuation\">(</span>\n\t\t\t\t<span class=\"token number\">0</span>\t<span class=\"token punctuation\">;</span> serial \t<span class=\"token comment\">//시리얼값</span>\n\t\t\t\t<span class=\"token number\">1D</span>\t<span class=\"token punctuation\">;</span> refresh \t<span class=\"token comment\">//보조 네임서버가 주 네임서버에 접속하는 시간</span>\n\t\t\t\t1H\t<span class=\"token punctuation\">;</span> retry \t<span class=\"token comment\">//접속 실패시 다시 시도할 시도 간격</span>\n\t\t\t\t1W\t<span class=\"token punctuation\">;</span> expire \t<span class=\"token comment\">//주네임서버에서 데이터가 없다면 1주 이후에 지워짐</span>\n\t\t\t\t3H <span class=\"token punctuation\">)</span>\t<span class=\"token punctuation\">;</span> minimum \t<span class=\"token comment\">//TTL 설정과 같은 의미</span>\n@\tIN\tNS\tns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\t\t \t<span class=\"token comment\">//도메인을 소우한 주 DNS의 도메인</span>\nIN\tA\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span> \t\t\t\t<span class=\"token comment\">//도메인이 찾아갈 IP주소</span>\nns\tIN\tA\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span> \t\t\t<span class=\"token comment\">//주 네임서버 아이피</span>\nwww\tIN\tA\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>    \t\t<span class=\"token comment\">//www.도메인이 찾아갈 IP주소</span></code></pre></div>\n<br/>\n<p>역방향 파일\n</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$TTL <span class=\"token number\">1D</span>\n@\tIN SOA\tns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr root<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span> <span class=\"token punctuation\">(</span>\n\t\t\t\t<span class=\"token number\">0</span>\t<span class=\"token punctuation\">;</span> serial\n\t\t\t\t<span class=\"token number\">1D</span>\t<span class=\"token punctuation\">;</span> refresh\n\t\t\t\t1H\t<span class=\"token punctuation\">;</span> retry\n\t\t\t\t1W\t<span class=\"token punctuation\">;</span> expire\n\t\t\t\t3H <span class=\"token punctuation\">)</span>\t<span class=\"token punctuation\">;</span> minimum\n@\tIN\tNS\tns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\n<span class=\"token number\">101</span>\tIN\tPTR\tns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\n<span class=\"token number\">101</span>\tIN\tPTR\twww<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span></code></pre></div>\n<br>\n<p><strong>5. ZONE 파일 파일의 소유권 변경</strong></p>\n<p>변경 전</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  ls <span class=\"token operator\">-</span>alrt <span class=\"token operator\">*</span>\n<span class=\"token operator\">-</span>rw<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root  root   <span class=\"token number\">227</span>  <span class=\"token number\">7</span>월  <span class=\"token number\">8</span> <span class=\"token number\">19</span><span class=\"token punctuation\">:</span><span class=\"token number\">28</span> won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone\n<span class=\"token operator\">-</span>rw<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root  root   <span class=\"token number\">209</span>  <span class=\"token number\">7</span>월  <span class=\"token number\">8</span> <span class=\"token number\">19</span><span class=\"token punctuation\">:</span><span class=\"token number\">36</span> db<span class=\"token punctuation\">.</span><span class=\"token number\">192.168</span><span class=\"token number\">.56</span></code></pre></div>\n<p>변경 후</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  <span class=\"token class-name\">chown</span> named<span class=\"token punctuation\">:</span>root won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone db<span class=\"token punctuation\">.</span><span class=\"token number\">192.168</span><span class=\"token number\">.56</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  ls <span class=\"token operator\">-</span>alrt <span class=\"token operator\">*</span>\n<span class=\"token operator\">-</span>rw<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> named root   <span class=\"token number\">227</span>  <span class=\"token number\">7</span>월  <span class=\"token number\">8</span> <span class=\"token number\">19</span><span class=\"token punctuation\">:</span><span class=\"token number\">28</span> won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone\n<span class=\"token operator\">-</span>rw<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> named root   <span class=\"token number\">209</span>  <span class=\"token number\">7</span>월  <span class=\"token number\">8</span> <span class=\"token number\">19</span><span class=\"token punctuation\">:</span><span class=\"token number\">36</span> db<span class=\"token punctuation\">.</span><span class=\"token number\">192.168</span><span class=\"token number\">.56</span>\n파일을 작성 후 파일의 소유권을 변경해 줍니다<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n  \n<p><strong>6. 설정파일 검증</strong></p>\n<p>named.conf 파일 검증</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  named<span class=\"token operator\">-</span>checkconf <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>named<span class=\"token punctuation\">.</span>conf \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  </code></pre></div>\n<p>named.conf 파일을 검증하는 과정이며, 정상적으로 설정을 잘하였다면 아무런 메시지가 나오지 않습니다</p>\n<br/>\n<p><strong>zone 파일 검증</strong></p>\n<ol>\n<li>\n<p>정상적인 설정 메시지</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span># named<span class=\"token operator\">-</span>checkzone won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone  db<span class=\"token punctuation\">.</span><span class=\"token number\">192.168</span><span class=\"token number\">.56</span>\nzone test<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>IN<span class=\"token punctuation\">:</span> loaded serial <span class=\"token number\">0</span>\nOK</code></pre></div>\n<p>위와 같이 OK 메시지를 보여주면 설정에 문제가 없는 것입니다.</p>\n<br/>\n</li>\n<li>\n<p>잘못된 설정 메시지</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@server</span> named<span class=\"token punctuation\">]</span># named<span class=\"token operator\">-</span>checkzone won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone\nzone won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone<span class=\"token operator\">/</span>IN<span class=\"token punctuation\">:</span> NS 'ns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr' has no <span class=\"token return-type class-name\">address</span> records <span class=\"token punctuation\">(</span>A <span class=\"token keyword\">or</span> AAAA<span class=\"token punctuation\">)</span>\nzone won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone<span class=\"token operator\">/</span>IN<span class=\"token punctuation\">:</span> <span class=\"token keyword\">not</span> loaded due to errors<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n</ol>\n<br/>\n<p><strong>7. resolv.conf 설정 변경</strong>  </p>\n<p>파일에 지정할 도메인 서버의 주소, GW설정</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  cat <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>resolv<span class=\"token punctuation\">.</span>conf \n<span class=\"token preprocessor property\"># Generated by NetworkManager</span>\n<span class=\"token preprocessor property\">#nameserver 8.8.8.8</span>\nnameserver <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\t\t\nnameserver <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.1</span></code></pre></div>\n<p>NMCLI 명령어로 수정하는 방법을 권장.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>변경전<span class=\"token punctuation\">]</span>\n\t\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  nmcli connection show enp0s8 <span class=\"token operator\">|</span> grep DNS\nIP4<span class=\"token punctuation\">.</span>DNS<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>                             <span class=\"token number\">8.8</span><span class=\"token number\">.8</span><span class=\"token number\">.8</span>\n<span class=\"token punctuation\">[</span>변경 후<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  nmcli connection modify enp0s8 ipv4<span class=\"token punctuation\">.</span>dns <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  nmcli connection show enp0s8 <span class=\"token operator\">|</span> grep DNS\nipv4<span class=\"token punctuation\">.</span>dns<span class=\"token punctuation\">:</span>                               <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span></code></pre></div>\n<br/>\n<p><strong>8. DNS 방화벽 설정</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span><span class=\"token keyword\">add</span><span class=\"token operator\">-</span>service<span class=\"token operator\">=</span>dns <span class=\"token operator\">--</span>permanent \nsuccess\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>reload\nsuccess\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>list<span class=\"token operator\">-</span>all <span class=\"token operator\">|</span> grep <span class=\"token class-name\">services</span>\nservices<span class=\"token punctuation\">:</span> dhcpv6<span class=\"token operator\">-</span>client dns http ssh</code></pre></div>\n<br/>\n<p><strong>9. NAMED 재시작 및 동작 확인</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  systemctl restart named\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  nslookup <span class=\"token class-name\">www<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr</span>\nServer<span class=\"token punctuation\">:</span>\t\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\nAddress<span class=\"token punctuation\">:</span>\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>#<span class=\"token number\">53</span>\nName<span class=\"token punctuation\">:</span>\t<span class=\"token class-name\">www<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr</span>\nAddress<span class=\"token punctuation\">:</span> <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  nslookup <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\n<span class=\"token number\">101.56</span><span class=\"token number\">.168</span><span class=\"token number\">.192</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">in</span><span class=\"token operator\">-</span><span class=\"token class-name\">addr<span class=\"token punctuation\">.</span>arpa</span>\tname <span class=\"token operator\">=</span> www<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\n<span class=\"token number\">101.56</span><span class=\"token number\">.168</span><span class=\"token number\">.192</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">in</span><span class=\"token operator\">-</span><span class=\"token class-name\">addr<span class=\"token punctuation\">.</span>arpa</span>\tname <span class=\"token operator\">=</span> ns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<p><strong>추가적으로 VM으로 연결된 다른 Client로 확인</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@lee123</span> share<span class=\"token punctuation\">]</span># nslookup <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\n<span class=\"token number\">101.56</span><span class=\"token number\">.168</span><span class=\"token number\">.192</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">in</span><span class=\"token operator\">-</span><span class=\"token class-name\">addr<span class=\"token punctuation\">.</span>arpa</span>\tname <span class=\"token operator\">=</span> ns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\n<span class=\"token number\">101.56</span><span class=\"token number\">.168</span><span class=\"token number\">.192</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">in</span><span class=\"token operator\">-</span><span class=\"token class-name\">addr<span class=\"token punctuation\">.</span>arpa</span>\tname <span class=\"token operator\">=</span> www<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@lee123</span> share<span class=\"token punctuation\">]</span># \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@lee123</span> share<span class=\"token punctuation\">]</span># nslookup <span class=\"token class-name\">www<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr</span>\nServer<span class=\"token punctuation\">:</span>\t\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\nAddress<span class=\"token punctuation\">:</span>\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>#<span class=\"token number\">53</span>\nName<span class=\"token punctuation\">:</span>\t<span class=\"token class-name\">www<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr</span>\nAddress<span class=\"token punctuation\">:</span> <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span></code></pre></div>\n<br/>\n<hr>\n<h2 id=\"-masterslave-설정\" style=\"position:relative;\"><a href=\"#-masterslave-%EC%84%A4%EC%A0%95\" aria-label=\" masterslave 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>💋 MASTER/SLAVE 설정</h2>\n<p>DNS Master &#x26; Salve 개념</p>\n<p>단순히 Master와 Slave는 주-보조 관계이며 DNS 서버를 이중화 시킨다고만 알고 계셔도 됩니다.<br>\n(Slave를 여러대 사용할수도 있습니다)  </p>\n<p>Master-Slave는 동기화 과정을 통해 zone 파일을 관리하게 되는데<br>\nzone 파일의 SOA 필드에 있는 serial을 확인하여 이 파일이 업데이트가 되었는지 판단 합니다.<br>\nserial이 증가 했을 경우 파일이 업데이트된것으로 판단하고 동기화 과정을 통해<br>\nSlave 서버로 zone 파일이 전송 됩니다.  </p>\n<p>이러한 동기화 과정을 zone transfer 라고 하는데 포트 TCP 53번이 바로 여기서 사용 됩니다.<br>\n(일반 반복 쿼리 시 UDP 53번 사용)  </p>\n<p>만약, Master 서버에 장애가 발생할 경우 Slave 서버에서 서비스를 중단 없이 지속적으로 제공 합니다.</p>\n<p><img src=\"https://k.kakaocdn.net/dn/WGIQ2/btqBWqWTyu2/UhuJc8CgA8PZYPg2EKc0UK/img.png\"></p>\n<h3 id=\"master-서버-설정\" style=\"position:relative;\"><a href=\"#master-%EC%84%9C%EB%B2%84-%EC%84%A4%EC%A0%95\" aria-label=\"master 서버 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Master 서버 설정</h3>\n<br/>\n<ol>\n<li>\n<p>named.rfc1912.zones 파일 설정 추가  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">allow<span class=\"token operator\">-</span>update <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span>slave서버 IP<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> 구문 추가\n\nzone <span class=\"token string\">\"won.co.kr\"</span> IN <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">type</span> master<span class=\"token punctuation\">;</span>\n\tfile <span class=\"token string\">\"won.co.kr.zone\"</span><span class=\"token punctuation\">;</span>\n\tallow<span class=\"token operator\">-</span>update <span class=\"token punctuation\">{</span> <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.102</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nallow<span class=\"token operator\">-</span>transfer <span class=\"token punctuation\">{</span> <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.102</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n</li>\n<li>\n<p>zone 파일 수정</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  cat <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>named<span class=\"token operator\">/</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone \t\n$TTL <span class=\"token number\">1D</span>\n@\tIN SOA\tns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr root<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span> <span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token number\">0</span>\t<span class=\"token punctuation\">;</span> serial\n\t\t\t<span class=\"token number\">1D</span>\t<span class=\"token punctuation\">;</span> refresh\n\t\t\t1H\t<span class=\"token punctuation\">;</span> retry\n\t\t\t1W\t<span class=\"token punctuation\">;</span> expire\n\t\t\t3H <span class=\"token punctuation\">)</span>\t<span class=\"token punctuation\">;</span> minimum\n\t\t\t\t\n@\tIN\tNS\tns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\n\tIN\tNS\tns2<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\t\t\t<span class=\"token comment\">//slave 서버 설정</span>\nIN\tA\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\n\nns\tIN\tA\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\nns2\tIN\tA\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.102</span>\t\t\t<span class=\"token comment\">//slave 서버 설정</span>\nwww\tIN\tA\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span></code></pre></div>\n<p>클라이언트에서 접근할 수 있도록 설정을 진행 합니다.</p>\n<br/>\n</li>\n</ol>\n<h3 id=\"slave-서버-설정\" style=\"position:relative;\"><a href=\"#slave-%EC%84%9C%EB%B2%84-%EC%84%A4%EC%A0%95\" aria-label=\"slave 서버 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SLAVE 서버 설정</h3>\n<ol>\n<li>\n<p>/etc/named.rfc1912.zones 파일 설정</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">zone <span class=\"token string\">\"won.co.kr\"</span> IN <span class=\"token punctuation\">{</span>\n<span class=\"token class-name\">type</span> slave<span class=\"token punctuation\">;</span>\nfile <span class=\"token string\">\"slave/won.co.kr.zone\"</span><span class=\"token punctuation\">;</span>\nmasters <span class=\"token punctuation\">{</span> <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ol>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-dns-domain-name-server-%EB%9E%80\">✔ DNS (Domain Name Server) 란?</a></p>\n<ul>\n<li><a href=\"#%ED%8A%B9%EC%A7%95\">특징</a></li>\n<li><a href=\"#%EC%84%9C%EB%B2%84%EC%9D%98-%EA%B5%AC%EC%84%B1\">서버의 구성</a></li>\n</ul>\n</li>\n<li><a href=\"#-%EB%8F%84%EB%A9%94%EC%9D%B8%EC%9D%B4%EB%A6%84%EC%9D%98-%EC%B2%B4%EA%B3%84%EC%99%80-dns-%EC%A7%88%EC%9D%98-%EA%B3%BC%EC%A0%95\">✌ 도메인이름의 체계와 DNS 질의 과정</a></li>\n<li><a href=\"#-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%A7%88%EC%9D%98-%EA%B3%BC%EC%A0%95\">✨ 도메인 질의 과정</a></li>\n<li>\n<p><a href=\"#-dns-%EC%A7%88%EC%9D%98-%EC%BF%BC%EB%A6%AC\">👍 DNS 질의 쿼리</a></p>\n<ul>\n<li><a href=\"#1-%EC%9E%AC%EA%B7%80%EC%A0%81-%EB%B3%80%ED%99%98-%EC%9E%AC%EA%B7%80-%EC%BF%BC%EB%A6%AC-recursive\">1. 재귀적 변환/ 재귀 쿼리 RECURSIVE</a></li>\n<li><a href=\"#2-%EB%B0%98%EB%B3%B5%EC%A0%81-%EB%B3%80%ED%99%98-%EC%88%9C%ED%99%98-%EC%BF%BC%EB%A6%AC-terative\">2. 반복적 변환/ 순환 쿼리 TERATIVE</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-dns-%EA%B5%AC%EC%B6%95-%EB%B0%A9%EB%B2%95\">🎶 DNS 구축 방법</a></p>\n<ul>\n<li>\n<p><a href=\"#%EC%84%A4%EC%A0%95-config\">설정 CONFIG</a></p>\n<ul>\n<li><a href=\"#%EB%B3%80%EA%B2%BD-%EC%82%AC%ED%95%AD\">변경 사항</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-masterslave-%EC%84%A4%EC%A0%95\">💋 MASTER/SLAVE 설정</a></p>\n<ul>\n<li><a href=\"#master-%EC%84%9C%EB%B2%84-%EC%84%A4%EC%A0%95\">Master 서버 설정</a></li>\n<li><a href=\"#slave-%EC%84%9C%EB%B2%84-%EC%84%A4%EC%A0%95\">SLAVE 서버 설정</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 23, 2021","title":"[LINUX] - DNS","categories":"LINUX","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/linux-dns/"}},"site":{"siteMetadata":{"siteUrl":"https://nasa1515.com","comments":{"utterances":{"repo":"nasa1515/nasablog"}}}}},"pageContext":{"slug":"/linux-syslogd/","nextSlug":"/linux-package/","prevSlug":"/linux-dns/"}},"staticQueryHashes":["1073350324","2938748437"]}