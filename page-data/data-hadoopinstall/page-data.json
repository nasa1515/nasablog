{"componentChunkName":"component---src-templates-blog-template-js","path":"/data-hadoopinstall/","result":{"data":{"cur":{"id":"cc3f2da4-d9dd-5454-a99e-eba728ad8ea2","html":"<p>머리말  </p>\n<p>앞이 막막합니다. 저번 포스트에서 이미 인프라 구성을 끝냈어야 했는데… 이번 포스트에서라도 마무리 지어보죠  </p>\n<hr>\n<h2 id=\"-설치-환경\" style=\"position:relative;\"><a href=\"#-%EC%84%A4%EC%B9%98-%ED%99%98%EA%B2%BD\" aria-label=\" 설치 환경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ 설치 환경</h2>\n<ul>\n<li>\n<h4 id=\"hadoop-330-full-distribute-mode\" style=\"position:relative;\"><a href=\"#hadoop-330-full-distribute-mode\" aria-label=\"hadoop 330 full distribute mode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hadoop 3.3.0 (Full-Distribute Mode)</h4>\n<table>\n<thead>\n<tr>\n<th>Server</th>\n<th align=\"center\">Master</th>\n<th align=\"center\">Worker1</th>\n<th align=\"center\">Worker2</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>OS</td>\n<td align=\"center\">CentOS 8.2</td>\n<td align=\"center\">CentOS 8.2</td>\n<td align=\"center\">CentOS 8.2</td>\n</tr>\n<tr>\n<td>Disk</td>\n<td align=\"center\">30G</td>\n<td align=\"center\">30G</td>\n<td align=\"center\">30G</td>\n</tr>\n<tr>\n<td>MEM</td>\n<td align=\"center\">14G</td>\n<td align=\"center\">14G</td>\n<td align=\"center\">14G</td>\n</tr>\n<tr>\n<td>CPU</td>\n<td align=\"center\">4.Core</td>\n<td align=\"center\">4.Core</td>\n<td align=\"center\">4.Core</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>VM (Azure)</p>\n<ul>\n<li>Hadoop Master IP : 10.0.0.5 </li>\n<li>Hadoop Worker1 IP : 10.0.0.6 </li>\n<li>Hadoop Worker2 IP : 10.0.0.7 </li>\n</ul>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-hadoop-설치-전-사전-작업\" style=\"position:relative;\"><a href=\"#-hadoop-%EC%84%A4%EC%B9%98-%EC%A0%84-%EC%82%AC%EC%A0%84-%EC%9E%91%EC%97%85\" aria-label=\" hadoop 설치 전 사전 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ Hadoop 설치 전 사전 작업</h2>\n<br/>\n<ul>\n<li>\n<h4 id=\"각-서버별-hostname-설정-및-hosts-설정-전-서버-동일\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%84%9C%EB%B2%84%EB%B3%84-hostname-%EC%84%A4%EC%A0%95-%EB%B0%8F-hosts-%EC%84%A4%EC%A0%95-%EC%A0%84-%EC%84%9C%EB%B2%84-%EB%8F%99%EC%9D%BC\" aria-label=\"각 서버별 hostname 설정 및 hosts 설정 전 서버 동일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 서버별 HOSTNAME 설정 및 hosts 설정 [전 서버 동일]</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># cat <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>hosts\n<span class=\"token number\">10.0</span><span class=\"token number\">.0</span><span class=\"token number\">.5</span>        hadoop<span class=\"token operator\">-</span>master\n<span class=\"token number\">10.0</span><span class=\"token number\">.0</span><span class=\"token number\">.6</span>        hadoop<span class=\"token operator\">-</span>worker\n<span class=\"token number\">10.0</span><span class=\"token number\">.0</span><span class=\"token number\">.7</span>        hadoop<span class=\"token operator\">-</span>worker2</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"hadoop-사용자-생성\" style=\"position:relative;\"><a href=\"#hadoop-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%83%9D%EC%84%B1\" aria-label=\"hadoop 사용자 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hadoop 사용자 생성</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># useradd <span class=\"token operator\">-</span>m hadoop\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># passwd hadoop\nChanging password <span class=\"token keyword\">for</span> user <span class=\"token class-name\">hadoop<span class=\"token punctuation\">.</span>\nNew</span> password<span class=\"token punctuation\">:</span>\n<span class=\"token class-name\">BAD</span> PASSWORD<span class=\"token punctuation\">:</span> The password <span class=\"token keyword\">is</span> <span class=\"token class-name\">shorter</span> than <span class=\"token number\">8</span> characters\nRetype <span class=\"token keyword\">new</span> password<span class=\"token punctuation\">:</span>\npasswd<span class=\"token punctuation\">:</span> all authentication tokens updated successfully<span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># usermod <span class=\"token operator\">-</span>G wheel hadoop</code></pre></div>\n</li>\n</ul>\n<br/>\n<h3 id=\"ssh-설정-hadoop-계정에서\" style=\"position:relative;\"><a href=\"#ssh-%EC%84%A4%EC%A0%95-hadoop-%EA%B3%84%EC%A0%95%EC%97%90%EC%84%9C\" aria-label=\"ssh 설정 hadoop 계정에서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSH 설정 [hadoop 계정에서]</h3>\n<ul>\n<li>\n<h4 id=\"master---worker-간의-ssh-설정을-위해-다음-작업을-진행한다\" style=\"position:relative;\"><a href=\"#master---worker-%EA%B0%84%EC%9D%98-ssh-%EC%84%A4%EC%A0%95%EC%9D%84-%EC%9C%84%ED%95%B4-%EB%8B%A4%EC%9D%8C-%EC%9E%91%EC%97%85%EC%9D%84-%EC%A7%84%ED%96%89%ED%95%9C%EB%8B%A4\" aria-label=\"master   worker 간의 ssh 설정을 위해 다음 작업을 진행한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Master &#x3C;-> Worker 간의 ssh 설정을 위해 다음 작업을 진행한다.</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>hadoop@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ ssh<span class=\"token operator\">-</span>keygen <span class=\"token operator\">-</span>t rsa\nGenerating <span class=\"token keyword\">public</span><span class=\"token operator\">/</span><span class=\"token keyword\">private</span> rsa key <span class=\"token class-name\">pair<span class=\"token punctuation\">.</span>\nEnter</span> file <span class=\"token keyword\">in</span> which to save <span class=\"token return-type class-name\">the</span> key <span class=\"token punctuation\">(</span><span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>ssh<span class=\"token operator\">/</span>id_rsa<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\nCreated directory '<span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>ssh'<span class=\"token punctuation\">.</span>\n<span class=\"token return-type class-name\">Enter</span> passphrase <span class=\"token punctuation\">(</span>empty <span class=\"token keyword\">for</span> <span class=\"token class-name\">no</span> passphrase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\nEnter same <span class=\"token class-name\">passphrase</span> again<span class=\"token punctuation\">:</span>\nYour identification has <span class=\"token class-name\">been</span> saved <span class=\"token keyword\">in</span> <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>ssh<span class=\"token operator\">/</span>id_rsa<span class=\"token punctuation\">.</span>\nYour <span class=\"token keyword\">public</span> key has <span class=\"token class-name\">been</span> saved <span class=\"token keyword\">in</span> <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>ssh<span class=\"token operator\">/</span>id_rsa<span class=\"token punctuation\">.</span>pub<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<p>RHA 공개키는 사용자 계정의 홈 디렉터리에 있는 .ssh 폴더에 생성됩니다.<br>\n생성된 공개키를 ssh-copy-id 명령으로 전서버에 [master도] 복사합니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>hadoop@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ ssh<span class=\"token operator\">-</span>copy<span class=\"token operator\">-</span>id <span class=\"token operator\">-</span>i <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>ssh<span class=\"token operator\">/</span>id_rsa<span class=\"token punctuation\">.</span>pub hadoop@hadoop<span class=\"token operator\">-</span>worker\n<span class=\"token punctuation\">[</span>hadoop@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ ssh<span class=\"token operator\">-</span>copy<span class=\"token operator\">-</span>id <span class=\"token operator\">-</span>i <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>ssh<span class=\"token operator\">/</span>id_rsa<span class=\"token punctuation\">.</span>pub hadoop@hadoop<span class=\"token operator\">-</span>worker2\n <span class=\"token punctuation\">[</span>hadoop@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ ssh<span class=\"token operator\">-</span>copy<span class=\"token operator\">-</span>id <span class=\"token operator\">-</span>i <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>ssh<span class=\"token operator\">/</span>id_rsa<span class=\"token punctuation\">.</span>pub hadoop@hadoop<span class=\"token operator\">-</span>master</code></pre></div>\n<p>그럼 다음과 같이 암호입력 없이 ssh 접속이 가능합니다.<br>\n동일하게 Worker2,Master에도 진행합니다.  </p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"java-설치-root-계정으로\" style=\"position:relative;\"><a href=\"#java-%EC%84%A4%EC%B9%98-root-%EA%B3%84%EC%A0%95%EC%9C%BC%EB%A1%9C\" aria-label=\"java 설치 root 계정으로 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JAVA 설치 [root 계정으로]</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># yum install <span class=\"token operator\">-</span>y java<span class=\"token operator\">-</span><span class=\"token number\">1.8</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>openjdk<span class=\"token operator\">-</span>devel<span class=\"token punctuation\">.</span>x86_64\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>#\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># javac <span class=\"token operator\">-</span>version\njavac <span class=\"token number\">1.8</span><span class=\"token number\">.0_275</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-hadoop-설치-hadoop-계정으로\" style=\"position:relative;\"><a href=\"#-hadoop-%EC%84%A4%EC%B9%98-hadoop-%EA%B3%84%EC%A0%95%EC%9C%BC%EB%A1%9C\" aria-label=\" hadoop 설치 hadoop 계정으로 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👀 Hadoop 설치 [Hadoop 계정으로]</h2>\n<ul>\n<li>미러 사이트 : apache.mirror.cdnetworks.com/hadoop/common</li>\n<li>Version : 3.3.0 / 추후에 HBase를 설치하려면 3.1.1 Version 이상을 사용해야함.  </li>\n<li>\n<p>Download</p>\n<ul>\n<li>Download 서버 : master</li>\n<li>Download 위치 : /usr/local</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">cd <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token punctuation\">;</span> \\\nsudo <span class=\"token class-name\">wget</span> http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>apache<span class=\"token punctuation\">.</span>mirror<span class=\"token punctuation\">.</span>cdnetworks<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>common<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span><span class=\"token number\">3.3</span><span class=\"token number\">.0</span><span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span><span class=\"token number\">3.3</span><span class=\"token number\">.0</span><span class=\"token punctuation\">.</span>tar<span class=\"token punctuation\">.</span>gz<span class=\"token punctuation\">;</span> \\\nsudo tar xzvf hadoop<span class=\"token operator\">-</span><span class=\"token number\">3.3</span><span class=\"token number\">.0</span><span class=\"token punctuation\">.</span>tar<span class=\"token punctuation\">.</span>gz<span class=\"token punctuation\">;</span> \\\nsudo rm <span class=\"token operator\">-</span>rf hadoop<span class=\"token operator\">-</span><span class=\"token number\">3.3</span><span class=\"token number\">.0</span><span class=\"token punctuation\">.</span>tar<span class=\"token punctuation\">.</span>gz<span class=\"token punctuation\">;</span> \\\nsudo mv hadoop<span class=\"token operator\">-</span><span class=\"token number\">3.3</span><span class=\"token number\">.0</span> hadoop\n<span class=\"token punctuation\">[</span>hadoop@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> local<span class=\"token punctuation\">]</span>$ ls\nbin  etc  games  hadoop  include  lib  lib64  libexec  sbin  share  src</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"환경-변수-설정-전체-서버\" style=\"position:relative;\"><a href=\"#%ED%99%98%EA%B2%BD-%EB%B3%80%EC%88%98-%EC%84%A4%EC%A0%95-%EC%A0%84%EC%B2%B4-%EC%84%9C%EB%B2%84\" aria-label=\"환경 변수 설정 전체 서버 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>환경 변수 설정 [전체 서버]</h4>\n<p>지정해준 JAVA<em>HOME, HADOOP</em>HOME을 PATH로 묶어 사용합니다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># vim <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>profile\n\n<span class=\"token class-name\">export</span> JAVA_HOME<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.275.b01-1.el8_3.x86_64\"</span>\n<span class=\"token class-name\">export</span> HADOOP_HOME<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/local/hadoop\"</span>\n<span class=\"token class-name\">export</span> PATH<span class=\"token operator\">=</span><span class=\"token string\">\"$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:\"</span>\n\n\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># source <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>profile\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>#\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># echo $JAVA_HOME\n<span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>jvm<span class=\"token operator\">/</span>java<span class=\"token operator\">-</span><span class=\"token number\">1.8</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>openjdk<span class=\"token operator\">-</span><span class=\"token number\">1.8</span><span class=\"token number\">.0</span><span class=\"token number\">.275</span><span class=\"token punctuation\">.</span>b01<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">.</span>el8_3<span class=\"token punctuation\">.</span>x86_64\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># echo $HADOOP_HOME\n<span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># echo $PATH\n<span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>sbin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>sbin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>root<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>jvm<span class=\"token operator\">/</span>java<span class=\"token operator\">-</span><span class=\"token number\">1.8</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>openjdk<span class=\"token operator\">-</span><span class=\"token number\">1.8</span><span class=\"token number\">.0</span><span class=\"token number\">.275</span><span class=\"token punctuation\">.</span>b01<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">.</span>el8_3<span class=\"token punctuation\">.</span>x86_64<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>sbin<span class=\"token punctuation\">:</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-hadoop-구성-hadoop-계정으로\" style=\"position:relative;\"><a href=\"#-hadoop-%EA%B5%AC%EC%84%B1-hadoop-%EA%B3%84%EC%A0%95%EC%9C%BC%EB%A1%9C\" aria-label=\" hadoop 구성 hadoop 계정으로 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>😂 Hadoop 구성 [Hadoop 계정으로]</h2>\n<ul>\n<li>진행 노드 : master</li>\n<li>파일 위치 : /usr/local/hadoop/etc/hadoop</li>\n<li>\n<p>설정 파일 목록 </p>\n<ul>\n<li>core.site.xml : HDFS, Map Reduce 환경 정보 </li>\n<li>hdfs.site.xml : HDFS 환경 정보</li>\n<li>yarn-site.xml : yarn 환경 정보</li>\n<li>mapred-site.xml : Map Reduce 환경 정보</li>\n<li>hadoop-env.sh : Hadoop 실행 시 필요한 shell script 환경 변수  </li>\n</ul>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"coresitexml\" style=\"position:relative;\"><a href=\"#coresitexml\" aria-label=\"coresitexml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>core.site.xml</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n       <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>fs<span class=\"token punctuation\">.</span>defaultFS<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n       <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>hdfs<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>master<span class=\"token punctuation\">:</span><span class=\"token number\">9000</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n       <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>hadoop<span class=\"token punctuation\">.</span>tmp<span class=\"token punctuation\">.</span>dir<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n       <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>tmp<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>configuration<span class=\"token operator\">></span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"hdfssitexml\" style=\"position:relative;\"><a href=\"#hdfssitexml\" aria-label=\"hdfssitexml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hdfs.site.xml</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs<span class=\"token punctuation\">.</span>replication<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span><span class=\"token number\">3</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span> <span class=\"token operator\">-></span> 기본 <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span>이어야 full distribute\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs<span class=\"token punctuation\">.</span>namenode<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span>dir<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>file<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>namenode<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>dir<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>file<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>datanode<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs<span class=\"token punctuation\">.</span>permissions<span class=\"token punctuation\">.</span>enabled<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span><span class=\"token boolean\">false</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs<span class=\"token punctuation\">.</span>webhdfs<span class=\"token punctuation\">.</span>enabled<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span><span class=\"token boolean\">true</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs<span class=\"token punctuation\">.</span>namenode<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>address<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>hadoop<span class=\"token operator\">-</span>master<span class=\"token punctuation\">:</span><span class=\"token number\">50070</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs<span class=\"token punctuation\">.</span>namenode<span class=\"token punctuation\">.</span>secondary<span class=\"token punctuation\">.</span>http<span class=\"token operator\">-</span>address<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>hadoop<span class=\"token operator\">-</span>worker<span class=\"token punctuation\">:</span><span class=\"token number\">50090</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>configuration<span class=\"token operator\">></span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"yarn-sitexml\" style=\"position:relative;\"><a href=\"#yarn-sitexml\" aria-label=\"yarn sitexml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>yarn-site.xml</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>yarn<span class=\"token punctuation\">.</span>nodemanager<span class=\"token punctuation\">.</span>aux<span class=\"token operator\">-</span>services<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>mapreduce_shuffle<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>yarn<span class=\"token punctuation\">.</span>resourcemanager<span class=\"token punctuation\">.</span>hostname<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>hadoop<span class=\"token operator\">-</span>master<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>yarn<span class=\"token punctuation\">.</span>nodemanager<span class=\"token punctuation\">.</span>vmem<span class=\"token operator\">-</span>check<span class=\"token operator\">-</span>enabled<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span><span class=\"token boolean\">false</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>yarn<span class=\"token punctuation\">.</span>resourcemanager<span class=\"token punctuation\">.</span>address<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>hadoop<span class=\"token operator\">-</span>master<span class=\"token punctuation\">:</span><span class=\"token number\">8032</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>yarn<span class=\"token punctuation\">.</span>resourcemanager<span class=\"token punctuation\">.</span>scheduler<span class=\"token punctuation\">.</span>address<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>hadoop<span class=\"token operator\">-</span>master<span class=\"token punctuation\">:</span><span class=\"token number\">8030</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>yarn<span class=\"token punctuation\">.</span>resourcemanager<span class=\"token punctuation\">.</span>resource<span class=\"token operator\">-</span>tracker<span class=\"token punctuation\">.</span>address<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>hadoop<span class=\"token operator\">-</span>master<span class=\"token punctuation\">:</span><span class=\"token number\">8031</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>configuration<span class=\"token operator\">></span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"mapred-siterxml\" style=\"position:relative;\"><a href=\"#mapred-siterxml\" aria-label=\"mapred siterxml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>mapred-siter.xml</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>mapreduce<span class=\"token punctuation\">.</span>framework<span class=\"token punctuation\">.</span>name<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>yarn<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>configuration<span class=\"token operator\">></span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"hadoop-envsh\" style=\"position:relative;\"><a href=\"#hadoop-envsh\" aria-label=\"hadoop envsh permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hadoop-env.sh</h4>\n<p>JAVA_HOME의 경우 필수적이나 나머지는 선택사항입니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token class-name\">export</span> JAVA_HOME<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.275.b01-1.el8_3.x86_64\"</span>\n<span class=\"token class-name\">export</span> HADOOP_HOME<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/local/hadoop\"</span>\n<span class=\"token class-name\">export</span> HADOOP_CONF_DIR<span class=\"token operator\">=</span><span class=\"token string\">\"$HADOOP_HOME/etc/hadoop\"</span>\n<span class=\"token class-name\">export</span> HADOOP_LOG_DIR<span class=\"token operator\">=</span><span class=\"token string\">\"$HADOOP_HOME/logs\"</span>\n<span class=\"token class-name\">export</span> HADOOP_PID_DIR<span class=\"token operator\">=</span><span class=\"token string\">\"$HADOOP_HOME/pids\"</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"hadoop-forder-생성\" style=\"position:relative;\"><a href=\"#hadoop-forder-%EC%83%9D%EC%84%B1\" aria-label=\"hadoop forder 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hadoop forder 생성</h4>\n<ul>\n<li>진행 노드 : master</li>\n<li>위치 : /usr/local/hadoop</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> hadoop<span class=\"token punctuation\">]</span># cd <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop<span class=\"token punctuation\">;</span> \\\n<span class=\"token operator\">></span> <span class=\"token class-name\">mkdir</span> namenode<span class=\"token punctuation\">;</span> \\\n<span class=\"token operator\">></span> mkdir datanode</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"hadoop-배포\" style=\"position:relative;\"><a href=\"#hadoop-%EB%B0%B0%ED%8F%AC\" aria-label=\"hadoop 배포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hadoop 배포</h4>\n<p>master에서 worker1,2에 전송합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># worker 1로 전송</span>\nscp <span class=\"token operator\">-</span>r <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop hadoop<span class=\"token operator\">-</span>worker<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local\n\n<span class=\"token preprocessor property\"># slave2 /usr/local로 전송</span>\n\n<span class=\"token punctuation\">[</span>hadoop@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> root<span class=\"token punctuation\">]</span>$ scp <span class=\"token operator\">-</span>r <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop hadoop@hadoop<span class=\"token operator\">-</span>worker<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local\n\n<span class=\"token punctuation\">[</span>hadoop@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> root<span class=\"token punctuation\">]</span>$ scp <span class=\"token operator\">-</span>r <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop hadoop@hadoop<span class=\"token operator\">-</span>worker2<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"worker-설정\" style=\"position:relative;\"><a href=\"#worker-%EC%84%A4%EC%A0%95\" aria-label=\"worker 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Worker 설정</h4>\n<p>slaves file에 등록된 host들은 datanode로 실행되게 됩니다.</p>\n<ul>\n<li>진행 노드 : master</li>\n<li>파일 : /usr/local/hadoop/etc/hadoop/workers</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">hadoop<span class=\"token operator\">-</span>master\nhadoop<span class=\"token operator\">-</span>worker\nhadoop<span class=\"token operator\">-</span>worker2</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"master-설정\" style=\"position:relative;\"><a href=\"#master-%EC%84%A4%EC%A0%95\" aria-label=\"master 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Master 설정</h4>\n<p>원래는 masters file이 있었으나 v2.7.0 이후로 사라졌음.<br>\n그러나 그냥 vi로 생성해서 넣으면 됩니다.   </p>\n<ul>\n<li>진행 노드 : master</li>\n<li>파일 : /usr/local/hadoop/etc/hadoop/masters</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">hadoop<span class=\"token operator\">-</span>master</code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-hadoop-시작\" style=\"position:relative;\"><a href=\"#-hadoop-%EC%8B%9C%EC%9E%91\" aria-label=\" hadoop 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👍 Hadoop 시작</h2>\n<ul>\n<li>진행 노드 : master </li>\n</ul>\n<p>이제 기본적인 설정은 모두 완료되었으니 테스트 해볼 겸 Hadoop을 띄워봅시다.  </p>\n<ul>\n<li>\n<h4 id=\"filesystem-format\" style=\"position:relative;\"><a href=\"#filesystem-format\" aria-label=\"filesystem format permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Filesystem format</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> hadoop<span class=\"token punctuation\">]</span># hadoop namenode <span class=\"token operator\">-</span><span class=\"token class-name\">format</span>\nWARNING<span class=\"token punctuation\">:</span> Use of <span class=\"token keyword\">this</span> script to execute namenode <span class=\"token keyword\">is</span> <span class=\"token class-name\">deprecated<span class=\"token punctuation\">.</span>\nWARNING</span><span class=\"token punctuation\">:</span> Attempting to execute replacement <span class=\"token string\">\"hdfs namenode\"</span> instead<span class=\"token punctuation\">.</span>\n\nWARNING<span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>pids does <span class=\"token keyword\">not</span> exist<span class=\"token punctuation\">.</span> Creating<span class=\"token punctuation\">.</span>\nWARNING<span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>logs does <span class=\"token keyword\">not</span> exist<span class=\"token punctuation\">.</span> Creating<span class=\"token punctuation\">.</span>\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">09</span> <span class=\"token number\">04</span><span class=\"token punctuation\">:</span><span class=\"token number\">37</span><span class=\"token punctuation\">:</span><span class=\"token number\">15</span><span class=\"token punctuation\">,</span><span class=\"token number\">754</span> INFO namenode<span class=\"token punctuation\">.</span>NameNode<span class=\"token punctuation\">:</span> STARTUP_MSG<span class=\"token punctuation\">:</span>\n<span class=\"token operator\">/</span>\nSTARTUP_MSG<span class=\"token punctuation\">:</span> Starting <span class=\"token class-name\">NameNode</span>\nSTARTUP_MSG<span class=\"token punctuation\">:</span>   host <span class=\"token operator\">=</span> hadoop<span class=\"token operator\">-</span>master<span class=\"token operator\">/</span><span class=\"token number\">10.0</span><span class=\"token number\">.0</span><span class=\"token number\">.5</span>\nSTARTUP_MSG<span class=\"token punctuation\">:</span>   args <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">-</span>format<span class=\"token punctuation\">]</span>\nSTARTUP_MSG<span class=\"token punctuation\">:</span>   version <span class=\"token operator\">=</span> <span class=\"token number\">3.3</span><span class=\"token number\">.0</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>생략<span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"hadoop-시작\" style=\"position:relative;\"><a href=\"#hadoop-%EC%8B%9C%EC%9E%91\" aria-label=\"hadoop 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hadoop 시작</h4>\n<p>만약 이부분에서 ERROR가 발생하면 대부분 “권한”문제입니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>hadoop@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> logs<span class=\"token punctuation\">]</span>$ start<span class=\"token operator\">-</span><span class=\"token class-name\">all<span class=\"token punctuation\">.</span>sh</span>\nWARNING<span class=\"token punctuation\">:</span> Attempting to start all Apache Hadoop daemons <span class=\"token keyword\">as</span> <span class=\"token class-name\">hadoop</span> <span class=\"token keyword\">in</span> <span class=\"token number\">10</span> seconds<span class=\"token punctuation\">.</span>\nWARNING<span class=\"token punctuation\">:</span> This <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> <span class=\"token class-name\">a</span> recommended production deployment configuration<span class=\"token punctuation\">.</span>\nWARNING<span class=\"token punctuation\">:</span> Use CTRL<span class=\"token operator\">-</span>C to abort<span class=\"token punctuation\">.</span>\nStarting namenodes <span class=\"token keyword\">on</span> <span class=\"token punctuation\">[</span>hadoop<span class=\"token operator\">-</span>master<span class=\"token punctuation\">]</span>\nStarting datanodes\nStarting secondary namenodes <span class=\"token punctuation\">[</span>hadoop<span class=\"token operator\">-</span>master<span class=\"token punctuation\">]</span>\nStarting resourcemanager\nStarting nodemanagers</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"hadoop-cluster-확인\" style=\"position:relative;\"><a href=\"#hadoop-cluster-%ED%99%95%EC%9D%B8\" aria-label=\"hadoop cluster 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hadoop Cluster 확인</h4>\n<p>각 Server 별로 jps 명령을 통해 확인 </p>\n<ul>\n<li>\n<p>Master </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110431800-9cbc6c80-80f1-11eb-8eee-6cadabd4f9e4.JPG\" alt=\"1111\"></p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>Worker1</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110431803-9d550300-80f1-11eb-8134-5768dacf8535.JPG\" alt=\"2222\"></p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>Worker2 </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110431808-9ded9980-80f1-11eb-93cb-41eef4e33f42.JPG\" alt=\"3333\"></p>\n</li>\n</ul>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"hadoop-cluster-종료\" style=\"position:relative;\"><a href=\"#hadoop-cluster-%EC%A2%85%EB%A3%8C\" aria-label=\"hadoop cluster 종료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hadoop Cluster 종료</h4>\n<ul>\n<li>진행노드 : master </li>\n</ul>\n<p>start-all.sh 실행 중 특정 오류가 발생했을때는 아래 명령을 통해 Hadoop을 종료  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># stop-all.sh</span></code></pre></div>\n<br/>\n</li>\n</ul>\n<h3 id=\"access-hadoop-namenode-and-resource-manager\" style=\"position:relative;\"><a href=\"#access-hadoop-namenode-and-resource-manager\" aria-label=\"access hadoop namenode and resource manager permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Access Hadoop Namenode and Resource Manager</h3>\n<p>필자는 Azure VM에서 구성했기 때문에 VM의 nsg에서 아래 Port들을 허용해줬다.</p>\n<ul>\n<li>8088</li>\n<li>9000</li>\n<li>9870</li>\n<li>50070</li>\n<li>8030</li>\n<li>8031</li>\n<li>8032</li>\n</ul>\n<br/>\n<br/>\n<ul>\n<li>\n<h4 id=\"nsg-허용이-끝난-뒤-masterip9870-으로-접속하면-아래와-같은-화면이-보인다\" style=\"position:relative;\"><a href=\"#nsg-%ED%97%88%EC%9A%A9%EC%9D%B4-%EB%81%9D%EB%82%9C-%EB%92%A4-masterip9870-%EC%9C%BC%EB%A1%9C-%EC%A0%91%EC%86%8D%ED%95%98%EB%A9%B4-%EC%95%84%EB%9E%98%EC%99%80-%EA%B0%99%EC%9D%80-%ED%99%94%EB%A9%B4%EC%9D%B4-%EB%B3%B4%EC%9D%B8%EB%8B%A4\" aria-label=\"nsg 허용이 끝난 뒤 masterip9870 으로 접속하면 아래와 같은 화면이 보인다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>nsg 허용이 끝난 뒤 MasterIP:9870 으로 접속하면 아래와 같은 화면이 보인다</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110434636-684aaf80-80f5-11eb-97bb-61821c8e3d01.JPG\" alt=\"캡처333333\"></p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"full-distribute-mode로-정상-설정되었다면-datanodes이-다음과-같이-전체-노드가-나와야한다\" style=\"position:relative;\"><a href=\"#full-distribute-mode%EB%A1%9C-%EC%A0%95%EC%83%81-%EC%84%A4%EC%A0%95%EB%90%98%EC%97%88%EB%8B%A4%EB%A9%B4-datanodes%EC%9D%B4-%EB%8B%A4%EC%9D%8C%EA%B3%BC-%EA%B0%99%EC%9D%B4-%EC%A0%84%EC%B2%B4-%EB%85%B8%EB%93%9C%EA%B0%80-%EB%82%98%EC%99%80%EC%95%BC%ED%95%9C%EB%8B%A4\" aria-label=\"full distribute mode로 정상 설정되었다면 datanodes이 다음과 같이 전체 노드가 나와야한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Full Distribute Mode로 정상 설정되었다면 Datanodes이 다음과 같이 전체 노드가 나와야한다.</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110437348-a09fbd00-80f8-11eb-8340-7ab214923ad6.JPG\" alt=\"123123123\"></p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"추가로-masterip8088로-접속하면-resource-manager-ui를-확인-할-수-있다\" style=\"position:relative;\"><a href=\"#%EC%B6%94%EA%B0%80%EB%A1%9C-masterip8088%EB%A1%9C-%EC%A0%91%EC%86%8D%ED%95%98%EB%A9%B4-resource-manager-ui%EB%A5%BC-%ED%99%95%EC%9D%B8-%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8B%A4\" aria-label=\"추가로 masterip8088로 접속하면 resource manager ui를 확인 할 수 있다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>추가로 MasterIP:8088로 접속하면 Resource Manager ui를 확인 할 수 있다.</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110437648-f2e0de00-80f8-11eb-9476-3860fee79f49.JPG\" alt=\"캡처31231232131321\"></p>\n</li>\n</ul>\n<hr>\n<h3 id=\"hdfs에-파일-업로드\" style=\"position:relative;\"><a href=\"#hdfs%EC%97%90-%ED%8C%8C%EC%9D%BC-%EC%97%85%EB%A1%9C%EB%93%9C\" aria-label=\"hdfs에 파일 업로드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hdfs에 파일 업로드</h3>\n<p>이전포스트에서 spark에 미처 올리지 못한 data.cvs 를 올려보도록 하겠습니다.  </p>\n<ul>\n<li>\n<h4 id=\"첫번째로-hdfs에서-읽을-기본경로를-생성해줍니다\" style=\"position:relative;\"><a href=\"#%EC%B2%AB%EB%B2%88%EC%A7%B8%EB%A1%9C-hdfs%EC%97%90%EC%84%9C-%EC%9D%BD%EC%9D%84-%EA%B8%B0%EB%B3%B8%EA%B2%BD%EB%A1%9C%EB%A5%BC-%EC%83%9D%EC%84%B1%ED%95%B4%EC%A4%8D%EB%8B%88%EB%8B%A4\" aria-label=\"첫번째로 hdfs에서 읽을 기본경로를 생성해줍니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>첫번째로 hdfs에서 읽을 기본경로를 생성해줍니다.</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">## 이렇게 디렉토리를 만들어서 넣어도 됩니다.</span>\n<span class=\"token punctuation\">[</span>hadoop@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ hdfs dfs <span class=\"token operator\">-</span>mkdir <span class=\"token operator\">/</span>user\n<span class=\"token punctuation\">[</span>hadoop@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ hdfs dfs <span class=\"token operator\">-</span>mkdir <span class=\"token operator\">/</span>user<span class=\"token operator\">/</span>nasa</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"이-후-put-명령어로-생성한-user-dir에-파일을-업로드-및-확인-합니다\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%ED%9B%84-put-%EB%AA%85%EB%A0%B9%EC%96%B4%EB%A1%9C-%EC%83%9D%EC%84%B1%ED%95%9C-user-dir%EC%97%90-%ED%8C%8C%EC%9D%BC%EC%9D%84-%EC%97%85%EB%A1%9C%EB%93%9C-%EB%B0%8F-%ED%99%95%EC%9D%B8-%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\"이 후 put 명령어로 생성한 user dir에 파일을 업로드 및 확인 합니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 후 put 명령어로 생성한 user dir에 파일을 업로드 및 확인 합니다.</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">## 위에서 디렉토리를 만들었지만 저는 그냥 / 에 넣을게요</span>\n<span class=\"token punctuation\">[</span>hadoop@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ hdfs dfs <span class=\"token operator\">-</span>put <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>nasa<span class=\"token punctuation\">.</span>csv <span class=\"token operator\">/</span>\n\n<span class=\"token preprocessor property\">## ls로 확인하면 hdfs에 파일이 들어간 것을 확인가능합니다.</span>\n<span class=\"token punctuation\">[</span>hadoop@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ hdfs dfs <span class=\"token operator\">-</span>ls <span class=\"token operator\">/</span>\nFound <span class=\"token number\">1</span> items\n<span class=\"token operator\">-</span>rw<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span>r<span class=\"token operator\">--</span>   <span class=\"token number\">3</span> hadoop supergroup  <span class=\"token number\">500253789</span> <span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">09</span> <span class=\"token number\">08</span><span class=\"token punctuation\">:</span><span class=\"token number\">47</span> <span class=\"token operator\">/</span>nasa<span class=\"token punctuation\">.</span>csv\n<span class=\"token punctuation\">[</span>hadoop@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"resource-manager-웹에서도-아래와-같이-확인이-가능합니다\" style=\"position:relative;\"><a href=\"#resource-manager-%EC%9B%B9%EC%97%90%EC%84%9C%EB%8F%84-%EC%95%84%EB%9E%98%EC%99%80-%EA%B0%99%EC%9D%B4-%ED%99%95%EC%9D%B8%EC%9D%B4-%EA%B0%80%EB%8A%A5%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\"resource manager 웹에서도 아래와 같이 확인이 가능합니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Resource Manager 웹에서도 아래와 같이 확인이 가능합니다.</h4>\n<p>정상적으로 Replication도 되었네요!!\n<img src=\"https://user-images.githubusercontent.com/69498804/110443845-b664b080-80ff-11eb-8922-762399bb3b59.JPG\" alt=\"12123221312\"></p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"data-node가-올라오지-않는-error가-발생-할-경우\" style=\"position:relative;\"><a href=\"#data-node%EA%B0%80-%EC%98%AC%EB%9D%BC%EC%98%A4%EC%A7%80-%EC%95%8A%EB%8A%94-error%EA%B0%80-%EB%B0%9C%EC%83%9D-%ED%95%A0-%EA%B2%BD%EC%9A%B0\" aria-label=\"data node가 올라오지 않는 error가 발생 할 경우 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Node가 올라오지 않는 ERROR가 발생 할 경우</h4>\n<p>필자의 경우 권한문제로 hadoop precess를 강제로 껐다 켰다를 반복했었다.  </p>\n</li>\n<li>\n<p>그랬더니 다음과 같은 ERROR가 발생하며 Datanode가 올라오지 않았다</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">09</span> <span class=\"token number\">05</span><span class=\"token punctuation\">:</span><span class=\"token number\">41</span><span class=\"token punctuation\">:</span><span class=\"token number\">31</span><span class=\"token punctuation\">,</span><span class=\"token number\">778</span> WARN org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>common<span class=\"token punctuation\">.</span>Storage<span class=\"token punctuation\">:</span> Failed to <span class=\"token keyword\">add</span> storage directory <span class=\"token punctuation\">[</span>DISK<span class=\"token punctuation\">]</span>file<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>datanode\njava<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>IOException<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Incompatible</span> clusterIDs <span class=\"token keyword\">in</span> <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>datanode<span class=\"token punctuation\">:</span> <span class=\"token class-name\">namenode</span> clusterID <span class=\"token operator\">=</span> CID<span class=\"token operator\">-</span>774db0d8<span class=\"token operator\">-</span>08a2<span class=\"token operator\">-</span><span class=\"token number\">49e3</span><span class=\"token operator\">-</span>bc7f<span class=\"token operator\">-</span>b804c7bfb204<span class=\"token punctuation\">;</span> <span class=\"token class-name\">datanode</span> clusterID <span class=\"token operator\">=</span> CID<span class=\"token operator\">-</span>9de845d9<span class=\"token operator\">-</span>b117<span class=\"token operator\">-</span>40c6<span class=\"token operator\">-</span>a996<span class=\"token operator\">-</span>d4bd471dbbfd\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>DataStorage<span class=\"token punctuation\">.</span><span class=\"token function\">doTransition</span><span class=\"token punctuation\">(</span>DataStorage<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">746</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>DataStorage<span class=\"token punctuation\">.</span><span class=\"token function\">loadStorageDirectory</span><span class=\"token punctuation\">(</span>DataStorage<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">296</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>DataStorage<span class=\"token punctuation\">.</span><span class=\"token function\">loadDataStorage</span><span class=\"token punctuation\">(</span>DataStorage<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">409</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>DataStorage<span class=\"token punctuation\">.</span><span class=\"token function\">addStorageLocations</span><span class=\"token punctuation\">(</span>DataStorage<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">389</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>DataStorage<span class=\"token punctuation\">.</span><span class=\"token function\">recoverTransitionRead</span><span class=\"token punctuation\">(</span>DataStorage<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">561</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>DataNode<span class=\"token punctuation\">.</span><span class=\"token function\">initStorage</span><span class=\"token punctuation\">(</span>DataNode<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">1766</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>DataNode<span class=\"token punctuation\">.</span><span class=\"token function\">initBlockPool</span><span class=\"token punctuation\">(</span>DataNode<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">1702</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>BPOfferService<span class=\"token punctuation\">.</span><span class=\"token function\">verifyAndSetNamespaceInfo</span><span class=\"token punctuation\">(</span>BPOfferService<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">392</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>BPServiceActor<span class=\"token punctuation\">.</span><span class=\"token function\">connectToNNAndHandshake</span><span class=\"token punctuation\">(</span>BPServiceActor<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">295</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>BPServiceActor<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>BPServiceActor<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">853</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>Thread<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">748</span><span class=\"token punctuation\">)</span>\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">09</span> <span class=\"token number\">05</span><span class=\"token punctuation\">:</span><span class=\"token number\">41</span><span class=\"token punctuation\">:</span><span class=\"token number\">31</span><span class=\"token punctuation\">,</span><span class=\"token number\">780</span> ERROR org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>DataNode<span class=\"token punctuation\">:</span> Initialization failed <span class=\"token keyword\">for</span> <span class=\"token return-type class-name\">Block</span> <span class=\"token generic-method\"><span class=\"token function\">pool</span> <span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>registering<span class=\"token punctuation\">></span></span></span> <span class=\"token punctuation\">(</span>Datanode Uuid d1475497<span class=\"token operator\">-</span>b53d<span class=\"token operator\">-</span><span class=\"token number\">4126</span><span class=\"token operator\">-</span>b87b<span class=\"token operator\">-</span>615120dc89c9<span class=\"token punctuation\">)</span> service to hadoop<span class=\"token operator\">-</span>master<span class=\"token operator\">/</span><span class=\"token number\">10.0</span><span class=\"token number\">.0</span><span class=\"token number\">.5</span><span class=\"token punctuation\">:</span><span class=\"token number\">9000</span><span class=\"token punctuation\">.</span> Exiting<span class=\"token punctuation\">.</span>\njava<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>IOException<span class=\"token punctuation\">:</span> All specified directories have failed to <span class=\"token return-type class-name\">load<span class=\"token punctuation\">.</span>\n        at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>DataStorage<span class=\"token punctuation\">.</span><span class=\"token function\">recoverTransitionRead</span><span class=\"token punctuation\">(</span>DataStorage<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">562</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>DataNode<span class=\"token punctuation\">.</span><span class=\"token function\">initStorage</span><span class=\"token punctuation\">(</span>DataNode<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">1766</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>DataNode<span class=\"token punctuation\">.</span><span class=\"token function\">initBlockPool</span><span class=\"token punctuation\">(</span>DataNode<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">1702</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>BPOfferService<span class=\"token punctuation\">.</span><span class=\"token function\">verifyAndSetNamespaceInfo</span><span class=\"token punctuation\">(</span>BPOfferService<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">392</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>BPServiceActor<span class=\"token punctuation\">.</span><span class=\"token function\">connectToNNAndHandshake</span><span class=\"token punctuation\">(</span>BPServiceActor<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">295</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>BPServiceActor<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>BPServiceActor<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">853</span><span class=\"token punctuation\">)</span>\n        <span class=\"token return-type class-name\">at</span> java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>Thread<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">748</span><span class=\"token punctuation\">)</span>\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">09</span> <span class=\"token number\">05</span><span class=\"token punctuation\">:</span><span class=\"token number\">41</span><span class=\"token punctuation\">:</span><span class=\"token number\">31</span><span class=\"token punctuation\">,</span><span class=\"token number\">780</span> WARN org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>hdfs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>datanode<span class=\"token punctuation\">.</span>DataNode<span class=\"token punctuation\">:</span> Ending block pool service <span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> <span class=\"token return-type class-name\">Block</span> <span class=\"token generic-method\"><span class=\"token function\">pool</span> <span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>registering<span class=\"token punctuation\">></span></span></span> <span class=\"token punctuation\">(</span>Datanode Uuid d1475497<span class=\"token operator\">-</span>b53d<span class=\"token operator\">-</span><span class=\"token number\">4126</span><span class=\"token operator\">-</span>b87b<span class=\"token operator\">-</span>615120dc89c9<span class=\"token punctuation\">)</span> service to hadoop<span class=\"token operator\">-</span>master<span class=\"token operator\">/</span><span class=\"token number\">10.0</span><span class=\"token number\">.0</span><span class=\"token number\">.5</span><span class=\"token punctuation\">:</span><span class=\"token number\">9000</span></code></pre></div>\n</li>\n<li>\n<p>다음과 같은 경우에는 모든 서버에 namenode, datanode를 삭제한 뒤 재생성 후 Hadoop 시작한다.</p>\n<ul>\n<li>\n<h4 id=\"master\" style=\"position:relative;\"><a href=\"#master\" aria-label=\"master permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>master</h4>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># cd /usr/local/hadoop</span>\n<span class=\"token preprocessor property\"># rm -rf namenode datanode;\\</span>\n<span class=\"token preprocessor property\"># mkdir namenode; mkdir datanode</span></code></pre></div>\n<ul>\n<li>\n<h4 id=\"worker1-worker2\" style=\"position:relative;\"><a href=\"#worker1-worker2\" aria-label=\"worker1 worker2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>worker1, worker2</h4>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># cd /usr/local/hadoop</span>\n<span class=\"token preprocessor property\"># rm -rf datanode;\\</span>\n<span class=\"token preprocessor property\"># mkdir datanode</span></code></pre></div>\n<ul>\n<li>\n<h4 id=\"hadoop-format--시작\" style=\"position:relative;\"><a href=\"#hadoop-format--%EC%8B%9C%EC%9E%91\" aria-label=\"hadoop format  시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hadoop format &#x26; 시작</h4>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># hadoop namenode -format</span>\n<span class=\"token preprocessor property\"># start-all.sh</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며…</h2>\n<p>이번 포스트는 그나마 수월하게 성공했습니다.<br>\n바로 다음포스트에서 환경구성에 대한 막바지를 진행 할 예정입니다.<br>\n다음 포스트인 Spark on yarn에서 뵙겠습니다.  </p>\n<br/>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-%EC%84%A4%EC%B9%98-%ED%99%98%EA%B2%BD\">✔ 설치 환경</a></li>\n<li>\n<p><a href=\"#-hadoop-%EC%84%A4%EC%B9%98-%EC%A0%84-%EC%82%AC%EC%A0%84-%EC%9E%91%EC%97%85\">✌ Hadoop 설치 전 사전 작업</a></p>\n<ul>\n<li><a href=\"#ssh-%EC%84%A4%EC%A0%95-hadoop-%EA%B3%84%EC%A0%95%EC%97%90%EC%84%9C\">SSH 설정 hadoop 계정에서</a></li>\n</ul>\n</li>\n<li><a href=\"#-hadoop-%EC%84%A4%EC%B9%98-hadoop-%EA%B3%84%EC%A0%95%EC%9C%BC%EB%A1%9C\">👀 Hadoop 설치 Hadoop 계정으로</a></li>\n<li><a href=\"#-hadoop-%EA%B5%AC%EC%84%B1-hadoop-%EA%B3%84%EC%A0%95%EC%9C%BC%EB%A1%9C\">😂 Hadoop 구성 Hadoop 계정으로</a></li>\n<li>\n<p><a href=\"#-hadoop-%EC%8B%9C%EC%9E%91\">👍 Hadoop 시작</a></p>\n<ul>\n<li><a href=\"#access-hadoop-namenode-and-resource-manager\">Access Hadoop Namenode and Resource Manager</a></li>\n<li><a href=\"#hdfs%EC%97%90-%ED%8C%8C%EC%9D%BC-%EC%97%85%EB%A1%9C%EB%93%9C\">hdfs에 파일 업로드</a></li>\n</ul>\n</li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며…</a></li>\n</ul>\n</div>","excerpt":"머리말   앞이 막막합니다. 저번 포스트에서 이미 인프라 구성을 끝냈어야 했는데… 이번 포스트에서라도 마무리 지어보죠   ✔ 설치 환경 Hadoop 3.3.0 (Full-Distribute Mode) Server Master Worker1 Worker2 OS CentOS 8.2 CentOS 8.2 CentOS 8.2 Disk 30G 30G 30G MEM 14G 14G 14G CPU 4.Core 4.Core 4.Core VM (Azure) Hadoop Master IP : 10.0.0.5  Hadoop Worker1 IP : 10.0.0.6  Hadoop Worker2 IP : 10.0.0.7  ✌ Hadoop 설치 전…","frontmatter":{"date":"August 15, 2021","title":"[DATA] - Hadoop 3.3.0 Full Distribute mode infra 구축","categories":"DATA","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/data-hadoopinstall/"}},"next":{"id":"55f2967c-b271-5121-9dc5-8bebc2e1c7a9","html":"<p>머리말  </p>\n<p>저번 포스트에서 Apache Spark가 어떤 식으로 동작하는지? 어떤 함수가 있는지? 간단하게 이론적으로만 알아봤습니다.<br>\n아직 Spark에 대한 내용이 제대로 이해가 되지 않아 일단 구성부터 해보고 실습을 하면서 다시 이해를 해보겠습니다.  </p>\n<hr>\n<h2 id=\"-azure-vm에-spark-standalone-구성\" style=\"position:relative;\"><a href=\"#-azure-vm%EC%97%90-spark-standalone-%EA%B5%AC%EC%84%B1\" aria-label=\" azure vm에 spark standalone 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ Azure VM에 Spark StandAlone 구성</h2>\n<ul>\n<li>Spark StandAlone Cluster로 구성하는 포스트입니다. </li>\n</ul>\n<br/>\n<h3 id=\"환경구성\" style=\"position:relative;\"><a href=\"#%ED%99%98%EA%B2%BD%EA%B5%AC%EC%84%B1\" aria-label=\"환경구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>환경구성</h3>\n<ul>\n<li>OS : CentOS Linux release 8.2.2004 (Core)  </li>\n<li>cpu : 4 core  </li>\n<li>RAM : 14GB  </li>\n<li>JDK : 1.8.0</li>\n<li>python : 3.8.8</li>\n<li>Spark 3.0.2</li>\n<li>zeppelin : 0.9.0</li>\n</ul>\n<br/> \n<hr>\n<h3 id=\"1-open-jdk-설치-root-계정-기반\" style=\"position:relative;\"><a href=\"#1-open-jdk-%EC%84%A4%EC%B9%98-root-%EA%B3%84%EC%A0%95-%EA%B8%B0%EB%B0%98\" aria-label=\"1 open jdk 설치 root 계정 기반 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Open JDK 설치 (root 계정 기반)</h3>\n<p>Spark는 JVM 기반이기 때문에 JDK를 미리 설치해주어야 합니다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@Spark<span class=\"token operator\">-</span>Standalone <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># yum install <span class=\"token operator\">-</span>y java<span class=\"token operator\">-</span><span class=\"token number\">1.8</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>openjdk<span class=\"token operator\">-</span>devel<span class=\"token punctuation\">.</span>x86_64\nLast metadata <span class=\"token class-name\">expiration</span> check<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">28</span><span class=\"token punctuation\">:</span><span class=\"token number\">13</span> ago <span class=\"token keyword\">on</span> Thu <span class=\"token number\">04</span> Mar <span class=\"token number\">2021</span> <span class=\"token number\">07</span><span class=\"token punctuation\">:</span><span class=\"token number\">30</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span> AM UTC<span class=\"token punctuation\">.</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span>\nComplete<span class=\"token operator\">!</span></code></pre></div>\n<br/>\n<p>java version을 확인해보죠  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@Spark<span class=\"token operator\">-</span>Standalone <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># java <span class=\"token operator\">-</span>version\nopenjdk version <span class=\"token string\">\"1.8.0_275\"</span>\nOpenJDK <span class=\"token return-type class-name\">Runtime</span> Environment <span class=\"token punctuation\">(</span>build <span class=\"token number\">1.8</span><span class=\"token number\">.0_275</span><span class=\"token operator\">-</span>b01<span class=\"token punctuation\">)</span>\nOpenJDK <span class=\"token number\">64</span><span class=\"token operator\">-</span>Bit <span class=\"token return-type class-name\">Server</span> VM <span class=\"token punctuation\">(</span>build <span class=\"token number\">25.275</span><span class=\"token operator\">-</span>b01<span class=\"token punctuation\">,</span> <span class=\"token class-name\">mixed</span> mode<span class=\"token punctuation\">)</span></code></pre></div>\n<br/>\n<hr>\n<h3 id=\"2-apache-spark-설치-root-계정-기반\" style=\"position:relative;\"><a href=\"#2-apache-spark-%EC%84%A4%EC%B9%98-root-%EA%B3%84%EC%A0%95-%EA%B8%B0%EB%B0%98\" aria-label=\"2 apache spark 설치 root 계정 기반 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Apache Spark 설치 (root 계정 기반)</h3>\n<br/> \n<p>Spark 3.0.2 다운로드  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@Spark<span class=\"token operator\">-</span>Standalone <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># <span class=\"token class-name\">wget</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>downloads<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span><span class=\"token number\">3.0</span><span class=\"token number\">.2</span><span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span><span class=\"token number\">3.0</span><span class=\"token number\">.2</span><span class=\"token operator\">-</span>bin<span class=\"token operator\">-</span>hadoop2<span class=\"token punctuation\">.</span><span class=\"token number\">7</span><span class=\"token punctuation\">.</span>tgz</code></pre></div>\n<br/>\n<p>압축해제 및 권한 설정  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> home<span class=\"token punctuation\">]</span># useradd spark\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> home<span class=\"token punctuation\">]</span># cd <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> spark<span class=\"token punctuation\">]</span># tar xvfz spark<span class=\"token operator\">-</span><span class=\"token number\">3.0</span><span class=\"token number\">.2</span><span class=\"token operator\">-</span>bin<span class=\"token operator\">-</span>hadoop2<span class=\"token punctuation\">.</span><span class=\"token number\">7</span><span class=\"token punctuation\">.</span>tgz\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> spark<span class=\"token punctuation\">]</span># mv spark<span class=\"token operator\">-</span><span class=\"token number\">3.0</span><span class=\"token number\">.2</span><span class=\"token operator\">-</span>bin<span class=\"token operator\">-</span>hadoop2<span class=\"token punctuation\">.</span><span class=\"token number\">7</span> spark\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> spark<span class=\"token punctuation\">]</span># chown <span class=\"token operator\">-</span><span class=\"token class-name\">R</span> spark<span class=\"token punctuation\">:</span>spark spark\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> spark<span class=\"token punctuation\">]</span># chmod <span class=\"token operator\">-</span>R <span class=\"token number\">777</span>  spark</code></pre></div>\n<br/>\n<p>Spark 환경변수 등록 (spark 계정으로 전환 후 진행)  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>spark@Spark<span class=\"token operator\">-</span>Standalone <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ echo <span class=\"token class-name\">export</span> PATH<span class=\"token operator\">=</span>'$PATH'<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>bin <span class=\"token operator\">></span> <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc\n<span class=\"token punctuation\">[</span>spark@Spark<span class=\"token operator\">-</span>Standalone <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ source <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc</code></pre></div>\n<br/>\n<p>Spark 설치 확인 </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>spark@Spark<span class=\"token operator\">-</span>Standalone <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ spark<span class=\"token operator\">-</span>shell\n<span class=\"token number\">21</span><span class=\"token operator\">/</span><span class=\"token number\">03</span><span class=\"token operator\">/</span><span class=\"token number\">04</span> <span class=\"token number\">08</span><span class=\"token punctuation\">:</span><span class=\"token number\">37</span><span class=\"token punctuation\">:</span><span class=\"token number\">37</span> <span class=\"token class-name\">WARN</span> NativeCodeLoader<span class=\"token punctuation\">:</span> Unable to load native<span class=\"token operator\">-</span>hadoop library <span class=\"token keyword\">for</span> your platform<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token keyword\">using</span> builtin<span class=\"token operator\">-</span>java classes <span class=\"token keyword\">where</span> <span class=\"token class-name\">applicable</span>\nUsing Spark's <span class=\"token keyword\">default</span> <span class=\"token class-name\">log4j</span> profile<span class=\"token punctuation\">:</span> org<span class=\"token operator\">/</span>apache<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>log4j<span class=\"token operator\">-</span>defaults<span class=\"token punctuation\">.</span>properties\nSetting <span class=\"token keyword\">default</span> log level to <span class=\"token string\">\"WARN\"</span><span class=\"token punctuation\">.</span>\nTo adjust logging level <span class=\"token return-type class-name\">use</span> sc<span class=\"token punctuation\">.</span><span class=\"token function\">setLogLevel</span><span class=\"token punctuation\">(</span>newLevel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token class-name\">For</span> SparkR<span class=\"token punctuation\">,</span> <span class=\"token return-type class-name\">use</span> <span class=\"token function\">setLogLevel</span><span class=\"token punctuation\">(</span>newLevel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\nSpark context Web UI available <span class=\"token class-name\">at</span> http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span>standalone<span class=\"token punctuation\">.</span><span class=\"token keyword\">internal</span><span class=\"token punctuation\">.</span>cloudapp<span class=\"token punctuation\">.</span>net<span class=\"token punctuation\">:</span><span class=\"token number\">4040</span>\nSpark context available <span class=\"token keyword\">as</span> 'sc' <span class=\"token punctuation\">(</span>master <span class=\"token operator\">=</span> local<span class=\"token punctuation\">[</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">app</span> id <span class=\"token operator\">=</span> local<span class=\"token operator\">-</span><span class=\"token number\">1614847063399</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\nSpark session available <span class=\"token keyword\">as</span> 'spark'<span class=\"token punctuation\">.</span>\nWelcome to\n      ____              __\n     <span class=\"token operator\">/</span> __<span class=\"token operator\">/</span>__  ___ _____<span class=\"token operator\">/</span> <span class=\"token operator\">/</span>__\n    _\\ \\<span class=\"token operator\">/</span> _ \\<span class=\"token operator\">/</span> _ `<span class=\"token operator\">/</span> __<span class=\"token operator\">/</span>  '_<span class=\"token operator\">/</span>\n   <span class=\"token operator\">/</span>___<span class=\"token operator\">/</span> <span class=\"token punctuation\">.</span>__<span class=\"token operator\">/</span>\\_<span class=\"token punctuation\">,</span>_<span class=\"token operator\">/</span>_<span class=\"token operator\">/</span> <span class=\"token operator\">/</span>_<span class=\"token operator\">/</span>\\_\\   version <span class=\"token number\">3.0</span><span class=\"token number\">.2</span>\n      <span class=\"token operator\">/</span>_<span class=\"token operator\">/</span>\n\nUsing Scala version <span class=\"token number\">2.12</span><span class=\"token number\">.10</span> <span class=\"token punctuation\">(</span>OpenJDK <span class=\"token number\">64</span><span class=\"token operator\">-</span>Bit <span class=\"token class-name\">Server</span> VM<span class=\"token punctuation\">,</span> Java <span class=\"token number\">1.8</span><span class=\"token number\">.0_275</span><span class=\"token punctuation\">)</span>\nType <span class=\"token keyword\">in</span> expressions to have them evaluated<span class=\"token punctuation\">.</span>\nType <span class=\"token punctuation\">:</span>help <span class=\"token keyword\">for</span> more information<span class=\"token punctuation\">.</span>\n\nscala<span class=\"token operator\">></span></code></pre></div>\n<br/>\n<p>Spark Config 설정 </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">## Spark_HOME의 conf 디렉토리에서 수행</span>\n\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> conf<span class=\"token punctuation\">]</span># cp spark<span class=\"token operator\">-</span>env<span class=\"token punctuation\">.</span>sh<span class=\"token punctuation\">.</span>template spark<span class=\"token operator\">-</span>env<span class=\"token punctuation\">.</span>sh\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> conf<span class=\"token punctuation\">]</span># vim spark<span class=\"token operator\">-</span>env<span class=\"token punctuation\">.</span>sh\n\n\n<span class=\"token preprocessor property\">## nasa setting</span>\n\n<span class=\"token class-name\">export</span> SPARK_WORKER_INSTANCES<span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token punctuation\">[</span>worker node에 대한 설정<span class=\"token punctuation\">]</span></code></pre></div>\n<p>Spark Master 프로세스 실행</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> sbin<span class=\"token punctuation\">]</span># sh start<span class=\"token operator\">-</span>master<span class=\"token punctuation\">.</span>sh\nstarting org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>master<span class=\"token punctuation\">.</span>Master<span class=\"token punctuation\">,</span> logging to <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>logs<span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span>root<span class=\"token operator\">-</span>org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>master<span class=\"token punctuation\">.</span>Master<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>Standalone<span class=\"token punctuation\">.</span><span class=\"token keyword\">out</span></code></pre></div>\n<br/>\n<p>MASTER WEB 확인 (Cloud라면 Inbound 설정 필요)</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110070522-86df3c80-7dbd-11eb-82cd-85a45eb4eeb2.JPG\" alt=\"캡처3121\"></p>\n<ul>\n<li>Worker Node 설정에 필요한 url을 미리 복사<br>\nspark://Standalone.44p1qlnthrou1ezmysbcbmontc.syx.internal.cloudapp.net:7077</li>\n</ul>\n<br/>\n<p>Worker Node 프로세스 실행</p>\n<p>아까 env.sh 설정에 맞게 3개의 Worker 가 생성됩니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> sbin<span class=\"token punctuation\">]</span># sh start<span class=\"token operator\">-</span><span class=\"token class-name\">slave<span class=\"token punctuation\">.</span>sh</span> spark<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>Standalone<span class=\"token punctuation\">.</span>44p1qlnthrou1ezmysbcbmontc<span class=\"token punctuation\">.</span>syx<span class=\"token punctuation\">.</span><span class=\"token keyword\">internal</span><span class=\"token punctuation\">.</span>cloudapp<span class=\"token punctuation\">.</span>net<span class=\"token punctuation\">:</span><span class=\"token number\">7077</span> <span class=\"token operator\">-</span>m 2g <span class=\"token operator\">-</span>c <span class=\"token number\">1</span>\nstarting org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>worker<span class=\"token punctuation\">.</span>Worker<span class=\"token punctuation\">,</span> logging to <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>logs<span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span>root<span class=\"token operator\">-</span>org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>worker<span class=\"token punctuation\">.</span>Worker<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>Standalone<span class=\"token punctuation\">.</span><span class=\"token keyword\">out</span>\nstarting org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>worker<span class=\"token punctuation\">.</span>Worker<span class=\"token punctuation\">,</span> logging to <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>logs<span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span>root<span class=\"token operator\">-</span>org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>worker<span class=\"token punctuation\">.</span>Worker<span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token operator\">-</span>Standalone<span class=\"token punctuation\">.</span><span class=\"token keyword\">out</span>\nstarting org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>worker<span class=\"token punctuation\">.</span>Worker<span class=\"token punctuation\">,</span> logging to <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>logs<span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span>root<span class=\"token operator\">-</span>org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>worker<span class=\"token punctuation\">.</span>Worker<span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token operator\">-</span>Standalone<span class=\"token punctuation\">.</span><span class=\"token keyword\">out</span></code></pre></div>\n<br/>\n<p>Master WEB에서 Worker 등록 확인</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110070820-23a1da00-7dbe-11eb-8014-304fd2583ef8.JPG\" alt=\"44444\"></p>\n<br/>\n<hr>\n<h3 id=\"3-zeppelin-설치-root-계정-기반\" style=\"position:relative;\"><a href=\"#3-zeppelin-%EC%84%A4%EC%B9%98-root-%EA%B3%84%EC%A0%95-%EA%B8%B0%EB%B0%98\" aria-label=\"3 zeppelin 설치 root 계정 기반 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Zeppelin 설치 (root 계정 기반)</h3>\n<br/> \n<p>Zeppelin 다운로드  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@Spark<span class=\"token operator\">-</span><span class=\"token class-name\">Standalone</span> zeppelin<span class=\"token punctuation\">]</span># <span class=\"token class-name\">wget</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>downloads<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">-</span><span class=\"token number\">0.9</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>preview2<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">-</span><span class=\"token number\">0.9</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>preview2<span class=\"token operator\">-</span>bin<span class=\"token operator\">-</span>all<span class=\"token punctuation\">.</span>tgz</code></pre></div>\n<br/>\n<p>압축해제 및 권한 변경</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> home<span class=\"token punctuation\">]</span># useradd zeppelin\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> home<span class=\"token punctuation\">]</span># cd <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> zeppelin<span class=\"token punctuation\">]</span># tar xvfz zeppelin<span class=\"token operator\">-</span><span class=\"token number\">0.9</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>preview2<span class=\"token operator\">-</span>bin<span class=\"token operator\">-</span>all<span class=\"token punctuation\">.</span>tgz\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> zeppelin<span class=\"token punctuation\">]</span># mv zeppelin<span class=\"token operator\">-</span><span class=\"token number\">0.9</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>preview2<span class=\"token operator\">-</span>bin<span class=\"token operator\">-</span>all zeppelin\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> zeppelin<span class=\"token punctuation\">]</span># chown <span class=\"token operator\">-</span><span class=\"token class-name\">R</span> zeppelin<span class=\"token punctuation\">:</span>zeppelin <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>zeppelin\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> zeppelin<span class=\"token punctuation\">]</span># chmod <span class=\"token operator\">-</span>R <span class=\"token number\">777</span> <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>zeppelin</code></pre></div>\n<br/>\n<p>환경 변수 등록 (zeppelin 계정으로 전환 후 진행)  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>zeppelin@Spark<span class=\"token operator\">-</span>Standalone <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ echo <span class=\"token class-name\">export</span> PATH<span class=\"token operator\">=</span>'$PATH'<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>bin <span class=\"token operator\">></span> <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc\n<span class=\"token punctuation\">[</span>zeppelin@Spark<span class=\"token operator\">-</span>Standalone <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ source <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc</code></pre></div>\n<br/>\n<p>Zeppelin 환경 설정  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">### /home/zeppelin/zeppelin/conf 위치에서 Conf 파일 설정</span>\n\n<span class=\"token punctuation\">[</span>root@Spark<span class=\"token operator\">-</span><span class=\"token class-name\">Standalone</span> conf<span class=\"token punctuation\">]</span># pwd\n<span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>conf\n<span class=\"token punctuation\">[</span>root@Spark<span class=\"token operator\">-</span><span class=\"token class-name\">Standalone</span> conf<span class=\"token punctuation\">]</span># cp zeppelin<span class=\"token operator\">-</span>env<span class=\"token punctuation\">.</span>sh<span class=\"token punctuation\">.</span>template zeppelin<span class=\"token operator\">-</span>env<span class=\"token punctuation\">.</span>sh\n\n<span class=\"token preprocessor property\">### 설정 추가</span>\n\n<span class=\"token punctuation\">[</span>root@Spark<span class=\"token operator\">-</span><span class=\"token class-name\">Standalone</span> conf<span class=\"token punctuation\">]</span># echo <span class=\"token class-name\">export</span> JAVA_HOME<span class=\"token operator\">=</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>jvm<span class=\"token operator\">/</span>java<span class=\"token operator\">-</span><span class=\"token number\">1.8</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>openjdk <span class=\"token operator\">></span> zeppelin<span class=\"token operator\">-</span>env<span class=\"token punctuation\">.</span>sh\n<span class=\"token punctuation\">[</span>root@Spark<span class=\"token operator\">-</span><span class=\"token class-name\">Standalone</span> conf<span class=\"token punctuation\">]</span># echo <span class=\"token class-name\">export</span> SPARK_HOME<span class=\"token operator\">=</span><span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark <span class=\"token operator\">>></span> zeppelin<span class=\"token operator\">-</span>env<span class=\"token punctuation\">.</span>sh\n\n\n<span class=\"token preprocessor property\">### Web 접속을 위한 설정</span>\n\n<span class=\"token punctuation\">[</span>root@Spark<span class=\"token operator\">-</span><span class=\"token class-name\">Standalone</span> conf<span class=\"token punctuation\">]</span># cp zeppelin<span class=\"token operator\">-</span>site<span class=\"token punctuation\">.</span>xml<span class=\"token punctuation\">.</span>template zeppelin<span class=\"token operator\">-</span>site<span class=\"token punctuation\">.</span>xml</code></pre></div>\n<br/>\n<h4 id=\"config-수정\" style=\"position:relative;\"><a href=\"#config-%EC%88%98%EC%A0%95\" aria-label=\"config 수정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Config 수정</h4>\n<p>zeppelin-site.xml</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n<span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>zeppelin<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>addr<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span><span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span> <span class=\"token operator\">-></span> Client IP로 변경\n  <span class=\"token operator\">&lt;</span>description<span class=\"token operator\">></span>Server binding address<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>description<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>zeppelin<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>port<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span><span class=\"token number\">7777</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>  <span class=\"token operator\">-></span> <span class=\"token number\">8080</span>은 Spark가 쓰고있기에 <span class=\"token number\">7777</span>로 설정\n  <span class=\"token operator\">&lt;</span>description<span class=\"token operator\">></span>Server port<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>description<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<p>zeppelin-env.sh</p>\n<p>아래 설정 추가  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token class-name\">export</span> JAVA_HOME<span class=\"token operator\">=</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>jvm<span class=\"token operator\">/</span>java<span class=\"token operator\">-</span><span class=\"token number\">1.8</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>openjdk\n<span class=\"token class-name\">export</span> SPARK_HOME<span class=\"token operator\">=</span><span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark\n<span class=\"token class-name\">export</span> PYSPARK_PYTHON<span class=\"token operator\">=</span><span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>python\n<span class=\"token class-name\">export</span> PYTHONPATH<span class=\"token operator\">=</span><span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>python\n<span class=\"token class-name\">export</span> MASTER<span class=\"token operator\">=</span>spark<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>Standalone<span class=\"token punctuation\">.</span>44p1qlnthrou1ezmysbcbmontc<span class=\"token punctuation\">.</span>syx<span class=\"token punctuation\">.</span><span class=\"token keyword\">internal</span><span class=\"token punctuation\">.</span>cloudapp<span class=\"token punctuation\">.</span>net<span class=\"token punctuation\">:</span><span class=\"token number\">7077</span></code></pre></div>\n<br/>\n<p>Zeppelin Daemon 기동  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@Spark<span class=\"token operator\">-</span><span class=\"token class-name\">Standalone</span> conf<span class=\"token punctuation\">]</span># <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">-</span>daemon<span class=\"token punctuation\">.</span>sh start\nLog dir doesn'<span class=\"token class-name\">t</span> exist<span class=\"token punctuation\">,</span> create <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>logs\nPid dir doesn'<span class=\"token class-name\">t</span> exist<span class=\"token punctuation\">,</span> create <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>run\nZeppelin start                                             <span class=\"token punctuation\">[</span>  OK  <span class=\"token punctuation\">]</span>\n\n\n<span class=\"token preprocessor property\">### 정상 기동 확인</span>\n\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> conf<span class=\"token punctuation\">]</span># <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">-</span>daemon<span class=\"token punctuation\">.</span>sh start\nZeppelin start                                             <span class=\"token punctuation\">[</span>  OK  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> conf<span class=\"token punctuation\">]</span># jps\n<span class=\"token number\">3779</span> ZeppelinServer\n<span class=\"token number\">3575</span> Worker\n<span class=\"token number\">3512</span> Worker\n<span class=\"token number\">3449</span> Worker\n<span class=\"token number\">3295</span> Master\n<span class=\"token number\">3807</span> Jps</code></pre></div>\n<br/>\n<p>Zeppelin Web page 확인 [Port 7777]</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/109940335-47f5ac00-7d15-11eb-9c86-04ded7a40090.JPG\" alt=\"캡처3333\"></p>\n<br/>\n<p>Notebook을 하나 만들어서 연동 테스트를 진행합니다. </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110071856-24d40680-7dc0-11eb-9320-04d58c12ea12.JPG\" alt=\"캡처4444\"></p>\n<p>완료인줄 알았으나…  </p>\n<br/>\n<hr>\n<h4 id=\"error-발생\" style=\"position:relative;\"><a href=\"#error-%EB%B0%9C%EC%83%9D\" aria-label=\"error 발생 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ERROR 발생</h4>\n<p>python, pyspark를 사용하려는데 python interpreter를 못찾는다..  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>zeppelin<span class=\"token punctuation\">.</span>interpreter<span class=\"token punctuation\">.</span>InterpreterException<span class=\"token punctuation\">:</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>zeppelin<span class=\"token punctuation\">.</span>interpreter<span class=\"token punctuation\">.</span>InterpreterException<span class=\"token punctuation\">:</span> Fail to open PythonInterpreter\n\t<span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>zeppelin<span class=\"token punctuation\">.</span>interpreter<span class=\"token punctuation\">.</span>LazyOpenInterpreter<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>LazyOpenInterpreter<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">76</span><span class=\"token punctuation\">)</span>\n\tat org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>zeppelin<span class=\"token punctuation\">.</span>interpreter<span class=\"token punctuation\">.</span>remote<span class=\"token punctuation\">.</span>RemoteInterpreterServer$InterpretJob<span class=\"token punctuation\">.</span><span class=\"token function\">jobRun</span><span class=\"token punctuation\">(</span>RemoteInterpreterServer<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">760</span><span class=\"token punctuation\">)</span>\n\tat org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>zeppelin<span class=\"token punctuation\">.</span>interpreter<span class=\"token punctuation\">.</span>remote<span class=\"token punctuation\">.</span>RemoteInterpreterServer$InterpretJob<span class=\"token punctuation\">.</span><span class=\"token function\">jobRun</span><span class=\"token punctuation\">(</span>RemoteInterpreterServer<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">668</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>zeppelin<span class=\"token punctuation\">.</span>scheduler<span class=\"token punctuation\">.</span>Job<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>Job<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">172</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>zeppelin<span class=\"token punctuation\">.</span>scheduler<span class=\"token punctuation\">.</span>AbstractScheduler<span class=\"token punctuation\">.</span><span class=\"token function\">runJob</span><span class=\"token punctuation\">(</span>AbstractScheduler<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">130</span><span class=\"token punctuation\">)</span>\n\tat org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>zeppelin<span class=\"token punctuation\">.</span>scheduler<span class=\"token punctuation\">.</span>FIFOScheduler<span class=\"token punctuation\">.</span>lambda$runJobInScheduler$<span class=\"token function\">0</span><span class=\"token punctuation\">(</span>FIFOScheduler<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">39</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token return-type class-name\">at</span> java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>ThreadPoolExecutor<span class=\"token punctuation\">.</span><span class=\"token function\">runWorker</span><span class=\"token punctuation\">(</span>ThreadPoolExecutor<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">1149</span><span class=\"token punctuation\">)</span>\n\tat java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>ThreadPoolExecutor$Worker<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>ThreadPoolExecutor<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">624</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token return-type class-name\">at</span> java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>Thread<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">748</span><span class=\"token punctuation\">)</span>\n<span class=\"token class-name\">Caused</span> <span class=\"token keyword\">by</span><span class=\"token punctuation\">:</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>zeppelin<span class=\"token punctuation\">.</span>interpreter<span class=\"token punctuation\">.</span>InterpreterException<span class=\"token punctuation\">:</span> Fail to open PythonInterpreter\n\t<span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>zeppelin<span class=\"token punctuation\">.</span>python<span class=\"token punctuation\">.</span>PythonInterpreter<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>PythonInterpreter<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">115</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>zeppelin<span class=\"token punctuation\">.</span>interpreter<span class=\"token punctuation\">.</span>LazyOpenInterpreter<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>LazyOpenInterpreter<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">70</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token number\">8</span> more\n<span class=\"token class-name\">Caused</span> <span class=\"token keyword\">by</span><span class=\"token punctuation\">:</span> java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>IOException<span class=\"token punctuation\">:</span> Fail to launch python process<span class=\"token punctuation\">.</span>\norg<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>commons<span class=\"token punctuation\">.</span>exec<span class=\"token punctuation\">.</span>ExecuteException<span class=\"token punctuation\">:</span> <span class=\"token return-type class-name\">Execution</span> failed <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exit</span> <span class=\"token keyword\">value</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">559038737</span><span class=\"token punctuation\">.</span> Caused <span class=\"token keyword\">by</span> java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>IOException<span class=\"token punctuation\">:</span> Cannot run program <span class=\"token string\">\"python\"</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span> directory <span class=\"token string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> error<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> No such file <span class=\"token keyword\">or</span> directory<span class=\"token punctuation\">)</span>\n\tat org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>commons<span class=\"token punctuation\">.</span>exec<span class=\"token punctuation\">.</span>DefaultExecutor$<span class=\"token number\">1</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>DefaultExecutor<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">205</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token return-type class-name\">at</span> java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>Thread<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">748</span><span class=\"token punctuation\">)</span>\n<span class=\"token class-name\">Caused</span> <span class=\"token keyword\">by</span><span class=\"token punctuation\">:</span> java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>IOException<span class=\"token punctuation\">:</span> Cannot run program <span class=\"token string\">\"python\"</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span> directory <span class=\"token string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> error<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> No such file <span class=\"token keyword\">or</span> directory\n\t<span class=\"token return-type class-name\">at</span> java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>ProcessBuilder<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span>ProcessBuilder<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">1048</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token return-type class-name\">at</span> java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>Runtime<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>Runtime<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">621</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>commons<span class=\"token punctuation\">.</span>exec<span class=\"token punctuation\">.</span>launcher<span class=\"token punctuation\">.</span>Java13CommandLauncher<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>Java13CommandLauncher<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">61</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>commons<span class=\"token punctuation\">.</span>exec<span class=\"token punctuation\">.</span>DefaultExecutor<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span><span class=\"token punctuation\">(</span>DefaultExecutor<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">279</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>commons<span class=\"token punctuation\">.</span>exec<span class=\"token punctuation\">.</span>DefaultExecutor<span class=\"token punctuation\">.</span><span class=\"token function\">executeInternal</span><span class=\"token punctuation\">(</span>DefaultExecutor<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">336</span><span class=\"token punctuation\">)</span>\n\tat org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>commons<span class=\"token punctuation\">.</span>exec<span class=\"token punctuation\">.</span>DefaultExecutor<span class=\"token punctuation\">.</span>access$<span class=\"token function\">200</span><span class=\"token punctuation\">(</span>DefaultExecutor<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">48</span><span class=\"token punctuation\">)</span>\n\tat org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>commons<span class=\"token punctuation\">.</span>exec<span class=\"token punctuation\">.</span>DefaultExecutor$<span class=\"token number\">1</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>DefaultExecutor<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> more\n<span class=\"token class-name\">Caused</span> <span class=\"token keyword\">by</span><span class=\"token punctuation\">:</span> java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>IOException<span class=\"token punctuation\">:</span> error<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> No such file <span class=\"token keyword\">or</span> directory\n\t<span class=\"token return-type class-name\">at</span> java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>UNIXProcess<span class=\"token punctuation\">.</span><span class=\"token function\">forkAndExec</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Native</span> Method<span class=\"token punctuation\">)</span>\n\tat java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>UNIXProcess<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span>init<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>UNIXProcess<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">247</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token return-type class-name\">at</span> java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>ProcessImpl<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span>ProcessImpl<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">134</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token return-type class-name\">at</span> java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>ProcessBuilder<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span>ProcessBuilder<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">1029</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token number\">7</span> more\n\n\t<span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>zeppelin<span class=\"token punctuation\">.</span>python<span class=\"token punctuation\">.</span>PythonInterpreter<span class=\"token punctuation\">.</span><span class=\"token function\">createGatewayServerAndStartScript</span><span class=\"token punctuation\">(</span>PythonInterpreter<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">160</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token return-type class-name\">at</span> org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>zeppelin<span class=\"token punctuation\">.</span>python<span class=\"token punctuation\">.</span>PythonInterpreter<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>PythonInterpreter<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">:</span><span class=\"token number\">112</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token number\">9</span> more</code></pre></div>\n<br/>\n<p>혹시 몰라 python 3.8.8 버전으로 새로 설치해봅시다.</p>\n<p>사전 파일 설치</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> conf<span class=\"token punctuation\">]</span># yum <span class=\"token operator\">-</span>y install gcc openssl<span class=\"token operator\">-</span>devel bzip2<span class=\"token operator\">-</span>devel libffi<span class=\"token operator\">-</span>devel</code></pre></div>\n<br/> \n<p>파이썬 설치</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> nasa1515<span class=\"token punctuation\">]</span># <span class=\"token class-name\">wget</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>www<span class=\"token punctuation\">.</span>python<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>ftp<span class=\"token operator\">/</span>python<span class=\"token operator\">/</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token operator\">/</span>Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">.</span>tgz\n\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> nasa1515<span class=\"token punctuation\">]</span># tar xvfz Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">.</span>tgz\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> nasa1515<span class=\"token punctuation\">]</span># chmod <span class=\"token operator\">-</span>R <span class=\"token number\">777</span> Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> nasa1515<span class=\"token punctuation\">]</span>#\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@Standalone</span> nasa1515<span class=\"token punctuation\">]</span># cd Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span>\n<span class=\"token punctuation\">[</span>root@Standalone Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">]</span># <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>configure <span class=\"token operator\">--</span>enable<span class=\"token operator\">-</span>optimizations\n<span class=\"token punctuation\">[</span>root@Standalone Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">]</span># make altinstall\n<span class=\"token punctuation\">[</span>root@Standalone Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">]</span># echo <span class=\"token keyword\">alias</span> python<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/local/bin/python3.8\"</span> <span class=\"token operator\">>></span> <span class=\"token operator\">/</span>root<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc\n<span class=\"token punctuation\">[</span>root@Standalone Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">]</span># source <span class=\"token operator\">/</span>root<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc\n<span class=\"token punctuation\">[</span>root@Standalone Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">]</span># python <span class=\"token operator\">-</span>V\nPython <span class=\"token number\">3.8</span><span class=\"token number\">.8</span></code></pre></div>\n<p>결론 : 파이썬을 깔고 뭐 해봐도 안된다…  </p>\n<br/>\n<p>약 4시간동안 StackOverFlow를 찾아다닌 결과..아래 글을 발견했다..</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/32959723/set-python-path-for-spark-worker\">STACK OverFlow</a></li>\n</ul>\n<br/>\n<h4 id=\"문제-해결\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0\" aria-label=\"문제 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 해결</h4>\n<p>spark - pyspark가 python의 경로를 못읽고 있다!!<br>\n강제로 env 파일에 환경변수로 python의 경로를 넣어주자! </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">### 파이썬 경로 확인</span>\n\n<span class=\"token punctuation\">[</span>root@Standalone <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># which python3\n<span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>python3\n\n\n<span class=\"token preprocessor property\">### env.sh 파일에 환경변수 설정</span>\n\n<span class=\"token class-name\">export</span> PYSPARK_PYTHON<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/bin/python3\"</span></code></pre></div>\n<br/>\n<p>정상적으로 연결!!  </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110093218-cddd2a00-7ddd-11eb-8259-aa1bdfd93880.JPG\" alt=\"캡처331212\"></p>\n<br/>\n<p>Zeppelin에서도 정상적으로 구동되네요…</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110093881-8c994a00-7dde-11eb-8e41-81568de26954.JPG\" alt=\"123123\"></p>\n<br/>\n<hr>\n<h4 id=\"blob-storage에-csv-파일-upload\" style=\"position:relative;\"><a href=\"#blob-storage%EC%97%90-csv-%ED%8C%8C%EC%9D%BC-upload\" aria-label=\"blob storage에 csv 파일 upload permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Blob Storage에 csv 파일 Upload</h4>\n<p>기본적으로 Azure에서 Storage는 Storage Account로 관리됩니다.<br>\n때문에 우선적으로 Storage Account를 생성하고 blob container를 생성해야 합니다.  </p>\n<ul>\n<li>Storage Account 및 blob의 생성은 <a href=\"https://nasa1515.github.io/azure/2021/02/08/AZURE-Storageservice.html#a2\">이전포스트</a>를 확인하시면 됩니다.  </li>\n</ul>\n<br/>\n<h4 id=\"저는-다음과-같이-testdatacsv-파일을-blob에-upload-했습니다\" style=\"position:relative;\"><a href=\"#%EC%A0%80%EB%8A%94-%EB%8B%A4%EC%9D%8C%EA%B3%BC-%EA%B0%99%EC%9D%B4-testdatacsv-%ED%8C%8C%EC%9D%BC%EC%9D%84-blob%EC%97%90-upload-%ED%96%88%EC%8A%B5%EB%8B%88%EB%8B%A4\" aria-label=\"저는 다음과 같이 testdatacsv 파일을 blob에 upload 했습니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>저는 다음과 같이 TESTDATA.csv 파일을 blob에 upload 했습니다.</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110274941-64466100-8013-11eb-8357-ca245d5c6d2f.JPG\" alt=\"13123123\"></p>\n<br/>\n<h4 id=\"error-발생-1\" style=\"position:relative;\"><a href=\"#error-%EB%B0%9C%EC%83%9D-1\" aria-label=\"error 발생 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ERROR 발생!</h4>\n<ul>\n<li>\n<h4 id=\"원래의-목표--hadoopyarn---cluster-manager-없이-standalone-구성에-blob-storage-data-read\" style=\"position:relative;\"><a href=\"#%EC%9B%90%EB%9E%98%EC%9D%98-%EB%AA%A9%ED%91%9C--hadoopyarn---cluster-manager-%EC%97%86%EC%9D%B4-standalone-%EA%B5%AC%EC%84%B1%EC%97%90-blob-storage-data-read\" aria-label=\"원래의 목표  hadoopyarn   cluster manager 없이 standalone 구성에 blob storage data read permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>원래의 목표 : hadoop(yarn) - Cluster Manager 없이 Standalone 구성에 blob storage data read.</h4>\n</li>\n<li>\n<p>해당 구성을 테스트 해보려고 했으나 다음과 같은 ERROR 발생  </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110295613-a8962900-8034-11eb-8639-d665dc057275.JPG\" alt=\"1232313\"></p>\n<p>해당 이슈는 blob(data lake gen2)에서 wasb[s] 형식으로 파일을 받아오려 했으나<br>\nSpark 가 설치되어있는 VM에는 Hadoop이 설치 및 연동이 되어있지 않기에 DF에 넣을 수 없는 이슈 였습니다.<br>\n사실 pyspark를 기반으로 작동해서 Azure blob api를 직접 선언해서 https 연동을 할 수는 있지만<br>\n그렇게 사용하는 로직은 실습이나 실무에서도 적합하지 않다고 생각해서 Hadoop을 깔기로 했습니다.  </p>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며…</h2>\n<p>마지막 pyspark 문제로 거의 4시간, hdhfs 문제로 4시간 거의 하루를 날렸습니다.<br>\n시간이 조금 지나니 Spark에 대한 로직을 제대로 이해 못한 부분이 큰 것 같습니다.<br>\n그래서 다음 포스트에서 hadoop을 설치하고 재도전해봅시다..  </p>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-azure-vm%EC%97%90-spark-standalone-%EA%B5%AC%EC%84%B1\">✔ Azure VM에 Spark StandAlone 구성</a></p>\n<ul>\n<li><a href=\"#%ED%99%98%EA%B2%BD%EA%B5%AC%EC%84%B1\">환경구성</a></li>\n<li><a href=\"#1-open-jdk-%EC%84%A4%EC%B9%98-root-%EA%B3%84%EC%A0%95-%EA%B8%B0%EB%B0%98\">1. Open JDK 설치 (root 계정 기반)</a></li>\n<li><a href=\"#2-apache-spark-%EC%84%A4%EC%B9%98-root-%EA%B3%84%EC%A0%95-%EA%B8%B0%EB%B0%98\">2. Apache Spark 설치 (root 계정 기반)</a></li>\n<li>\n<p><a href=\"#3-zeppelin-%EC%84%A4%EC%B9%98-root-%EA%B3%84%EC%A0%95-%EA%B8%B0%EB%B0%98\">3. Zeppelin 설치 (root 계정 기반)</a></p>\n<ul>\n<li><a href=\"#config-%EC%88%98%EC%A0%95\">Config 수정</a></li>\n<li><a href=\"#error-%EB%B0%9C%EC%83%9D\">ERROR 발생</a></li>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0\">문제 해결</a></li>\n<li><a href=\"#blob-storage%EC%97%90-csv-%ED%8C%8C%EC%9D%BC-upload\">Blob Storage에 csv 파일 Upload</a></li>\n<li><a href=\"#%EC%A0%80%EB%8A%94-%EB%8B%A4%EC%9D%8C%EA%B3%BC-%EA%B0%99%EC%9D%B4-testdatacsv-%ED%8C%8C%EC%9D%BC%EC%9D%84-blob%EC%97%90-upload-%ED%96%88%EC%8A%B5%EB%8B%88%EB%8B%A4\">저는 다음과 같이 TESTDATA.csv 파일을 blob에 upload 했습니다.</a></li>\n<li><a href=\"#error-%EB%B0%9C%EC%83%9D-1\">ERROR 발생!</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며…</a></li>\n</ul>\n</div>","frontmatter":{"date":"August 14, 2021","title":"[DATA] - Azure VM에 Apache Spark v3.0 Standalone 설치 With Zeppelin","categories":"DATA","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/data-sparkinstall/"}},"prev":{"id":"2113ff4f-0a02-5bae-b5c9-faf24641bc18","html":"<p>머리말  </p>\n<p>이전에 한번 Standalone Cluster로 Spark를 설치하는 방법을 알아봤습니다.<br>\n그러나 Azure와 연동하는 과정에서 여러가지 문제가 발생했고<br>\n결국 이전 포스트인 Hadoop Cluster를 구성해서 Spark를 구동시키기로 했습니다.<br>\n이번 포스트에서는 설치한 Hadoop Cluster의 yarn에 Spark를 구동시키는 과정입니다.  </p>\n<hr>\n<h2 id=\"-spark-설치\" style=\"position:relative;\"><a href=\"#-spark-%EC%84%A4%EC%B9%98\" aria-label=\" spark 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ Spark 설치</h2>\n<p>JDK 등의 기본적인 환경설정은 <a href=\"https://nasa1515.tech/data-sparkinstall/\">이전포스트</a>를 확인해주세요.<br>\n이번 포스트에서는 Spark의 설치보다는 yarn과의 연동부분을 중점으로 둡니다.  </p>\n<br/>\n<ul>\n<li>\n<h4 id=\"python-설치-pyspark를-위함\" style=\"position:relative;\"><a href=\"#python-%EC%84%A4%EC%B9%98-pyspark%EB%A5%BC-%EC%9C%84%ED%95%A8\" aria-label=\"python 설치 pyspark를 위함 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Python 설치 (pyspark를 위함)</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">### 사전 파일 설치</span>\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> hadoop<span class=\"token punctuation\">]</span># yum <span class=\"token operator\">-</span>y install gcc openssl<span class=\"token operator\">-</span>devel bzip2<span class=\"token operator\">-</span>devel libffi<span class=\"token operator\">-</span>devel make\n\n\n<span class=\"token preprocessor property\">### 파이썬 설치 및 환경 설정</span>\n\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> home<span class=\"token punctuation\">]</span># <span class=\"token class-name\">wget</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>www<span class=\"token punctuation\">.</span>python<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>ftp<span class=\"token operator\">/</span>python<span class=\"token operator\">/</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token operator\">/</span>Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">.</span>tgz\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> home<span class=\"token punctuation\">]</span># tar xvfz Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">.</span>tgz\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> home<span class=\"token punctuation\">]</span># rm <span class=\"token operator\">-</span>rf Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">.</span>tgz\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> home<span class=\"token punctuation\">]</span># chmod <span class=\"token operator\">-</span>R <span class=\"token number\">777</span> Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token operator\">/</span>\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">]</span># <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>configure <span class=\"token operator\">--</span>enable<span class=\"token operator\">-</span>optimizations\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">]</span># make altinstall\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">]</span># echo <span class=\"token keyword\">alias</span> python<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/local/bin/python3.8\"</span> <span class=\"token operator\">>></span> <span class=\"token operator\">/</span>root<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">]</span># source <span class=\"token operator\">/</span>root<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">]</span># python <span class=\"token operator\">-</span>V\nPython <span class=\"token number\">3.8</span><span class=\"token number\">.8</span>\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master Python<span class=\"token operator\">-</span><span class=\"token number\">3.8</span><span class=\"token number\">.8</span><span class=\"token punctuation\">]</span># which python\n<span class=\"token keyword\">alias</span> python<span class=\"token operator\">=</span>'<span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>python3<span class=\"token punctuation\">.</span><span class=\"token number\">8</span>'\n        <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>python3<span class=\"token punctuation\">.</span><span class=\"token number\">8</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"spark-계정-설정\" style=\"position:relative;\"><a href=\"#spark-%EA%B3%84%EC%A0%95-%EC%84%A4%EC%A0%95\" aria-label=\"spark 계정 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark 계정 설정</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># useradd spark\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># passwd spark\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># usermod <span class=\"token operator\">-</span>G wheel spark</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"spark-다운로드-및-설치\" style=\"position:relative;\"><a href=\"#spark-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C-%EB%B0%8F-%EC%84%A4%EC%B9%98\" aria-label=\"spark 다운로드 및 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark 다운로드 및 설치</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">### Spark 계정 생성 및 설정</span>\n\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># useradd spark\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># passwd spark\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># usermod <span class=\"token operator\">-</span>G wheel spark\n\n<span class=\"token preprocessor property\">### Spark 3.0.2 Version 다운로드</span>\n\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> spark<span class=\"token punctuation\">]</span># <span class=\"token class-name\">wget</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>downloads<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span><span class=\"token number\">3.0</span><span class=\"token number\">.2</span><span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span><span class=\"token number\">3.0</span><span class=\"token number\">.2</span><span class=\"token operator\">-</span>bin<span class=\"token operator\">-</span>hadoop2<span class=\"token punctuation\">.</span><span class=\"token number\">7</span><span class=\"token punctuation\">.</span>tgz\n<span class=\"token operator\">--</span><span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">01</span><span class=\"token punctuation\">:</span><span class=\"token number\">27</span><span class=\"token punctuation\">:</span><span class=\"token number\">27</span><span class=\"token operator\">--</span>  https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>downloads<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span><span class=\"token number\">3.0</span><span class=\"token number\">.2</span><span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span><span class=\"token number\">3.0</span><span class=\"token number\">.2</span><span class=\"token operator\">-</span>bin<span class=\"token operator\">-</span>hadoop2<span class=\"token punctuation\">.</span><span class=\"token number\">7</span><span class=\"token punctuation\">.</span>tgz\n\n<span class=\"token preprocessor property\">### 압축 해제 및 권한 설정</span>\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> spark<span class=\"token punctuation\">]</span># tar xvfz spark<span class=\"token operator\">-</span><span class=\"token number\">3.0</span><span class=\"token number\">.2</span><span class=\"token operator\">-</span>bin<span class=\"token operator\">-</span>hadoop2<span class=\"token punctuation\">.</span><span class=\"token number\">7</span><span class=\"token punctuation\">.</span>tgz\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> spark<span class=\"token punctuation\">]</span># mv spark<span class=\"token operator\">-</span><span class=\"token number\">3.0</span><span class=\"token number\">.2</span><span class=\"token operator\">-</span>bin<span class=\"token operator\">-</span>hadoop2<span class=\"token punctuation\">.</span><span class=\"token number\">7</span> spar\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> spark<span class=\"token punctuation\">]</span># chown <span class=\"token operator\">-</span><span class=\"token class-name\">R</span> spark<span class=\"token punctuation\">:</span>spark spark\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> spark<span class=\"token punctuation\">]</span># chmod <span class=\"token operator\">-</span>R <span class=\"token number\">777</span> spark</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"spark-환경변수-등록-spark-계정-hadoop-계정-진행\" style=\"position:relative;\"><a href=\"#spark-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EB%93%B1%EB%A1%9D-spark-%EA%B3%84%EC%A0%95-hadoop-%EA%B3%84%EC%A0%95-%EC%A7%84%ED%96%89\" aria-label=\"spark 환경변수 등록 spark 계정 hadoop 계정 진행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark 환경변수 등록 (Spark 계정, Hadoop 계정 진행)</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>spark@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ echo <span class=\"token class-name\">export</span> PATH<span class=\"token operator\">=</span>'$PATH'<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>bin <span class=\"token operator\">>></span> <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc\n<span class=\"token punctuation\">[</span>spark@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ echo <span class=\"token class-name\">export</span> JAVA_HOME<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.275.b01-1.el8_3.x86_64\"</span> <span class=\"token operator\">>></span> <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc\n<span class=\"token punctuation\">[</span>spark@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ tail <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc\n<span class=\"token class-name\">export</span> PATH<span class=\"token operator\">=</span>$PATH<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>bin\n<span class=\"token punctuation\">[</span>spark@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ soruce <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">bashrc</span>\nbash<span class=\"token punctuation\">:</span> soruce<span class=\"token punctuation\">:</span> command <span class=\"token keyword\">not</span> found\n<span class=\"token punctuation\">[</span>spark@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ source <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc\n<span class=\"token punctuation\">[</span>spark@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ echo $PATH\n<span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>local<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>local<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>sbin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>sbin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>jvm<span class=\"token operator\">/</span>java<span class=\"token operator\">-</span><span class=\"token number\">1.8</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>openjdk<span class=\"token operator\">-</span><span class=\"token number\">1.8</span><span class=\"token number\">.0</span><span class=\"token number\">.275</span><span class=\"token punctuation\">.</span>b01<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">.</span>el8_3<span class=\"token punctuation\">.</span>x86_64<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>sbin<span class=\"token punctuation\">::</span><span class=\"token operator\">/</span>root<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>bin</code></pre></div>\n<br/>\n</li>\n<li>\n<h4 id=\"spark-config-설정\" style=\"position:relative;\"><a href=\"#spark-config-%EC%84%A4%EC%A0%95\" aria-label=\"spark config 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark Config 설정</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">#### spark-env.sh 에 다음 설정 추가</span>\n\n<span class=\"token preprocessor property\">## nasa settin</span>\n\n<span class=\"token preprocessor property\">## nasa settin</span>\n\n<span class=\"token class-name\">export</span> JAVA_HOME<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.275.b01-1.el8_3.x86_64\"</span>\n<span class=\"token class-name\">export</span> SPARK_WORKER_INSTANCES<span class=\"token operator\">=</span><span class=\"token number\">2</span>\n<span class=\"token class-name\">export</span> PYSPARK_PYTHON<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/bin/python3\"</span>\n<span class=\"token class-name\">export</span> HADOOP_HOME<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/local/hadoop\"</span>\n<span class=\"token class-name\">export</span> HADOOP_CONF_DIR<span class=\"token operator\">=</span>$HADOOP_HOME<span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>hadoop\n<span class=\"token class-name\">export</span> YARN_CONF_DIR<span class=\"token operator\">=</span>$HADOOP_HOME<span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>hadoop    \n\n\n<span class=\"token preprocessor property\">#### spark-defaults.conf 설정</span>\n\n<span class=\"token punctuation\">[</span>spark@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> conf<span class=\"token punctuation\">]</span>$ cp spark<span class=\"token operator\">-</span>defaults<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>template spark<span class=\"token operator\">-</span>defaults<span class=\"token punctuation\">.</span>conf\n<span class=\"token punctuation\">[</span>spark@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> conf<span class=\"token punctuation\">]</span>$ vim spark<span class=\"token operator\">-</span>defaults<span class=\"token punctuation\">.</span>conf\n\n<span class=\"token preprocessor property\">## 설정 추가    </span>\nspark<span class=\"token punctuation\">.</span>master                    yarn\nspark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>mode               client</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"spark-pyspark-동작-확인\" style=\"position:relative;\"><a href=\"#spark-pyspark-%EB%8F%99%EC%9E%91-%ED%99%95%EC%9D%B8\" aria-label=\"spark pyspark 동작 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark, pyspark 동작 확인</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">### Spark-shell 동작확인</span>\n\n<span class=\"token punctuation\">[</span>spark@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> root<span class=\"token punctuation\">]</span>$ spark<span class=\"token operator\">-</span>shell\n<span class=\"token number\">21</span><span class=\"token operator\">/</span><span class=\"token number\">03</span><span class=\"token operator\">/</span><span class=\"token number\">10</span> <span class=\"token number\">01</span><span class=\"token punctuation\">:</span><span class=\"token number\">56</span><span class=\"token punctuation\">:</span><span class=\"token number\">03</span> <span class=\"token class-name\">WARN</span> NativeCodeLoader<span class=\"token punctuation\">:</span> Unable to load native<span class=\"token operator\">-</span>hadoop library <span class=\"token keyword\">for</span> your platform<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token keyword\">using</span> builtin<span class=\"token operator\">-</span>java classes <span class=\"token keyword\">where</span> <span class=\"token class-name\">applicable</span>\nUsing Spark's <span class=\"token keyword\">default</span> <span class=\"token class-name\">log4j</span> profile<span class=\"token punctuation\">:</span> org<span class=\"token operator\">/</span>apache<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>log4j<span class=\"token operator\">-</span>defaults<span class=\"token punctuation\">.</span>properties\nSetting <span class=\"token keyword\">default</span> log level to <span class=\"token string\">\"WARN\"</span><span class=\"token punctuation\">.</span>\nTo adjust logging level <span class=\"token return-type class-name\">use</span> sc<span class=\"token punctuation\">.</span><span class=\"token function\">setLogLevel</span><span class=\"token punctuation\">(</span>newLevel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token class-name\">For</span> SparkR<span class=\"token punctuation\">,</span> <span class=\"token return-type class-name\">use</span> <span class=\"token function\">setLogLevel</span><span class=\"token punctuation\">(</span>newLevel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\nSpark context Web UI available <span class=\"token class-name\">at</span> http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>master<span class=\"token punctuation\">:</span><span class=\"token number\">4040</span>\nSpark context available <span class=\"token keyword\">as</span> 'sc' <span class=\"token punctuation\">(</span>master <span class=\"token operator\">=</span> local<span class=\"token punctuation\">[</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">app</span> id <span class=\"token operator\">=</span> local<span class=\"token operator\">-</span><span class=\"token number\">1615341369333</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\nSpark session available <span class=\"token keyword\">as</span> 'spark'<span class=\"token punctuation\">.</span>\nWelcome to\n    ____              __\n    <span class=\"token operator\">/</span> __<span class=\"token operator\">/</span>__  ___ _____<span class=\"token operator\">/</span> <span class=\"token operator\">/</span>__\n    _\\ \\<span class=\"token operator\">/</span> _ \\<span class=\"token operator\">/</span> _ `<span class=\"token operator\">/</span> __<span class=\"token operator\">/</span>  '_<span class=\"token operator\">/</span>\n<span class=\"token operator\">/</span>___<span class=\"token operator\">/</span> <span class=\"token punctuation\">.</span>__<span class=\"token operator\">/</span>\\_<span class=\"token punctuation\">,</span>_<span class=\"token operator\">/</span>_<span class=\"token operator\">/</span> <span class=\"token operator\">/</span>_<span class=\"token operator\">/</span>\\_\\   version <span class=\"token number\">3.0</span><span class=\"token number\">.2</span>\n    <span class=\"token operator\">/</span>_<span class=\"token operator\">/</span>\n\nUsing Scala version <span class=\"token number\">2.12</span><span class=\"token number\">.10</span> <span class=\"token punctuation\">(</span>OpenJDK <span class=\"token number\">64</span><span class=\"token operator\">-</span>Bit <span class=\"token class-name\">Server</span> VM<span class=\"token punctuation\">,</span> Java <span class=\"token number\">1.8</span><span class=\"token number\">.0_275</span><span class=\"token punctuation\">)</span>\nType <span class=\"token keyword\">in</span> expressions to have them evaluated<span class=\"token punctuation\">.</span>\nType <span class=\"token punctuation\">:</span>help <span class=\"token keyword\">for</span> more information<span class=\"token punctuation\">.</span>\n\nscala<span class=\"token operator\">></span>\n\n\n\n\n<span class=\"token preprocessor property\">### pyspark 동작 확인</span>\n\n<span class=\"token punctuation\">[</span>spark@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> conf<span class=\"token punctuation\">]</span>$ pyspark\nPython <span class=\"token number\">3.6</span><span class=\"token number\">.8</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">,</span> Apr <span class=\"token number\">16</span> <span class=\"token number\">2020</span><span class=\"token punctuation\">,</span> <span class=\"token number\">01</span><span class=\"token punctuation\">:</span><span class=\"token number\">36</span><span class=\"token punctuation\">:</span><span class=\"token number\">27</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span>GCC <span class=\"token number\">8.3</span><span class=\"token number\">.1</span> <span class=\"token number\">20191121</span> <span class=\"token punctuation\">(</span>Red Hat <span class=\"token number\">8.3</span><span class=\"token number\">.1</span><span class=\"token operator\">-</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">on</span> linux\nType <span class=\"token string\">\"help\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"copyright\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"credits\"</span> <span class=\"token keyword\">or</span> <span class=\"token string\">\"license\"</span> <span class=\"token keyword\">for</span> more information<span class=\"token punctuation\">.</span>\n<span class=\"token number\">21</span><span class=\"token operator\">/</span><span class=\"token number\">03</span><span class=\"token operator\">/</span><span class=\"token number\">10</span> <span class=\"token number\">01</span><span class=\"token punctuation\">:</span><span class=\"token number\">59</span><span class=\"token punctuation\">:</span><span class=\"token number\">44</span> <span class=\"token class-name\">WARN</span> NativeCodeLoader<span class=\"token punctuation\">:</span> Unable to load native<span class=\"token operator\">-</span>hadoop library <span class=\"token keyword\">for</span> your platform<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token keyword\">using</span> builtin<span class=\"token operator\">-</span>java classes <span class=\"token keyword\">where</span> <span class=\"token class-name\">applicable</span>\nUsing Spark's <span class=\"token keyword\">default</span> <span class=\"token class-name\">log4j</span> profile<span class=\"token punctuation\">:</span> org<span class=\"token operator\">/</span>apache<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>log4j<span class=\"token operator\">-</span>defaults<span class=\"token punctuation\">.</span>properties\nSetting <span class=\"token keyword\">default</span> log level to <span class=\"token string\">\"WARN\"</span><span class=\"token punctuation\">.</span>\nTo adjust logging level <span class=\"token return-type class-name\">use</span> sc<span class=\"token punctuation\">.</span><span class=\"token function\">setLogLevel</span><span class=\"token punctuation\">(</span>newLevel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token class-name\">For</span> SparkR<span class=\"token punctuation\">,</span> <span class=\"token return-type class-name\">use</span> <span class=\"token function\">setLogLevel</span><span class=\"token punctuation\">(</span>newLevel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\nWelcome to\n    ____              __\n    <span class=\"token operator\">/</span> __<span class=\"token operator\">/</span>__  ___ _____<span class=\"token operator\">/</span> <span class=\"token operator\">/</span>__\n    _\\ \\<span class=\"token operator\">/</span> _ \\<span class=\"token operator\">/</span> _ `<span class=\"token operator\">/</span> __<span class=\"token operator\">/</span>  '_<span class=\"token operator\">/</span>\n<span class=\"token operator\">/</span>__ <span class=\"token operator\">/</span> <span class=\"token punctuation\">.</span>__<span class=\"token operator\">/</span>\\_<span class=\"token punctuation\">,</span>_<span class=\"token operator\">/</span>_<span class=\"token operator\">/</span> <span class=\"token operator\">/</span>_<span class=\"token operator\">/</span>\\_\\   version <span class=\"token number\">3.0</span><span class=\"token number\">.2</span>\n    <span class=\"token operator\">/</span>_<span class=\"token operator\">/</span>\n\nUsing Python version <span class=\"token number\">3.6</span><span class=\"token number\">.8</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">,</span> Apr <span class=\"token number\">16</span> <span class=\"token number\">2020</span> <span class=\"token number\">01</span><span class=\"token punctuation\">:</span><span class=\"token number\">36</span><span class=\"token punctuation\">:</span><span class=\"token number\">27</span><span class=\"token punctuation\">)</span>\nSparkSession available <span class=\"token keyword\">as</span> 'spark'<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token operator\">+</span><span class=\"token number\">2</span>\n<span class=\"token number\">3</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"yarn-에서-spark-app이-제대로-구동되는지-확인-겸-스크립트를-만들어보죠\" style=\"position:relative;\"><a href=\"#yarn-%EC%97%90%EC%84%9C-spark-app%EC%9D%B4-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EA%B5%AC%EB%8F%99%EB%90%98%EB%8A%94%EC%A7%80-%ED%99%95%EC%9D%B8-%EA%B2%B8-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EC%A3%A0\" aria-label=\"yarn 에서 spark app이 제대로 구동되는지 확인 겸 스크립트를 만들어보죠 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>YARN 에서 SPARK APP이 제대로 구동되는지 확인 겸 스크립트를 만들어보죠</h4>\n<p>어제 hdfs에 올려논 test data의 session수를 얻는 간단한 스크립트 </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>hadoop@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> nasa1515<span class=\"token punctuation\">]</span>$ hdfs dfs <span class=\"token operator\">-</span>ls <span class=\"token operator\">/</span>\nFound <span class=\"token number\">1</span> items\n<span class=\"token operator\">-</span>rw<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span>r<span class=\"token operator\">--</span>   <span class=\"token number\">3</span> hadoop supergroup  <span class=\"token number\">500253789</span> <span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">09</span> <span class=\"token number\">08</span><span class=\"token punctuation\">:</span><span class=\"token number\">47</span> <span class=\"token operator\">/</span>nasa<span class=\"token punctuation\">.</span>csv</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token keyword\">from</span> pyspark<span class=\"token punctuation\">.</span>sql import <span class=\"token class-name\">SparkSession</span>\n\nspark <span class=\"token operator\">=</span> SparkSession \\\n    <span class=\"token punctuation\">.</span>builder \\\n    <span class=\"token punctuation\">.</span><span class=\"token function\">appName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Python Spark SQL basic example\"</span><span class=\"token punctuation\">)</span> \\\n    <span class=\"token punctuation\">.</span><span class=\"token function\">getOrCreate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\ndf <span class=\"token operator\">=</span> spark<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">.</span><span class=\"token function\">option</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"header\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"true\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">csv</span><span class=\"token punctuation\">(</span>'hdfs<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>nasa<span class=\"token punctuation\">.</span>csv'<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">cache</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\ndf<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"해당-스크립트를-돌려봅시다\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EB%8B%B9-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EB%8F%8C%EB%A0%A4%EB%B4%85%EC%8B%9C%EB%8B%A4\" aria-label=\"해당 스크립트를 돌려봅시다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해당 스크립트를 돌려봅시다</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>spark@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> conf<span class=\"token punctuation\">]</span>$ spark<span class=\"token operator\">-</span>submit <span class=\"token operator\">--</span>master yarn <span class=\"token operator\">--</span>deploy<span class=\"token operator\">-</span>mode client <span class=\"token operator\">--</span>executor<span class=\"token operator\">-</span>memory 1g <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>test<span class=\"token punctuation\">.</span>py\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">493</span> WARN util<span class=\"token punctuation\">.</span>NativeCodeLoader<span class=\"token punctuation\">:</span> Unable to load native<span class=\"token operator\">-</span>hadoop library <span class=\"token keyword\">for</span> your platform<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token keyword\">using</span> builtin<span class=\"token operator\">-</span>java classes <span class=\"token keyword\">where</span> <span class=\"token class-name\">applicable</span>\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">11</span><span class=\"token punctuation\">,</span><span class=\"token number\">137</span> INFO spark<span class=\"token punctuation\">.</span>SparkContext<span class=\"token punctuation\">:</span> Running Spark version <span class=\"token number\">3.0</span><span class=\"token number\">.2</span>\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">11</span><span class=\"token punctuation\">,</span><span class=\"token number\">177</span> INFO resource<span class=\"token punctuation\">.</span>ResourceUtils<span class=\"token punctuation\">:</span> <span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">11</span><span class=\"token punctuation\">,</span><span class=\"token number\">185</span> INFO resource<span class=\"token punctuation\">.</span>ResourceUtils<span class=\"token punctuation\">:</span> Resources <span class=\"token keyword\">for</span> spark<span class=\"token punctuation\">.</span>driver<span class=\"token punctuation\">:</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span>\n\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">402</span> INFO spark<span class=\"token punctuation\">.</span>SparkContext<span class=\"token punctuation\">:</span> <span class=\"token return-type class-name\">Invoking</span> <span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> shutdown hook\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">410</span> INFO server<span class=\"token punctuation\">.</span>AbstractConnector<span class=\"token punctuation\">:</span> Stopped Spark@6f05fe89<span class=\"token punctuation\">{</span>HTTP<span class=\"token operator\">/</span><span class=\"token number\">1.1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>http<span class=\"token operator\">/</span><span class=\"token number\">1.1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span><span class=\"token number\">0.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span><span class=\"token punctuation\">:</span><span class=\"token number\">4040</span><span class=\"token punctuation\">}</span>\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">412</span> INFO ui<span class=\"token punctuation\">.</span>SparkUI<span class=\"token punctuation\">:</span> Stopped Spark web UI <span class=\"token class-name\">at</span> http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>master<span class=\"token punctuation\">:</span><span class=\"token number\">4040</span>\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">416</span> INFO cluster<span class=\"token punctuation\">.</span>YarnClientSchedulerBackend<span class=\"token punctuation\">:</span> Interrupting monitor thread\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">438</span> INFO cluster<span class=\"token punctuation\">.</span>YarnClientSchedulerBackend<span class=\"token punctuation\">:</span> Shutting down all executors\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">438</span> INFO cluster<span class=\"token punctuation\">.</span>YarnSchedulerBackend$YarnDriverEndpoint<span class=\"token punctuation\">:</span> Asking each executor to shut down\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">443</span> INFO cluster<span class=\"token punctuation\">.</span>YarnClientSchedulerBackend<span class=\"token punctuation\">:</span> YARN client scheduler backend Stopped\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">452</span> INFO spark<span class=\"token punctuation\">.</span>MapOutputTrackerMasterEndpoint<span class=\"token punctuation\">:</span> MapOutputTrackerMasterEndpoint stopped<span class=\"token operator\">!</span>\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">463</span> INFO memory<span class=\"token punctuation\">.</span>MemoryStore<span class=\"token punctuation\">:</span> MemoryStore cleared\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">464</span> INFO storage<span class=\"token punctuation\">.</span>BlockManager<span class=\"token punctuation\">:</span> BlockManager stopped\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">469</span> INFO storage<span class=\"token punctuation\">.</span>BlockManagerMaster<span class=\"token punctuation\">:</span> BlockManagerMaster stopped\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">475</span> INFO scheduler<span class=\"token punctuation\">.</span>OutputCommitCoordinator$OutputCommitCoordinatorEndpoint<span class=\"token punctuation\">:</span> OutputCommitCoordinator stopped<span class=\"token operator\">!</span>\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">497</span> INFO spark<span class=\"token punctuation\">.</span>SparkContext<span class=\"token punctuation\">:</span> Successfully stopped SparkContext\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">498</span> INFO util<span class=\"token punctuation\">.</span>ShutdownHookManager<span class=\"token punctuation\">:</span> Shutdown hook called\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">498</span> INFO util<span class=\"token punctuation\">.</span>ShutdownHookManager<span class=\"token punctuation\">:</span> Deleting directory <span class=\"token operator\">/</span>tmp<span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span>b04d174a<span class=\"token operator\">-</span>0be5<span class=\"token operator\">-</span>44ee<span class=\"token operator\">-</span>87ad<span class=\"token operator\">-</span>8915e64b3d51\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">501</span> INFO util<span class=\"token punctuation\">.</span>ShutdownHookManager<span class=\"token punctuation\">:</span> Deleting directory <span class=\"token operator\">/</span>tmp<span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span>b04d174a<span class=\"token operator\">-</span>0be5<span class=\"token operator\">-</span>44ee<span class=\"token operator\">-</span>87ad<span class=\"token operator\">-</span>8915e64b3d51<span class=\"token operator\">/</span>pyspark<span class=\"token operator\">-</span>5cf80ddf<span class=\"token operator\">-</span>89c1<span class=\"token operator\">-</span><span class=\"token number\">4330</span><span class=\"token operator\">-</span>93c8<span class=\"token operator\">-</span>28e2f93b6c08\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token operator\">-</span><span class=\"token number\">10</span> <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">510</span> INFO util<span class=\"token punctuation\">.</span>ShutdownHookManager<span class=\"token punctuation\">:</span> Deleting directory <span class=\"token operator\">/</span>tmp<span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span>dd89ea67<span class=\"token operator\">-</span>71be<span class=\"token operator\">-</span><span class=\"token number\">4e21</span><span class=\"token operator\">-</span>ba16<span class=\"token operator\">-</span>ee7623fea72a</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"이제-hadoop의-manager-web에서-확인이-가능합니다\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EC%A0%9C-hadoop%EC%9D%98-manager-web%EC%97%90%EC%84%9C-%ED%99%95%EC%9D%B8%EC%9D%B4-%EA%B0%80%EB%8A%A5%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\"이제 hadoop의 manager web에서 확인이 가능합니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이제 Hadoop의 Manager WEB에서 확인이 가능합니다.</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110577703-858b8680-81a6-11eb-879b-2ad3f739c549.JPG\" alt=\"123123123123\"></p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"그럼-spark를-가동시켜주고\" style=\"position:relative;\"><a href=\"#%EA%B7%B8%EB%9F%BC-spark%EB%A5%BC-%EA%B0%80%EB%8F%99%EC%8B%9C%EC%BC%9C%EC%A3%BC%EA%B3%A0\" aria-label=\"그럼 spark를 가동시켜주고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>그럼 spark를 가동시켜주고</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>spark@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> sbin<span class=\"token punctuation\">]</span>$ start<span class=\"token operator\">-</span>master<span class=\"token punctuation\">.</span>sh\nstarting org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>master<span class=\"token punctuation\">.</span>Master<span class=\"token punctuation\">,</span> logging to <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>logs<span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span>spark<span class=\"token operator\">-</span>org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>master<span class=\"token punctuation\">.</span>Master<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>hadoop<span class=\"token operator\">-</span>master<span class=\"token punctuation\">.</span><span class=\"token keyword\">out</span>\n\n<span class=\"token punctuation\">[</span>spark@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> sbin<span class=\"token punctuation\">]</span>$ start<span class=\"token operator\">-</span><span class=\"token class-name\">slave<span class=\"token punctuation\">.</span>sh</span> spark<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>master<span class=\"token punctuation\">:</span><span class=\"token number\">7077</span>\nstarting org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>worker<span class=\"token punctuation\">.</span>Worker<span class=\"token punctuation\">,</span> logging to <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>logs<span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span>spark<span class=\"token operator\">-</span>org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>worker<span class=\"token punctuation\">.</span>Worker<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>hadoop<span class=\"token operator\">-</span>master<span class=\"token punctuation\">.</span><span class=\"token keyword\">out</span>\nstarting org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>worker<span class=\"token punctuation\">.</span>Worker<span class=\"token punctuation\">,</span> logging to <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>spark<span class=\"token operator\">/</span>logs<span class=\"token operator\">/</span>spark<span class=\"token operator\">-</span>spark<span class=\"token operator\">-</span>org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">.</span>worker<span class=\"token punctuation\">.</span>Worker<span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token operator\">-</span>hadoop<span class=\"token operator\">-</span>master<span class=\"token punctuation\">.</span><span class=\"token keyword\">out</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-zeppelin-설치-후-연동을-확인해봅시다\" style=\"position:relative;\"><a href=\"#-zeppelin-%EC%84%A4%EC%B9%98-%ED%9B%84-%EC%97%B0%EB%8F%99%EC%9D%84-%ED%99%95%EC%9D%B8%ED%95%B4%EB%B4%85%EC%8B%9C%EB%8B%A4\" aria-label=\" zeppelin 설치 후 연동을 확인해봅시다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ Zeppelin 설치 후 연동을 확인해봅시다.</h2>\n<ul>\n<li>\n<h4 id=\"zepplein-설치-및-권한-설정\" style=\"position:relative;\"><a href=\"#zepplein-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EA%B6%8C%ED%95%9C-%EC%84%A4%EC%A0%95\" aria-label=\"zepplein 설치 및 권한 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zepplein 설치 및 권한 설정</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># useradd zeppelin\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># passwd zeppelin\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span># cd <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> zeppelin<span class=\"token punctuation\">]</span># <span class=\"token class-name\">wget</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span><span class=\"token class-name\">downloads<span class=\"token punctuation\">.</span>apachewget</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>downloads<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">-</span><span class=\"token number\">0.9</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>preview2<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">-</span><span class=\"token number\">0.9</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>preview2<span class=\"token operator\">-</span>bin<span class=\"token operator\">-</span>all<span class=\"token punctuation\">.</span>tgz\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> zeppelin<span class=\"token punctuation\">]</span># tar xvfz zeppelin<span class=\"token operator\">-</span><span class=\"token number\">0.9</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>preview2<span class=\"token operator\">-</span>bin<span class=\"token operator\">-</span>all<span class=\"token punctuation\">.</span>tgz\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> zeppelin<span class=\"token punctuation\">]</span># mv zeppelin<span class=\"token operator\">-</span><span class=\"token number\">0.9</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>preview2<span class=\"token operator\">-</span>bin<span class=\"token operator\">-</span>all zeppelin\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> zeppelin<span class=\"token punctuation\">]</span># chown <span class=\"token operator\">-</span><span class=\"token class-name\">R</span> zeppelin<span class=\"token punctuation\">:</span>zeppelin zeppelin\n<span class=\"token punctuation\">[</span>root@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> zeppelin<span class=\"token punctuation\">]</span># chmod <span class=\"token operator\">-</span>R <span class=\"token number\">777</span> zeppelin</code></pre></div>\n<br/>\n</li>\n<li>\n<h4 id=\"환경변수-설정-zeppelin-계정\" style=\"position:relative;\"><a href=\"#%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EC%84%A4%EC%A0%95-zeppelin-%EA%B3%84%EC%A0%95\" aria-label=\"환경변수 설정 zeppelin 계정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>환경변수 설정 [zeppelin 계정]</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>zeppelin@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ echo <span class=\"token class-name\">export</span> PATH<span class=\"token operator\">=</span><span class=\"token string\">\"$PATH:/home/zeppelin/zeppelin/bin\"</span> <span class=\"token operator\">>></span> <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc\n<span class=\"token punctuation\">[</span>zeppelin@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ source <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>bashrc\n\n<span class=\"token preprocessor property\">### 총 내용 </span>\n\n<span class=\"token class-name\">export</span> JAVA_HOME<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.275.b01-1.el8_3.x86_64\"</span>\n<span class=\"token class-name\">export</span> HADOOP_HOME<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/local/hadoop\"</span>\n<span class=\"token class-name\">export</span> SPARK_HOME<span class=\"token operator\">=</span><span class=\"token string\">\"/home/spark/spark\"</span>\n<span class=\"token class-name\">export</span> PATH<span class=\"token operator\">=</span><span class=\"token string\">\"$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:\"</span>\n<span class=\"token class-name\">export</span> LD_LIBRARY_PATH<span class=\"token operator\">=</span>$HADOOP_HOME<span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>native<span class=\"token punctuation\">:</span>$LD_LIBRARY_PATH\n<span class=\"token class-name\">export</span> PATH<span class=\"token operator\">=</span>$PATH<span class=\"token punctuation\">:</span>$SPARK_HOME<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span>$HADDOP_HOME<span class=\"token operator\">/</span>bin<span class=\"token punctuation\">:</span>$HADOOP_HOME<span class=\"token operator\">/</span>sbin</code></pre></div>\n<br/>\n</li>\n<li>\n<h4 id=\"zeppelin-환경-설정\" style=\"position:relative;\"><a href=\"#zeppelin-%ED%99%98%EA%B2%BD-%EC%84%A4%EC%A0%95\" aria-label=\"zeppelin 환경 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zeppelin 환경 설정</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>zeppelin@hadoop<span class=\"token operator\">-</span>master <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$ cd <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>zeppelin<span class=\"token operator\">/</span>conf\n<span class=\"token punctuation\">[</span>zeppelin@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> conf<span class=\"token punctuation\">]</span>$ cp zeppelin<span class=\"token operator\">-</span>env<span class=\"token punctuation\">.</span>sh<span class=\"token punctuation\">.</span>template zeppelin<span class=\"token operator\">-</span>env<span class=\"token punctuation\">.</span>sh\n\n\n<span class=\"token preprocessor property\">### 설정 추가</span>\n\n\n\n<span class=\"token class-name\">export</span> JAVA_HOME<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.275.b01-1.el8_3.x86_64\"</span>\n<span class=\"token class-name\">export</span> SPARK_HOME<span class=\"token operator\">=</span><span class=\"token string\">\"/home/spark/spark\"</span>\n<span class=\"token class-name\">export</span> MASTER<span class=\"token operator\">=</span>yarn<span class=\"token operator\">-</span>client\n<span class=\"token class-name\">export</span> HADOOP_HOME<span class=\"token operator\">=</span><span class=\"token string\">\"/usr/local/hadoop\"</span>\n<span class=\"token class-name\">export</span> HADOOP_CONF_DIR<span class=\"token operator\">=</span>$HADOOP_HOME<span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>hadoop\n<span class=\"token class-name\">export</span> YARN_CONF_DIR<span class=\"token operator\">=</span>$HADOOP_HOME<span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>hadoop\n\n\n<span class=\"token preprocessor property\">### zeppelin-site.xml 수정</span>\n\nzeppelin<span class=\"token operator\">-</span>site<span class=\"token punctuation\">.</span>xml\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n<span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>zeppelin<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>addr<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span><span class=\"token number\">10.0</span><span class=\"token number\">.0</span><span class=\"token number\">.5</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span> <span class=\"token operator\">-></span> Client IP로 변경\n<span class=\"token operator\">&lt;</span>description<span class=\"token operator\">></span>Server binding address<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>description<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>zeppelin<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>port<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span><span class=\"token number\">7777</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span>  <span class=\"token operator\">-></span> <span class=\"token number\">8080</span>은 Spark가 쓰고있기에 <span class=\"token number\">7777</span>로 설정\n<span class=\"token operator\">&lt;</span>description<span class=\"token operator\">></span>Server port<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>description<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n</li>\n<li>\n<h4 id=\"zeppelin-기동-테스트\" style=\"position:relative;\"><a href=\"#zeppelin-%EA%B8%B0%EB%8F%99-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"zeppelin 기동 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zeppelin 기동 테스트</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>zeppelin@hadoop<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> conf<span class=\"token punctuation\">]</span>$ zeppelin<span class=\"token operator\">-</span>daemon<span class=\"token punctuation\">.</span>sh start</code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110597015-651df500-81c3-11eb-8cb1-371a512f7b8b.JPG\" alt=\"12313231\"></p>\n<br/>\n</li>\n<li>\n<h4 id=\"아참-zeppelin-env-설정이-적용이-안되는-이슈가-있었습니다-ㅠㅠ\" style=\"position:relative;\"><a href=\"#%EC%95%84%EC%B0%B8-zeppelin-env-%EC%84%A4%EC%A0%95%EC%9D%B4-%EC%A0%81%EC%9A%A9%EC%9D%B4-%EC%95%88%EB%90%98%EB%8A%94-%EC%9D%B4%EC%8A%88%EA%B0%80-%EC%9E%88%EC%97%88%EC%8A%B5%EB%8B%88%EB%8B%A4-%E3%85%A0%E3%85%A0\" aria-label=\"아참 zeppelin env 설정이 적용이 안되는 이슈가 있었습니다 ㅠㅠ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>아참! zeppelin-env 설정이 적용이 안되는 이슈가 있었습니다 ㅠㅠ</h4>\n<p>그래서 저는 직접 zeppelin web의 Interpreter 설정을 수정했습니다.<br>\n<img src=\"https://user-images.githubusercontent.com/69498804/110597241-9e566500-81c3-11eb-980d-43b03fa5d704.JPG\" alt=\"캡처1231321\"></p>\n<br/>\n<p>다음과 같이 Spark.matser, deploymode를 수정해줍니다. </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110597343-c645c880-81c3-11eb-9c6c-06b1ce953c44.JPG\" alt=\"12312313231\"></p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"그럼-아까-test로-작성했던-코드가-동작하는지-확인해보죠\" style=\"position:relative;\"><a href=\"#%EA%B7%B8%EB%9F%BC-%EC%95%84%EA%B9%8C-test%EB%A1%9C-%EC%9E%91%EC%84%B1%ED%96%88%EB%8D%98-%EC%BD%94%EB%93%9C%EA%B0%80-%EB%8F%99%EC%9E%91%ED%95%98%EB%8A%94%EC%A7%80-%ED%99%95%EC%9D%B8%ED%95%B4%EB%B3%B4%EC%A3%A0\" aria-label=\"그럼 아까 test로 작성했던 코드가 동작하는지 확인해보죠 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>그럼 아까 test로 작성했던 코드가 동작하는지 확인해보죠</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110597530-060cb000-81c4-11eb-933f-6b914cabd5b4.JPG\" alt=\"12312312312312312321312\"></p>\n<p>아주 잘 돌아갑니다. </p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"그럼-yarn-manager에서도-확인이-가능한지-봅시다\" style=\"position:relative;\"><a href=\"#%EA%B7%B8%EB%9F%BC-yarn-manager%EC%97%90%EC%84%9C%EB%8F%84-%ED%99%95%EC%9D%B8%EC%9D%B4-%EA%B0%80%EB%8A%A5%ED%95%9C%EC%A7%80-%EB%B4%85%EC%8B%9C%EB%8B%A4\" aria-label=\"그럼 yarn manager에서도 확인이 가능한지 봅시다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>그럼 yarn manager에서도 확인이 가능한지 봅시다</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/110597695-3c4a2f80-81c4-11eb-9c1a-365dc2c8d727.JPG\" alt=\"1111111\"></p>\n<p>다음과 같이 zeppelin app의 동작을 확인 할 수 있습니다!! </p>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며…</h2>\n<p>여러가지 문제가 있었지만 그래도 하루만에 성공했습니다.<br>\n이제 드디어 pyspark 문법이나 data를 다루는 방법들에 대해서 실습하겠네요.<br>\n추가적으로 ambari 설치해서 클러스터도 모니터링 해보겠습니다.  </p>\n<br/>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-spark-%EC%84%A4%EC%B9%98\">✔ Spark 설치</a></li>\n<li><a href=\"#-zeppelin-%EC%84%A4%EC%B9%98-%ED%9B%84-%EC%97%B0%EB%8F%99%EC%9D%84-%ED%99%95%EC%9D%B8%ED%95%B4%EB%B4%85%EC%8B%9C%EB%8B%A4\">✌ Zeppelin 설치 후 연동을 확인해봅시다.</a></li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며…</a></li>\n</ul>\n</div>","frontmatter":{"date":"August 16, 2021","title":"[DATA] - Apache Spark v3.0 on yarn 설치 With Zeppelin","categories":"DATA","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/data-sparkonyarn/"}},"site":{"siteMetadata":{"siteUrl":"https://nasa1515.com","comments":{"utterances":{"repo":"nasa1515/nasablog"}}}}},"pageContext":{"slug":"/data-hadoopinstall/","nextSlug":"/data-sparkinstall/","prevSlug":"/data-sparkonyarn/"}},"staticQueryHashes":["1073350324","2938748437"]}