{"componentChunkName":"component---src-templates-blog-template-js","path":"/docker-network/","result":{"data":{"cur":{"id":"a5cac2cd-ed18-5dc7-8042-ae4cd3358d7b","html":"<p>머리말  </p>\n<p> 이번 포스트에서는 컨테이너들의 서비스와 중요하게 연관되어있는 도커의 네트워크에 대해서 포스트 했습니다.  </p>\n<hr>\n<h2 id=\"-docker---네트워크-유형\" style=\"position:relative;\"><a href=\"#-docker---%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%9C%A0%ED%98%95\" aria-label=\" docker   네트워크 유형 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ [DOCKER] - 네트워크 유형</h2>\n<ul>\n<li>\n<p>도커에는 다양한 네트워크가 존재해 용도에 맞게 네트워크를 선택 할 수 있습니다.   </p>\n<p>기본으로 사용하는 네트워크는 <code class=\"language-text\">bridge</code>,<code class=\"language-text\">host</code>,<code class=\"language-text\">null</code>이 존재하고<br>\n<code class=\"language-text\">docker network ls</code> 명령어로 네트워크 목록을 확인 할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ docker network ls\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span>\nNETWORK ID          NAME                DRIVER              SCOPE\ne2d1889f7327        bridge              bridge              local\n29d9e0411d39        host                host                local\n054fbf919b85        none                <span class=\"token keyword\">null</span>                local\n\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n$ ifconfig <span class=\"token class-name\">docker0</span>\n  \ndocker0<span class=\"token punctuation\">:</span> flags<span class=\"token operator\">=</span><span class=\"token number\">4163</span><span class=\"token operator\">&lt;</span>UP<span class=\"token punctuation\">,</span>BROADCAST<span class=\"token punctuation\">,</span>RUNNING<span class=\"token punctuation\">,</span>MULTICAST<span class=\"token operator\">></span>  mtu <span class=\"token number\">1500</span>\ninet <span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>  netmask <span class=\"token number\">255.255</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span>  broadcast <span class=\"token number\">172.17</span><span class=\"token number\">.255</span><span class=\"token number\">.255</span>\n<span class=\"token class-name\">inet6</span> fe80<span class=\"token punctuation\">::</span><span class=\"token number\">42</span><span class=\"token punctuation\">:</span>2dff<span class=\"token punctuation\">:</span>fe83<span class=\"token punctuation\">:</span>d3b5  prefixlen <span class=\"token number\">64</span>  scopeid <span class=\"token number\">0x20</span><span class=\"token operator\">&lt;</span>link<span class=\"token operator\">></span>\nether <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">42</span><span class=\"token punctuation\">:</span><span class=\"token number\">2d</span><span class=\"token punctuation\">:</span><span class=\"token number\">83</span><span class=\"token punctuation\">:</span>d3<span class=\"token punctuation\">:</span>b5  txqueuelen <span class=\"token number\">0</span>  <span class=\"token punctuation\">(</span>Ethernet<span class=\"token punctuation\">)</span>\nRX packets <span class=\"token number\">14503</span>  bytes <span class=\"token number\">798314</span> <span class=\"token punctuation\">(</span><span class=\"token number\">798.3</span> KB<span class=\"token punctuation\">)</span>\nRX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span>  overruns <span class=\"token number\">0</span>  frame <span class=\"token number\">0</span>\nTX packets <span class=\"token number\">17644</span>  bytes <span class=\"token number\">118869139</span> <span class=\"token punctuation\">(</span><span class=\"token number\">118.8</span> MB<span class=\"token punctuation\">)</span>\nTX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span> overruns <span class=\"token number\">0</span>  carrier <span class=\"token number\">0</span>  collisions <span class=\"token number\">0</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-bridge-network\" style=\"position:relative;\"><a href=\"#-bridge-network\" aria-label=\" bridge network permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ BRIDGE NETWORK</h2>\n<ul>\n<li>\n<p>Bridge는 컨테이너가 사용하는 프라이빗 네트워크입니다.<br>\n같은 Bridge로 연결되어 있으면 컨테이너의 IP 주소로 통신할 수 있습니다. 외부로 통신 할 때에는 <code class=\"language-text\">NAPT</code> 통신을 사용하며<br>\n외부에서 Bridge로 통신을 위해선 <code class=\"language-text\">포트포워딩</code>을 사용해야 합니다.  </p>\n<p>도커를 설치하면 이름이 <code class=\"language-text\">docker0</code> 인 리눅스 브릿지가 생성됩니다.<br>\n이를 확인 하기 위해선 <code class=\"language-text\">inspect</code> 명령을 이용해 다음과 같이 확인가능합니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ docker inspect bridge \n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n        <span class=\"token string\">\"Options\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n        <span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n        <span class=\"token string\">\"com.docker.network.bridge.default_bridge\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"com.docker.network.bridge.enable_icc\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"com.docker.network.bridge.enable_ip_masquerade\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"com.docker.network.bridge.host_binding_ipv4\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"0.0.0.0\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"com.docker.network.bridge.name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"docker0\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"com.docker.network.driver.mtu\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1500\"</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>    # inspect 내용에 docker0 브릿지를 사용한다는 내용을 확인 가능합니다<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<ul>\n<li>\n<p>DOCKER BRIDGE NETWORK  </p>\n<p>docker0 브리지는 컨테이너가 통신하기 위해 사용됩니다.<br>\n컨테이너를 생성하면 자동으로 브리지를 활용하도록 설정되어<br>\ndocker0 인터페이스는 <code class=\"language-text\">172.17.0.0/16</code> 서브넷을 갖기 때문에<br>\n컨테이너가 생성되면 대역 안에서 IP를 할당받게 됩니다. (예: <code class=\"language-text\">172.17.0.2</code>, <code class=\"language-text\">172.17.0.3</code>)</p>\n<p><code class=\"language-text\">$ docker network inspect bridge</code> 명령어를 이용하면<br>\nBRIDGE 네트워크의 자세한 정보를 알 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"bridge\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// 중간 생략</span>\n      <span class=\"token string\">\"Driver\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"bridge\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"IPAM\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"Driver\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"Options\"</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"Config\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n              <span class=\"token punctuation\">{</span>\n                  <span class=\"token string\">\"Subnet\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"172.17.0.0/16\"</span>\n              <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// 중간 생략</span>\n      <span class=\"token string\">\"ConfigOnly\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Containers\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"14b9779c990fe7557d60f2605ff4224e5f85f26bd99807c71f78df45133314be\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"busybox1\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">\"EndpointID\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3ea17b0de094890abb1cccdb15b9144035d64bdc07777b97ddf9427b27563f51\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">\"MacAddress\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"02:42:ac:11:00:02\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">\"IPv4Address\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"172.17.0.2/16\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">\"IPv6Address\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span>\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token comment\">// 이하 생략</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<ul>\n<li>\n<p>컨테이너를 생성하면? (그림참조)  </p>\n<p>컨테이너는 Linux Namespace 기술로 격리된 네트워크 공간을 할당받게 됩니다.<br>\n즉 언급한 대로 172.17.0.0/16 대역의 IP를 순차적으로 할당 받습니다.<br>\n<code class=\"language-text\">이 IP는 컨테이너가 재시작할 때마다 변경될 수 있습니다.</code></p>\n<p>컨테이너는 외부 통신을 위한 2개의 네트워크 인터페이스를 함께 생성한다.<br>\n하나는 컨테이너 내부 <code class=\"language-text\">Namespace</code>에 할당되는 <code class=\"language-text\">eth0</code> 이름의 인터페이스<br>\n하나는 호스트 네트워크 브리지 <code class=\"language-text\">docker0</code>에 바인딩 되는 <code class=\"language-text\">vethXXXXXXX</code><br>\n이름 형식의 <code class=\"language-text\">veth</code> 인터페이스다. (“veth”는 “virtual eth”라는 의미)<br>\n컨테이너의 <code class=\"language-text\">eth0</code> 인터페이스와 호스트의 <code class=\"language-text\">veth</code> 인터페이스는 서로 연결되어 있습니다.</p>\n<p>결국 <code class=\"language-text\">docker0 브리지</code>는 가상 인터페이스와 호스트의 인터페이스를 이어주는 <code class=\"language-text\">중간 다리 역할</code>을 한다.<br>\n그리고 컨테이너의 <code class=\"language-text\">eth0</code> 인터페이스는 <code class=\"language-text\">veth</code> 가상 인터페이스를 통해 외부와 통신할 수 있게 되는 것입니다.</p>\n<p><img src=\"https://jonnung.dev/images/docker_network.png\">  </p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>BRIDGE 는 <code class=\"language-text\">docker network create</code> 명령을 사용해 여러 개 생성할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ docker network create <span class=\"token operator\">--</span>subnet <span class=\"token number\">172.18</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span><span class=\"token operator\">/</span><span class=\"token number\">16</span> <span class=\"token operator\">--</span>gateway <span class=\"token number\">172.18</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span> nasanet\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span>\nddad85781d7f86533869b5d91beb7439194601d05dee28f23d4e2e45719cead6 <span class=\"token operator\">-</span> 결과 값</code></pre></div>\n<br/>\n</li>\n<li>\n<p>생성한 네트워크로 <code class=\"language-text\">--network</code> 사용해 컨테이너를 연결 할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ docker run <span class=\"token operator\">-</span>itd <span class=\"token operator\">--</span>name nasa <span class=\"token operator\">--</span>network <span class=\"token class-name\">nasanet</span> centos<span class=\"token punctuation\">:</span>latest \n58f360a0ca8bc409ce9a5ab4f891bf2d7df8821cda533b48cf713f1bfbd23401\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n$ docker inspect nasa <span class=\"token operator\">|</span> grep <span class=\"token operator\">-</span>i ipaddress\n           <span class=\"token string\">\"SecondaryIPAddresses\"</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"IPAddress\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"IPAddress\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"172.18.0.2\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">--</span><span class=\"token operator\">--</span> 해당 네트웍을 사용중</code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-host-network\" style=\"position:relative;\"><a href=\"#-host-network\" aria-label=\" host network permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👌 HOST NETWORK</h2>\n<ul>\n<li>HOST NETWORK란 컨테이너의 네트워크 격리를 해제하여 호스트 네트워크의 정보를 <code class=\"language-text\">공유</code>해서 사용하는 방법입니다.<br>\n컨테이너는 호스트 입장에서 하나의 프로세스이기 때문에 가상머신과 다르게 네트워크 정보를 공유할 수 있습니다.<br>\n컨테이너가 이 네트워크를 사용할 때 컨테이너의 포트가 호스트에서 사용하는 포트와<br>\n충돌하면 문제가 생기게 됩니다. <code class=\"language-text\">(네트워크 외 다른 환경은 기존과 동일합니다)</code></li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>HOST NETWORK는 <code class=\"language-text\">--network host</code> 명령을 사용해 생성할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">docker run <span class=\"token operator\">-</span>idt <span class=\"token operator\">--</span>name hostos <span class=\"token operator\">--</span>network <span class=\"token class-name\">host</span> centos<span class=\"token punctuation\">:</span>latest \n88bf0bb7ab73c651bb2a0c9fc9ee553b973e9e7dfac8e8f7127ef9a0ac8c7d24\n\ndocker inspect hostos <span class=\"token operator\">|</span> grep <span class=\"token operator\">-</span>i NetworkMode\n          <span class=\"token string\">\"NetworkMode\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"host\"</span><span class=\"token punctuation\">,</span>\ndocker inspect hostos <span class=\"token operator\">|</span> grep <span class=\"token operator\">-</span>i ipaddress\n          <span class=\"token string\">\"SecondaryIPAddresses\"</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"IPAddress\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token string\">\"IPAddress\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></code></pre></div>\n<br/>\n</li>\n<li>\n<p>컨테이너 IP와 Interface를 확인해보면 HOST와 동일합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ docker exec hostos ip addr show\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">:</span> lo<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>LOOPBACK<span class=\"token punctuation\">,</span>UP<span class=\"token punctuation\">,</span>LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">65536</span> qdisc noqueue state UNKNOWN <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> qlen <span class=\"token number\">1000</span>\n    link<span class=\"token operator\">/</span>loopback <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span> brd <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span>\n    inet <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">/</span><span class=\"token number\">8</span> scope host lo\n    valid_lft forever preferred_lft <span class=\"token class-name\">forever</span>\n    inet6 <span class=\"token punctuation\">::</span><span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">128</span> scope host \n    valid_lft forever preferred_lft forever\n<span class=\"token number\">2</span><span class=\"token punctuation\">:</span> eno1<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>NO<span class=\"token operator\">-</span>CARRIER<span class=\"token punctuation\">,</span>BROADCAST<span class=\"token punctuation\">,</span>MULTICAST<span class=\"token punctuation\">,</span>UP<span class=\"token operator\">></span> mtu <span class=\"token number\">1500</span> qdisc fq_codel state DOWN <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> qlen <span class=\"token number\">1000</span>\n    link<span class=\"token operator\">/</span><span class=\"token class-name\">ether</span> b0<span class=\"token punctuation\">:</span>5c<span class=\"token punctuation\">:</span>da<span class=\"token punctuation\">:</span>ad<span class=\"token punctuation\">:</span>d1<span class=\"token punctuation\">:</span><span class=\"token number\">25</span> <span class=\"token class-name\">brd</span> ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff\n<span class=\"token number\">3</span><span class=\"token punctuation\">:</span> wlp3s0<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>BROADCAST<span class=\"token punctuation\">,</span>MULTICAST<span class=\"token punctuation\">,</span>UP<span class=\"token punctuation\">,</span>LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">1500</span> qdisc mq state UP <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> qlen <span class=\"token number\">1000</span>\n    link<span class=\"token operator\">/</span><span class=\"token class-name\">ether</span> d8<span class=\"token punctuation\">:</span><span class=\"token number\">12</span><span class=\"token punctuation\">:</span><span class=\"token number\">65</span><span class=\"token punctuation\">:</span>cf<span class=\"token punctuation\">:</span><span class=\"token number\">77</span><span class=\"token punctuation\">:</span><span class=\"token number\">53</span> <span class=\"token class-name\">brd</span> ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff\n    inet <span class=\"token number\">192.168</span><span class=\"token number\">.100</span><span class=\"token number\">.9</span><span class=\"token operator\">/</span><span class=\"token number\">24</span> brd <span class=\"token number\">192.168</span><span class=\"token number\">.100</span><span class=\"token number\">.255</span> scope <span class=\"token keyword\">global</span> <span class=\"token keyword\">dynamic</span> noprefixroute wlp3s0\n    valid_lft 5755sec preferred_lft 5755sec\n    <span class=\"token class-name\">inet6</span> fe80<span class=\"token punctuation\">::</span>c52a<span class=\"token punctuation\">:</span><span class=\"token number\">605</span><span class=\"token punctuation\">:</span>275a<span class=\"token punctuation\">:</span>a9f4<span class=\"token operator\">/</span><span class=\"token number\">64</span> scope link noprefixroute \n    valid_lft forever preferred_lft forever\n<span class=\"token number\">4</span><span class=\"token punctuation\">:</span> docker0<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>BROADCAST<span class=\"token punctuation\">,</span>MULTICAST<span class=\"token punctuation\">,</span>UP<span class=\"token punctuation\">,</span>LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">1500</span> qdisc noqueue state UP <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> \n    link<span class=\"token operator\">/</span>ether <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">42</span><span class=\"token punctuation\">:</span><span class=\"token number\">2d</span><span class=\"token punctuation\">:</span><span class=\"token number\">83</span><span class=\"token punctuation\">:</span>d3<span class=\"token punctuation\">:</span>b5 <span class=\"token class-name\">brd</span> ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff\n    inet <span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">/</span><span class=\"token number\">16</span> brd <span class=\"token number\">172.17</span><span class=\"token number\">.255</span><span class=\"token number\">.255</span> scope <span class=\"token keyword\">global</span> docker0\n    valid_lft forever preferred_lft forever\n    <span class=\"token class-name\">inet6</span> fe80<span class=\"token punctuation\">::</span><span class=\"token number\">42</span><span class=\"token punctuation\">:</span>2dff<span class=\"token punctuation\">:</span>fe83<span class=\"token punctuation\">:</span>d3b5<span class=\"token operator\">/</span><span class=\"token number\">64</span> scope link \n    valid_lft forever preferred_lft forever</code></pre></div>\n<br/>\n</li>\n<li>\n<p>HOST를 사용하기에 DOCKER0에 바인딩 되어있지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ brctl show\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\n  bridge name\tbridge id\t\tSTP enabled\tinterfaces\n  br<span class=\"token operator\">-</span>ddad85781d7f\t\t<span class=\"token number\">8000.024257497375</span>\tno\t\tveth476053c\n  docker0\t\t<span class=\"token number\">8000</span><span class=\"token punctuation\">.</span>02422d83d3b5\tno\t\tveth26ee67a\n                              veth66ac69f\n                              veth7ab4f7a\n```cs</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>INSPECT 명령어로 확인해보면 다음과 같습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker network inspect host\n<span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"host\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Id\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"29d9e0411d39d339a44fb9c8567926771c0e095f5ea51f41d0064c67b863fb0c\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Created\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2020-08-10T17:54:41.031173097+09:00\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Scope\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"local\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Driver\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"host\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"EnableIPv6\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"IPAM\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"Driver\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"Options\"</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"Config\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Internal\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Attachable\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Ingress\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"ConfigFrom\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"Network\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"ConfigOnly\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Containers\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"b5663b01cf570dd3960cee1471547d0feb6c3b6681a9afa6bdaf68f5fdb9f510\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"host\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"EndpointID\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1cb2f03508e9eab23c7510d10c31c4b763a7abe84d6b4d33630c55d52b620e45\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"MacAddress\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"IPv4Address\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"IPv6Address\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Options\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Labels\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>Containers 에 임시로 생성한 <code class=\"language-text\">HOST</code> 정보가 있지만<br>\n네트워크 환경을 따로 가지고 있지 않기 때문에 IP 정보는 없습니다. </p>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"🤞nullnone-network\" style=\"position:relative;\"><a href=\"#%F0%9F%A4%9Enullnone-network\" aria-label=\"🤞nullnone network permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤞NULL(NONE) NETWORK</h2>\n<ul>\n<li><code class=\"language-text\">--net=none 옵션</code>으로 컨테이너를 생성하면 격리된 네트워크 영역을 갖습니다<br>\n하지만 인터페이스가 없는 상태로 컨테이너를 생성하게 됩니다.</li>\n<li>\n<p><code class=\"language-text\">net=none</code> 으로 지정하여 컨테이너를 생성 해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker run <span class=\"token operator\">-</span>itd <span class=\"token operator\">--</span>name none<span class=\"token operator\">-</span>nasa <span class=\"token operator\">--</span>net<span class=\"token operator\">=</span><span class=\"token class-name\">none</span> centos<span class=\"token punctuation\">:</span>latest\n6625654470dde0311bd730d1e8a784908995c3d1e8cc7e2b5bf052ffdf24550f</code></pre></div>\n<br/>\n</li>\n<li>\n<p><code class=\"language-text\">exec</code> 명령을 사용해 네트워크를 확인 결과</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker exec none<span class=\"token operator\">-</span>nasa ip a\n<span class=\"token number\">1</span><span class=\"token punctuation\">:</span> lo<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>LOOPBACK<span class=\"token punctuation\">,</span>UP<span class=\"token punctuation\">,</span>LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">65536</span> qdisc noqueue state UNKNOWN <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> qlen <span class=\"token number\">1000</span>\n    link<span class=\"token operator\">/</span>loopback <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span> brd <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span>\n    inet <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">/</span><span class=\"token number\">8</span> scope host lo\n    valid_lft forever preferred_lft forever</code></pre></div>\n<p>위처럼 loopback 인터페이스만 있고, 통신을 위한 eth0 인터페이스는 없습니다.<br>\n당연히 bridge에도 연결되지 않은 상태이며, 이 상태로는 외부 통신이 불가합니다. </p>\n<p>이 옵션을 만든 이유는, 아마도 인터페이스를 직접 커스터마이징 할 수 있도록<br>\n네트워크 환경이 clear 한 상태로 만들기 위해서 인 것으로 예상이됩니다. </p>\n</li>\n</ul>\n<hr>\n<h2 id=\"-container---container\" style=\"position:relative;\"><a href=\"#-container---container\" aria-label=\" container   container permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐱‍🏍 CONTAINER - CONTAINER</h2>\n<ul>\n<li>\n<p>이 방식으로 생성된 컨테이너는 기존에 존재하는 다른 컨테이너의 network 환경을 공유합니다. </p>\n<p>이해를 쉽게하기 위해 아래 실습을 진행 해보았습니다. </p>\n<br/>\n</li>\n<li>\n<p>먼저 <code class=\"language-text\">nasa-master</code> 라는 이름으로 컨테이너를 생성 했습니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker run <span class=\"token operator\">-</span>idt <span class=\"token operator\">--</span>name nasa<span class=\"token operator\">-</span><span class=\"token class-name\">master</span> centos<span class=\"token punctuation\">:</span>latest\nf91ea38db58198c540916d9e697931a77af312a3e6e7f63f6e9f031e33701ba9</code></pre></div>\n<br/>\n</li>\n<li>\n<p>이제 <code class=\"language-text\">nasa-slave</code> 컨테이너를 생성할때 <code class=\"language-text\">nasa-master</code>의 network 환경을 공유하게 만들어 보고. </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">옵션 <span class=\"token punctuation\">:</span> <span class=\"token operator\">--</span>net<span class=\"token operator\">=</span>container<span class=\"token punctuation\">:</span>CONTAINER_ID</code></pre></div>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker run <span class=\"token operator\">-</span>itd <span class=\"token operator\">--</span>name nasa<span class=\"token operator\">-</span>slave <span class=\"token operator\">--</span>net<span class=\"token operator\">=</span>container<span class=\"token punctuation\">:</span><span class=\"token class-name\">f91ea38db58198</span> centos<span class=\"token punctuation\">:</span>latest\ne904d45bc36ac6ad16925cc2cef9fbb80e0ac0f858dec129828463ab570a2476\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED              STATUS              PORTS               NAMES\n<span class=\"token class-name\">e904d45bc36a</span>        centos<span class=\"token punctuation\">:</span>latest       <span class=\"token string\">\"/bin/bash\"</span>         About a minute ago   Up About a minute                       nasa<span class=\"token operator\">-</span>slave\n<span class=\"token class-name\">f91ea38db581</span>        centos<span class=\"token punctuation\">:</span>latest       <span class=\"token string\">\"/bin/bash\"</span>         <span class=\"token number\">8</span> minutes ago        Up <span class=\"token number\">8</span> minutes                            nasa<span class=\"token operator\">-</span>master</code></pre></div>\n<p>위와 같이 <code class=\"language-text\">nasa-master</code> 컨테이너와 <code class=\"language-text\">nasa-slave</code> 컨테이너가 생성되었습니다.</p>\n<br/>\n</li>\n<li>\n<p>하지만 <code class=\"language-text\">nasa-slave</code> 컨테이너는 따로 IP를 갖지 않으며 <code class=\"language-text\">master</code>와 같은 IP와 MAC 주소를 확인 할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker exec nasa<span class=\"token operator\">-</span>master ip a\n<span class=\"token number\">1</span><span class=\"token punctuation\">:</span> lo<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>LOOPBACK<span class=\"token punctuation\">,</span>UP<span class=\"token punctuation\">,</span>LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">65536</span> qdisc noqueue state UNKNOWN <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> qlen <span class=\"token number\">1000</span>\n    link<span class=\"token operator\">/</span>loopback <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span> brd <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span>\n    inet <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">/</span><span class=\"token number\">8</span> scope host lo\n    valid_lft forever preferred_lft forever\n<span class=\"token number\">39</span><span class=\"token punctuation\">:</span> eth0@if40<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>BROADCAST<span class=\"token punctuation\">,</span>MULTICAST<span class=\"token punctuation\">,</span>UP<span class=\"token punctuation\">,</span>LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">1500</span> qdisc noqueue state UP <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> \n    link<span class=\"token operator\">/</span>ether <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">42</span><span class=\"token punctuation\">:</span>ac<span class=\"token punctuation\">:</span><span class=\"token number\">11</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">07</span> <span class=\"token class-name\">brd</span> ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff link<span class=\"token operator\">-</span>netnsid <span class=\"token number\">0</span>\n    inet <span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.7</span><span class=\"token operator\">/</span><span class=\"token number\">16</span> brd <span class=\"token number\">172.17</span><span class=\"token number\">.255</span><span class=\"token number\">.255</span> scope <span class=\"token keyword\">global</span> eth0\n    valid_lft forever preferred_lft forever\n\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker exec nasa<span class=\"token operator\">-</span>slave ip a\n<span class=\"token number\">1</span><span class=\"token punctuation\">:</span> lo<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>LOOPBACK<span class=\"token punctuation\">,</span>UP<span class=\"token punctuation\">,</span>LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">65536</span> qdisc noqueue state UNKNOWN <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> qlen <span class=\"token number\">1000</span>\n    link<span class=\"token operator\">/</span>loopback <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span> brd <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span>\n    inet <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">/</span><span class=\"token number\">8</span> scope host lo\n    valid_lft forever preferred_lft forever\n<span class=\"token number\">39</span><span class=\"token punctuation\">:</span> eth0@if40<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>BROADCAST<span class=\"token punctuation\">,</span>MULTICAST<span class=\"token punctuation\">,</span>UP<span class=\"token punctuation\">,</span>LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">1500</span> qdisc noqueue state UP <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> \n    link<span class=\"token operator\">/</span>ether <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">42</span><span class=\"token punctuation\">:</span>ac<span class=\"token punctuation\">:</span><span class=\"token number\">11</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">07</span> <span class=\"token class-name\">brd</span> ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff link<span class=\"token operator\">-</span>netnsid <span class=\"token number\">0</span>\n    inet <span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.7</span><span class=\"token operator\">/</span><span class=\"token number\">16</span> brd <span class=\"token number\">172.17</span><span class=\"token number\">.255</span><span class=\"token number\">.255</span> scope <span class=\"token keyword\">global</span> eth0\n   valid_lft forever preferred_lft forever</code></pre></div>\n<br/>\n</li>\n<li>\n<p><code class=\"language-text\">bridge insptec</code>를 봐도 <code class=\"language-text\">slave</code> 서버의 정보는 확인 할 수 없습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"bridge\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Id\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"c4031fa4ad4b778e12280591052b52b82d97fdaf64bb0e3e45343f5501aa39aa\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Created\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2020-08-14T14:31:29.774610308+09:00\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Scope\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"local\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Driver\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"bridge\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"EnableIPv6\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"IPAM\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"Driver\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"Options\"</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"Config\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token string\">\"Subnet\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"172.17.0.0/16\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"Gateway\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"172.17.0.1\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Internal\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Attachable\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Ingress\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"ConfigFrom\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"Network\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"ConfigOnly\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Containers\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"f91ea38db58198c540916d9e697931a77af312a3e6e7f63f6e9f031e33701ba9\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"nasa-master\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"EndpointID\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"77c63905bc98fe21a3b80ddc676ac4d495e79f66e96b75f2c6f5ab0ae4ccfdfc\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"MacAddress\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"02:42:ac:11:00:07\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"IPv4Address\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"172.17.0.7/16\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"IPv6Address\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Options\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"com.docker.network.bridge.default_bridge\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"com.docker.network.bridge.enable_icc\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"com.docker.network.bridge.enable_ip_masquerade\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"com.docker.network.bridge.host_binding_ipv4\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"0.0.0.0\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"com.docker.network.bridge.name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"docker0\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"com.docker.network.driver.mtu\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1500\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Labels\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<hr>\n</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-docker---%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%9C%A0%ED%98%95\">✔ DOCKER - 네트워크 유형</a></li>\n<li><a href=\"#-bridge-network\">✌ BRIDGE NETWORK</a></li>\n<li><a href=\"#-host-network\">👌 HOST NETWORK</a></li>\n<li><a href=\"#%F0%9F%A4%9Enullnone-network\">🤞NULL(NONE) NETWORK</a></li>\n<li><a href=\"#-container---container\">🐱‍🏍 CONTAINER - CONTAINER</a></li>\n</ul>\n</div>","excerpt":"머리말    이번 포스트에서는 컨테이너들의 서비스와 중요하게 연관되어있는 도커의 네트워크에 대해서 포스트 했습니다.   ✔ DOCKER - 네트워크 유형 도커에는 다양한 네트워크가 존재해 용도에 맞게 네트워크를 선택 할 수 있습니다.    기본으로 사용하는 네트워크는 ,,이 존재하고  명령어로 네트워크 목록을 확인 할 수 있습니다. ✌ BRIDGE NETWORK Bridge는 컨테이너가 사용하는 프라이빗 네트워크입니다. 같은 Bridge로 연결되어 있으면 컨테이너의 IP 주소로 통신할 수 있습니다. 외부로 통신 할 때에는  통신을 사용하며 외부에서 Bridge로 통신을 위해선 을 사용해야 합니다.   도커를 설치하면 …","frontmatter":{"date":"June 26, 2021","title":"[DOCKER] - Network","categories":"DOCKER","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/docker-network/"}},"next":{"id":"59e72fe7-ba09-5687-9fb1-d0c5b71d1bba","html":"<p>머리말  </p>\n<p> 이전 포스트에서는 도커의 설치방법에 대해서 간단하게 포스팅 했었습니다.<br>\n이번 포스트에서는 실제 도커의 컨테이너의 생성 관리 방법 및 명령어들을 포스트 했다.</p>\n<hr>\n<h2 id=\"-도커-이미지\" style=\"position:relative;\"><a href=\"#-%EB%8F%84%EC%BB%A4-%EC%9D%B4%EB%AF%B8%EC%A7%80\" aria-label=\" 도커 이미지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ 도커 이미지</h2>\n<p>도커는 기본적으로 <code class=\"language-text\">도커 허브</code>라고 하는 중앙 이미지 저장소에서 이미지를 내려받습니다.<br>\n도커 허브는 도커가 공식적으로 제공하고 있는 이미지 저장소로 쉽게 올리고 내려받을 수 있습니다.</p>\n<p><img src=\"https://miro.medium.com/max/1104/1*ttU6oMoZztKk2kjJid6PuQ.png\"></p>\n<ul>\n<li>\n<p>Docker Hub<br>\n도커 허브는 도커에서 제공하는 기본 이미지 저장소로 ubuntu, centos, debian등의 베이스 이미지와<br>\nruby, golang, java, python 등의 공식 이미지가 저장되어 있습니다.<br>\n일반 사용자들이 만든 이미지도 50만 개가 넘게 저장되어 있고 다운로드 횟수는 80억 회를 넘습니다.</p>\n<p>회원가입만하면 대용량의 이미지를 무료로 저장할 수 있고 다운로드 트래픽 또한 무료입니다.<br>\n단, 기본적으로 모든 이미지는 공개되어 누구나 접근 가능하므로 비공개로 사용하려면 유료 서비스를 이용해야 합니다.</p>\n<br/>\n</li>\n<li>회원가입<br>\n아래 링크에서 Dokcer hub 회원 가입 후 포스트를 읽는 것을 추천드립니다!!.<br>\n<a href=\"https://hub.docker.com/\">https://hub.docker.com/</a>  </li>\n</ul>\n<p><img src=\"https://subicura.com/assets/article_images/2017-02-10-docker-guide-for-beginners-create-image-and-deploy/docker-hub.png\"></p>\n<hr>\n<h2 id=\"-도커-이미지-명령어\" style=\"position:relative;\"><a href=\"#-%EB%8F%84%EC%BB%A4-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\" 도커 이미지 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ 도커 이미지 명령어</h2>\n<ul>\n<li>\n<p><code class=\"language-text\">docker images</code> 명령어를 사용해 현재 HOST가 가지고 있는 이미지를 확인 할 수 있습니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED                 SIZE\nhello<span class=\"token operator\">-</span>world         latest              bf756fb1ae65        <span class=\"token number\">7</span> months ago            <span class=\"token number\">13</span><span class=\"token punctuation\">.</span>3kB</code></pre></div>\n<p>이전 포스트에서 <code class=\"language-text\">hello-world</code> 컨테이너를 실행하여 남아 있는 것을 확인.</p>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p><code class=\"language-text\">docker search</code> 명령어를 사용해 docker hub에 존재하는 이미지를 검색 할 수 있습니다.<br>\n우선 centos os를 한번 검색해보겠습니다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker search centos\nNAME                               DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\ncentos                             The official build of CentOS<span class=\"token punctuation\">.</span>                   <span class=\"token number\">6134</span>                <span class=\"token punctuation\">[</span>OK<span class=\"token punctuation\">]</span>                \nansible<span class=\"token operator\">/</span>centos7<span class=\"token operator\">-</span>ansible            Ansible <span class=\"token keyword\">on</span> Centos7                              <span class=\"token number\">132</span>                                     <span class=\"token punctuation\">[</span>OK<span class=\"token punctuation\">]</span>\nconsol<span class=\"token operator\">/</span>centos<span class=\"token operator\">-</span>xfce<span class=\"token operator\">-</span>vnc             Centos container with <span class=\"token string\">\"headless\"</span> VNC session…   <span class=\"token number\">119</span>                                     <span class=\"token punctuation\">[</span>OK<span class=\"token punctuation\">]</span>\njdeathe<span class=\"token operator\">/</span>centos<span class=\"token operator\">-</span>ssh                 OpenSSH <span class=\"token operator\">/</span> Supervisor <span class=\"token operator\">/</span> EPEL<span class=\"token operator\">/</span>IUS<span class=\"token operator\">/</span>SCL Repos <span class=\"token operator\">-</span> …   <span class=\"token number\">115</span>                                     <span class=\"token punctuation\">[</span>OK<span class=\"token punctuation\">]</span>\ncentos<span class=\"token operator\">/</span>systemd                     systemd enabled <span class=\"token keyword\">base</span> container<span class=\"token punctuation\">.</span>                 <span class=\"token number\">87</span>                                      <span class=\"token punctuation\">[</span>OK<span class=\"token punctuation\">]</span>\ncentos<span class=\"token operator\">/</span>mysql<span class=\"token operator\">-</span><span class=\"token number\">57</span><span class=\"token operator\">-</span>centos7            MySQL <span class=\"token number\">5.7</span> SQL database server                   <span class=\"token number\">80</span>                                      \nimagine10255<span class=\"token operator\">/</span>centos6<span class=\"token operator\">-</span>lnmp<span class=\"token operator\">-</span>php56    centos6<span class=\"token operator\">-</span>lnmp<span class=\"token operator\">-</span>php56                              <span class=\"token number\">58</span>                                      <span class=\"token punctuation\">[</span>OK<span class=\"token punctuation\">]</span>\n<span class=\"token range operator\">..</span><span class=\"token range operator\">..</span><span class=\"token range operator\">..</span> <span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span>    </code></pre></div>\n<ul>\n<li>\n<p>이미지 필드에 대한 설명은 다음과 같습니다.</p>\n<ul>\n<li><code class=\"language-text\">NAME</code> : 이미지 저장소의 이름</li>\n<li><code class=\"language-text\">DESCRIPTION</code> : 이미지에 대한 설명</li>\n<li><code class=\"language-text\">STATS</code> : 이미지에 대한 평가점수</li>\n<li><code class=\"language-text\">OFFICIAL</code> : 공식 이미지 여부</li>\n<li><code class=\"language-text\">AUTOMATED</code> : 자동화 빌드 여부</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p><code class=\"language-text\">docker pull</code> 명령어를 사용해 docker hub에 존재하는 이미지를 다운로드 할 수 있습니다.<br>\n명령어의 사용법은 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ docker pull <span class=\"token operator\">--</span><span class=\"token class-name\">help</span>\n\n\nUsage<span class=\"token punctuation\">:</span> docker pull <span class=\"token punctuation\">[</span>OPTION<span class=\"token punctuation\">]</span> NAME<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span>TAG<span class=\"token operator\">|</span>@DIGEST<span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>NAME: search 명령의 결과의 name과 동일합니다.  </li>\n<li>추가로 <code class=\"language-text\">TAG</code>, <code class=\"language-text\">@DIGEST</code>를 사용하는데 이는 저장소의 실제 이미지를 구분하는 것입니다.  </li>\n<li><code class=\"language-text\">TAG</code> : 보통 버전을 나타내거나 특성을 나타냅니다.</li>\n<li><code class=\"language-text\">@DIGEST</code> : 해시처럼 이미지의 무결성을 검증하는데 사용합니다.  </li>\n<li>두개의 옵션을 모두 생략한다면 자동으로 TAG에 <code class=\"language-text\">latest</code>가 부여되어 다운로드 됩니다.</li>\n</ul>\n<br/>\n</li>\n<li>\n<p>우선 centos os를 TAG없이 한번 받아오겠습니다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker pull centos\nUsing <span class=\"token keyword\">default</span> tag<span class=\"token punctuation\">:</span> <span class=\"token class-name\">latest</span>\nlatest<span class=\"token punctuation\">:</span> Pulling <span class=\"token keyword\">from</span> library<span class=\"token operator\">/</span>centos\n3c72a8ed6814<span class=\"token punctuation\">:</span> Pull <span class=\"token class-name\">complete</span> \nDigest<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>76d24f3ba3317fa945743bb3746fbaf3a0b752f10b10376960de01da70685fbd\nStatus<span class=\"token punctuation\">:</span> Downloaded newer image <span class=\"token keyword\">for</span> centos<span class=\"token punctuation\">:</span>latest\ndocker<span class=\"token punctuation\">.</span>io<span class=\"token operator\">/</span>library<span class=\"token operator\">/</span>centos<span class=\"token punctuation\">:</span>latest\n\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\ncentos              latest              0d120b6ccaa8        <span class=\"token number\">6</span> days ago          215MB\nhello<span class=\"token operator\">-</span>world         latest              bf756fb1ae65        <span class=\"token number\">7</span> months ago        <span class=\"token number\">13</span><span class=\"token punctuation\">.</span>3kB</code></pre></div>\n<br/>\n</li>\n<li>\n<p>이번에는 TAG를 <code class=\"language-text\">mysql:5.7</code>로 부여 후 mysql을 받아와 보겠습니다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker <span class=\"token class-name\">pull</span> mysql<span class=\"token punctuation\">:</span><span class=\"token number\">5.7</span>\n<span class=\"token number\">5.7</span><span class=\"token punctuation\">:</span> Pulling <span class=\"token keyword\">from</span> library<span class=\"token operator\">/</span><span class=\"token class-name\">mysql</span>\nbf5952930446<span class=\"token punctuation\">:</span> Pull complete \n8254623a9871<span class=\"token punctuation\">:</span> Pull complete \n938e3e06dac4<span class=\"token punctuation\">:</span> Pull <span class=\"token class-name\">complete</span> \nea28ebf28884<span class=\"token punctuation\">:</span> Pull <span class=\"token class-name\">complete</span> \nf3cef38785c2<span class=\"token punctuation\">:</span> Pull complete \n894f9792565a<span class=\"token punctuation\">:</span> Pull complete \n1d8a57523420<span class=\"token punctuation\">:</span> Pull complete \n5f09bf1d31c1<span class=\"token punctuation\">:</span> Pull complete \n1b6ff254abe7<span class=\"token punctuation\">:</span> Pull complete \n74310a0bf42d<span class=\"token punctuation\">:</span> Pull <span class=\"token class-name\">complete</span> \nd398726627fd<span class=\"token punctuation\">:</span> Pull <span class=\"token class-name\">complete</span> \nDigest<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span><span class=\"token class-name\">da58f943b94721d46e87d5de208dc07302a8b13e638cd1d24285d222376d6d84</span>\nStatus<span class=\"token punctuation\">:</span> Downloaded newer image <span class=\"token keyword\">for</span> mysql<span class=\"token punctuation\">:</span><span class=\"token number\">5.7</span>\ndocker<span class=\"token punctuation\">.</span>io<span class=\"token operator\">/</span>library<span class=\"token operator\">/</span>mysql<span class=\"token punctuation\">:</span><span class=\"token number\">5.7</span>\nstudent@cccr<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\ncentos              latest              0d120b6ccaa8        <span class=\"token number\">6</span> days ago          215MB\nmysql               <span class=\"token number\">5.7</span>                 718a6da099d8        <span class=\"token number\">12</span> days ago         448MB\nhello<span class=\"token operator\">-</span>world         latest              bf756fb1ae65        <span class=\"token number\">7</span> months ago        <span class=\"token number\">13</span><span class=\"token punctuation\">.</span>3kB</code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<ul>\n<li>\n<p><code class=\"language-text\">docker rmi</code> 명령어를 사용해 Host 저장소에 존재하는 이미지를 삭제 할 수 있습니다.<br>\n명령어의 사용법은 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ docker rmi <span class=\"token operator\">--</span><span class=\"token class-name\">help</span>\n\nUsage<span class=\"token punctuation\">:</span>  docker rmi <span class=\"token punctuation\">[</span>OPTIONS<span class=\"token punctuation\">]</span> IMAGE  <span class=\"token punctuation\">[</span>IMAGE<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n</li>\n<li>\n<p>방금 다운로드 받았던 mysql 이미지를 삭제 해보겠습니다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker <span class=\"token class-name\">rmi</span> mysql<span class=\"token punctuation\">:</span><span class=\"token number\">5.7</span>\nUntagged<span class=\"token punctuation\">:</span> mysql<span class=\"token punctuation\">:</span><span class=\"token number\">5.7</span>\nUntagged<span class=\"token punctuation\">:</span> mysql@sha256<span class=\"token punctuation\">:</span><span class=\"token class-name\">da58f943b94721d46e87d5de208dc07302a8b13e638cd1d24285d222376d6d84</span>\nDeleted<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>718a6da099d82183c064a964523c0deca80619cb033aadd15854771fe592a480\nDeleted<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>058d93ef2bfb943ba6a19d8b679c702be96e34337901da9e1a07ad62b772bf3d\nDeleted<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>7bca77783fcf15499a0386127dd7d5c679328a21b6566c8be861ba424ac13e49\nDeleted<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>183d05512fa88dfa8c17abb9b6f09a79922d9e9ee001a33ef34d1bc094bf8f9f\nDeleted<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>165805124136fdee738ed19021a522bb53de75c2ca9b6ca87076f51c27385fd7\nDeleted<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>904abdc2d0bea0edbb1a8171d1a1353fa6de22150a9c5d81358799a5b6c38c8d\nDeleted<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span><span class=\"token class-name\">d26f7649f78cf789267fbbca8aeb234932e230109c728632c6b9fbc60ca5591b</span>\nDeleted<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>7fcf7796e23ea5b42eb3bbd5bec160ba5f5f47ecb239053762f9cf766c143942\nDeleted<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>826130797a5760bcd2bb19a6c6d92b5f4860bbffbfa954f5d3fc627904a76e9d\nDeleted<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>53e0181c63e41fb85bce681ec8aadfa323cd00f70509107f7001a1d0614e5adf\nDeleted<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span><span class=\"token class-name\">d6854b83e83d7eb48fb0ef778c58a8b839adb932dd036a085d94a7c2db98f890</span>\nDeleted<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>d0f104dc0a1f9c744b65b23b3fd4d4d3236b4656e67f776fe13f8ad8423b955c\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\ncentos              latest              0d120b6ccaa8        <span class=\"token number\">6</span> days ago          215MB\nhello<span class=\"token operator\">-</span>world         latest              bf756fb1ae65        <span class=\"token number\">7</span> months ago        <span class=\"token number\">13</span><span class=\"token punctuation\">.</span>3kB</code></pre></div>\n<p>MYSQL 이미지와 관련된 <code class=\"language-text\">레이어</code>는 전부 삭제하며<br>\n해당 레이어를 다른 컨테이너 또는 이미지가 <code class=\"language-text\">사용하고 있다면</code> 삭제하지 않는다.</p>\n<br/>\n</li>\n<li>\n<p>test를 위해 rmitest라는 이름의 hello-world 이미지를 사용한 컨테이너를 하나 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker run <span class=\"token operator\">-</span>itd <span class=\"token operator\">--</span>name rmitest hello<span class=\"token operator\">-</span>world\n701ad267fbc8aca292b033d424e6a295f06f410ae80807d8b124e15efa021685\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker ps <span class=\"token operator\">-</span>a\nCONTAINER ID        IMAGE               COMMAND             CREATED              STATUS                          PORTS               NAMES\n701ad267fbc8        hello<span class=\"token operator\">-</span>world         <span class=\"token string\">\"/hello\"</span>            About a minute <span class=\"token return-type class-name\">ago</span>   Exited <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> About a minute ago                       rmitest\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker rmi hello<span class=\"token operator\">-</span>world\nError response <span class=\"token keyword\">from</span> daemon<span class=\"token punctuation\">:</span> conflict<span class=\"token punctuation\">:</span> unable to <span class=\"token keyword\">remove</span> repository reference <span class=\"token string\">\"hello-world\"</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">must</span> force<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> container 701ad267fbc8 <span class=\"token keyword\">is</span> <span class=\"token keyword\">using</span> its referenced image bf756fb1ae65</code></pre></div>\n<p>다음과 같이 사용중인 이미지의 경우 삭제가 되지 않는다.<br>\n이 경우에는 <code class=\"language-text\">-f 옵션</code>을 사용하면 삭제 할 수 있지만 실행중인 컨테이너에게 영향을 미치기에 권장하지는 않는다.</p>\n<br/>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code class=\"language-text\">docker inspect</code> 명령어를 사용해 docker 오브젝트의 정보를 자세히 확인 할 수 있습니다.<br>\n명령어의 사용법은 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ docker inspect <span class=\"token operator\">--</span><span class=\"token class-name\">help</span>\n\nUsage<span class=\"token punctuation\">:</span> docker inspect <span class=\"token punctuation\">[</span>OPTIONS<span class=\"token punctuation\">]</span> NAME<span class=\"token operator\">|</span>ID <span class=\"token punctuation\">[</span>NAME<span class=\"token operator\">|</span>ID<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n</li>\n<li>\n<p>inspect 명령어로 centos 이미지의 정보를 확인해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker <span class=\"token class-name\">inspect</span> centos<span class=\"token punctuation\">:</span>latest\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n        <span class=\"token string\">\"Config\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n            <span class=\"token string\">\"CMD\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"/bin/bash\"</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n            <span class=\"token string\">\"Volumes\"</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"WorkinDir\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"Entrypoint\"</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        <span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n        <span class=\"token string\">\"RootFS\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"Type\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"layers\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"Layers\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n            \n        <span class=\"token string\">\"sha256:0d120b6ccaa8c5e149176798b3501d4dd1885f961922497cd0abef155c869566\"</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>출력된 부분 중 이후 포스트에서 필요한 부분만 나열하였다.  </p>\n<ul>\n<li><code class=\"language-text\">Config</code> : 섹션의 cmd는 이미지를 컨테이너로 생성할 때 실행하는 애플리케이션이다.</li>\n<li><code class=\"language-text\">Volumes</code>: 도커 볼륨과 관련된 내용이다. </li>\n<li><code class=\"language-text\">WorkingDir</code> : 컨테이너에 접근했을 때의 디렉토리</li>\n<li><code class=\"language-text\">Entrypoint</code> : cmd와 마찬가지고 실행 할 애플리케이션이다 cmd와 Entry가 함께 있으면<br>\nEntry는 <code class=\"language-text\">명령</code>, cmd는 <code class=\"language-text\">인자</code>처럼 동작한다.</li>\n<li><code class=\"language-text\">RootFS</code> : 레이어를 나타낸다. </li>\n</ul>\n<br/>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code class=\"language-text\">docker save/load</code>  명령어를 사용해 호스트에 저장된 이미지를 복사, 불러올 수 있습니다.<br>\n명령어의 사용법은 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># docker save --help</span>\n\nUsage<span class=\"token punctuation\">:</span> docker save <span class=\"token punctuation\">[</span>OPTIONS<span class=\"token punctuation\">]</span> IMAGE <span class=\"token punctuation\">[</span>IMAGE<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token preprocessor property\"># docker load --help</span>\n\nUsage<span class=\"token punctuation\">:</span> docker load <span class=\"token punctuation\">[</span>OPTIONS<span class=\"token punctuation\">]</span>\n<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n</li>\n<li>\n<p>docker save 명령은 <code class=\"language-text\">-o 옵션</code>을 사용해 파일의 경로를 지정해야한다.</p>\n<p>centos 이미지를 아카이브 파일로 복사하고 내용을 확인해보았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker save <span class=\"token operator\">-</span>o <span class=\"token class-name\">img<span class=\"token punctuation\">.</span>tar</span> centos<span class=\"token punctuation\">:</span>latest\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ tar tf img<span class=\"token punctuation\">.</span>tar\n0d120b6ccaa8c5e149176798b3501d4dd1885f961922497cd0abef155c869566<span class=\"token punctuation\">.</span>json\n42f3938b740e458a1d119b6af08468e05a60bce967245f990cf205b99d7b2eee<span class=\"token operator\">/</span>\n42f3938b740e458a1d119b6af08468e05a60bce967245f990cf205b99d7b2eee<span class=\"token operator\">/</span>VERSION\n42f3938b740e458a1d119b6af08468e05a60bce967245f990cf205b99d7b2eee<span class=\"token operator\">/</span>json\n42f3938b740e458a1d119b6af08468e05a60bce967245f990cf205b99d7b2eee<span class=\"token operator\">/</span>layer<span class=\"token punctuation\">.</span>tar\nmanifest<span class=\"token punctuation\">.</span>json\nrepositories</code></pre></div>\n<br/>\n</li>\n<li>\n<p>save한 이미지를 테스트 하기 위해 기존에 설치되어 있는 이미지를 삭제한다</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker rmi hello<span class=\"token operator\">-</span>world httpd <span class=\"token class-name\">centos</span>\nUntagged<span class=\"token punctuation\">:</span> centos<span class=\"token punctuation\">:</span><span class=\"token class-name\">latest</span>\nUntagged<span class=\"token punctuation\">:</span> centos@sha256<span class=\"token punctuation\">:</span>76d24f3ba3317fa945743bb3746fbaf3a0b752f10b10376960de01da70685fbd\nDeleted<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>0d120b6ccaa8c5e149176798b3501d4dd1885f961922497cd0abef155c869566\nDeleted<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>291f6e44771a7b4399b0c6fb40ab4fe0331ddf76eda11080f052b003d96c7726\n\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</code></pre></div>\n<br/>\n</li>\n<li>\n<p>아카이브 파일로 이미지를 로드 후 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker load <span class=\"token operator\">-</span>i img<span class=\"token punctuation\">.</span>tar \n291f6e44771a<span class=\"token punctuation\">:</span> Loading layer <span class=\"token punctuation\">[</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">></span><span class=\"token punctuation\">]</span>  <span class=\"token number\">222</span><span class=\"token punctuation\">.</span>4MB<span class=\"token operator\">/</span><span class=\"token number\">222</span><span class=\"token punctuation\">.</span>4MB\n<span class=\"token class-name\">Loaded</span> image<span class=\"token punctuation\">:</span> centos<span class=\"token punctuation\">:</span>latest\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\ncentos              latest              0d120b6ccaa8        <span class=\"token number\">6</span> days ago          215MB</code></pre></div>\n<br/>\n</li>\n</ul>\n<hr>\n<h2 id=\"-도커-허브를-통한-이미지-업로드-다운로드\" style=\"position:relative;\"><a href=\"#-%EB%8F%84%EC%BB%A4-%ED%97%88%EB%B8%8C%EB%A5%BC-%ED%86%B5%ED%95%9C-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%97%85%EB%A1%9C%EB%93%9C-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C\" aria-label=\" 도커 허브를 통한 이미지 업로드 다운로드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👌 도커 허브를 통한 이미지 업로드, 다운로드</h2>\n<ul>\n<li>\n<p>도커 이미지 생성<br>\n먼저 commit_nasa라는 centos 컨테이너를 하나 만들도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">student@cccr<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker run <span class=\"token operator\">-</span>itd <span class=\"token operator\">--</span>name <span class=\"token class-name\">commit_nasa</span> centos<span class=\"token punctuation\">:</span>latest\nc4ce10edca0febaddc49c07b31290f542ff2c49751cb16ce0666bc1eac12d6c2</code></pre></div>\n</li>\n<li>\n<p>기존에 있는 이미지로 새로운 이미지를 만들기 위해서는 <code class=\"language-text\">docker commit</code> 명령어를 사용하면 됩니다.</p>\n<p>[배포 테스트를 위한 이미지를 하나 생성하겠습니다.]</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker commit \\\n<span class=\"token operator\">></span> <span class=\"token operator\">-</span>a <span class=\"token string\">\"nasa1515\"</span> \\                   # <span class=\"token operator\">-</span>a<span class=\"token punctuation\">:</span> author<span class=\"token punctuation\">,</span> 이미지의 작성자\n<span class=\"token operator\">></span> <span class=\"token operator\">-</span>m <span class=\"token string\">\"commit nasa1515\"</span> \\            # <span class=\"token operator\">-</span>m<span class=\"token punctuation\">:</span> messages<span class=\"token punctuation\">,</span> 커밋 메시지\n<span class=\"token operator\">></span> commit_nasa \\                     # 복사하고자 하는 이미지\n<span class=\"token operator\">></span> nasa1415<span class=\"token operator\">/</span>centos<span class=\"token punctuation\">:</span>nasa1515          # 이미지<span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span>태그<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> 태그 생략시 'latest'로 붙음\nsha256<span class=\"token punctuation\">:</span>7f1b0822d1522842d953acb5bea0e4d1481f68d690fe5fc5d6255e58a976c447\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nnasa1415<span class=\"token operator\">/</span>centos     nasa1515            1fec0eefcf65        <span class=\"token number\">4</span> minutes ago       215MB\ncentos              latest              0d120b6ccaa8        <span class=\"token number\">6</span> days ago          215MB</code></pre></div>\n<br/>\n</li>\n</ul>\n<h3 id=\"이미지-배포\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%B0%B0%ED%8F%AC\" aria-label=\"이미지 배포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이미지 배포</h3>\n<p>만들어진 이미지를 배포하기 위해 도커 허브 이미지 저장소를 사용합니다.</p>\n<p>일단 <a href=\"https://hub.docker.com%EB%A1%9C\">https://hub.docker.com로</a> 들어가서 로그인을 합니다.<br>\n[회원가입을 완료 했다면 아래와 같이 저장소가 생성되었을 겁니다]\n<img src=\"https://user-images.githubusercontent.com/69498804/90353781-26d3b380-e082-11ea-95ed-7172e61c65fb.png\" alt=\"스크린샷, 2020-08-17 12-06-53\"></p>\n<br/>\n<ul>\n<li>\n<p>배포 전 <code class=\"language-text\">docker login</code> 명령을 사용해 로그인해줍니다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker login\nLogin with your Docker ID to push <span class=\"token keyword\">and</span> pull images <span class=\"token keyword\">from</span> Docker Hub<span class=\"token punctuation\">.</span> If you don't have a <span class=\"token class-name\">Docker</span> ID<span class=\"token punctuation\">,</span> head over <span class=\"token class-name\">to</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>hub<span class=\"token punctuation\">.</span>docker<span class=\"token punctuation\">.</span>com to create one<span class=\"token punctuation\">.</span>\nUsername<span class=\"token punctuation\">:</span> <span class=\"token class-name\">nasa1415</span>\nPassword<span class=\"token punctuation\">:</span> \nWARNING<span class=\"token operator\">!</span> Your password will be <span class=\"token class-name\">stored</span> unencrypted <span class=\"token keyword\">in</span> <span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>student<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>docker<span class=\"token operator\">/</span>config<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">.</span>\nConfigure a credential helper to <span class=\"token keyword\">remove</span> <span class=\"token keyword\">this</span> <span class=\"token class-name\">warning<span class=\"token punctuation\">.</span> See</span>\nhttps<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>docs<span class=\"token punctuation\">.</span>docker<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>engine<span class=\"token operator\">/</span>reference<span class=\"token operator\">/</span>commandline<span class=\"token operator\">/</span>login<span class=\"token operator\">/</span>#credentials<span class=\"token operator\">-</span>store\n\nLogin Succeeded</code></pre></div>\n<br/>\n</li>\n<li>\n<p><code class=\"language-text\">docker push</code> 명령어를 사용해 업로드 해줍니다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$ docker push <span class=\"token punctuation\">[</span>이미지 이름<span class=\"token punctuation\">]</span>\n\n\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker push nasa1415<span class=\"token operator\">/</span>centos<span class=\"token punctuation\">:</span>nasa1515\nThe push refers to repository <span class=\"token punctuation\">[</span>docker<span class=\"token punctuation\">.</span>io<span class=\"token operator\">/</span>nasa1415<span class=\"token operator\">/</span>centos<span class=\"token punctuation\">]</span>\n291f6e44771a<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Pushed</span> \nnasa1515<span class=\"token punctuation\">:</span> digest<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>77e7c29b5f9a493a64b981ab17d6d8b0efe5352da325f7f8f78f9101b1d5439b size<span class=\"token punctuation\">:</span> <span class=\"token number\">529</span></code></pre></div>\n<br/>\n</li>\n<li>\n<p>만약 github에 생성한 저장소 이름과 이미지의 태그가 다르면 업로드가 불가합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">student@cccr<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker push nasa1515<span class=\"token operator\">/</span>centos\nThe push refers to repository <span class=\"token punctuation\">[</span>docker<span class=\"token punctuation\">.</span>io<span class=\"token operator\">/</span>nasa1515<span class=\"token operator\">/</span>centos<span class=\"token punctuation\">]</span>\n291f6e44771a<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Preparing</span> \ndenied<span class=\"token punctuation\">:</span> requested access to the resource <span class=\"token keyword\">is</span> <span class=\"token class-name\">denied</span></code></pre></div>\n<br/>\n</li>\n<li>\n<p><code class=\"language-text\">push</code> 이후 정상적으로 gibhub 저장소에 올라갔음을 확인 할 수 있습니다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/90354728-153fdb00-e085-11ea-8bee-7b5aa925e77c.png\" alt=\"스크린샷, 2020-08-17 12-27-51\"></p>\n<br/>\n</li>\n</ul>\n<hr>\n<h3 id=\"이미지-다운로드\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C\" aria-label=\"이미지 다운로드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이미지 다운로드</h3>\n<ul>\n<li>\n<p>올려놓은 이미지를 확인하기 위해 기존 host의 이미지를 전부 삭제  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</code></pre></div>\n<br/>\n</li>\n<li>\n<p><code class=\"language-text\">docker pull</code> 명령어를 이용해 저장소의 이미지를 다운로드</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker pull nasa1415<span class=\"token operator\">/</span>centos<span class=\"token punctuation\">:</span><span class=\"token class-name\">nasa1515</span>\nnasa1515<span class=\"token punctuation\">:</span> Pulling <span class=\"token keyword\">from</span> nasa1415<span class=\"token operator\">/</span>centos\n3c72a8ed6814<span class=\"token punctuation\">:</span> Pull <span class=\"token class-name\">complete</span> \nDigest<span class=\"token punctuation\">:</span> sha256<span class=\"token punctuation\">:</span>77e7c29b5f9a493a64b981ab17d6d8b0efe5352da325f7f8f78f9101b1d5439b\nStatus<span class=\"token punctuation\">:</span> Downloaded newer image <span class=\"token keyword\">for</span> nasa1415<span class=\"token operator\">/</span>centos<span class=\"token punctuation\">:</span>nasa1515\ndocker<span class=\"token punctuation\">.</span>io<span class=\"token operator\">/</span>nasa1415<span class=\"token operator\">/</span>centos<span class=\"token punctuation\">:</span>nasa1515\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nnasa1415<span class=\"token operator\">/</span>centos     nasa1515            1fec0eefcf65        About an hour ago   215MB</code></pre></div>\n</li>\n</ul>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-%EB%8F%84%EC%BB%A4-%EC%9D%B4%EB%AF%B8%EC%A7%80\">✔ 도커 이미지</a></li>\n<li><a href=\"#-%EB%8F%84%EC%BB%A4-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%AA%85%EB%A0%B9%EC%96%B4\">✌ 도커 이미지 명령어</a></li>\n<li>\n<p><a href=\"#-%EB%8F%84%EC%BB%A4-%ED%97%88%EB%B8%8C%EB%A5%BC-%ED%86%B5%ED%95%9C-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%97%85%EB%A1%9C%EB%93%9C-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C\">👌 도커 허브를 통한 이미지 업로드, 다운로드</a></p>\n<ul>\n<li><a href=\"#%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%B0%B0%ED%8F%AC\">이미지 배포</a></li>\n<li><a href=\"#%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C\">이미지 다운로드</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 26, 2021","title":"[DOCKER] - IMAGE","categories":"DOCKER","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/docker-image/"}},"prev":{"id":"19140e2a-39e6-528d-83b0-b371a0d9a02d","html":"<p>머리말  </p>\n<p> 이전 포스트에서는 도커의 네트워크에 대해서 포스팅했습니다.<br>\n이번 포스트에서는 이전 포스트에서 포스팅한 네트워크의 종류가 아니라<br>\n실제 컨테이너에 사용자가 네트워크 대역대를 직접 설정할 수 있는 MACVLAN과 LINK에 대해서 포스팅합니다.</p>\n<hr>\n<h2 id=\"-macvlan\" style=\"position:relative;\"><a href=\"#-macvlan\" aria-label=\" macvlan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ MACVLAN</h2>\n<ul>\n<li>MacVLan은 브릿지가 없습니다. 대신 서브 인터페이스라는 개념이 등장해서 사용합니다.  </li>\n<li>물리적인 NIC eth0은 존재하며 <code class=\"language-text\">eh0</code>에서 여러 하위 인터페이스를 만듬으로써 여러개의 mac 주소를 가질 수 있도록 합니다.<br>\n그렇게 되면 생성된 하위 인터페이스들에 여러개의 컨테이너들이 연결되면서 VLAN을 구성할 수 있습니다.  </li>\n<li>즉 하나의 NIC를 가상화함으로써 여러개의 MAC주소를 생성하는 것이라고 할 수 있습니다</li>\n</ul>\n<br/>\n<h3 id=\"macvlan-driver-구조\" style=\"position:relative;\"><a href=\"#macvlan-driver-%EA%B5%AC%EC%A1%B0\" aria-label=\"macvlan driver 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MACVLAN Driver 구조</h3>\n<p><img src=\"https://lh3.googleusercontent.com/k6U4fO2FWI-lA5f_G7bO1w88OtgIki7azKcXbdpcCClhW79M4cRBOgIWYX3KhYKLRYpyE40lqX41MWj4m_6mLuUPbahQFh76CYQwU9lde7jqPmc4ClZwZJ_YF8XNJvOVF9eBRCyu\">  </p>\n<ul>\n<li>macvlan은 부모 인터페이스(parent)와 서브 인터페이스(slave)로 나눈다.    </li>\n<li>부모 인터페이스는 가상화될 주체, 즉 실제 물리적인 NIC인 eth0이 됩니다.  </li>\n<li>거기서 생성된 서브 인터페이스들은 mac0, mac1, mac2가 됩니다.  </li>\n<li>macvlan으로 생성된 인터페이스를 지칭할 때는 mac0@eth0과 같이 표현합니다. <code class=\"language-text\">(mac0은 서브 인터페이스, eth0이 부모 인터페이스)</code></li>\n</ul>\n<br/>\n<h3 id=\"macvlan-구동-방식\" style=\"position:relative;\"><a href=\"#macvlan-%EA%B5%AC%EB%8F%99-%EB%B0%A9%EC%8B%9D\" aria-label=\"macvlan 구동 방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MACVLAN 구동 방식</h3>\n<ul>\n<li>호스트(eth0)와는 통신이 안되지만 다른 서브 인터페이스간 통신은 되는 방식  </li>\n<li>호스트와 통신이 안되는 것은 원래 macvlan에서 안되는 것이고<br>\n다른 서브 인터페이스간의 통신이 되는 것은 bridge 등 들과 차이를 가진다</li>\n<li>macvlan 방식은 부모 인터페이스에 간단한 브릿지를 두어서<br>\n다른 서브 인터페이스로 향하는 트래픽을 밖으로 내보내지 않고 바로 전달하는 방식이다<br>\n(내부 컨테이너끼리 통신을 하는 경우)  </li>\n<li>모든 서브 인터페이스의 맥 주소를 알고 있는 상태이므로<br>\n브릿지에서 Mac Learning(맥 추가) 작업도 필요없고 루핑을 방지하기 위한 STP알고리즘도 필요 없다.</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-macvlan-설정\" style=\"position:relative;\"><a href=\"#-macvlan-%EC%84%A4%EC%A0%95\" aria-label=\" macvlan 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ MACVLAN 설정</h2>\n<ul>\n<li>\n<p>LINUX NIC의 promisc 모드를 활성화<br>\nMacVlan을 사용하기 위해서는 <code class=\"language-text\">Promiscuous mode</code>를 활성화 해야 합니다.</p>\n<ul>\n<li>LINUX에서는 하나의 NIC에 하나의 MAC 주소를 학습하도록 구성되어있습니다.  </li>\n<li>MacVlan을 사용할 경우 서브 인터페이스 하단의 MAC을 다중으로 ARP TABLE에서 확인 가능</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ ip a <span class=\"token operator\">|</span> grep wlp3s0\n<span class=\"token number\">3</span><span class=\"token punctuation\">:</span> wlp3s0<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>BROADCAST<span class=\"token punctuation\">,</span>MULTICAST<span class=\"token punctuation\">,</span>UP<span class=\"token punctuation\">,</span>LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">1500</span> qdisc mq state UP <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> qlen <span class=\"token number\">1000</span>\ninet <span class=\"token number\">192.168</span><span class=\"token number\">.100</span><span class=\"token number\">.9</span><span class=\"token operator\">/</span><span class=\"token number\">24</span> brd <span class=\"token number\">192.168</span><span class=\"token number\">.100</span><span class=\"token number\">.255</span> scope <span class=\"token keyword\">global</span> <span class=\"token keyword\">dynamic</span> noprefixroute wlp3s0\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ sudo ip link <span class=\"token keyword\">set</span> wlp3s0 promisc <span class=\"token keyword\">on</span></code></pre></div>\n<br/>\n</li>\n<li>\n<p>NIC에 PROMISC가 추가된 것을 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ ip a <span class=\"token operator\">|</span> grep wlp3s0\n<span class=\"token number\">3</span><span class=\"token punctuation\">:</span> wlp3s0<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>BROADCAST<span class=\"token punctuation\">,</span>MULTICAST<span class=\"token punctuation\">,</span>PROMISC<span class=\"token punctuation\">,</span>UP<span class=\"token punctuation\">,</span>LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">1500</span> qdisc mq state UP <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> qlen <span class=\"token number\">1000</span>\n    inet <span class=\"token number\">192.168</span><span class=\"token number\">.100</span><span class=\"token number\">.9</span><span class=\"token operator\">/</span><span class=\"token number\">24</span> brd <span class=\"token number\">192.168</span><span class=\"token number\">.100</span><span class=\"token number\">.255</span> scope <span class=\"token keyword\">global</span> <span class=\"token keyword\">dynamic</span> noprefixroute wlp3s0</code></pre></div>\n<br/>\n</li>\n<li>\n<p>MacVlan 네트워크 생성<br>\n부모 인터페이스 카드를 지정하여 새로운 MacVlan 네트워크를 생성합니다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker network create <span class=\"token operator\">-</span>d macvlan <span class=\"token operator\">--</span>subnet<span class=\"token operator\">=</span><span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.0</span><span class=\"token operator\">/</span><span class=\"token number\">24</span> <span class=\"token operator\">--</span>gateway<span class=\"token operator\">=</span><span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.1</span> <span class=\"token operator\">--</span>ip<span class=\"token operator\">-</span>range<span class=\"token operator\">=</span><span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.0</span><span class=\"token operator\">/</span><span class=\"token number\">24</span> <span class=\"token operator\">-</span><span class=\"token class-name\">o</span> parent<span class=\"token operator\">=</span>wlp3s0 macvlan1 \n14ae59d5fa0446094d77fe0233270d0c68643636181991f5f9c6333b0d2792df\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker network ls\nNETWORK ID          NAME                DRIVER              SCOPE\nc4031fa4ad4b        bridge              bridge              local\n29d9e0411d39        host                host                local\n14ae59d5fa04        macvlan1            macvlan             local\nddad85781d7f        nasanet             bridge              local\n054fbf919b85        none                <span class=\"token keyword\">null</span>                local</code></pre></div>\n<p><code class=\"language-text\">wlp3s0</code>을 사용해 <code class=\"language-text\">macvlan1</code>을 생성한 것을 확인 할 수 있습니다.</p>\n<br/>\n</li>\n<li>\n<p><code class=\"language-text\">macvlan1</code>을 사용하는 컨테이너 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker run <span class=\"token operator\">-</span>itd <span class=\"token operator\">--</span>name mac<span class=\"token operator\">-</span>nasa <span class=\"token operator\">--</span>network <span class=\"token class-name\">macvlan1</span> centos<span class=\"token punctuation\">:</span>latest\nb63a1b3bc91faea7893991e1ed4407e23fd179d82ec8456925bd22740da21833\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n<span class=\"token class-name\">b63a1b3bc91f</span>        centos<span class=\"token punctuation\">:</span>latest       <span class=\"token string\">\"/bin/bash\"</span>         <span class=\"token number\">21</span> seconds ago      Up <span class=\"token number\">20</span> seconds                           mac<span class=\"token operator\">-</span>nasa</code></pre></div>\n<br/>\n</li>\n<li>\n<p><code class=\"language-text\">mac-nasa</code> 컨테이너의 네트워크 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker exec mac<span class=\"token operator\">-</span>nasa ip a\n<span class=\"token number\">1</span><span class=\"token punctuation\">:</span> lo<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>LOOPBACK<span class=\"token punctuation\">,</span>UP<span class=\"token punctuation\">,</span>LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">65536</span> qdisc noqueue state UNKNOWN <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> qlen <span class=\"token number\">1000</span>\n    link<span class=\"token operator\">/</span>loopback <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span> brd <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span>\n    inet <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">/</span><span class=\"token number\">8</span> scope host lo\n    valid_lft forever preferred_lft forever\n<span class=\"token number\">41</span><span class=\"token punctuation\">:</span> eth0@if3<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>BROADCAST<span class=\"token punctuation\">,</span>MULTICAST<span class=\"token punctuation\">,</span>UP<span class=\"token punctuation\">,</span>LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">1500</span> qdisc noqueue state UP <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> \n    link<span class=\"token operator\">/</span>ether <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">42</span><span class=\"token punctuation\">:</span>c0<span class=\"token punctuation\">:</span>a8<span class=\"token punctuation\">:</span><span class=\"token number\">39</span><span class=\"token punctuation\">:</span><span class=\"token number\">02</span> <span class=\"token class-name\">brd</span> ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff link<span class=\"token operator\">-</span>netnsid <span class=\"token number\">0</span>\n    inet <span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.2</span><span class=\"token operator\">/</span><span class=\"token number\">24</span> brd <span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.255</span> scope <span class=\"token keyword\">global</span> eth0\n    valid_lft forever preferred_lft forever</code></pre></div>\n<br/>\n</li>\n<li>\n<p>추가적으로 <code class=\"language-text\">mac-nasa2</code>라는 컨테이너를 동일하게 생성하였음</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker run <span class=\"token operator\">-</span>itd <span class=\"token operator\">--</span>name mac<span class=\"token operator\">-</span>nasa2 <span class=\"token operator\">--</span>network <span class=\"token class-name\">macvlan1</span> centos<span class=\"token punctuation\">:</span>latest\n528f559bfdca2a7fb5ea47a259cfba69f7efdc9368e94f4ebe86ac7302b77168\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker exec mac<span class=\"token operator\">-</span>nasa2 ip a\n<span class=\"token number\">1</span><span class=\"token punctuation\">:</span> lo<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>LOOPBACK<span class=\"token punctuation\">,</span>UP<span class=\"token punctuation\">,</span>LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">65536</span> qdisc noqueue state UNKNOWN <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> qlen <span class=\"token number\">1000</span>\n    link<span class=\"token operator\">/</span>loopback <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span> brd <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span>\n    inet <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">/</span><span class=\"token number\">8</span> scope host lo\n    valid_lft forever preferred_lft forever\n<span class=\"token number\">42</span><span class=\"token punctuation\">:</span> eth0@if3<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>BROADCAST<span class=\"token punctuation\">,</span>MULTICAST<span class=\"token punctuation\">,</span>UP<span class=\"token punctuation\">,</span>LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">1500</span> qdisc noqueue state UP <span class=\"token keyword\">group</span> <span class=\"token keyword\">default</span> \n    link<span class=\"token operator\">/</span>ether <span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">42</span><span class=\"token punctuation\">:</span>c0<span class=\"token punctuation\">:</span>a8<span class=\"token punctuation\">:</span><span class=\"token number\">39</span><span class=\"token punctuation\">:</span><span class=\"token number\">03</span> <span class=\"token class-name\">brd</span> ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff<span class=\"token punctuation\">:</span>ff link<span class=\"token operator\">-</span>netnsid <span class=\"token number\">0</span>\n    inet <span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.3</span><span class=\"token operator\">/</span><span class=\"token number\">24</span> brd <span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.255</span> scope <span class=\"token keyword\">global</span> eth0\n    valid_lft forever preferred_lft forever</code></pre></div>\n<br/>\n</li>\n<li>\n<p><code class=\"language-text\">mac-nasa</code> &#x3C;-> <code class=\"language-text\">mac-nasa2</code> 의 통신이 정상적임을 확인합니다.<br>\nMacVlan 네트워킹 기반의 통신이 정상적인 것을 확인할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker exec mac<span class=\"token operator\">-</span>nasa ping <span class=\"token operator\">-</span>c5 <span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.3</span>\nPING <span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.3</span> <span class=\"token punctuation\">(</span><span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.3</span><span class=\"token punctuation\">)</span> <span class=\"token function\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data<span class=\"token punctuation\">.</span>\n<span class=\"token number\">64</span> bytes <span class=\"token keyword\">from</span> <span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.3</span><span class=\"token punctuation\">:</span> icmp_seq<span class=\"token operator\">=</span><span class=\"token number\">1</span> ttl<span class=\"token operator\">=</span><span class=\"token number\">64</span> time<span class=\"token operator\">=</span><span class=\"token number\">0.051</span> ms\n<span class=\"token number\">64</span> bytes <span class=\"token keyword\">from</span> <span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.3</span><span class=\"token punctuation\">:</span> icmp_seq<span class=\"token operator\">=</span><span class=\"token number\">2</span> ttl<span class=\"token operator\">=</span><span class=\"token number\">64</span> time<span class=\"token operator\">=</span><span class=\"token number\">0.096</span> ms\n<span class=\"token number\">64</span> bytes <span class=\"token keyword\">from</span> <span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.3</span><span class=\"token punctuation\">:</span> icmp_seq<span class=\"token operator\">=</span><span class=\"token number\">3</span> ttl<span class=\"token operator\">=</span><span class=\"token number\">64</span> time<span class=\"token operator\">=</span><span class=\"token number\">0.089</span> ms\n<span class=\"token number\">64</span> bytes <span class=\"token keyword\">from</span> <span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.3</span><span class=\"token punctuation\">:</span> icmp_seq<span class=\"token operator\">=</span><span class=\"token number\">4</span> ttl<span class=\"token operator\">=</span><span class=\"token number\">64</span> time<span class=\"token operator\">=</span><span class=\"token number\">0.085</span> ms\n<span class=\"token number\">64</span> bytes <span class=\"token keyword\">from</span> <span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.3</span><span class=\"token punctuation\">:</span> icmp_seq<span class=\"token operator\">=</span><span class=\"token number\">5</span> ttl<span class=\"token operator\">=</span><span class=\"token number\">64</span> time<span class=\"token operator\">=</span><span class=\"token number\">0.086</span> ms\n\n<span class=\"token operator\">--</span><span class=\"token operator\">-</span> <span class=\"token number\">192.168</span><span class=\"token number\">.57</span><span class=\"token number\">.3</span> ping statistics <span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n<span class=\"token number\">5</span> <span class=\"token class-name\">packets</span> transmitted<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span> received<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token operator\">%</span> <span class=\"token class-name\">packet</span> loss<span class=\"token punctuation\">,</span> time 38ms\nrtt min<span class=\"token operator\">/</span>avg<span class=\"token operator\">/</span>max<span class=\"token operator\">/</span>mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.051</span><span class=\"token operator\">/</span><span class=\"token number\">0.081</span><span class=\"token operator\">/</span><span class=\"token number\">0.096</span><span class=\"token operator\">/</span><span class=\"token number\">0.017</span> ms</code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"🤞-link\" style=\"position:relative;\"><a href=\"#%F0%9F%A4%9E-link\" aria-label=\"🤞 link permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤞 LINK</h2>\n<ul>\n<li>컨테이너끼리 서로 통신하기 위해선 기본적으로 <code class=\"language-text\">bridge</code>를 사용합니다.</li>\n<li>하지만 web 서버 역할의 컨테이너와 DB 서버 역할의 컨테이너가 있습니다고 가정해보고,<br>\n만약, 이 두 container 사이를 연동해야 합니다고 하면 LINK를 사용해야 합니다.</li>\n</ul>\n<br/>\n<h3 id=\"link를-쓰는-정확한-이유\" style=\"position:relative;\"><a href=\"#link%EB%A5%BC-%EC%93%B0%EB%8A%94-%EC%A0%95%ED%99%95%ED%95%9C-%EC%9D%B4%EC%9C%A0\" aria-label=\"link를 쓰는 정확한 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LINK를 쓰는 정확한 이유</h3>\n<p>동일 host 상에 배포된 container는 사실 Private IP 를 이용해 통신이 가능합니다. </p>\n<ul>\n<li>\n<p>아래 두개의 컨테이너를 생성해놓았습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n<span class=\"token class-name\">aa342876ff52</span>        centos<span class=\"token punctuation\">:</span>latest       <span class=\"token string\">\"/bin/bash\"</span>         <span class=\"token number\">25</span> seconds ago      Up <span class=\"token number\">23</span> seconds                           nasa2\n32d0528aa4e4        centos<span class=\"token punctuation\">:</span>latest       <span class=\"token string\">\"/bin/bash\"</span>         <span class=\"token number\">27</span> seconds ago      Up <span class=\"token number\">26</span> seconds                           nasa1\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker inspect nasa2 <span class=\"token operator\">|</span> grep <span class=\"token operator\">-</span>i IPA\n            <span class=\"token string\">\"SecondaryIPAddresses\"</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"IPAddress\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"172.17.0.3\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"IPAMConfig\"</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"IPAddress\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"172.17.0.3\"</span><span class=\"token punctuation\">,</span>\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker inspect nasa1 <span class=\"token operator\">|</span> grep <span class=\"token operator\">-</span>i IPA\n            <span class=\"token string\">\"SecondaryIPAddresses\"</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"IPAddress\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"172.17.0.2\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"IPAMConfig\"</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"IPAddress\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"172.17.0.2\"</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>각각 <code class=\"language-text\">172.17.0.2</code> , <code class=\"language-text\">172.17.0.3</code> Private IP를 가지고 있습니다</p>\n<br/>\n</li>\n<li>\n<p>두 컨테이너의 핑 테스트 결과 정상적입니다</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker exec nasa1 ping <span class=\"token operator\">-</span>c3 <span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.3</span>\nPING <span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.3</span> <span class=\"token punctuation\">(</span><span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.3</span><span class=\"token punctuation\">)</span> <span class=\"token function\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data<span class=\"token punctuation\">.</span>\n<span class=\"token number\">64</span> bytes <span class=\"token keyword\">from</span> <span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.3</span><span class=\"token punctuation\">:</span> icmp_seq<span class=\"token operator\">=</span><span class=\"token number\">1</span> ttl<span class=\"token operator\">=</span><span class=\"token number\">64</span> time<span class=\"token operator\">=</span><span class=\"token number\">0.134</span> ms\n<span class=\"token number\">64</span> bytes <span class=\"token keyword\">from</span> <span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.3</span><span class=\"token punctuation\">:</span> icmp_seq<span class=\"token operator\">=</span><span class=\"token number\">2</span> ttl<span class=\"token operator\">=</span><span class=\"token number\">64</span> time<span class=\"token operator\">=</span><span class=\"token number\">0.105</span> ms\n<span class=\"token number\">64</span> bytes <span class=\"token keyword\">from</span> <span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.3</span><span class=\"token punctuation\">:</span> icmp_seq<span class=\"token operator\">=</span><span class=\"token number\">3</span> ttl<span class=\"token operator\">=</span><span class=\"token number\">64</span> time<span class=\"token operator\">=</span><span class=\"token number\">0.089</span> ms\n\n<span class=\"token operator\">--</span><span class=\"token operator\">-</span> <span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.3</span> ping statistics <span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n<span class=\"token number\">3</span> <span class=\"token class-name\">packets</span> transmitted<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span> received<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token operator\">%</span> <span class=\"token class-name\">packet</span> loss<span class=\"token punctuation\">,</span> time 43ms\nrtt min<span class=\"token operator\">/</span>avg<span class=\"token operator\">/</span>max<span class=\"token operator\">/</span>mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.089</span><span class=\"token operator\">/</span><span class=\"token number\">0.109</span><span class=\"token operator\">/</span><span class=\"token number\">0.134</span><span class=\"token operator\">/</span><span class=\"token number\">0.020</span> ms</code></pre></div>\n</li>\n</ul>\n<p>위의 실습 같이 컨테이너는 이미 서로간의 통신이 가능한데 굳이 LINK를 써야 하는 이유는 무엇일까?  </p>\n<p>이는 컨테이너 사이의 IP 기반 연동의 문제점 때문입니다<br>\nContainer 의 IP 는 유동적인 성격을 띄고 있기 때문에 언제든 변할 수 있습니다.<br>\nContainer 는 일종의 <code class=\"language-text\">Process</code> 이므로, 언제든 생성/소멸 될 수 있기에<br>\n만약 컨테이너가 중지 되었다가 시작하면, Process가 다시 새롭게 생성되는 것과 같습니다<br>\n즉, 이때 컨테이너에게 부여되는 <code class=\"language-text\">Private IP</code>는 변할 수 있습니다는 것입니다.<br>\n그래서 컨테이너의 연동을 위한 방법으로 IP 기반의 연동은 권고되지 않습니다.<br>\n따라서 연동으로 권고 되고 있는 방법이 바로 LINK 기능인 것입니다.</p>\n<br/>\n<hr>\n<h2 id=\"-link-설정\" style=\"position:relative;\"><a href=\"#-link-%EC%84%A4%EC%A0%95\" aria-label=\" link 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👍 LINK 설정</h2>\n<p>link를 이용한 컨테이너 연동</p>\n<ul>\n<li>\n<p>링크를 사용하기 위해 <code class=\"language-text\">httpd</code> 기반의 컨테이너를 하나 생성했습니다다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker run <span class=\"token operator\">-</span>itd <span class=\"token operator\">--</span>name web<span class=\"token operator\">-</span><span class=\"token class-name\">nasa</span> httpd<span class=\"token punctuation\">:</span>latest\n7881267cb8e1abc34ba13fe4783759ea1ca285ca5e01de56d252206f0bbd0e5b\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker ps <span class=\"token operator\">|</span> grep web<span class=\"token operator\">-</span>nasa\n7881267cb8e1        httpd<span class=\"token punctuation\">:</span>latest        <span class=\"token string\">\"httpd-foreground\"</span>   <span class=\"token number\">11</span> seconds ago      Up <span class=\"token number\">10</span> seconds       <span class=\"token number\">80</span><span class=\"token operator\">/</span>tcp              web<span class=\"token operator\">-</span>nasa</code></pre></div>\n<br/>\n</li>\n<li>\n<p>링크를 사용해서 <code class=\"language-text\">centos</code> 기반의 컨테이너를 하나 생성했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker run <span class=\"token operator\">-</span>itd <span class=\"token operator\">--</span>name  link<span class=\"token operator\">-</span>nasa <span class=\"token operator\">--</span>link web<span class=\"token operator\">-</span><span class=\"token class-name\">nasa</span> centos<span class=\"token punctuation\">:</span>latest\n9e8f15588f0fcd8920720af6446adfa59f21cd1c15c057518b874b89b077db4d\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker ps <span class=\"token operator\">|</span> grep link\n9e8f15588f0f        centos<span class=\"token punctuation\">:</span>latest       <span class=\"token string\">\"/bin/bash\"</span>          <span class=\"token number\">6</span> seconds ago       Up <span class=\"token number\">5</span> seconds                            link<span class=\"token operator\">-</span>nasa</code></pre></div>\n<br/>\n</li>\n<li>\n<p><code class=\"language-text\">curl</code> 명령을 이용해 두 컨테이너의 통신이 정상임을 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker exec link<span class=\"token operator\">-</span>nasa curl web<span class=\"token operator\">-</span>nasa\n<span class=\"token operator\">%</span> Total    <span class=\"token operator\">%</span> Received <span class=\"token operator\">%</span> Xferd  Average Speed   Time    Time     Time  Current\n                                Dload  Upload   Total   Spent    Left  Speed\n<span class=\"token number\">100</span>    <span class=\"token number\">45</span>  <span class=\"token number\">100</span>    <span class=\"token number\">45</span>    <span class=\"token number\">0</span>     <span class=\"token number\">0</span>  <span class=\"token number\">45000</span>      <span class=\"token number\">0</span> <span class=\"token operator\">--</span><span class=\"token punctuation\">:</span><span class=\"token operator\">--</span><span class=\"token punctuation\">:</span><span class=\"token operator\">--</span> <span class=\"token operator\">--</span><span class=\"token punctuation\">:</span><span class=\"token operator\">--</span><span class=\"token punctuation\">:</span><span class=\"token operator\">--</span> <span class=\"token operator\">--</span><span class=\"token punctuation\">:</span><span class=\"token operator\">--</span><span class=\"token punctuation\">:</span><span class=\"token operator\">--</span> <span class=\"token number\">45000</span>\n<span class=\"token operator\">&lt;</span>html<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>It works<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span></code></pre></div>\n<br/>\n</li>\n<li>\n<p><code class=\"language-text\">link-nasa</code> 서버가 <code class=\"language-text\">web-nasa</code>라는 이름으로 통신할 수 있는 이유는</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker exec link<span class=\"token operator\">-</span>nasa cat <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>hosts\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>\tlocalhost\n<span class=\"token punctuation\">::</span><span class=\"token number\">1</span>\tlocalhost ip6<span class=\"token operator\">-</span>localhost ip6<span class=\"token operator\">-</span><span class=\"token class-name\">loopback</span>\nfe00<span class=\"token punctuation\">::</span><span class=\"token number\">0</span>\tip6<span class=\"token operator\">-</span><span class=\"token class-name\">localnet</span>\nff00<span class=\"token punctuation\">::</span><span class=\"token number\">0</span>\tip6<span class=\"token operator\">-</span><span class=\"token class-name\">mcastprefix</span>\nff02<span class=\"token punctuation\">::</span><span class=\"token number\">1</span>\tip6<span class=\"token operator\">-</span><span class=\"token class-name\">allnodes</span>\nff02<span class=\"token punctuation\">::</span><span class=\"token number\">2</span>\tip6<span class=\"token operator\">-</span>allrouters\n<span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.2</span>\tweb<span class=\"token operator\">-</span>nasa 7881267cb8e1\n<span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.3</span>\t9e8f15588f0f</code></pre></div>\n<p>다음과 같이 <code class=\"language-text\">/etc/hosts</code> 파일에 별칭이 정의되어 있기 때문이다.</p>\n<br/>\n</li>\n<li>\n<p>추가적으로 특정 <code class=\"language-text\">별칭</code>으로 정의하여 컨테이너의 <code class=\"language-text\">링크</code>를 만들 수도 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker run <span class=\"token operator\">-</span>itd <span class=\"token operator\">--</span>name link<span class=\"token operator\">-</span><span class=\"token keyword\">alias</span> <span class=\"token operator\">--</span>link web<span class=\"token operator\">-</span>nasa<span class=\"token punctuation\">:</span><span class=\"token class-name\">nasa1515</span> centos<span class=\"token punctuation\">:</span>latest\nee50a1bd8ce3ac947c04cec526f3f5b7950e5ecd67fa99e211cc0b155def7fb7\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker ps <span class=\"token operator\">|</span> grep link<span class=\"token operator\">-</span><span class=\"token keyword\">alias</span>\n<span class=\"token class-name\">ee50a1bd8ce3</span>        centos<span class=\"token punctuation\">:</span>latest       <span class=\"token string\">\"/bin/bash\"</span>          <span class=\"token number\">9</span> seconds ago       Up <span class=\"token number\">8</span> seconds                            link<span class=\"token operator\">-</span><span class=\"token keyword\">alias</span>\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\n\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker exec link<span class=\"token operator\">-</span><span class=\"token keyword\">alias</span> curl nasa1515\n<span class=\"token operator\">%</span> Total    <span class=\"token operator\">%</span> Received <span class=\"token operator\">%</span> Xferd  Average Speed   Time    Time     Time  Current\n                                Dload  Upload   Total   Spent    Left  Speed\n<span class=\"token number\">100</span>    <span class=\"token number\">45</span>  <span class=\"token number\">100</span>    <span class=\"token number\">45</span>    <span class=\"token number\">0</span>     <span class=\"token number\">0</span>  <span class=\"token number\">45000</span>      <span class=\"token number\">0</span> <span class=\"token operator\">--</span><span class=\"token punctuation\">:</span><span class=\"token operator\">--</span><span class=\"token punctuation\">:</span><span class=\"token operator\">--</span> <span class=\"token operator\">--</span><span class=\"token punctuation\">:</span><span class=\"token operator\">--</span><span class=\"token punctuation\">:</span><span class=\"token operator\">--</span> <span class=\"token operator\">--</span><span class=\"token punctuation\">:</span><span class=\"token operator\">--</span><span class=\"token punctuation\">:</span><span class=\"token operator\">--</span> <span class=\"token number\">45000</span>\n<span class=\"token operator\">&lt;</span>html<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>It works<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span>\n\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker exec link<span class=\"token operator\">-</span><span class=\"token keyword\">alias</span> cat <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>hosts\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>\tlocalhost\n<span class=\"token punctuation\">::</span><span class=\"token number\">1</span>\tlocalhost ip6<span class=\"token operator\">-</span>localhost ip6<span class=\"token operator\">-</span><span class=\"token class-name\">loopback</span>\nfe00<span class=\"token punctuation\">::</span><span class=\"token number\">0</span>\tip6<span class=\"token operator\">-</span><span class=\"token class-name\">localnet</span>\nff00<span class=\"token punctuation\">::</span><span class=\"token number\">0</span>\tip6<span class=\"token operator\">-</span><span class=\"token class-name\">mcastprefix</span>\nff02<span class=\"token punctuation\">::</span><span class=\"token number\">1</span>\tip6<span class=\"token operator\">-</span><span class=\"token class-name\">allnodes</span>\nff02<span class=\"token punctuation\">::</span><span class=\"token number\">2</span>\tip6<span class=\"token operator\">-</span>allrouters\n<span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.2</span>\tnasa1515 7881267cb8e1 web<span class=\"token operator\">-</span>nasa\n<span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.4</span>\tee50a1bd8ce3</code></pre></div>\n<p>위와 같이 <code class=\"language-text\">link-alias</code>라는 이름의 컨테이너를 생성할때<br>\n<code class=\"language-text\">web-nasa</code>서버의 별칭을 <code class=\"language-text\">nasa1515</code>로 설정해주었을때 정상적으로 동작함을 확인 할 수 있습니다.<br>\n링크를 걸 경우 자동적으로 hosts에 등록이 됩니다.</p>\n</li>\n</ul>\n<br/>\n<hr>\n<h3 id=\"link-방식의-한계\" style=\"position:relative;\"><a href=\"#link-%EB%B0%A9%EC%8B%9D%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"link 방식의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LINK 방식의 한계</h3>\n<p>동적 IP에 따른 이슈를 피하기 위해선 LINK 기능을 이용해야 합니다.<br>\n하지만 LINK 방식만으로는 여전히 한계가 있습니다.   </p>\n<p>동일 docker host 에 존재하는 컨테이너들 사이에서만 유효하다.<br>\n(만약 다수의 docker host를 운영할 경우에 타 host에 상주하는 컨테이너 사이에는 link 옵션 이용이 불가하다.)</p>\n<p>이유는 컨테이너의 hosts 파일의 관리를 docker host가 직접 수행하기 때문이다. </p>\n<p>이러한 이슈를 해결하고 싶은 경우에는<br>\ndocker swarm 같은 orchestration 툴을 도입하거나 dynamic DNS 를 구축해 사용해야 합니다</p>\n<br/>\n<hr>\n<h2 id=\"-port-forwarding\" style=\"position:relative;\"><a href=\"#-port-forwarding\" aria-label=\" port forwarding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎉 PORT FORWARDING</h2>\n<ul>\n<li>Container Port 외부 expose(Port Forwarding)<br>\n브릿지 네트워크를 사용하는 컨테이너를 생성하면 기본적으로 외부와 통신이 불가능한 상태로 생성됩니다.<br>\n따라서 외부와 통신을 위해서는 <code class=\"language-text\">Port Forwarding</code>이 필요하다. 방법은 container 를 생성할때 <code class=\"language-text\">-p option</code>을 이용하면 됩니다. </li>\n<li>\n<p><code class=\"language-text\">pf-nasa-web</code>이라는 컨테이너의 80포트를 포드포워딩하여 생성해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker run <span class=\"token operator\">-</span>itd <span class=\"token operator\">--</span>name pf<span class=\"token operator\">-</span>nasa<span class=\"token operator\">-</span>web <span class=\"token operator\">-</span>p <span class=\"token number\">8080</span><span class=\"token punctuation\">:</span><span class=\"token number\">80</span> httpd<span class=\"token punctuation\">:</span>latest\n2411f635aaef7a70caa0a09ee14289c48de71187ef375dda84d29219c5b56737\nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ \nnasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ docker ps <span class=\"token operator\">-</span>a <span class=\"token operator\">|</span> grep pf\n2411f635aaef        httpd<span class=\"token punctuation\">:</span>latest        <span class=\"token string\">\"httpd-foreground\"</span>   <span class=\"token number\">7</span> seconds ago       Up <span class=\"token number\">6</span> seconds                <span class=\"token number\">0.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span><span class=\"token punctuation\">:</span><span class=\"token number\">8080</span><span class=\"token operator\">-></span><span class=\"token number\">80</span><span class=\"token operator\">/</span>tcp   pf<span class=\"token operator\">-</span>nasa<span class=\"token operator\">-</span>web</code></pre></div>\n<p>호스트의 8080포트에 접속했을때 80포트로 접속할 수 있도록 포트포워딩이 됨을 확인할 수 있습니다</p>\n<br/>\n</li>\n<li>\n<p>HOST 서버의 8080포트로 <code class=\"language-text\">curl</code> 명령을 사용하면 정상적으로 받아온다</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ <span class=\"token class-name\">curl</span> localhost<span class=\"token punctuation\">:</span><span class=\"token number\">8080</span>\n<span class=\"token operator\">&lt;</span>html<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>It works<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span></code></pre></div>\n<br/>\n</li>\n<li>\n<p>HOST 서버의 8080포트의 연결을 확인해보면 <code class=\"language-text\">docker-proxy</code>라는 이름의 프로세스로 매칭되어있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ sudo netstat <span class=\"token operator\">-</span>anp <span class=\"token operator\">|</span> grep <span class=\"token number\">8080</span>\ntcp6       <span class=\"token number\">0</span>      <span class=\"token number\">0</span> <span class=\"token punctuation\">::</span><span class=\"token punctuation\">:</span><span class=\"token number\">8080</span>                 <span class=\"token punctuation\">::</span><span class=\"token punctuation\">:</span><span class=\"token operator\">*</span>                    LISTEN      <span class=\"token number\">13380</span><span class=\"token operator\">/</span>docker<span class=\"token operator\">-</span>proxy</code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"🤳-docker-proxy\" style=\"position:relative;\"><a href=\"#%F0%9F%A4%B3-docker-proxy\" aria-label=\"🤳 docker proxy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤳 Docker-Proxy</h2>\n<p> 위에서 확인한 것처럼 포트포워딩을 하게되면 <code class=\"language-text\">docker-proxy</code>라는 프로세스가 매칭됩니다.<br>\n이 프로세스의 목적은 그 이름처럼 docker host 로 들어온 요청을 container 로 넘기는 것 뿐입니다.<br>\ndocker-proxy 는 kernel이 아닌 userland 에서 수행되기 때문에 kernel 과 상관없이 host가 받은 패킷을 그대로 container의 port로 넘겨줍니다. </p>\n<br/>\n<ul>\n<li>\n<p>container 를 시작할때 port를 외부로 노출하도록 설정하게 되면,<br>\ndocker host에는 docker-proxy 라는 프로세스가 생성되게 됩니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">nasa1515@nasa<span class=\"token punctuation\">:</span><span class=\"token operator\">~</span>$ ps <span class=\"token operator\">-</span>ef <span class=\"token operator\">|</span> grep docker<span class=\"token operator\">-</span>proxy\nroot     <span class=\"token number\">13380</span>  <span class=\"token number\">1985</span>  <span class=\"token number\">0</span> <span class=\"token number\">12</span><span class=\"token punctuation\">:</span><span class=\"token number\">03</span> <span class=\"token punctuation\">?</span>        <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span> <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>docker<span class=\"token operator\">-</span>proxy <span class=\"token operator\">-</span>proto tcp <span class=\"token operator\">-</span>host<span class=\"token operator\">-</span>ip <span class=\"token number\">0.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span> <span class=\"token operator\">-</span>host<span class=\"token operator\">-</span>port <span class=\"token number\">8080</span> <span class=\"token operator\">-</span>container<span class=\"token operator\">-</span>ip <span class=\"token number\">172.17</span><span class=\"token number\">.0</span><span class=\"token number\">.2</span> <span class=\"token operator\">-</span>container<span class=\"token operator\">-</span>port <span class=\"token number\">80</span>\nstudent  <span class=\"token number\">13856</span> <span class=\"token number\">26014</span>  <span class=\"token number\">0</span> <span class=\"token number\">12</span><span class=\"token punctuation\">:</span><span class=\"token number\">13</span> pts<span class=\"token operator\">/</span><span class=\"token number\">2</span>    <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span> grep docker<span class=\"token operator\">-</span>proxy</code></pre></div>\n<ul>\n<li>proxy 프로세스는 container의 port를 노출하도록 설정한 수 만큼 추가로 프로세스가 생성됩니다 (run process per port).  </li>\n<li>만약 하나의 Port를 오픈하는 두개의 Container를 생성합니다면 docker-proxy는 두개가 생성됩니다.  </li>\n<li>또한, 한개의 container 에 두개의 port 에 대해 외부로 노출하도록 설정합니다면, 마찬가지로 docker-proxy 프로세스는 <code class=\"language-text\">두개</code>가 생성됩니다.</li>\n</ul>\n<br/>\n</li>\n<li>\n<p>docker-proxy 를 사용하는 이유  </p>\n<p> <code class=\"language-text\">docker-proxy</code>가 존재하는 가장 큰 이유는<br>\ndocker host가 iptables 의 NAT를 사용하지 못하는 상황에 대한 처리이다.<br>\n만약 정책상의 이유로 docker host의 iptables 나 ip_forward 를 enable 하지 못하는 경우에는<br>\ndocker-proxy 프로세스가 패킷을 포워딩하는 역할을 대신하게 됩니다. </p>\n<p>그래서 실제로 docker host로 요청이 들어온 패킷이 container 로 전달되는 것은<br>\ndocker-proxy 와 무관하게 docker host의 iptables 에 의해 동작됩니다. </p>\n<p> 즉, docker-proxy 프로세스를 kill 해도 외부에서 들어오는 요청이<br>\ncontainer로 전달되는데 문제가 없다는 의미입니다.</p>\n</li>\n</ul>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-macvlan\">✔ MACVLAN</a></p>\n<ul>\n<li><a href=\"#macvlan-driver-%EA%B5%AC%EC%A1%B0\">MACVLAN Driver 구조</a></li>\n<li><a href=\"#macvlan-%EA%B5%AC%EB%8F%99-%EB%B0%A9%EC%8B%9D\">MACVLAN 구동 방식</a></li>\n</ul>\n</li>\n<li><a href=\"#-macvlan-%EC%84%A4%EC%A0%95\">✌ MACVLAN 설정</a></li>\n<li>\n<p><a href=\"#%F0%9F%A4%9E-link\">🤞 LINK</a></p>\n<ul>\n<li><a href=\"#link%EB%A5%BC-%EC%93%B0%EB%8A%94-%EC%A0%95%ED%99%95%ED%95%9C-%EC%9D%B4%EC%9C%A0\">LINK를 쓰는 정확한 이유</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-link-%EC%84%A4%EC%A0%95\">👍 LINK 설정</a></p>\n<ul>\n<li><a href=\"#link-%EB%B0%A9%EC%8B%9D%EC%9D%98-%ED%95%9C%EA%B3%84\">LINK 방식의 한계</a></li>\n</ul>\n</li>\n<li><a href=\"#-port-forwarding\">🎉 PORT FORWARDING</a></li>\n<li><a href=\"#%F0%9F%A4%B3-docker-proxy\">🤳 Docker-Proxy</a></li>\n</ul>\n</div>","frontmatter":{"date":"June 26, 2021","title":"[DOCKER] - MACVLAN, LINK","categories":"DOCKER","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/docker-net2/"}},"site":{"siteMetadata":{"siteUrl":"https://nasa1515.com","comments":{"utterances":{"repo":"nasa1515/nasablog"}}}}},"pageContext":{"slug":"/docker-network/","nextSlug":"/docker-image/","prevSlug":"/docker-net2/"}},"staticQueryHashes":["1073350324","2938748437"]}