{"componentChunkName":"component---src-templates-blog-template-js","path":"/azure-vpn/","result":{"data":{"cur":{"id":"8423ce2e-c37b-515c-b8d2-8edf65d06e70","html":"<p>머리말  </p>\n<p>앞서서 Azure의 많은 기능들을 설명했지만 주관적으로 인프라 엔지니어에게 제일 중요한 부분은<br>\n이번 포스트에서 진행할 Gateway 부분인 것 같습니다.!  </p>\n<hr>\n<h2 id=\"-virtual-network-gateway---vpn\" style=\"position:relative;\"><a href=\"#-virtual-network-gateway---vpn\" aria-label=\" virtual network gateway   vpn permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ Virtual Network Gateway - VPN</h2>\n<p>Azure에서 VPN(Virtual Private Network)를 사용하는 경우는 다음과 같습니다.</p>\n<ul>\n<li>S2S (Site-to-Site) : 가상네트워크와 On-Premise 네트워크를 연결하는 VPN, VPNgw와 LocalGW가 필요  </li>\n<li>P2S (Point-to-Site) : 가상네트워크와 개별 디바이스를 연결하는 VPN, VPNgw와 ClientVpn 필요.</li>\n<li>Vnet-Vnet : 서로 다른 지역이나, 구독에 있는 Azure Vnet을 연결, Peering, VpnGW를 이용  </li>\n</ul>\n<br/>\n<ul>\n<li>\n<h4 id=\"아래-그림을-보면-쉽게-위에서-설명한-vpn-종류의-차이를-파악-할-수-있습니다\" style=\"position:relative;\"><a href=\"#%EC%95%84%EB%9E%98-%EA%B7%B8%EB%A6%BC%EC%9D%84-%EB%B3%B4%EB%A9%B4-%EC%89%BD%EA%B2%8C-%EC%9C%84%EC%97%90%EC%84%9C-%EC%84%A4%EB%AA%85%ED%95%9C-vpn-%EC%A2%85%EB%A5%98%EC%9D%98-%EC%B0%A8%EC%9D%B4%EB%A5%BC-%ED%8C%8C%EC%95%85-%ED%95%A0-%EC%88%98-%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4\" aria-label=\"아래 그림을 보면 쉽게 위에서 설명한 vpn 종류의 차이를 파악 할 수 있습니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>아래 그림을 보면 쉽게 위에서 설명한 VPN 종류의 차이를 파악 할 수 있습니다.</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107910006-dd1a4600-6f9c-11eb-9865-fcaebda388bb.jpg\" alt=\"22222\"></p>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-vnet-vnet-vpngw-생성-실습\" style=\"position:relative;\"><a href=\"#-vnet-vnet-vpngw-%EC%83%9D%EC%84%B1-%EC%8B%A4%EC%8A%B5\" aria-label=\" vnet vnet vpngw 생성 실습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ VNET-VNET VpnGW 생성 실습</h2>\n<p>이번 실습에서는 다른 RG의 다른 Resource를 가지고 있는 VM을 VpnGW로 통신을 해보겠습니다.  </p>\n<h3 id=\"각-rg의-생성-resource-정보\" style=\"position:relative;\"><a href=\"#%EA%B0%81-rg%EC%9D%98-%EC%83%9D%EC%84%B1-resource-%EC%A0%95%EB%B3%B4\" aria-label=\"각 rg의 생성 resource 정보 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 RG의 생성 Resource 정보</h3>\n<br/>\n<ul>\n<li>\n<p>RG-VPN01 </p>\n<ul>\n<li>VM01</li>\n<li>Vnet01 (East US) - IP : 10.1.0.0/16 / Subnet : 10.1.0.0/24</li>\n<li>VnetGW01 - IP : 10.1.255.0/27 / PIP -(PIP-VnetGW01)</li>\n</ul>\n</li>\n<li>\n<p>RG-VPN99 </p>\n<ul>\n<li>VM99</li>\n<li>Vnet99 (East Asia) - IP : 10.41.0.0/16 / Subnet : 10.41.0.0/24</li>\n<li>VnetGW99 - IP : 10.41.255.0/27 / PIP -(PIP-VnetGW99)</li>\n</ul>\n</li>\n</ul>\n<br/>\n<hr>\n<h3 id=\"vnet-생성\" style=\"position:relative;\"><a href=\"#vnet-%EC%83%9D%EC%84%B1\" aria-label=\"vnet 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vnet 생성</h3>\n<p>각각의 RG 그룹에 위의 정보에 맞게 Vnet Resource를 생성합니다.  </p>\n<br/>\n<p>VM01의 Vnet</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107916501-b9113180-6fa9-11eb-8ea6-4e5bfe2386ca.JPG\" alt=\"캡처555\"></p>\n<br/>\n<br/>\n<p>VM99의 Vnet</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107916575-d8a85a00-6fa9-11eb-9b64-9861a43c21cd.JPG\" alt=\"캡처666\"></p>\n<br/>\n<hr>\n<h3 id=\"virtual-network-gateway-생성\" style=\"position:relative;\"><a href=\"#virtual-network-gateway-%EC%83%9D%EC%84%B1\" aria-label=\"virtual network gateway 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Virtual Network Gateway 생성</h3>\n<p>Vnet과 동일하게 각각의 RG 그룹에 위의 정보에 맞게 Gateway 를 생성합니다.  </p>\n<br/>\n<p>VM01의 Gateway </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107916831-4a80a380-6faa-11eb-84e4-2a5150e35b32.JPG\" alt=\"캡처777\"></p>\n<br/>\n<br/>\n<p>VM99의 Gateway </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107916889-66844500-6faa-11eb-94cf-ad2a420f1f26.JPG\" alt=\"캡처888\"></p>\n<br/>\n<hr>\n<h3 id=\"vnet---vnetgw-연결-구성\" style=\"position:relative;\"><a href=\"#vnet---vnetgw-%EC%97%B0%EA%B2%B0-%EA%B5%AC%EC%84%B1\" aria-label=\"vnet   vnetgw 연결 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vnet &#x3C;-> VnetGW 연결 구성</h3>\n<p>위에 진행한대로 VNet, VnetGW를 모두 생성했으면 이제 connection을 만들 수 있습니다.<br>\n지금 진행하는 과정은 동일한 구독에 있는 Vnet Resource 에 대해서만 작동하기 때문에.<br>\n만약 생성한 Vnet이 다른 구독에 있는 경우엔 PowerShell 을 이용해 연결 해야 합니다.<br>\n그러나 지금 같이 VNet이 동일한 구독의 다른 RG인 경우 포털을 사용하여 연결할 수 있습니다.<br>\n그럼 이제 VNet1과 VNet2에 connection 만들겠습니다.  </p>\n<br/>\n<p>Connection 생성 [생성한 GW01의 Connections Blade에 Add] </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107913101-1c4b9580-6fa3-11eb-845f-f556f6c449aa.JPG\" alt=\"캡처44\"></p>\n<br/>  \n<br/>\n<p>Connection Create Blade에서 Second VnetGW 설정 </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107917614-8d8f4680-6fab-11eb-9ac8-b072666ab650.JPG\" alt=\"캡처89999\"></p>\n<ul>\n<li>Second Virtual network gateway : 연결 할 VnetGW </li>\n<li>PSK : 연결에 사용할 공유 키</li>\n</ul>\n<br/>  \n<br/>\n<p>Second Virtual Network gateway tab에서 다음과 같이 VM99를 선택해 추가합니다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107917758-cc250100-6fab-11eb-92ec-e04ef6c6eb15.JPG\" alt=\"캡처9999\"></p>\n<br/>  \n<br/>\n<ul>\n<li>\n<h3 id=\"위와-동일한-방법으로-vm99의-vnetgw에도-connection을-추가해줍니다\" style=\"position:relative;\"><a href=\"#%EC%9C%84%EC%99%80-%EB%8F%99%EC%9D%BC%ED%95%9C-%EB%B0%A9%EB%B2%95%EC%9C%BC%EB%A1%9C-vm99%EC%9D%98-vnetgw%EC%97%90%EB%8F%84-connection%EC%9D%84-%EC%B6%94%EA%B0%80%ED%95%B4%EC%A4%8D%EB%8B%88%EB%8B%A4\" aria-label=\"위와 동일한 방법으로 vm99의 vnetgw에도 connection을 추가해줍니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>위와 동일한 방법으로 VM99의 VnetGW에도 Connection을 추가해줍니다.</h3>\n</li>\n</ul>\n<br/>  \n<br/>\n<p>모든 Connection 을 추가 한 뒤 Status를 확인해보면 다음과 같이 Connected로 연결됩니다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107918407-f3300280-6fac-11eb-806a-5266f5628f45.JPG\" alt=\"캡처99879897\"></p>\n<br/>  \n<br/>\n<p>Connection 1에 들어가 자세한 정보를 확인해봅시다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107918531-325e5380-6fad-11eb-9ac0-00c560701e6e.JPG\" alt=\"캡처222\"></p>\n<ul>\n<li>Virtual network gateway 1에는 VM01에 해당하는 VnetGW가 연결 되어있고</li>\n<li>Virtual network gateway 2에는 VM99에 해당하는 VnetGW가 연결 되어 있습니다.</li>\n<li>Data in : 들어온 Data가 없어 0으로 표시됩니다. </li>\n</ul>\n<br/>\n<hr>\n<h3 id=\"간단하게-vm01---vm99로-pingigmp-test를-해봅시다\" style=\"position:relative;\"><a href=\"#%EA%B0%84%EB%8B%A8%ED%95%98%EA%B2%8C-vm01---vm99%EB%A1%9C-pingigmp-test%EB%A5%BC-%ED%95%B4%EB%B4%85%EC%8B%9C%EB%8B%A4\" aria-label=\"간단하게 vm01   vm99로 pingigmp test를 해봅시다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>간단하게 VM01 -> VM99로 Ping(IGMP) TEST를 해봅시다.!!</h3>\n<br/>  \n<p>VM01 (10.1.0.4)에 접속한 뒤 VM99의 IP인 10.41.0.4으로 Ping!</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107920087-b0bbf500-6faf-11eb-9b63-d2099dc0b17a.JPG\" alt=\"캡처232323\"></p>\n<p>정상적으로 다른 RG, Region, IP 대역과 통신이 되는 것을 확인합니다!! </p>\n<br/>  \n<br/>\n<p>추가적으로 VnetGW01에서 Data in, Out에도 IGMP Packet 만큼의 로그가 찍히게 됩니다.  </p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107920205-e82aa180-6faf-11eb-92ff-99e3582a0b28.JPG\" alt=\"캡처2222\"></p>\n<br/>\n<hr>\n<h2 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며…</h2>\n<p>간단하게 VNET-VNET 연결에 대해서만 실습을 진행해봤습니다.<br>\n아마 on-premise 프로젝트를 하게 된다면 S2S도 많이 사용 할 것 같지만<br>\n현재로서는 그렇게 필요성을 느끼지 못해서 실습은 정리하지 않았습니다!</p>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-virtual-network-gateway---vpn\">✔ Virtual Network Gateway - VPN</a></li>\n<li>\n<p><a href=\"#-vnet-vnet-vpngw-%EC%83%9D%EC%84%B1-%EC%8B%A4%EC%8A%B5\">✌ VNET-VNET VpnGW 생성 실습</a></p>\n<ul>\n<li><a href=\"#%EA%B0%81-rg%EC%9D%98-%EC%83%9D%EC%84%B1-resource-%EC%A0%95%EB%B3%B4\">각 RG의 생성 Resource 정보</a></li>\n<li><a href=\"#vnet-%EC%83%9D%EC%84%B1\">Vnet 생성</a></li>\n<li><a href=\"#virtual-network-gateway-%EC%83%9D%EC%84%B1\">Virtual Network Gateway 생성</a></li>\n<li><a href=\"#vnet---vnetgw-%EC%97%B0%EA%B2%B0-%EA%B5%AC%EC%84%B1\">Vnet &#x3C;-> VnetGW 연결 구성</a></li>\n<li><a href=\"#%EA%B0%84%EB%8B%A8%ED%95%98%EA%B2%8C-vm01---vm99%EB%A1%9C-pingigmp-test%EB%A5%BC-%ED%95%B4%EB%B4%85%EC%8B%9C%EB%8B%A4\">간단하게 VM01 -> VM99로 Ping(IGMP) TEST를 해봅시다.!!</a></li>\n</ul>\n</li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며…</a></li>\n</ul>\n</div>","excerpt":"머리말   앞서서 Azure의 많은 기능들을 설명했지만 주관적으로 인프라 엔지니어에게 제일 중요한 부분은 이번 포스트에서 진행할 Gateway 부분인 것 같습니다.!   ✔ Virtual Network Gateway - VPN Azure에서 VPN(Virtual Private Network)를 사용하는 경우는 다음과 같습니다. S2S (Site-to-Site) : 가상네트워크와 On-Premise 네트워크를 연결하는 VPN, VPNgw와 LocalGW가 필요   P2S (Point-to-Site) : 가상네트워크와 개별 디바이스를 연결하는 VPN, VPNgw와 ClientVpn 필요. Vnet-Vnet : 서로 다른 …","frontmatter":{"date":"August 01, 2021","title":"[AZURE] Virtual Network Gateway - VPN","categories":"AZURE","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/azure-vpn/"}},"next":{"id":"8b1ce3f4-20d2-5327-bc8f-2521eb281304","html":"<p>머리말  </p>\n<p>VMSS는 제가 기존에 하던 IDC 업무를 그만두고 Cloud를 하게 만든 기술입니다.<br>\nVMSS는 앞 포스트에서 진행했던 scale-Up &#x26; Down 처럼 미리 프로비전할 필요없이<br>\n자동적으로 프로비전되어 고가용성을 제공합니다.  </p>\n<hr>\n<h2 id=\"-가상-머신-확장-집합-vmss\" style=\"position:relative;\"><a href=\"#-%EA%B0%80%EC%83%81-%EB%A8%B8%EC%8B%A0-%ED%99%95%EC%9E%A5-%EC%A7%91%ED%95%A9-vmss\" aria-label=\" 가상 머신 확장 집합 vmss permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ 가상 머신 확장 집합 (VMSS)</h2>\n<br/>\n<h3 id=\"vmss를-사용하는-이유\" style=\"position:relative;\"><a href=\"#vmss%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"vmss를 사용하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VMSS를 사용하는 이유?</h3>\n<p>예를 들어 같은 역할을 하는 VM이 적게는 수십에서 많게는 수백대가 필요한 상황이 있을 수 있습니다.<br>\n규모가 큰 인프라를 운영하거나, 평소에는 적은 수의 VM 이었다, 갑자기 많은 수의 VM으로 확장해<br>\n사용해야 하는 애플리케이션도 있구요. (명절의 KTX, 블랙 프라이데이의 Amazon 등등)<br>\n이렇게 VM 갯수가 많아지게 된다면 당연히 관리의 문제가 생기게 되는데<br>\n한번에 만드는건 PowerShell이나 Cli, Terraform등을 이용해서 가능하기도 하지만<br>\n결국 그 IAC를 짜는 것도 사람이기에…\nVM의 Update, (Auto scale) 등 관리요소가 많아지고 스크립트의 갯수도 늘어납니다.<br>\n이런 상황에 사용하는 것이 Azure Virtual Machine scale Set (VMSS)입니다.  </p>\n<br/>\n<h3 id=\"주로-어떤-때-vmss를-사용하게-될까\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EB%A1%9C-%EC%96%B4%EB%96%A4-%EB%95%8C-vmss%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B2%8C-%EB%90%A0%EA%B9%8C\" aria-label=\"주로 어떤 때 vmss를 사용하게 될까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주로 어떤 때 VMSS를 사용하게 될까?</h3>\n<p>대표적으로 많이 쓰이는 두가지 예를 들어보자</p>\n<ol>\n<li>\n<p>여러 VM을 손쉽게 생성하고 관리할 때  </p>\n<p>VMSS는 최대 1,000개의 VM 인스턴스를 지원합니다. (Custom Image의 경우 600개)  </p>\n</li>\n</ol>\n<br/>\n<ol start=\"2\">\n<li>\n<p>리소스(트래픽) 변화에 따라 자동으로 애플리케이션 크기 조정이 필요할 때  </p>\n<p>Auto scale 기능을 지원하여 인스턴스의 성능 메트릭 기반으로 자동 조정됩니다.  </p>\n</li>\n</ol>\n<br/>\n<h3 id=\"vmss의-대표적-특징-요약\" style=\"position:relative;\"><a href=\"#vmss%EC%9D%98-%EB%8C%80%ED%91%9C%EC%A0%81-%ED%8A%B9%EC%A7%95-%EC%9A%94%EC%95%BD\" aria-label=\"vmss의 대표적 특징 요약 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VMSS의 대표적 특징 요약</h3>\n<ul>\n<li>최대 1000개의 VM 생성</li>\n<li>Custom VM을 이용하여 생성 가능 (Custom VM 이미지의 경우 600대가 최대)</li>\n<li>서비스 중지 없이 업데이트 가능(Rolling Update)</li>\n<li>동적으로 VM 인스턴스 갯수를 관리하여 비용 절감</li>\n<li>Auto Scale: 특정 조건에서 VM 개수를 자동으로 증가/감소</li>\n<li>Azure Load Balancer와 통합 (100대 이하)</li>\n<li>VMSS 전체 VM을 대상으로 Auto Scale, 업데이트가 가능하다.<br>\n개별 VM을 새로운 이미지로 업데이트하거나 자동 크기조정을 할 수는 없다.</li>\n<li>Managed Disk를 사용하는 것이 유리하다.</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-오버프로비전overprovision\" style=\"position:relative;\"><a href=\"#-%EC%98%A4%EB%B2%84%ED%94%84%EB%A1%9C%EB%B9%84%EC%A0%84overprovision\" aria-label=\" 오버프로비전overprovision permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ 오버프로비전(OverProvision)</h2>\n<p>VMSS에서 Auto-Scale의 크기 조정의 개념과 같이 익혀야 할 게 오버프로비전입니다.  </p>\n<p>간단히 VM을 만들어 내는 걸 Provisioning이라고 합니다.<br>\n앞에서 배운 개념대로 보면 SSD를 가진 하나의 VM은 SLA 99.5%를 가지게 됩니다.<br>\n이걸 10대 생성한다면 (99.5)^10 = 95%, 100대면 (99.5)^100 = 60% 입니다.<br>\n이론적으로 VM 생성이 실패 할 확률이 높아지는 것이고 실제로 큰 문제가 발생하진 않습니다.<br>\n하지만 실제로 일어날 가능성 조차 배제해야 하기에 OverProvision을 합니다.<br>\n단어 그대로 100를 만든다면 120대를 생성 요청하고 먼저 생성된 100의 VM만 남기는 식 입니다.<br>\n그러나 여기서 추가로 만들기 요청된 20대에 대해서는 비용이 청구되지 않습니다.  </p>\n<p>OverProvision은 기본값이 True이고 끌 수도 있습니다.<br>\n그럼 OverProvision을 사용하지 않을 때는 어떤 상황일까?  </p>\n<ul>\n<li>구독의 Core 제약이 걸렸을때</li>\n<li>Vnet의 Subnet 갯수가 적을때</li>\n</ul>\n<br/>\n<hr>\n<h3 id=\"vmss의-vnet\" style=\"position:relative;\"><a href=\"#vmss%EC%9D%98-vnet\" aria-label=\"vmss의 vnet permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VMSS의 Vnet</h3>\n<p>VMSS가 VM을 자동적으로 생성하지만 VM의 갯수가 많아지게 되면 네트워크에 문제가 있을 수도 있다.<br>\n이유는 VMSS가 생성한 VM들은 Vnet 하나의 Subnet안에 모두 생성 되기 때문이다.<br>\n문제란? 예를 들면, 실제로 300대를 생성해야 하는데 Subnet 설정이 10.0.0.0/24 (256개 영역)이라면?<br>\n당연히 host의 수가 부족하기 때문에 오류가 발생한다.<br>\n따라서 미리 가용범위 안의 Vnet과 Subnet을 계산하여 설계해놓고 VMSS에 할당 해야 합니다..  </p>\n<br>\n<p>더 자세한 내용은 만들면서 확인해봅시다!</p>\n<hr>\n<h2 id=\"-vmss-생성하기\" style=\"position:relative;\"><a href=\"#-vmss-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\" vmss 생성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎉 VMSS 생성하기</h2>\n<br/>\n<ul>\n<li>\n<h3 id=\"loadbalancer-생성하기\" style=\"position:relative;\"><a href=\"#loadbalancer-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"loadbalancer 생성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LoadBalancer 생성하기</h3>\n<p>VMSS를 사용하기 위해서는 LB는 Default로 필요합니다. (메트릭 분산 용)</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107487934-0d8f6800-6bca-11eb-88c1-194f4a322495.JPG\" alt=\"캡처2222\"></p>\n</li>\n</ul>\n<br/>\n<br/>\n<ul>\n<li>\n<h3 id=\"vmss-집합-생성하기\" style=\"position:relative;\"><a href=\"#vmss-%EC%A7%91%ED%95%A9-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"vmss 집합 생성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VMSS (집합) 생성하기</h3>\n<p>Create a Resource -> Scale Set 검색 후 생성</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107488742-1f253f80-6bcb-11eb-95f5-aa1cb3a6c2f7.JPG\" alt=\"캡처4444\"></p>\n<ul>\n<li>Image : Market Place에 올려져 있는 이미지와 Custom한 이미지 모두 사용 가능</li>\n</ul>\n</li>\n</ul>\n<br/>\n<br/>\n<ul>\n<li>\n<h4 id=\"network-설정에서-lb-tab에서-yes를-선택해-부하분산-장치-뒤에-위치하게-합니다\" style=\"position:relative;\"><a href=\"#network-%EC%84%A4%EC%A0%95%EC%97%90%EC%84%9C-lb-tab%EC%97%90%EC%84%9C-yes%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%B4-%EB%B6%80%ED%95%98%EB%B6%84%EC%82%B0-%EC%9E%A5%EC%B9%98-%EB%92%A4%EC%97%90-%EC%9C%84%EC%B9%98%ED%95%98%EA%B2%8C-%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\"network 설정에서 lb tab에서 yes를 선택해 부하분산 장치 뒤에 위치하게 합니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Network 설정에서 LB Tab에서 YES를 선택해 부하분산 장치 뒤에 위치하게 합니다.</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107490107-c656a680-6bcc-11eb-8ebc-9e8870171f93.JPG\" alt=\"캡처6565\"></p>\n<ul>\n<li>Backend PooL : BackendPool-NASA1515 이름으로 새로 생성  </li>\n</ul>\n</li>\n</ul>\n<br/>\n<br/>\n<ul>\n<li>\n<h4 id=\"vmss-scale-설정에서-scale-설정을-진행합니다\" style=\"position:relative;\"><a href=\"#vmss-scale-%EC%84%A4%EC%A0%95%EC%97%90%EC%84%9C-scale-%EC%84%A4%EC%A0%95%EC%9D%84-%EC%A7%84%ED%96%89%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\"vmss scale 설정에서 scale 설정을 진행합니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VMSS Scale 설정에서 Scale 설정을 진행합니다.</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107490327-17669a80-6bcd-11eb-8b4b-0ab955139f09.JPG\" alt=\"캡처332322\"></p>\n<ul>\n<li>Initial instance Count : 최소 생성 VM의 갯수 </li>\n<li>Scaling policy : Manual (기본), Custom은 매트릭 값들을 설정할 수 있습니다.  </li>\n</ul>\n</li>\n</ul>\n<br/>\n<br/>\n<ul>\n<li>\n<h4 id=\"vmss가-만들어졌다면-다음과-같이-관리-되는-vm-2대를-확인-할-수-있습니다\" style=\"position:relative;\"><a href=\"#vmss%EA%B0%80-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A1%8C%EB%8B%A4%EB%A9%B4-%EB%8B%A4%EC%9D%8C%EA%B3%BC-%EA%B0%99%EC%9D%B4-%EA%B4%80%EB%A6%AC-%EB%90%98%EB%8A%94-vm-2%EB%8C%80%EB%A5%BC-%ED%99%95%EC%9D%B8-%ED%95%A0-%EC%88%98-%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4\" aria-label=\"vmss가 만들어졌다면 다음과 같이 관리 되는 vm 2대를 확인 할 수 있습니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VMSS가 만들어졌다면 다음과 같이 관리 되는 VM 2대를 확인 할 수 있습니다.</h4>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107490885-d0c57000-6bcd-11eb-867a-4bcc5a530fbd.JPG\" alt=\"캡처111111\"></p>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며…</h2>\n<p>기존에 AWS,GCP의 Auto scale 기능은 알고 있었지만 Azure의 VMSS는 조금 더 개념이 확고합니다.<br>\n기능 자체도 Auto scale만 가지고 있는게 아니라 VM을 묶어서 관리를 지원해준다는 개념이<br>\n조금 더 좋게 느껴집니다. VMSS는 계속 사용해보면서 고급 Option 설정이나 구성을 포스트 할 것 같습니다. </p>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EA%B0%80%EC%83%81-%EB%A8%B8%EC%8B%A0-%ED%99%95%EC%9E%A5-%EC%A7%91%ED%95%A9-vmss\">✔ 가상 머신 확장 집합 (VMSS)</a></p>\n<ul>\n<li><a href=\"#vmss%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\">VMSS를 사용하는 이유?</a></li>\n<li><a href=\"#%EC%A3%BC%EB%A1%9C-%EC%96%B4%EB%96%A4-%EB%95%8C-vmss%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B2%8C-%EB%90%A0%EA%B9%8C\">주로 어떤 때 VMSS를 사용하게 될까?</a></li>\n<li><a href=\"#vmss%EC%9D%98-%EB%8C%80%ED%91%9C%EC%A0%81-%ED%8A%B9%EC%A7%95-%EC%9A%94%EC%95%BD\">VMSS의 대표적 특징 요약</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EC%98%A4%EB%B2%84%ED%94%84%EB%A1%9C%EB%B9%84%EC%A0%84overprovision\">✌ 오버프로비전(OverProvision)</a></p>\n<ul>\n<li><a href=\"#vmss%EC%9D%98-vnet\">VMSS의 Vnet</a></li>\n</ul>\n</li>\n<li><a href=\"#-vmss-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\">🎉 VMSS 생성하기</a></li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며…</a></li>\n</ul>\n</div>","frontmatter":{"date":"August 01, 2021","title":"[AZURE] 가상 머신 확장 집합 (VMSS)","categories":"AZURE","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/azure-vmss/"}},"prev":{"id":"e909cd79-b60a-5a67-bb66-7ec30ec07158","html":"<p>머리말  </p>\n<p>지금까지는 Azure Portal에서만 PowerShell을 이용 했었습니다.<br>\n그러나 일일히 VM에 들어가고 인증하고 하는 과정들이 너무 불필요하게 느껴졌고<br>\n앞으로 IAC등을 사용할 예정이기에 VSCODE의 연동이 필요하다고 느꼈습니다. 그래서 이번 포스트는 VSCODE의 연동입니다.  </p>\n<p>본 포스트는 <code class=\"language-text\">Windows 10 Pro</code> 기반에서 시행되었습니다.</p>\n<hr>\n<h2 id=\"-1-visual-studiovs-code-설치\" style=\"position:relative;\"><a href=\"#-1-visual-studiovs-code-%EC%84%A4%EC%B9%98\" aria-label=\" 1 visual studiovs code 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ 1. Visual Studio(VS) Code 설치</h2>\n<p><a href=\"https://code.visualstudio.com/download\">VSCODE 페이지</a>로 이동하여 VS 코드를 설치합니다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107454972-52e37380-6b91-11eb-9bed-ca4ccdc70e9c.JPG\" alt=\"캡처33\"></p>\n<br/>\n<br/>\n<h2 id=\"-2-nodejs-설치\" style=\"position:relative;\"><a href=\"#-2-nodejs-%EC%84%A4%EC%B9%98\" aria-label=\" 2 nodejs 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👍 2. Node.js 설치</h2>\n<p><a href=\"https://nodejs.org/en/\">Nodejs 페이지</a>로 이동하여 Node.js를 설치합니다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107476689-b2ee1000-6bb9-11eb-96c5-35c821aab95f.JPG\" alt=\"캡처\"></p>\n<br/>\n<br/>\n<h2 id=\"-3-vscode-azure-account-extension-설치\" style=\"position:relative;\"><a href=\"#-3-vscode-azure-account-extension-%EC%84%A4%EC%B9%98\" aria-label=\" 3 vscode azure account extension 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ 3. VSCODE Azure Account extension 설치</h2>\n<ul>\n<li>\n<p>VSCODE의 Extension Tab에서 Azure Account를 설치합니다!</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107476968-3f98ce00-6bba-11eb-89a1-62c4f9f51d5a.JPG\" alt=\"캡처3\"></p>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-4-설치가-완료되었으면-명령-단축으로-이동합니다\" style=\"position:relative;\"><a href=\"#-4-%EC%84%A4%EC%B9%98%EA%B0%80-%EC%99%84%EB%A3%8C%EB%90%98%EC%97%88%EC%9C%BC%EB%A9%B4-%EB%AA%85%EB%A0%B9-%EB%8B%A8%EC%B6%95%EC%9C%BC%EB%A1%9C-%EC%9D%B4%EB%8F%99%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\" 4 설치가 완료되었으면 명령 단축으로 이동합니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>😉 4. 설치가 완료되었으면 명령 단축으로 이동합니다.</h2>\n<br>\n<p>shift + Ctrl + P 단축키로 접속해 Azure:Sign In을 선택</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107477160-9d2d1a80-6bba-11eb-891a-7ea787f34218.JPG\" alt=\"캡처444\"></p>\n<br>\n<br>\n<p>그 후 Azure 로그인 팝업 창이 발생하면 로그인합니다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107477294-d6658a80-6bba-11eb-9ce7-41b4f80949b4.JPG\" alt=\"555\"></p>\n<br>\n<br>\n<p>정상적으로 로그인이 되었다면 화면 왼쪽 하단에 로그인 ID가 보입니다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107477389-feed8480-6bba-11eb-9f97-ecb0e49b55c0.JPG\" alt=\"캡처4444\"></p>\n<br/>\n<br>\n<h2 id=\"-cloud-shell에-접속합니다\" style=\"position:relative;\"><a href=\"#-cloud-shell%EC%97%90-%EC%A0%91%EC%86%8D%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\" cloud shell에 접속합니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐱‍🏍 Cloud Shell에 접속합니다.</h2>\n<br>\n<p>로그인 완료 후 shift + Ctrl + P으로 Azure:Open PowerShell in Cloud Shell을 선택</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107477565-4b38c480-6bbb-11eb-9c77-18e53bbde690.JPG\" alt=\"캡처777\"></p>\n<br/>\n<br>\n<p>이후 터미널이 실행되고 Cloud Shell에 접속됩니다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/107477612-673c6600-6bbb-11eb-9045-49d9f19764b4.JPG\" alt=\"캡처5555\"></p>\n<br/>\n<hr>\n<h2 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며…</h2>\n<p>이제 진정한 Azure의 시작입니다.<br>\nVSCODE 연동도 완료되었으니 앞으로 거의 대부분의 실습은 CLI로 진행합니다.  </p>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-1-visual-studiovs-code-%EC%84%A4%EC%B9%98\">✔ 1. Visual Studio(VS) Code 설치</a></li>\n<li><a href=\"#-2-nodejs-%EC%84%A4%EC%B9%98\">👍 2. Node.js 설치</a></li>\n<li><a href=\"#-3-vscode-azure-account-extension-%EC%84%A4%EC%B9%98\">✌ 3. VSCODE Azure Account extension 설치</a></li>\n<li><a href=\"#-4-%EC%84%A4%EC%B9%98%EA%B0%80-%EC%99%84%EB%A3%8C%EB%90%98%EC%97%88%EC%9C%BC%EB%A9%B4-%EB%AA%85%EB%A0%B9-%EB%8B%A8%EC%B6%95%EC%9C%BC%EB%A1%9C-%EC%9D%B4%EB%8F%99%ED%95%A9%EB%8B%88%EB%8B%A4\">😉 4. 설치가 완료되었으면 명령 단축으로 이동합니다.</a></li>\n<li><a href=\"#-cloud-shell%EC%97%90-%EC%A0%91%EC%86%8D%ED%95%A9%EB%8B%88%EB%8B%A4\">🐱‍🏍 Cloud Shell에 접속합니다.</a></li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며…</a></li>\n</ul>\n</div>","frontmatter":{"date":"August 01, 2021","title":"[AZURE] Azure Cloud Shell From vscode","categories":"AZURE","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/azure-vscode/"}},"site":{"siteMetadata":{"siteUrl":"https://nasa1515.com","comments":{"utterances":{"repo":"nasa1515/nasablog"}}}}},"pageContext":{"slug":"/azure-vpn/","nextSlug":"/azure-vmss/","prevSlug":"/azure-vscode/"}},"staticQueryHashes":["1073350324","2938748437"]}