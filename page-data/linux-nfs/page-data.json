{"componentChunkName":"component---src-templates-blog-template-js","path":"/linux-nfs/","result":{"data":{"cur":{"id":"f46b0d1f-c0cc-540f-8f01-2f6f0d7f95f8","html":"<p>머리말  </p>\n<p>DNS에 대해서 이론적인 내용도 대충 알고 있었다. 이번 포스트를 작성하면서 이론적인 내용과 함께<br>\n실제로 구축 실습을 해보면서 정확한 개념을 얻을 수 있었다. </p>\n<hr>\n<h2 id=\"-nfs-network-file-system이란-\" style=\"position:relative;\"><a href=\"#-nfs-network-file-system%EC%9D%B4%EB%9E%80-\" aria-label=\" nfs network file system이란  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ NFS (Network File system)이란 ?</h2>\n<ul>\n<li>RPC를 이용하여 리모트 호스트 사용자가 원격지 컴퓨터에 있는 파일을<br>\n마치 로컬 파일에 access 하듯이 사용 할 수 있도록 하는 클라이언트 / 서버형 파일 시스템 공유 프로토콜</li>\n<li>네트워크 파일 시스템의 일종이며 유닉스 환경에서 네트워크를 통해 파일과 응용 프로그램을 호스트간 공유하게 해주는 서비스</li>\n<li>\n<p>대형 서비스 환경 구축 시 공유 파일 서버를 사용하여 데이터의 일관성을 유지 하는 경우가 많은데 이때 사용하는 기술.  </p>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/996BE94C5B24B2A929\"></p>\n<p>RPC ( Remote Procedure Call )<br>\n별도의 원격 제어를 위한 코딩 없이 다른 주소 공간에서 리모트의 함수나 프로시저<br>\n를 실행 할 수 있게 해주는 프로세스간 통신입니다. 즉, RPC를 통해 개발자는 위치에 상관없이 원하는 함수를 사용할 수 있습니다.</p>\n</li>\n</ul>\n<hr>\n<h2 id=\"-nfs서버-설정-파일\" style=\"position:relative;\"><a href=\"#-nfs%EC%84%9C%EB%B2%84-%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC\" aria-label=\" nfs서버 설정 파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👍 NFS서버 설정 파일</h2>\n<ul>\n<li>/etc/exports - 실제 설정 파일 (NFS 서버 설정 파일)<br>\nNFS 서버에서 파일 공유를 위해 사용되는 모든 파일과 디렉토리를 정의</li>\n</ul>\n<br/>\n<ul>\n<li>/etc/fstab<br>\nNFS 서버에서 설정한 공유 디렉토리를 NFS 클라이언트에서 사용하기 위해<br>\n사용되는 파일, 설정 후 부팅시 자동 마운트를 위한 설정파일</li>\n</ul>\n<br/>\n<ul>\n<li>/etc/sysconfig/nfs<br>\nNFS 서버에서 제공하는 NFS 서비스를 위해 사용되는<br>\n모든 포트에 대한 정보를 설정하는 파일  </li>\n</ul>\n<hr>\n<h2 id=\"-서버-구축\" style=\"position:relative;\"><a href=\"#-%EC%84%9C%EB%B2%84-%EA%B5%AC%EC%B6%95\" aria-label=\" 서버 구축 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ 서버 구축</h2>\n<ul>\n<li>실습 버츄얼 박스 환경<br>\nSERVER : 192.168.56.101 (Minimal centos 7.8)<br>\nCLIENT : 192.168.56.105 (Minimal centos 7.8)</li>\n</ul>\n<br/>\n<h3 id=\"1-nfs패키지-설치-및-파일-설정\" style=\"position:relative;\"><a href=\"#1-nfs%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%84%A4%EC%B9%98-%EB%B0%8F-%ED%8C%8C%EC%9D%BC-%EC%84%A4%EC%A0%95\" aria-label=\"1 nfs패키지 설치 및 파일 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. NFS패키지 설치 및 파일 설정</h3>\n<ul>\n<li>\n<p>SERVER 설정</p>\n<p>yum install nfs-utils  (NFS 패키지 설치)  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">이미 설치되어 있다<span class=\"token punctuation\">.</span>\n\n  <span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  yum <span class=\"token operator\">-</span>y install nfs<span class=\"token operator\">-</span>utils\n  <span class=\"token class-name\">Loaded</span> plugins<span class=\"token punctuation\">:</span> fastestmirror<span class=\"token punctuation\">,</span> langpacks\n  Loading mirror speeds <span class=\"token keyword\">from</span> cached hostfile\n  <span class=\"token operator\">*</span> <span class=\"token keyword\">base</span><span class=\"token punctuation\">:</span> mirror<span class=\"token punctuation\">.</span>kakao<span class=\"token punctuation\">.</span>com\n  <span class=\"token operator\">*</span> extras<span class=\"token punctuation\">:</span> mirror<span class=\"token punctuation\">.</span>kakao<span class=\"token punctuation\">.</span>com\n  <span class=\"token operator\">*</span> updates<span class=\"token punctuation\">:</span> mirror<span class=\"token punctuation\">.</span>kakao<span class=\"token punctuation\">.</span>com\n  <span class=\"token keyword\">base</span>                                                                          <span class=\"token operator\">|</span> <span class=\"token number\">3.6</span> kB  <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span>     \n  extras                                                                        <span class=\"token operator\">|</span> <span class=\"token number\">2.9</span> kB  <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span>     \n  updates                                                                       <span class=\"token operator\">|</span> <span class=\"token number\">2.9</span> kB  <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span>     \n  updates<span class=\"token operator\">/</span><span class=\"token number\">7</span><span class=\"token operator\">/</span>x86_64<span class=\"token operator\">/</span>primary_db                                                   <span class=\"token operator\">|</span> <span class=\"token number\">3.0</span> MB  <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span>     \n  Package <span class=\"token number\">1</span><span class=\"token punctuation\">:</span>nfs<span class=\"token operator\">-</span>utils<span class=\"token operator\">-</span><span class=\"token number\">1.3</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span><span class=\"token number\">0.66</span><span class=\"token punctuation\">.</span>el7<span class=\"token punctuation\">.</span>x86_64 already installed <span class=\"token keyword\">and</span> latest version\n  Nothing to <span class=\"token keyword\">do</span></code></pre></div>\n<br/>\n<p>rpm -qa |grep nfs    (설치가 되었는지 확인)  </p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">[root@centos ~]$  rpm -qa | grep nfs-utile*\n nfs-utils-1.3.0-0.66.el7.x86_64</code></pre></div>\n<br/>\n<p>mkdir -p /NFS_TEST/A (N공유를 허용 할 디렉토리 생성)</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  mkdir <span class=\"token operator\">-</span>p <span class=\"token operator\">/</span>NFS_TEST<span class=\"token operator\">/</span>A\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  ls <span class=\"token operator\">-</span>l <span class=\"token operator\">/</span>NFS_TEST<span class=\"token operator\">/</span>\n합계 <span class=\"token number\">0</span>\ndrwxr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span> <span class=\"token number\">2</span> root root <span class=\"token number\">6</span>  <span class=\"token number\">7</span>월  <span class=\"token number\">8</span> <span class=\"token number\">16</span><span class=\"token punctuation\">:</span><span class=\"token number\">51</span> A</code></pre></div>\n<br/>\n<p>chmod -R 777 /NFS_TEST/* Client가 디렉토리에 접속해 파일을 읽고 쓸수 있게  퍼미션을 777로 설정했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  chmod <span class=\"token operator\">-</span>R <span class=\"token number\">777</span> <span class=\"token operator\">/</span>NFS_TEST<span class=\"token comment\">/*\n[root@centos ~]$  ls -al /NFS_TEST/\n합계 0\ndrwxr-xr-x.  3 root root  15  7월  8 16:51 .\ndr-xr-xr-x. 19 root root 273  7월  8 16:51 ..\ndrwxrwxrwx.  2 root root   6  7월  8 16:51 A</span></code></pre></div>\n<br/>\n<p>vim /etc/exports  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token comment\">//// NFS 설정파일을 열어 공유 디렉토리 및 옵션 설정</span>\n<span class=\"token operator\">/</span>NFS_TEST\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>sync<span class=\"token punctuation\">,</span>rw<span class=\"token punctuation\">,</span>no_root_squash<span class=\"token punctuation\">)</span></code></pre></div>\n<br/>\n<p>EXPORT 파일 설정 설명  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token operator\">/</span>NFS_TEST <span class=\"token punctuation\">:</span> 클라이언트에게 공유를 허용 할 디렉토리명\n\n\n<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token punctuation\">:</span> 공유된 디렉토리에 접속 가능한 클라이언트 ip 범위\n<span class=\"token punctuation\">(</span> 도메인도 설정 가능  ex <span class=\"token punctuation\">:</span> www<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span> <span class=\"token operator\">*</span>를 이용한 설정도 가능 ex <span class=\"token punctuation\">:</span> <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\n\n<span class=\"token preprocessor property\">## NFS 설정 옵션 ##</span>\n\nro <span class=\"token punctuation\">:</span> 서버의 공유 디렉토리를 읽기 전용<span class=\"token punctuation\">(</span><span class=\"token class-name\">read</span> only<span class=\"token punctuation\">)</span> 모드로 마운트\nrw <span class=\"token punctuation\">:</span> 서버의 공유 디렉토리를 읽기 쓰기 가능<span class=\"token punctuation\">(</span><span class=\"token class-name\">read</span> Write<span class=\"token punctuation\">)</span>모드로 마운트\nsync <span class=\"token punctuation\">:</span> 마운트 디렉토리에 쓰기와 같은 연산이 발생할 경우  \n       공유 디렉토리와 마운트 디렉토리를 즉시 동기화\n       만약<span class=\"token punctuation\">,</span> 즉시 동기화를 수행 하지 않고자 할 경우 <span class=\"token keyword\">async</span> 옵션을 사용\n\n\nno_subtree_check\n공유 디렉토리는 서브디렉토리를 가질 수 있음\n클라이언트가 특정 파일을 요청하면 서버는 subtree checking이라는 루틴을 실행해 서브디렉토리까지 탐색하여 클라이언트가 요청한 파일의 위치를 확인\n이 옵션을 사용하면 서브디렉토리를 조사하는 루틴을 실행하지 않음 \n만약<span class=\"token punctuation\">,</span> 서브 디렉토리까지 검색하고자 할 경우 subtree_check 옵션을 사용\n\n\nno_root_squash\n사용자가 클라이언트 시스템의 root계정으로 접근했을 경우 \n서버에서도 root 권한을 가지게 함\n만약<span class=\"token punctuation\">,</span> 서버에서 nobody 권한으로 지정하고자 할 경우 root_squash 옵션을 지정\n\n\nwdelay \n디스크 쓰기속도를 지연시켜 데이터가 디스크에 저장되는 회수를 줄여 성능향상 목적으로 사용<span class=\"token punctuation\">.</span> 모든 요청에 지연을 발생시켜 오히려성능이 떨어질 수도 있음\n\n\nno_wdelay\nNFS에서 사용하는 데이터의 크기가 작거나 자주사용한다면 가능한 빨리 디스크에 기록하도록 하는 옵션</code></pre></div>\n<br/>\n<p>NFSD 서비스 실행 및 방화벽 설정</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\"># 서비스 실행</span>\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  systemctl start nfs<span class=\"token operator\">-</span>server\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  systemctl enable nfs<span class=\"token operator\">-</span>server\nCreated symlink <span class=\"token keyword\">from</span> <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>systemd<span class=\"token operator\">/</span>system<span class=\"token operator\">/</span>multi<span class=\"token operator\">-</span>user<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>wants<span class=\"token operator\">/</span>nfs<span class=\"token operator\">-</span>server<span class=\"token punctuation\">.</span>service to <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>systemd<span class=\"token operator\">/</span>system<span class=\"token operator\">/</span>nfs<span class=\"token operator\">-</span>server<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>\n\n<span class=\"token preprocessor property\"># 방화벽 오픈</span>\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>permanent <span class=\"token operator\">--</span><span class=\"token keyword\">add</span><span class=\"token operator\">-</span>service<span class=\"token operator\">=</span>nfs\nsuccess\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>reload\nsuccess\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>list<span class=\"token operator\">-</span>all <span class=\"token operator\">|</span> grep <span class=\"token class-name\">nfs</span>\nservices<span class=\"token punctuation\">:</span> dhcpv6<span class=\"token operator\">-</span>client nfs ssh\n\n\n<span class=\"token preprocessor property\"># 추가적으로 Client에서 접근 디렉토리 목록을 확인하려면 아래 규칙도 추가.</span>\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>permanent <span class=\"token operator\">--</span><span class=\"token keyword\">add</span><span class=\"token operator\">-</span>service<span class=\"token operator\">=</span>rpc<span class=\"token operator\">-</span>bind\nsuccess\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>permanent <span class=\"token operator\">--</span><span class=\"token keyword\">add</span><span class=\"token operator\">-</span>service<span class=\"token operator\">=</span>mountd\nsuccess\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>reload\nsuccess</code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"-client-설정\" style=\"position:relative;\"><a href=\"#-client-%EC%84%A4%EC%A0%95\" aria-label=\" client 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>😃 CLIENT 설정</h2>\n<p>  접근 Mount Point 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">[root@user01 named]# showmount -e 192.168.56.101\nExport list for 192.168.56.101<span class=\"token punctuation\">:</span>\n/NFS_TEST 192.168.56.*</code></pre></div>\n<br/>\n<p>  Mount 할 로컬 디렉토리 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">[root@user01 named]# mkdir /client_nfs\n[root@user01 named]# \n[root@user01 named]# ls -al /client_nfs/\n합계 0\ndrwxr-xr-x. 3 root root 15  7월 17 10<span class=\"token punctuation\">:</span>47 .\ndrwxr-xr-x. 5 root root 50  7월 17 10<span class=\"token punctuation\">:</span>47 ..</code></pre></div>\n<br/>\n<p>  MOUNT</p>\n<ul>\n<li>수동마운트</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">수동 마운트 명령어\n# mount [option] <span class=\"token function\">server-address</span><span class=\"token punctuation\">(</span>domain<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>path mount-point\n-------------------------------------------------------\n\n[Option] -o 를 사용하여 마운트 옵션을 지정\n[<span class=\"token property\">server-address</span><span class=\"token punctuation\">:</span>path] NFS SERVER 의 주소와 공유 디렉토리 경로\n[mount-point] 로컬 마운트 포인트\n--------------------------------------------------------\n[root@user01 named]# mount -o rw<span class=\"token punctuation\">,</span>sync 192.168.56.101<span class=\"token punctuation\">:</span>/NFS_TEST /client_nfs\n[root@user01 named]# \n[root@user01 named]# df -h | grep 192\n192.168.56.101<span class=\"token punctuation\">:</span>/NFS_TEST   17G  4.3G   13G  25% /client_nfs\n[root@user01 named]# \n[root@user01 named]# ls -alrt /client_nfs/\n\n합계 0\ndrwxrwxrwx. 2 root root  6  7월  8 16<span class=\"token punctuation\">:</span>51 A       // 디렉토리 동기화 확인.\n-rw-r--r--. 1 root root  0  7월  8 17<span class=\"token punctuation\">:</span>28 test   // test 파일 동기화 확인.</code></pre></div>\n<hr>\n<h2 id=\"-자동마운트--autofs\" style=\"position:relative;\"><a href=\"#-%EC%9E%90%EB%8F%99%EB%A7%88%EC%9A%B4%ED%8A%B8--autofs\" aria-label=\" 자동마운트  autofs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🌹 자동마운트 : autofs</h2>\n<p>CD/DVD 를 드라이브에 넣으면 마운트를 하지 않아도<br>\n마운트되는 마운트 위치로 접근하면 자동 마운트 되는 기능이다.  </p>\n<br/>\n<ul>\n<li>\n<p>automount?  </p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">자동 마운트 데몬<span class=\"token punctuation\">(</span>autofs<span class=\"token punctuation\">)</span>에 의해 어느 특정 파티션이 필요한 경우에  \n자동으로 마운트와 언마운트가 이뤄지도록 하는 동적 마운트 방식</code></pre></div>\n</li>\n</ul>\n<br/>\n<ul>\n<li>\n<p>autofs  </p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">master map 설정 파일<span class=\"token punctuation\">(</span>/etc/autofs/auto.master<span class=\"token punctuation\">)</span>를 참고해  \n이미 정의된 마운트 지점을 알아내고 마운트 지점 아래로 마운트되도록  \n정의된<span class=\"token punctuation\">(</span>/etc/autofs/auto.misc 파일의 설정을 읽어들여  \n특정 파티션의 파일시스템을 마운트시키고<span class=\"token punctuation\">,</span> 언마운트시키게 합니다.</code></pre></div>\n</li>\n<li>\n<p>/etc/autofs/auto.master 구조</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">마운트 지점  마운트 포인트 설정 파일   옵션\n\n마운트지점 <span class=\"token punctuation\">:</span> 마운트 상위디렉토리 <span class=\"token punctuation\">(</span>주의점<span class=\"token punctuation\">)</span> 마운트지점 디렉토리 하위에 디렉토리생성금지\n\n예<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span>media  <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>autofs<span class=\"token operator\">/</span>auto<span class=\"token punctuation\">.</span>misc <span class=\"token operator\">--</span>timeout<span class=\"token operator\">=</span><span class=\"token number\">60</span>\n\n해당 맵 파일을 읽어 맵파일정보대로 \n<span class=\"token operator\">/</span>media 아래에 자동마운트 미사용시 <span class=\"token number\">60</span>초후 자동 언마운트</code></pre></div>\n</li>\n</ul>\n<br/>\n<hr>\n<h3 id=\"자동마운트-설정\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EB%8F%99%EB%A7%88%EC%9A%B4%ED%8A%B8-%EC%84%A4%EC%A0%95\" aria-label=\"자동마운트 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자동마운트 설정</h3>\n<br/>  \n<p>MASTER MAP 파일 설정</p>\n<br/>\n<ul>\n<li>\n<p>/etc/auto.master.d/101.autofs</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@user01 auto<span class=\"token punctuation\">.</span>master<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">]</span># cat <span class=\"token number\">101</span><span class=\"token punctuation\">.</span>autofs \n<span class=\"token operator\">/</span>client_nfs\t    <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>auto<span class=\"token punctuation\">.</span>indirect     \n           \n<span class=\"token comment\">// 직접맵을 사용하기 위해 /- 절대경로 설정</span>\n<span class=\"token comment\">// 직접맵 파일의 경로를 지정함.</span></code></pre></div>\n<br/>\n</li>\n<li>\n<p>indirect 맵 파일 생성 (/etc/auto.indirect)</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@user01 auto<span class=\"token punctuation\">.</span>master<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">]</span># cat <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>auto<span class=\"token punctuation\">.</span>indirect \n <span class=\"token operator\">*</span>\t<span class=\"token operator\">-</span>rw<span class=\"token punctuation\">,</span>sync<span class=\"token punctuation\">,</span>sec<span class=\"token operator\">=</span>sys<span class=\"token punctuation\">,</span>no_root_squash\t\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>NFS_TEST<span class=\"token operator\">/</span><span class=\"token operator\">&amp;</span></code></pre></div>\n<br/>\n</li>\n<li>\n<p>aufofs 서비스 시작</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">[root<span class=\"token atrule\"><span class=\"token rule\">@user01</span> /]# systemctl start autofs\n[root<span class=\"token atrule\"><span class=\"token rule\">@user01</span> /]# systemctl enable autofs\n[root<span class=\"token atrule\"><span class=\"token rule\">@user01</span> /]# \n[root<span class=\"token atrule\"><span class=\"token rule\">@user01</span> /]# systemctl status autofs\n● autofs.service - Automounts filesystems on demand\n  <span class=\"token property\">Loaded</span><span class=\"token punctuation\">:</span> loaded <span class=\"token punctuation\">(</span>/usr/lib/systemd/system/autofs.service<span class=\"token punctuation\">;</span></span></span></span></span> enabled<span class=\"token punctuation\">;</span> vendor <span class=\"token property\">preset</span><span class=\"token punctuation\">:</span> disabled<span class=\"token punctuation\">)</span>\n  <span class=\"token property\">Active</span><span class=\"token punctuation\">:</span> active <span class=\"token punctuation\">(</span>running<span class=\"token punctuation\">)</span> since 금 2020-07-17 10<span class=\"token punctuation\">:</span>12<span class=\"token punctuation\">:</span>27 KST<span class=\"token punctuation\">;</span> 1h 2min ago\n  Main <span class=\"token property\">PID</span><span class=\"token punctuation\">:</span> 1490 <span class=\"token punctuation\">(</span>automount<span class=\"token punctuation\">)</span>\n<span class=\"token property\">CGroup</span><span class=\"token punctuation\">:</span> /system.slice/autofs.service\n  └─1490 /usr/sbin/automount --systemd-service --dont-check-daemon\n\n7월 17 10<span class=\"token punctuation\">:</span>12<span class=\"token punctuation\">:</span>26 user01 systemd[1]<span class=\"token punctuation\">:</span> Starting Automounts filesystems on demand...\n7월 17 10<span class=\"token punctuation\">:</span>12<span class=\"token punctuation\">:</span>27 user01 automount[1490]<span class=\"token punctuation\">:</span> <span class=\"token property\">setautomntent</span><span class=\"token punctuation\">:</span> <span class=\"token function\">lookup</span><span class=\"token punctuation\">(</span>sss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token property\">setautomntent</span><span class=\"token punctuation\">:</span> No such fi...ory\n7월 17 10<span class=\"token punctuation\">:</span>12<span class=\"token punctuation\">:</span>27 user01 systemd[1]<span class=\"token punctuation\">:</span> Started Automounts filesystems on demand.\n<span class=\"token property\">Hint</span><span class=\"token punctuation\">:</span> Some lines were ellipsized<span class=\"token punctuation\">,</span> use -l to show in full.</code></pre></div>\n<br/>\n</li>\n<li>\n<p>autofs 동작 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@user01 <span class=\"token operator\">/</span><span class=\"token punctuation\">]</span># ls <span class=\"token operator\">-</span>alrt <span class=\"token operator\">/</span>client_nfs<span class=\"token operator\">/</span>\n합계 <span class=\"token number\">4</span>\ndr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span> <span class=\"token number\">22</span> root root <span class=\"token number\">4096</span>  <span class=\"token number\">7</span>월 <span class=\"token number\">17</span> <span class=\"token number\">11</span><span class=\"token punctuation\">:</span><span class=\"token number\">46</span> <span class=\"token range operator\">..</span>\ndrwxr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span>  <span class=\"token number\">2</span> root root    <span class=\"token number\">0</span>  <span class=\"token number\">7</span>월 <span class=\"token number\">17</span> <span class=\"token number\">12</span><span class=\"token punctuation\">:</span><span class=\"token number\">04</span> <span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">[</span>root@user01 <span class=\"token operator\">/</span><span class=\"token punctuation\">]</span># \n<span class=\"token punctuation\">[</span>root@user01 <span class=\"token operator\">/</span><span class=\"token punctuation\">]</span># cd client_nfs<span class=\"token operator\">/</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@user01</span> client_nfs<span class=\"token punctuation\">]</span># ls <span class=\"token operator\">-</span>alrt \n합계 <span class=\"token number\">4</span>\ndr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span> <span class=\"token number\">22</span> root root <span class=\"token number\">4096</span>  <span class=\"token number\">7</span>월 <span class=\"token number\">17</span> <span class=\"token number\">11</span><span class=\"token punctuation\">:</span><span class=\"token number\">46</span> <span class=\"token range operator\">..</span>\ndrwxr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span>  <span class=\"token number\">2</span> root root    <span class=\"token number\">0</span>  <span class=\"token number\">7</span>월 <span class=\"token number\">17</span> <span class=\"token number\">12</span><span class=\"token punctuation\">:</span><span class=\"token number\">04</span> <span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@user01</span> client_nfs<span class=\"token punctuation\">]</span># cd A\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@user01</span> A<span class=\"token punctuation\">]</span># ls <span class=\"token operator\">-</span>alrt\n합계 <span class=\"token number\">0</span>\ndrwxr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span> <span class=\"token number\">2</span> root root <span class=\"token number\">18</span>  <span class=\"token number\">7</span>월  <span class=\"token number\">8</span> <span class=\"token number\">18</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span> <span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span>rw<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span>r<span class=\"token operator\">--</span><span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root root  <span class=\"token number\">0</span>  <span class=\"token number\">7</span>월  <span class=\"token number\">8</span> <span class=\"token number\">18</span><span class=\"token punctuation\">:</span><span class=\"token number\">40</span> test\ndrwxr<span class=\"token operator\">-</span>xr<span class=\"token operator\">-</span>x<span class=\"token punctuation\">.</span> <span class=\"token number\">3</span> root root  <span class=\"token number\">0</span>  <span class=\"token number\">7</span>월 <span class=\"token number\">17</span> <span class=\"token number\">12</span><span class=\"token punctuation\">:</span><span class=\"token number\">05</span> <span class=\"token range operator\">..</span>\n\n디렉토리가 없었으나<span class=\"token punctuation\">,</span> cd 명령어로 접속하자 파일이 동기화<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\n\n mount 명령어로 디렉토리가 자동 마운트 됨을 확인<span class=\"token punctuation\">.</span>\n\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@user01</span> A<span class=\"token punctuation\">]</span># mount <span class=\"token operator\">|</span> grep <span class=\"token number\">192</span>\n<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>NFS_TEST<span class=\"token operator\">/</span>A <span class=\"token keyword\">on</span> <span class=\"token operator\">/</span>client_nfs<span class=\"token operator\">/</span>A <span class=\"token return-type class-name\">type</span> nfs4 <span class=\"token punctuation\">(</span>rw<span class=\"token punctuation\">,</span>relatime<span class=\"token punctuation\">,</span>sync<span class=\"token punctuation\">,</span>vers<span class=\"token operator\">=</span><span class=\"token number\">4.1</span><span class=\"token punctuation\">,</span>rsize<span class=\"token operator\">=</span><span class=\"token number\">262144</span><span class=\"token punctuation\">,</span>wsize<span class=\"token operator\">=</span><span class=\"token number\">262144</span><span class=\"token punctuation\">,</span>namlen<span class=\"token operator\">=</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span>hard<span class=\"token punctuation\">,</span>proto<span class=\"token operator\">=</span>tcp<span class=\"token punctuation\">,</span>timeo<span class=\"token operator\">=</span><span class=\"token number\">600</span><span class=\"token punctuation\">,</span>retrsec<span class=\"token operator\">=</span>sys<span class=\"token punctuation\">,</span>clientaddr<span class=\"token operator\">=</span><span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.105</span><span class=\"token punctuation\">,</span>local_lock<span class=\"token operator\">=</span>none<span class=\"token punctuation\">,</span>addr<span class=\"token operator\">=</span><span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-nfs-network-file-system%EC%9D%B4%EB%9E%80-\">✔ NFS (Network File system)이란 ?</a></li>\n<li><a href=\"#-nfs%EC%84%9C%EB%B2%84-%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC\">👍 NFS서버 설정 파일</a></li>\n<li>\n<p><a href=\"#-%EC%84%9C%EB%B2%84-%EA%B5%AC%EC%B6%95\">✌ 서버 구축</a></p>\n<ul>\n<li><a href=\"#1-nfs%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%84%A4%EC%B9%98-%EB%B0%8F-%ED%8C%8C%EC%9D%BC-%EC%84%A4%EC%A0%95\">1. NFS패키지 설치 및 파일 설정</a></li>\n</ul>\n</li>\n<li><a href=\"#-client-%EC%84%A4%EC%A0%95\">😃 CLIENT 설정</a></li>\n<li>\n<p><a href=\"#-%EC%9E%90%EB%8F%99%EB%A7%88%EC%9A%B4%ED%8A%B8--autofs\">🌹 자동마운트 : autofs</a></p>\n<ul>\n<li><a href=\"#%EC%9E%90%EB%8F%99%EB%A7%88%EC%9A%B4%ED%8A%B8-%EC%84%A4%EC%A0%95\">자동마운트 설정</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"머리말   DNS에 대해서 이론적인 내용도 대충 알고 있었다. 이번 포스트를 작성하면서 이론적인 내용과 함께 실제로 구축 실습을 해보면서 정확한 개념을 얻을 수 있었다.  ✔ NFS (Network File system)이란 ? RPC를 이용하여 리모트 호스트 사용자가 원격지 컴퓨터에 있는 파일을 마치 로컬 파일에 access 하듯이 사용 할 수 있도록 하는 클라이언트 / 서버형 파일 시스템 공유 프로토콜 네트워크 파일 시스템의 일종이며 유닉스 환경에서 네트워크를 통해 파일과 응용 프로그램을 호스트간 공유하게 해주는 서비스 대형 서비스 환경 구축 시 공유 파일 서버를 사용하여 데이터의 일관성을 유지 하는 경우가 많은데…","frontmatter":{"date":"June 23, 2021","title":"[LINUX] - NFS","categories":"LINUX","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/linux-nfs/"}},"next":{"id":"1c7fdc86-6cbb-5090-9d9e-1cf15f78b2c5","html":"<p>머리말 </p>\n<p>DNS에 대해서 이론적인 내용도 대충 알고 있었습니다만 이번 포스트를 작성하면서 이론적인 내용과 함께<br>\n실제로 구축 실습을 해보면서 정확한 개념을 얻을 수 있었습니다. </p>\n<hr>\n<h2 id=\"-dns-domain-name-server-란\" style=\"position:relative;\"><a href=\"#-dns-domain-name-server-%EB%9E%80\" aria-label=\" dns domain name server 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ DNS (Domain Name Server) 란?</h2>\n<p> DNS는 도메인 네임 서버를 일컫습니다.<br>\n인터넷은 서버들을 유일하게 구분할 수 있는 IP주소를 기본체계로 이용하는데<br>\n숫자로 이루어진 조합이라 인간이 기억하기에는 무리가 따릅니다.<br>\n따라서 DNS를 이용해 IP주소를 인간이 기억하기 편한 언어 체계로 변환하는 작업이 필요한데<br>\n이 역할을 DNS가 하는 것입니다.  </p>\n<br/>\n<h3 id=\"특징\" style=\"position:relative;\"><a href=\"#%ED%8A%B9%EC%A7%95\" aria-label=\"특징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>특징</h3>\n<ul>\n<li>PORT : 53</li>\n<li>PROTOCOL : TCP/UDP</li>\n<li>디렉토리 서비스 [트리 형 구조를 가지고 있다.] - BIND 서비스 기준으로 만들어졌음.</li>\n<li>데이터베이스에서 “레코드” 형식의 단위를 사용</li>\n</ul>\n<p><img src=\"https://img1.daumcdn.net/thumb/R720x0.q80/?scode=mtistory2&#x26;fname=http%3A%2F%2Fcfs15.tistory.com%2Fimage%2F27%2Ftistory%2F2008%2F11%2F16%2F21%2F49%2F492016d564daa\" alt=\"5-3. DNS 설치 및 구성\"></p>\n<br/>\n<h3 id=\"서버의-구성\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84%EC%9D%98-%EA%B5%AC%EC%84%B1\" aria-label=\"서버의 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버의 구성</h3>\n<ol>\n<li>master server</li>\n<li>slave server (Zone data DB를 가지고 있다.)</li>\n<li>cache (only) server (Zone data DB를 가지고 있지 않다.)</li>\n</ol>\n<br/>\n<hr>\n<h2 id=\"-도메인이름의-체계와-dns-질의-과정\" style=\"position:relative;\"><a href=\"#-%EB%8F%84%EB%A9%94%EC%9D%B8%EC%9D%B4%EB%A6%84%EC%9D%98-%EC%B2%B4%EA%B3%84%EC%99%80-dns-%EC%A7%88%EC%9D%98-%EA%B3%BC%EC%A0%95\" aria-label=\" 도메인이름의 체계와 dns 질의 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ 도메인이름의 체계와 DNS 질의 과정</h2>\n<p>인터넷 도메인은 아래 그림같이 하나의 역트리 구조를 하고 있습니다. [디렉토리 구조]</p>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/2316A93F51C462940C\"></p>\n<p>인터넷 도메인의 체계에서 최상위는 <code class=\"language-text\">루트(root)</code>로 인터넷도메인의 시작점이 됩니다.<br>\n루트도메인 바로 아래단계는 <code class=\"language-text\">1단계</code> 도메인이라고 하며 이를 <code class=\"language-text\">최상위 도메인</code>이라고 하고.<br>\n최상위 도메인은 국가명을 나타내는 국가 최상위 도메인이 일반 최상위 도메인으로 구분됩니다.</p>\n<br/>\n<hr>\n<h2 id=\"-도메인-질의-과정\" style=\"position:relative;\"><a href=\"#-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%A7%88%EC%9D%98-%EA%B3%BC%EC%A0%95\" aria-label=\" 도메인 질의 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✨ 도메인 질의 과정</h2>\n<p>도메인 질의는 /etc/resolv.conf 에 지정된 네임서버로 접속하여 아래 그림과 같은 질의 과정을 거치게 됩니다.</p>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/026CF23451C465CE34\"></p>\n<ol>\n<li>Client에서 지정된 NS로 www.yahoo.com에 대한 요청을 전달한다.  </li>\n</ol>\n<br/>\n<ol start=\"2\">\n<li>일반 NS서버는 루트NS서버의 IP주소를 기록한 ‘hint 파일’을 가지고 있다.<br>\n이것을 참조하여 루트에 www.yahoo.com에 대한 요청을 전달합니다.<br>\n루트는 최상위네임서버들의 네임서버명(NS레코드)과 IP주소(A레코드)를 가지고 있다.<br>\n이를 <code class=\"language-text\">글루레코드/glue record</code>라고 합니다.<br>\n이 글루레코드를 참조하여 .com 네임서버를 참조하라고 응답합니다<br>\n(루트 네임서버는 전세계에 13개뿐입니다).</li>\n</ol>\n<br/>\n<ol start=\"3\">\n<li>.com 네임서버에는 .com을 최상위도메인으로 사용하는 도메인들의 글루레코드를 가지고 있기에<br>\n이를 참조하여 www.yahoo.com의 네임서버를 참조하라고 응답한다.</li>\n</ol>\n<br/>\n<ol start=\"4\">\n<li>yahoo.com의 네임서버는 yahoo.com 도메인에 대한 존(zone)파일을 참조하여<br>\nwww.yahoo.com의 IP주소(A레코드)를 클라이언트가 최초 요청을 한 네임서버로 되돌려 준다.</li>\n</ol>\n<br/>\n<ol start=\"5\">\n<li>\n<p>최초 요청을 받은 네임서버는 클라이언트에게 www.yahoo.com의 IP주소를 전송한다.</p>\n<p>DNS서버는 한 번 검색한 결과는 메모리의 캐시에 기록하며<br>\n같은 정보가 요청되면 캐시에 있는 정보를 전송한다.<br>\n캐시에는 유효기간(TTL:Time To Live)이 정해져 있으므로 유효기간이 지난 정보는 캐시에서 삭제된다.</p>\n</li>\n</ol>\n<br/>\n<hr>\n<h2 id=\"-dns-질의-쿼리\" style=\"position:relative;\"><a href=\"#-dns-%EC%A7%88%EC%9D%98-%EC%BF%BC%EB%A6%AC\" aria-label=\" dns 질의 쿼리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👍 DNS 질의 쿼리</h2>\n<h3 id=\"1-재귀적-변환-재귀-쿼리-recursive\" style=\"position:relative;\"><a href=\"#1-%EC%9E%AC%EA%B7%80%EC%A0%81-%EB%B3%80%ED%99%98-%EC%9E%AC%EA%B7%80-%EC%BF%BC%EB%A6%AC-recursive\" aria-label=\"1 재귀적 변환 재귀 쿼리 recursive permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 재귀적 변환/ 재귀 쿼리 RECURSIVE</h3>\n<ul>\n<li>일반적인 네임서버</li>\n<li>클라이언트에 최종 결과값을 반환</li>\n<li>클라이언트(Sub Resolver)로부터 도메인 네임 질의 요청이 들어올 경우<br>\n네임서버가 직접 Name space를 탐색하여 결과 값을 반환하는 방식.</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/90124690-c69bf380-dd9b-11ea-90d7-db937e9b7d00.png\" alt=\"스크린샷, 2020-08-13 19-32-45\"></p>\n<p>위의 그림같이 재귀쿼리는 컴퓨터가 리졸버에게 kr.yahoo.com을 물어보면 resolver는 DNS서버에 물어본다.<br>\nDNS서버가 재귀적변환이면 (Root의 네임서버는 무조건 순환쿼리)<br>\nresolver는 더 이상 찾지않고 재귀적방식인 DNS서버 (이 그림에선 Root네임서버)가 찾아서<br>\nresolver에게 전달해준다, 그럼 resolver는 다시 컴퓨터에게 이 값을 알려준다.</p>\n<br/>\n<hr>\n<h3 id=\"2-반복적-변환-순환-쿼리-terative\" style=\"position:relative;\"><a href=\"#2-%EB%B0%98%EB%B3%B5%EC%A0%81-%EB%B3%80%ED%99%98-%EC%88%9C%ED%99%98-%EC%BF%BC%EB%A6%AC-terative\" aria-label=\"2 반복적 변환 순환 쿼리 terative permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 반복적 변환/ 순환 쿼리 TERATIVE</h3>\n<ul>\n<li>Root 서버는 무조건 순환쿼리, TLD네임서버는 일부만 순환쿼리이다.</li>\n<li>반복적 변환 - 자신이 직접 관리하지 않는 질의 요청의 경우 질의에 응답 가능한 NS목록을 응답.<br>\n(질의에 응답가능한 NS란? 만약 컴퓨터가 질의한 것이 kr.yahoo.com.이고 자신은 com.도메인이고<br>\n자신의 하위도메인에 yahoo.com.이 있을 때, 컴퓨터에게 yahoo.com.을 알려준다.)</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/69498804/90124758-e206fe80-dd9b-11ea-9be4-c7d1039c0315.png\" alt=\"스크린샷, 2020-08-13 19-33-32\"></p>\n<p>이렇게 반복적 변환은 컴퓨터가 리졸버에게 kr.yahoo.com을 물어본다면<br>\n리졸버는 DNS에게 kr.yahoo.com.을 IP로 바꿔달라고 요청한다(kr.yahoo.com.에 대해 질의한다)<br>\n이때 리졸버가 물어본 DNS서버가 반복적 변환방식인 이터레이티브라면<br>\n재귀적 변환처럼 찾아주지않고 질의에 응답이 가능한 NS목록을 응답한다.<br>\n이 그림에선 리졸버가 처음에 .(root) DNS에 물어봤기 때문에<br>\nDNS는 자신하위에있는 TLDs중 yahoo.com.을 관리하고있는 com.DNS를 알려주게 된다.<br>\n이렇게 반복하다 보면 kr.yahoo.com.까지 도달한다.\n\n<br/></p>\n<hr>\n<h2 id=\"-dns-구축-방법\" style=\"position:relative;\"><a href=\"#-dns-%EA%B5%AC%EC%B6%95-%EB%B0%A9%EB%B2%95\" aria-label=\" dns 구축 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎶 DNS 구축 방법</h2>\n<h3 id=\"설정-config\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%A0%95-config\" aria-label=\"설정 config permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설정 CONFIG</h3>\n<ul>\n<li>\n<ol>\n<li>/etc/named.conf </li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">NS 데이터베이스 및 zone 파일의 위치<span class=\"token punctuation\">,</span> 접근제어등의  \n보안설정을 할 수 있는 메인 설정파일<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n<li>\n<ol start=\"2\">\n<li>/var/named  </li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">네임서버의 zone 파일 디렉토리의 경로  \nchroot 설정시 <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>named<span class=\"token operator\">/</span> 디렉토리에 설정된 내용을  \n<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>named<span class=\"token operator\">/</span>chroot<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>named로 심볼릭 링크를 걸어준다<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n<li>\n<ol start=\"3\">\n<li>/etc/named.rfc1912.zones </li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">네임서버에 쿼리 요청 시 사용할 도메인 정보<span class=\"token punctuation\">(</span>정방향 영역과 역방향영역<span class=\"token punctuation\">)</span>을 설정해야 될 부분입니다<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n<li>\n<ol start=\"4\">\n<li>/var/named/[도메인].zone </li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">네임서버 설정 시 가장 중요한 도메인 정보 파일이며  \n네임서버를 가동시에 zone 파일을 읽어 네임서버 서비스가 가동되며  \nzone 파일은 도메인을 IP 주소로 변환해 주는 역할을 합니다<span class=\"token punctuation\">.</span>  </code></pre></div>\n</li>\n<li>\n<ol start=\"5\">\n<li>resolv.conf 설정</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">서버가 바라보고 있는 Domain Server의 주소 설정 파일입니다<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n</ul>\n<br/>\n<br/>\n<p><strong>1. BIND 설치</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">~</span><span class=\"token punctuation\">]</span>$  yum <span class=\"token operator\">-</span>y install bind</code></pre></div>\n<br/>\n<p><strong>2. /etc/named.conf 설정</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"> options <span class=\"token punctuation\">{</span>\nlisten<span class=\"token operator\">-</span><span class=\"token keyword\">on</span> port <span class=\"token number\">53</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nlisten<span class=\"token operator\">-</span><span class=\"token keyword\">on</span><span class=\"token operator\">-</span>v6 port <span class=\"token number\">53</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">::</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\ndirectory \t<span class=\"token string\">\"/var/named\"</span><span class=\"token punctuation\">;</span>\ndump<span class=\"token operator\">-</span>file \t<span class=\"token string\">\"/var/named/data/cache_dump.db\"</span><span class=\"token punctuation\">;</span>\nstatistics<span class=\"token operator\">-</span>file <span class=\"token string\">\"/var/named/data/named_stats.txt\"</span><span class=\"token punctuation\">;</span>\nmemstatistics<span class=\"token operator\">-</span>file <span class=\"token string\">\"/var/named/data/named_mem_stats.txt\"</span><span class=\"token punctuation\">;</span>\nrecursing<span class=\"token operator\">-</span>file  <span class=\"token string\">\"/var/named/data/named.recursing\"</span><span class=\"token punctuation\">;</span>\nsecroots<span class=\"token operator\">-</span>file   <span class=\"token string\">\"/var/named/data/named.secroots\"</span><span class=\"token punctuation\">;</span>\nallow<span class=\"token operator\">-</span>query     <span class=\"token punctuation\">{</span> localhost<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* \n - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.\n - If you are building a RECURSIVE (caching) DNS server, you need to enable \n   recursion. \n - If your recursive DNS server has a public IP address, you MUST enable access \n   control to limit queries to your legitimate users. Failing to do so will\n   cause your server to become part of large scale DNS amplification \n   attacks. Implementing BCP38 within your network would greatly\n   reduce such attack surface \n*/</span>\n<span class=\"token class-name\">recursion</span> yes<span class=\"token punctuation\">;</span>\n\ndnssec<span class=\"token operator\">-</span><span class=\"token class-name\">enable</span> yes<span class=\"token punctuation\">;</span>\ndnssec<span class=\"token operator\">-</span><span class=\"token class-name\">validation</span> yes<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* Path to ISC DLV key */</span>\nbindkeys<span class=\"token operator\">-</span>file <span class=\"token string\">\"/etc/named.root.key\"</span><span class=\"token punctuation\">;</span>\n\nmanaged<span class=\"token operator\">-</span>keys<span class=\"token operator\">-</span>directory <span class=\"token string\">\"/var/named/dynamic\"</span><span class=\"token punctuation\">;</span>\n\npid<span class=\"token operator\">-</span>file <span class=\"token string\">\"/run/named/named.pid\"</span><span class=\"token punctuation\">;</span>\nsession<span class=\"token operator\">-</span>keyfile <span class=\"token string\">\"/run/named/session.key\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nlogging <span class=\"token punctuation\">{</span>\n    <span class=\"token return-type class-name\">channel</span> default_debug <span class=\"token punctuation\">{</span>\n            file <span class=\"token string\">\"data/named.run\"</span><span class=\"token punctuation\">;</span>\n            severity <span class=\"token keyword\">dynamic</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nzone <span class=\"token string\">\".\"</span> IN <span class=\"token punctuation\">{</span>\n<span class=\"token class-name\">type</span> hint<span class=\"token punctuation\">;</span>\nfile <span class=\"token string\">\"named.ca\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\ninclude <span class=\"token string\">\"/etc/named.rfc1912.zones\"</span><span class=\"token punctuation\">;</span>\ninclude <span class=\"token string\">\"/etc/named.root.key\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h4 id=\"변경-사항\" style=\"position:relative;\"><a href=\"#%EB%B3%80%EA%B2%BD-%EC%82%AC%ED%95%AD\" aria-label=\"변경 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>변경 사항</h4>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">변경 전 <span class=\"token operator\">-</span> listen<span class=\"token operator\">-</span><span class=\"token keyword\">on</span> port <span class=\"token number\">53</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n변경 후 <span class=\"token operator\">-</span> listen<span class=\"token operator\">-</span><span class=\"token keyword\">on</span> port <span class=\"token number\">53</span> <span class=\"token punctuation\">{</span> any<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n기본설정은 <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>에 리스닝닝하기 때문에<span class=\"token punctuation\">,</span> 외부에서 접속이 불가능합니다 서버에 설정된 모든 IP에 대해 리스닝하도록 any로 변경합니다\n\n변경 전 <span class=\"token operator\">-</span> allow<span class=\"token operator\">-</span>query <span class=\"token punctuation\">{</span> localhost<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n변경 후 <span class=\"token operator\">-</span> allow<span class=\"token operator\">-</span>query <span class=\"token punctuation\">{</span> any<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n네임서버에 설정된 도메인만 응답하도록 설정하는부분입니다<span class=\"token punctuation\">.</span>\n\n변경없음 <span class=\"token operator\">-</span> <span class=\"token class-name\">recursion</span> no<span class=\"token punctuation\">;</span>\n\nyes로 설정하면 네임서버에 설정되지 않은 도메인에 대한 질의가 있을시 캐싱 네임서버의 역할을 하여 DNS 질의과정을 거치게 되며<span class=\"token punctuation\">,</span> 주 네임서버는 캐싱 네임서버 역할이 필요하지 않으므로no로 설정합니다<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<p><strong>3. named.rfc1912.zones 설정</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">zone <span class=\"token string\">\"won.co.kr\"</span> IN <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">type</span> master<span class=\"token punctuation\">;</span>\n    file <span class=\"token string\">\"won.co.kr.zone\"</span><span class=\"token punctuation\">;</span>\n    allow<span class=\"token operator\">-</span>update <span class=\"token punctuation\">{</span> none<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nzone <span class=\"token string\">\"56.168.192.in-addr.arpa\"</span> IN <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">type</span> master<span class=\"token punctuation\">;</span>\n    file <span class=\"token string\">\"db.192.168.56\"</span><span class=\"token punctuation\">;</span>\n    allow<span class=\"token operator\">-</span>update <span class=\"token punctuation\">{</span> none<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>named.rfc1912.zones의 맨하단부분의 추가할 도메인정보/파일(test.com, test.com.zone)을 입력.<br>\nwon.co.kr 도메인을 사용하려면 won.co.k.rzone([도메인].zone)파일을 만들어야 됩니다</p>\n<br/>\n<p><strong>4. ZONE 파일 설정하기</strong>  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@server</span> named<span class=\"token punctuation\">]</span># cp named<span class=\"token punctuation\">.</span>localhost won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone</code></pre></div>\n<p>/var/named의 디렉토리로 이동하면 named.localhost 파일이 있습니다<br>\nnamed.localhost의 파일을 사용할 도메인의 zone파일의 파일명으로 복사합니다.  </p>\n<br/>\n<p><strong>설정 내용 확인</strong></p>\n<br/>\n<p>정방향 파일\n</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  cat won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone \n$TTL <span class=\"token number\">1D</span>\n@\tIN SOA\tns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr root<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span> <span class=\"token punctuation\">(</span>\n\t\t\t\t<span class=\"token number\">0</span>\t<span class=\"token punctuation\">;</span> serial \t<span class=\"token comment\">//시리얼값</span>\n\t\t\t\t<span class=\"token number\">1D</span>\t<span class=\"token punctuation\">;</span> refresh \t<span class=\"token comment\">//보조 네임서버가 주 네임서버에 접속하는 시간</span>\n\t\t\t\t1H\t<span class=\"token punctuation\">;</span> retry \t<span class=\"token comment\">//접속 실패시 다시 시도할 시도 간격</span>\n\t\t\t\t1W\t<span class=\"token punctuation\">;</span> expire \t<span class=\"token comment\">//주네임서버에서 데이터가 없다면 1주 이후에 지워짐</span>\n\t\t\t\t3H <span class=\"token punctuation\">)</span>\t<span class=\"token punctuation\">;</span> minimum \t<span class=\"token comment\">//TTL 설정과 같은 의미</span>\n@\tIN\tNS\tns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\t\t \t<span class=\"token comment\">//도메인을 소우한 주 DNS의 도메인</span>\nIN\tA\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span> \t\t\t\t<span class=\"token comment\">//도메인이 찾아갈 IP주소</span>\nns\tIN\tA\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span> \t\t\t<span class=\"token comment\">//주 네임서버 아이피</span>\nwww\tIN\tA\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>    \t\t<span class=\"token comment\">//www.도메인이 찾아갈 IP주소</span></code></pre></div>\n<br/>\n<p>역방향 파일\n</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">$TTL <span class=\"token number\">1D</span>\n@\tIN SOA\tns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr root<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span> <span class=\"token punctuation\">(</span>\n\t\t\t\t<span class=\"token number\">0</span>\t<span class=\"token punctuation\">;</span> serial\n\t\t\t\t<span class=\"token number\">1D</span>\t<span class=\"token punctuation\">;</span> refresh\n\t\t\t\t1H\t<span class=\"token punctuation\">;</span> retry\n\t\t\t\t1W\t<span class=\"token punctuation\">;</span> expire\n\t\t\t\t3H <span class=\"token punctuation\">)</span>\t<span class=\"token punctuation\">;</span> minimum\n@\tIN\tNS\tns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\n<span class=\"token number\">101</span>\tIN\tPTR\tns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\n<span class=\"token number\">101</span>\tIN\tPTR\twww<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span></code></pre></div>\n<br>\n<p><strong>5. ZONE 파일 파일의 소유권 변경</strong></p>\n<p>변경 전</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  ls <span class=\"token operator\">-</span>alrt <span class=\"token operator\">*</span>\n<span class=\"token operator\">-</span>rw<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root  root   <span class=\"token number\">227</span>  <span class=\"token number\">7</span>월  <span class=\"token number\">8</span> <span class=\"token number\">19</span><span class=\"token punctuation\">:</span><span class=\"token number\">28</span> won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone\n<span class=\"token operator\">-</span>rw<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> root  root   <span class=\"token number\">209</span>  <span class=\"token number\">7</span>월  <span class=\"token number\">8</span> <span class=\"token number\">19</span><span class=\"token punctuation\">:</span><span class=\"token number\">36</span> db<span class=\"token punctuation\">.</span><span class=\"token number\">192.168</span><span class=\"token number\">.56</span></code></pre></div>\n<p>변경 후</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  <span class=\"token class-name\">chown</span> named<span class=\"token punctuation\">:</span>root won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone db<span class=\"token punctuation\">.</span><span class=\"token number\">192.168</span><span class=\"token number\">.56</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  ls <span class=\"token operator\">-</span>alrt <span class=\"token operator\">*</span>\n<span class=\"token operator\">-</span>rw<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> named root   <span class=\"token number\">227</span>  <span class=\"token number\">7</span>월  <span class=\"token number\">8</span> <span class=\"token number\">19</span><span class=\"token punctuation\">:</span><span class=\"token number\">28</span> won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone\n<span class=\"token operator\">-</span>rw<span class=\"token operator\">-</span>r<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span><span class=\"token punctuation\">.</span> <span class=\"token number\">1</span> named root   <span class=\"token number\">209</span>  <span class=\"token number\">7</span>월  <span class=\"token number\">8</span> <span class=\"token number\">19</span><span class=\"token punctuation\">:</span><span class=\"token number\">36</span> db<span class=\"token punctuation\">.</span><span class=\"token number\">192.168</span><span class=\"token number\">.56</span>\n파일을 작성 후 파일의 소유권을 변경해 줍니다<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n  \n<p><strong>6. 설정파일 검증</strong></p>\n<p>named.conf 파일 검증</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  named<span class=\"token operator\">-</span>checkconf <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>named<span class=\"token punctuation\">.</span>conf \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  </code></pre></div>\n<p>named.conf 파일을 검증하는 과정이며, 정상적으로 설정을 잘하였다면 아무런 메시지가 나오지 않습니다</p>\n<br/>\n<p><strong>zone 파일 검증</strong></p>\n<ol>\n<li>\n<p>정상적인 설정 메시지</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span># named<span class=\"token operator\">-</span>checkzone won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone  db<span class=\"token punctuation\">.</span><span class=\"token number\">192.168</span><span class=\"token number\">.56</span>\nzone test<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>IN<span class=\"token punctuation\">:</span> loaded serial <span class=\"token number\">0</span>\nOK</code></pre></div>\n<p>위와 같이 OK 메시지를 보여주면 설정에 문제가 없는 것입니다.</p>\n<br/>\n</li>\n<li>\n<p>잘못된 설정 메시지</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@server</span> named<span class=\"token punctuation\">]</span># named<span class=\"token operator\">-</span>checkzone won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone\nzone won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone<span class=\"token operator\">/</span>IN<span class=\"token punctuation\">:</span> NS 'ns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr' has no <span class=\"token return-type class-name\">address</span> records <span class=\"token punctuation\">(</span>A <span class=\"token keyword\">or</span> AAAA<span class=\"token punctuation\">)</span>\nzone won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone<span class=\"token operator\">/</span>IN<span class=\"token punctuation\">:</span> <span class=\"token keyword\">not</span> loaded due to errors<span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n</ol>\n<br/>\n<p><strong>7. resolv.conf 설정 변경</strong>  </p>\n<p>파일에 지정할 도메인 서버의 주소, GW설정</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  cat <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>resolv<span class=\"token punctuation\">.</span>conf \n<span class=\"token preprocessor property\"># Generated by NetworkManager</span>\n<span class=\"token preprocessor property\">#nameserver 8.8.8.8</span>\nnameserver <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\t\t\nnameserver <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.1</span></code></pre></div>\n<p>NMCLI 명령어로 수정하는 방법을 권장.</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>변경전<span class=\"token punctuation\">]</span>\n\t\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  nmcli connection show enp0s8 <span class=\"token operator\">|</span> grep DNS\nIP4<span class=\"token punctuation\">.</span>DNS<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>                             <span class=\"token number\">8.8</span><span class=\"token number\">.8</span><span class=\"token number\">.8</span>\n<span class=\"token punctuation\">[</span>변경 후<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  nmcli connection modify enp0s8 ipv4<span class=\"token punctuation\">.</span>dns <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  nmcli connection show enp0s8 <span class=\"token operator\">|</span> grep DNS\nipv4<span class=\"token punctuation\">.</span>dns<span class=\"token punctuation\">:</span>                               <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span></code></pre></div>\n<br/>\n<p><strong>8. DNS 방화벽 설정</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span><span class=\"token keyword\">add</span><span class=\"token operator\">-</span>service<span class=\"token operator\">=</span>dns <span class=\"token operator\">--</span>permanent \nsuccess\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>reload\nsuccess\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  firewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>list<span class=\"token operator\">-</span>all <span class=\"token operator\">|</span> grep <span class=\"token class-name\">services</span>\nservices<span class=\"token punctuation\">:</span> dhcpv6<span class=\"token operator\">-</span>client dns http ssh</code></pre></div>\n<br/>\n<p><strong>9. NAMED 재시작 및 동작 확인</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  systemctl restart named\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  nslookup <span class=\"token class-name\">www<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr</span>\nServer<span class=\"token punctuation\">:</span>\t\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\nAddress<span class=\"token punctuation\">:</span>\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>#<span class=\"token number\">53</span>\nName<span class=\"token punctuation\">:</span>\t<span class=\"token class-name\">www<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr</span>\nAddress<span class=\"token punctuation\">:</span> <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  nslookup <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\n<span class=\"token number\">101.56</span><span class=\"token number\">.168</span><span class=\"token number\">.192</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">in</span><span class=\"token operator\">-</span><span class=\"token class-name\">addr<span class=\"token punctuation\">.</span>arpa</span>\tname <span class=\"token operator\">=</span> www<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\n<span class=\"token number\">101.56</span><span class=\"token number\">.168</span><span class=\"token number\">.192</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">in</span><span class=\"token operator\">-</span><span class=\"token class-name\">addr<span class=\"token punctuation\">.</span>arpa</span>\tname <span class=\"token operator\">=</span> ns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<p><strong>추가적으로 VM으로 연결된 다른 Client로 확인</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@lee123</span> share<span class=\"token punctuation\">]</span># nslookup <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\n<span class=\"token number\">101.56</span><span class=\"token number\">.168</span><span class=\"token number\">.192</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">in</span><span class=\"token operator\">-</span><span class=\"token class-name\">addr<span class=\"token punctuation\">.</span>arpa</span>\tname <span class=\"token operator\">=</span> ns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\n<span class=\"token number\">101.56</span><span class=\"token number\">.168</span><span class=\"token number\">.192</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">in</span><span class=\"token operator\">-</span><span class=\"token class-name\">addr<span class=\"token punctuation\">.</span>arpa</span>\tname <span class=\"token operator\">=</span> www<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@lee123</span> share<span class=\"token punctuation\">]</span># \n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@lee123</span> share<span class=\"token punctuation\">]</span># nslookup <span class=\"token class-name\">www<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr</span>\nServer<span class=\"token punctuation\">:</span>\t\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\nAddress<span class=\"token punctuation\">:</span>\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>#<span class=\"token number\">53</span>\nName<span class=\"token punctuation\">:</span>\t<span class=\"token class-name\">www<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr</span>\nAddress<span class=\"token punctuation\">:</span> <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span></code></pre></div>\n<br/>\n<hr>\n<h2 id=\"-masterslave-설정\" style=\"position:relative;\"><a href=\"#-masterslave-%EC%84%A4%EC%A0%95\" aria-label=\" masterslave 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>💋 MASTER/SLAVE 설정</h2>\n<p>DNS Master &#x26; Salve 개념</p>\n<p>단순히 Master와 Slave는 주-보조 관계이며 DNS 서버를 이중화 시킨다고만 알고 계셔도 됩니다.<br>\n(Slave를 여러대 사용할수도 있습니다)  </p>\n<p>Master-Slave는 동기화 과정을 통해 zone 파일을 관리하게 되는데<br>\nzone 파일의 SOA 필드에 있는 serial을 확인하여 이 파일이 업데이트가 되었는지 판단 합니다.<br>\nserial이 증가 했을 경우 파일이 업데이트된것으로 판단하고 동기화 과정을 통해<br>\nSlave 서버로 zone 파일이 전송 됩니다.  </p>\n<p>이러한 동기화 과정을 zone transfer 라고 하는데 포트 TCP 53번이 바로 여기서 사용 됩니다.<br>\n(일반 반복 쿼리 시 UDP 53번 사용)  </p>\n<p>만약, Master 서버에 장애가 발생할 경우 Slave 서버에서 서비스를 중단 없이 지속적으로 제공 합니다.</p>\n<p><img src=\"https://k.kakaocdn.net/dn/WGIQ2/btqBWqWTyu2/UhuJc8CgA8PZYPg2EKc0UK/img.png\"></p>\n<h3 id=\"master-서버-설정\" style=\"position:relative;\"><a href=\"#master-%EC%84%9C%EB%B2%84-%EC%84%A4%EC%A0%95\" aria-label=\"master 서버 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Master 서버 설정</h3>\n<br/>\n<ol>\n<li>\n<p>named.rfc1912.zones 파일 설정 추가  </p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">allow<span class=\"token operator\">-</span>update <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span>slave서버 IP<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> 구문 추가\n\nzone <span class=\"token string\">\"won.co.kr\"</span> IN <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">type</span> master<span class=\"token punctuation\">;</span>\n\tfile <span class=\"token string\">\"won.co.kr.zone\"</span><span class=\"token punctuation\">;</span>\n\tallow<span class=\"token operator\">-</span>update <span class=\"token punctuation\">{</span> <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.102</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nallow<span class=\"token operator\">-</span>transfer <span class=\"token punctuation\">{</span> <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.102</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n</li>\n<li>\n<p>zone 파일 수정</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> named<span class=\"token punctuation\">]</span>$  cat <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>named<span class=\"token operator\">/</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>zone \t\n$TTL <span class=\"token number\">1D</span>\n@\tIN SOA\tns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr root<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span> <span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token number\">0</span>\t<span class=\"token punctuation\">;</span> serial\n\t\t\t<span class=\"token number\">1D</span>\t<span class=\"token punctuation\">;</span> refresh\n\t\t\t1H\t<span class=\"token punctuation\">;</span> retry\n\t\t\t1W\t<span class=\"token punctuation\">;</span> expire\n\t\t\t3H <span class=\"token punctuation\">)</span>\t<span class=\"token punctuation\">;</span> minimum\n\t\t\t\t\n@\tIN\tNS\tns<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\n\tIN\tNS\tns2<span class=\"token punctuation\">.</span>won<span class=\"token punctuation\">.</span>co<span class=\"token punctuation\">.</span>kr<span class=\"token punctuation\">.</span>\t\t\t<span class=\"token comment\">//slave 서버 설정</span>\nIN\tA\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\n\nns\tIN\tA\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span>\nns2\tIN\tA\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.102</span>\t\t\t<span class=\"token comment\">//slave 서버 설정</span>\nwww\tIN\tA\t<span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span></code></pre></div>\n<p>클라이언트에서 접근할 수 있도록 설정을 진행 합니다.</p>\n<br/>\n</li>\n</ol>\n<h3 id=\"slave-서버-설정\" style=\"position:relative;\"><a href=\"#slave-%EC%84%9C%EB%B2%84-%EC%84%A4%EC%A0%95\" aria-label=\"slave 서버 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SLAVE 서버 설정</h3>\n<ol>\n<li>\n<p>/etc/named.rfc1912.zones 파일 설정</p>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\">zone <span class=\"token string\">\"won.co.kr\"</span> IN <span class=\"token punctuation\">{</span>\n<span class=\"token class-name\">type</span> slave<span class=\"token punctuation\">;</span>\nfile <span class=\"token string\">\"slave/won.co.kr.zone\"</span><span class=\"token punctuation\">;</span>\nmasters <span class=\"token punctuation\">{</span> <span class=\"token number\">192.168</span><span class=\"token number\">.56</span><span class=\"token number\">.101</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ol>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-dns-domain-name-server-%EB%9E%80\">✔ DNS (Domain Name Server) 란?</a></p>\n<ul>\n<li><a href=\"#%ED%8A%B9%EC%A7%95\">특징</a></li>\n<li><a href=\"#%EC%84%9C%EB%B2%84%EC%9D%98-%EA%B5%AC%EC%84%B1\">서버의 구성</a></li>\n</ul>\n</li>\n<li><a href=\"#-%EB%8F%84%EB%A9%94%EC%9D%B8%EC%9D%B4%EB%A6%84%EC%9D%98-%EC%B2%B4%EA%B3%84%EC%99%80-dns-%EC%A7%88%EC%9D%98-%EA%B3%BC%EC%A0%95\">✌ 도메인이름의 체계와 DNS 질의 과정</a></li>\n<li><a href=\"#-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%A7%88%EC%9D%98-%EA%B3%BC%EC%A0%95\">✨ 도메인 질의 과정</a></li>\n<li>\n<p><a href=\"#-dns-%EC%A7%88%EC%9D%98-%EC%BF%BC%EB%A6%AC\">👍 DNS 질의 쿼리</a></p>\n<ul>\n<li><a href=\"#1-%EC%9E%AC%EA%B7%80%EC%A0%81-%EB%B3%80%ED%99%98-%EC%9E%AC%EA%B7%80-%EC%BF%BC%EB%A6%AC-recursive\">1. 재귀적 변환/ 재귀 쿼리 RECURSIVE</a></li>\n<li><a href=\"#2-%EB%B0%98%EB%B3%B5%EC%A0%81-%EB%B3%80%ED%99%98-%EC%88%9C%ED%99%98-%EC%BF%BC%EB%A6%AC-terative\">2. 반복적 변환/ 순환 쿼리 TERATIVE</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-dns-%EA%B5%AC%EC%B6%95-%EB%B0%A9%EB%B2%95\">🎶 DNS 구축 방법</a></p>\n<ul>\n<li>\n<p><a href=\"#%EC%84%A4%EC%A0%95-config\">설정 CONFIG</a></p>\n<ul>\n<li><a href=\"#%EB%B3%80%EA%B2%BD-%EC%82%AC%ED%95%AD\">변경 사항</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-masterslave-%EC%84%A4%EC%A0%95\">💋 MASTER/SLAVE 설정</a></p>\n<ul>\n<li><a href=\"#master-%EC%84%9C%EB%B2%84-%EC%84%A4%EC%A0%95\">Master 서버 설정</a></li>\n<li><a href=\"#slave-%EC%84%9C%EB%B2%84-%EC%84%A4%EC%A0%95\">SLAVE 서버 설정</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 23, 2021","title":"[LINUX] - DNS","categories":"LINUX","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/linux-dns/"}},"prev":{"id":"8d2b306b-d519-510a-a4ea-f5e880b8cf59","html":"<p>머리말  </p>\n<p>SMB에 대해서는 몇번 들어보긴 했지만 정확히는 모르는 상태였습니다.<br>\n실제로 실습을 해본 적도 없고 그냥 공유 디렉토리 설정이라고만 알고있었는데 로직등, 실습을 해보면서 대충은 알 것 같습니다. </p>\n<hr>\n<h2 id=\"-smb-server-message-block이란-\" style=\"position:relative;\"><a href=\"#-smb-server-message-block%EC%9D%B4%EB%9E%80-\" aria-label=\" smb server message block이란  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ SMB (Server Message Block)이란 ?</h2>\n<p>SMB는 Linux 시스템과 Window 시스템의 로컬 디렉토리를 공유할 때 사용합니다.<br>\nWindow 시스템에서 구성 후 Linux 시스템에 연결이 가능하고<br>\n반대로 Linux 시스템에서 구성 후 Window 시스템에서도 연결이 가능합니다.</p>\n<br/>\n<ul>\n<li>SMB/CIFS<br>\nSMB 프로토콜은 TCP/IP 위에서 동작하며 본래 로컬 네트워크가 아닌 다른 네트워크에<br>\n존재하는 시스템에서 공유하는 디렉토리에는 접근할 수 없습니다. 이후 추가적으로 CIFS 프로토콜을 결합하여<br>\n다른 시스템에서 공유하는 디렉토리에도 접근이 가능해져 <code class=\"language-text\">SMB/CIFS</code>로 분류되었습니다.  </li>\n</ul>\n<br/>\n<ul>\n<li>SAMBA<br>\n사용자는 삼바를 사용하여 SMB 스토리지를 공유하거나 SMB 공유를 사용한다.  </li>\n<li>\n<p>SAMBA와 관련된 데몬  </p>\n<ol>\n<li>smbd : 파일과 프린트 서비스 제공.  </li>\n<li>NetBIOS 이름 서비스 요청 인식 및 응답.  </li>\n<li>winbindd : 사용자와 그룹 정보 OS 별 변환</li>\n</ol>\n</li>\n</ul>\n<hr>\n<h2 id=\"-smb-스토리지-구축\" style=\"position:relative;\"><a href=\"#-smb-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%EA%B5%AC%EC%B6%95\" aria-label=\" smb 스토리지 구축 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✌ SMB 스토리지 구축</h2>\n<h3 id=\"samba-패키지-설치\" style=\"position:relative;\"><a href=\"#samba-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%84%A4%EC%B9%98\" aria-label=\"samba 패키지 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SAMBA 패키지 설치</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> aaa<span class=\"token punctuation\">]</span>$  yum <span class=\"token operator\">-</span>y install samba samba<span class=\"token operator\">-</span>client\n<span class=\"token class-name\">Loaded</span> plugins<span class=\"token punctuation\">:</span> fastestmirror<span class=\"token punctuation\">,</span> langpacks\nLoading mirror speeds <span class=\"token keyword\">from</span> cached hostfile\n<span class=\"token operator\">*</span> <span class=\"token keyword\">base</span><span class=\"token punctuation\">:</span> mirror<span class=\"token punctuation\">.</span>kakao<span class=\"token punctuation\">.</span>com\n<span class=\"token operator\">*</span> extras<span class=\"token punctuation\">:</span> mirror<span class=\"token punctuation\">.</span>kakao<span class=\"token punctuation\">.</span>com\n<span class=\"token operator\">*</span> updates<span class=\"token punctuation\">:</span> mirror<span class=\"token punctuation\">.</span>kakao<span class=\"token punctuation\">.</span>com\nPackage samba<span class=\"token operator\">-</span>client<span class=\"token operator\">-</span><span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8<span class=\"token punctuation\">.</span>x86_64 already installed <span class=\"token keyword\">and</span> latest  version\nResolving Dependencies\n<span class=\"token operator\">--</span><span class=\"token operator\">></span> Running transaction check\n<span class=\"token operator\">--</span><span class=\"token operator\">-></span> Package samba<span class=\"token punctuation\">.</span>x86_64 <span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8 will be installed\n<span class=\"token operator\">--</span><span class=\"token operator\">></span> <span class=\"token class-name\">Processing</span> Dependency<span class=\"token punctuation\">:</span> samba<span class=\"token operator\">-</span>common<span class=\"token operator\">-</span>tools <span class=\"token operator\">=</span> <span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8 <span class=\"token keyword\">for</span> package<span class=\"token punctuation\">:</span> samba<span class=\"token operator\">-</span><span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8<span class=\"token punctuation\">.</span>x86_64\n<span class=\"token operator\">--</span><span class=\"token operator\">></span> Running transaction check\n<span class=\"token operator\">--</span><span class=\"token operator\">-></span> Package samba<span class=\"token operator\">-</span>common<span class=\"token operator\">-</span>tools<span class=\"token punctuation\">.</span>x86_64 <span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8 will be installed\n<span class=\"token operator\">--</span><span class=\"token operator\">></span> Finished Dependency Resolution\n\n<span class=\"token class-name\">Dependencies</span> Resolved\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\nPackage                       Arch              Version                    <span class=\"token class-name\">Repository</span>          Size\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\nInstalling<span class=\"token punctuation\">:</span>\nsamba                         x86_64            <span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8            updates            <span class=\"token number\">708</span> k\nInstalling <span class=\"token keyword\">for</span> dependencies<span class=\"token punctuation\">:</span>\nsamba<span class=\"token operator\">-</span>common<span class=\"token operator\">-</span>tools            x86_64            <span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8            updates            <span class=\"token number\">463</span> k\n\n<span class=\"token class-name\">Transaction</span> Summary\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\nInstall  <span class=\"token number\">1</span> Package <span class=\"token punctuation\">(</span><span class=\"token operator\">+</span><span class=\"token number\">1</span> <span class=\"token class-name\">Dependent</span> package<span class=\"token punctuation\">)</span>\n\nTotal <span class=\"token class-name\">download</span> size<span class=\"token punctuation\">:</span> <span class=\"token number\">1.1</span> M\n<span class=\"token class-name\">Installed</span> size<span class=\"token punctuation\">:</span> <span class=\"token number\">3.2</span> M\n<span class=\"token class-name\">Downloading</span> packages<span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> samba<span class=\"token operator\">-</span>common<span class=\"token operator\">-</span>tools<span class=\"token operator\">-</span><span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8<span class=\"token punctuation\">.</span>x86_64<span class=\"token punctuation\">.</span>rpm                          <span class=\"token operator\">|</span> <span class=\"token number\">463</span> kB  <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span>     \n<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> samba<span class=\"token operator\">-</span><span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8<span class=\"token punctuation\">.</span>x86_64<span class=\"token punctuation\">.</span>    rpm                                       <span class=\"token operator\">|</span> <span class=\"token number\">708</span> kB  <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span>     \n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span>\nTotal                                                                <span class=\"token number\">3.7</span> MB<span class=\"token operator\">/</span>s <span class=\"token operator\">|</span> <span class=\"token number\">1.1</span> MB  <span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span>     \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning <span class=\"token class-name\">transaction</span>\nInstalling <span class=\"token punctuation\">:</span> samba<span class=\"token operator\">-</span>common<span class=\"token operator\">-</span>tools<span class=\"token operator\">-</span><span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8<span class=\"token punctuation\">.</span>x86_64                                         <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">2</span> \nInstalling <span class=\"token punctuation\">:</span> samba<span class=\"token operator\">-</span><span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8<span class=\"token punctuation\">.</span>x86_64                                                      <span class=\"token number\">2</span><span class=\"token operator\">/</span><span class=\"token number\">2</span> \nVerifying  <span class=\"token punctuation\">:</span> samba<span class=\"token operator\">-</span><span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8<span class=\"token punctuation\">.</span>x86_64                                                      <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">2</span> \nVerifying  <span class=\"token punctuation\">:</span> samba<span class=\"token operator\">-</span>common<span class=\"token operator\">-</span>tools<span class=\"token operator\">-</span><span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8<span class=\"token punctuation\">.</span>x86_64                                         <span class=\"token number\">2</span><span class=\"token operator\">/</span><span class=\"token number\">2</span> \n\nInstalled<span class=\"token punctuation\">:</span>\nsamba<span class=\"token punctuation\">.</span>x86_64 <span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8                                                                     \n\n<span class=\"token class-name\">Dependency</span> Installed<span class=\"token punctuation\">:</span>\nsamba<span class=\"token operator\">-</span>common<span class=\"token operator\">-</span>tools<span class=\"token punctuation\">.</span>x86_64 <span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">4.10</span><span class=\"token number\">.4</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token punctuation\">.</span>el7_8                                                        \n\nComplete<span class=\"token operator\">!</span></code></pre></div>\n<br/>\n \n<h3 id=\"cofig-확인-etcsambasmbconf\" style=\"position:relative;\"><a href=\"#cofig-%ED%99%95%EC%9D%B8-etcsambasmbconf\" aria-label=\"cofig 확인 etcsambasmbconf permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cofig 확인 /etc/samba/smb.conf</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> aaa<span class=\"token punctuation\">]</span>$  cat <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>samba<span class=\"token operator\">/</span>smb<span class=\"token punctuation\">.</span>conf\n<span class=\"token preprocessor property\"># See smb.conf.example for a more detailed config file or</span>\n<span class=\"token preprocessor property\"># read the smb.conf manpage.</span>\n<span class=\"token preprocessor property\"># Run 'testparm' to verify the config is correct after</span>\n<span class=\"token preprocessor property\"># you modified it.</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">global</span><span class=\"token punctuation\">]</span>                 <span class=\"token comment\">// SAMBA 서버에 대한 인증 방법, 사용자 저장방법 정의</span>\nworkgroup <span class=\"token operator\">=</span> SAMBA       <span class=\"token comment\">// 작업 그룹의 이름              </span>\nsecurity <span class=\"token operator\">=</span> user            <span class=\"token comment\">// 서버의 보안 모드</span>\n\n<span class=\"token class-name\">passdb</span> backend <span class=\"token operator\">=</span> tdbsam      <span class=\"token comment\">// 사용자의 정보를 저장하는 방법 설정</span>\n\nprinting <span class=\"token operator\">=</span> cups\n<span class=\"token class-name\">printcap</span> name <span class=\"token operator\">=</span> cups\n<span class=\"token class-name\">load</span> printers <span class=\"token operator\">=</span> yes\n<span class=\"token class-name\">cups</span> options <span class=\"token operator\">=</span> raw\n\n<span class=\"token punctuation\">[</span>homes<span class=\"token punctuation\">]</span>                      <span class=\"token comment\">// SMB 사용자의 홈 디렉토리 설정</span>\ncomment <span class=\"token operator\">=</span> Home Directories   \n<span class=\"token class-name\">valid</span> users <span class=\"token operator\">=</span> <span class=\"token operator\">%</span>S<span class=\"token punctuation\">,</span> <span class=\"token operator\">%</span>D<span class=\"token operator\">%</span>w<span class=\"token operator\">%</span><span class=\"token class-name\">S</span>\nbrowseable <span class=\"token operator\">=</span> No\n<span class=\"token class-name\">read</span> only <span class=\"token operator\">=</span> No\n<span class=\"token class-name\">inherit</span> acls <span class=\"token operator\">=</span> Yes\n\n<span class=\"token punctuation\">[</span>printers<span class=\"token punctuation\">]</span>                   <span class=\"token comment\">// 프린터 공유를 설정하는 섹션</span>\ncomment <span class=\"token operator\">=</span> All <span class=\"token class-name\">Printers</span>\npath <span class=\"token operator\">=</span> <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span><span class=\"token class-name\">tmp</span>\nprintable <span class=\"token operator\">=</span> Yes\n<span class=\"token class-name\">create</span> mask <span class=\"token operator\">=</span> <span class=\"token number\">0600</span>\nbrowseable <span class=\"token operator\">=</span> No\n\n<span class=\"token punctuation\">[</span>print$<span class=\"token punctuation\">]</span>                     <span class=\"token comment\">// 프린터 공유를 설정하는 섹션</span>\ncomment <span class=\"token operator\">=</span> Printer <span class=\"token class-name\">Drivers</span>\npath <span class=\"token operator\">=</span> <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>samba<span class=\"token operator\">/</span>drivers\n<span class=\"token class-name\">write</span> list <span class=\"token operator\">=</span> @printadmin root\n<span class=\"token class-name\">force</span> <span class=\"token keyword\">group</span> <span class=\"token operator\">=</span> @printadmin\n<span class=\"token class-name\">create</span> mask <span class=\"token operator\">=</span> <span class=\"token number\">0664</span>\n<span class=\"token class-name\">directory</span> mask <span class=\"token operator\">=</span> <span class=\"token number\">0775</span></code></pre></div>\n<br/>\n<h3 id=\"samba-test를-위한-user-및-그룹-생성\" style=\"position:relative;\"><a href=\"#samba-test%EB%A5%BC-%EC%9C%84%ED%95%9C-user-%EB%B0%8F-%EA%B7%B8%EB%A3%B9-%EC%83%9D%EC%84%B1\" aria-label=\"samba test를 위한 user 및 그룹 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SAMBA TEST를 위한 USER 및 그룹 생성</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">/</span><span class=\"token punctuation\">]</span>$  useradd <span class=\"token operator\">-</span>s <span class=\"token operator\">/</span>sbin<span class=\"token operator\">/</span>nologin smuser\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">/</span><span class=\"token punctuation\">]</span>$  smbpasswd <span class=\"token operator\">-</span>a smuser       <span class=\"token comment\">//a 옵션으로 SMB 등록</span>\nNew <span class=\"token class-name\">SMB</span> password<span class=\"token punctuation\">:</span>\nRetype <span class=\"token keyword\">new</span> <span class=\"token class-name\">SMB</span> password<span class=\"token punctuation\">:</span>\nAdded user smuser<span class=\"token punctuation\">.</span>\n\n\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> won<span class=\"token punctuation\">]</span>$  cat <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>passwd <span class=\"token operator\">|</span> grep <span class=\"token class-name\">smuser</span>\nsmuser<span class=\"token punctuation\">:</span>x<span class=\"token punctuation\">:</span><span class=\"token number\">1006</span><span class=\"token punctuation\">:</span><span class=\"token number\">1007</span><span class=\"token punctuation\">::</span><span class=\"token operator\">/</span>home<span class=\"token operator\">/</span>smuser<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>sbin<span class=\"token operator\">/</span>nologin\n\n<span class=\"token punctuation\">[</span>root<span class=\"token class-name\">@centos</span> won<span class=\"token punctuation\">]</span>$  cat <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span><span class=\"token keyword\">group</span> <span class=\"token operator\">|</span> grep <span class=\"token class-name\">samba</span>\nsambatest<span class=\"token punctuation\">:</span>x<span class=\"token punctuation\">:</span><span class=\"token number\">1007</span><span class=\"token punctuation\">:</span>smuser\n\n\n<span class=\"token preprocessor property\">## SMB 사용자 확인</span>\n\n해당 경로에 TDB파일로 유저정보가 저장된다<span class=\"token punctuation\">.</span>\n\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">/</span><span class=\"token punctuation\">]</span>$  file <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>samba<span class=\"token operator\">/</span><span class=\"token keyword\">private</span><span class=\"token operator\">/</span>passdb<span class=\"token punctuation\">.</span>tdb \n<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>samba<span class=\"token operator\">/</span><span class=\"token keyword\">private</span><span class=\"token operator\">/</span>passdb<span class=\"token punctuation\">.</span>tdb<span class=\"token punctuation\">:</span> TDB database version <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> little<span class=\"token operator\">-</span>endian\n    hash size <span class=\"token number\">131</span> bytes\n\n아래 명령어로 확인 가능\n\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">/</span><span class=\"token punctuation\">]</span>$  \n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">/</span><span class=\"token punctuation\">]</span>$  pdbedit <span class=\"token operator\">--</span><span class=\"token class-name\">list</span>\nsmuser<span class=\"token punctuation\">:</span><span class=\"token number\">1006</span><span class=\"token punctuation\">:</span></code></pre></div>\n<br/>\n<h3 id=\"공유-디렉토리-생성-및-설정\" style=\"position:relative;\"><a href=\"#%EA%B3%B5%EC%9C%A0-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EC%84%A4%EC%A0%95\" aria-label=\"공유 디렉토리 생성 및 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>공유 디렉토리 생성 및 설정</h3>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">[root@centos /]$  mkdir -p /samba/won\n[root@centos /]$  chown <span class=\"token property\">smuser</span><span class=\"token punctuation\">:</span>sambatest /samba/*\n[root@centos /]$  \n[root@centos /]$  ls -al /samba/*\n합계 0\ndrwxr-xr-x. 2 smuser sambatest  6  7월  8 21<span class=\"token punctuation\">:</span>08 .\ndrwxr-xr-x. 3 root      root      17  7월  8 21<span class=\"token punctuation\">:</span>08 ..</code></pre></div>\n<br/>\n<h3 id=\"selinux-컨택스트-설정\" style=\"position:relative;\"><a href=\"#selinux-%EC%BB%A8%ED%83%9D%EC%8A%A4%ED%8A%B8-%EC%84%A4%EC%A0%95\" aria-label=\"selinux 컨택스트 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SELinux 컨택스트 설정</h3>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">/</span><span class=\"token punctuation\">]</span>$  semanage fcontext <span class=\"token operator\">-</span>a <span class=\"token operator\">-</span>t samba_share_t '<span class=\"token operator\">/</span>samba<span class=\"token operator\">/</span><span class=\"token function\">won</span><span class=\"token punctuation\">(</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">?</span>'\n<span class=\"token punctuation\">[</span>root@centos <span class=\"token operator\">/</span><span class=\"token punctuation\">]</span>$  restorecon <span class=\"token operator\">-</span>RFv <span class=\"token operator\">/</span>samba<span class=\"token operator\">/</span>won<span class=\"token operator\">/</span>\nrestorecon reset <span class=\"token operator\">/</span>samba<span class=\"token operator\">/</span>won <span class=\"token class-name\">context</span> unconfined_u<span class=\"token punctuation\">:</span>object_r<span class=\"token punctuation\">:</span>default_t<span class=\"token punctuation\">:</span>s0<span class=\"token operator\">-></span>system_u<span class=\"token punctuation\">:</span>object_r<span class=\"token punctuation\">:</span>samba_share_t<span class=\"token punctuation\">:</span>s0</code></pre></div>\n<h3 id=\"설정-파일에-유저-등록\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC%EC%97%90-%EC%9C%A0%EC%A0%80-%EB%93%B1%EB%A1%9D\" aria-label=\"설정 파일에 유저 등록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설정 파일에 유저 등록</h3>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">[share]\ncomment = Samba test\npath = /samba/won\nwrite list = smuser<span class=\"token punctuation\">,</span> @smbgroup\nvalid users = smuser<span class=\"token punctuation\">,</span> @smbgroup<span class=\"token punctuation\">,</span> @wheel\nhosts allow = 192.168.56.0/24\nbrowseable = yes              -- 공유 디렉토리 검색 설정\n\n/// 설정에 문제가 없는지 확인\n      \n[root@centos /]$  testparm\nLoad smb config files from /etc/samba/smb.conf\nLoaded services file OK.\nServer <span class=\"token property\">role</span><span class=\"token punctuation\">:</span> ROLE_STANDALONE\n...\n...\n  \nPress enter to see a dump of your sevice definitions\nEnter 입력\n...\n...\n\n\n[data]\nbrowseable = yes\ncomment = won testing\nhosts allow = 192.168.56.0/24\npath = /samba/won\nvalid users = smuser @smbgroup @wheel\nwrite list = smuser @smbgroup</code></pre></div>\n<br/>\n<h3 id=\"서비스-시작-및-방화벽-설정\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8B%9C%EC%9E%91-%EB%B0%8F-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%84%A4%EC%A0%95\" aria-label=\"서비스 시작 및 방화벽 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서비스 시작 및 방화벽 설정</h3>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">[root@centos /]$  systemctl start smb nmb\n[root@centos /]$  systemctl enable smb nmb\nCreated symlink from /etc/systemd/system/multi-user.target.wants/smb.service to /usr/lib/systemd/system/smb.service.\nCreated symlink from /etc/systemd/system/multi-user.target.wants/nmb.service to /usr/lib/systemd/system/nmb.service.\n\n\n[root@centos /]$  firewall-cmd --permanent --add-service=samba\nsuccess\n[root@centos /]$  firewall-cmd --reload\nsuccess</code></pre></div>\n<br/>\n<hr>\n<h2 id=\"-smb-client-연결\" style=\"position:relative;\"><a href=\"#-smb-client-%EC%97%B0%EA%B2%B0\" aria-label=\" smb client 연결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👏 SMB Client 연결</h2>\n<p>이번 포스트에서는 LINUX &#x3C;-> LINUX 연결로 작성하였음.</p>\n<h3 id=\"client-패키지-설치-cifsutils-samba-client\" style=\"position:relative;\"><a href=\"#client-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%84%A4%EC%B9%98-cifsutils-samba-client\" aria-label=\"client 패키지 설치 cifsutils samba client permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Client 패키지 설치 cifs.utils, samba-client</h3>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">이미 설치되어있음.\n          \n[root@user01 /]# yum -y install cifs-utils\nLoaded <span class=\"token property\">plugins</span><span class=\"token punctuation\">:</span> fastestmirror<span class=\"token punctuation\">,</span> langpacks\nLoading mirror speeds from cached hostfile\n * <span class=\"token property\">base</span><span class=\"token punctuation\">:</span> mirror.kakao.com\n * <span class=\"token property\">extras</span><span class=\"token punctuation\">:</span> mirror.kakao.com\n * <span class=\"token property\">updates</span><span class=\"token punctuation\">:</span> ftp.iij.ad.jp\nbase                                                                          | 3.6 kB  00<span class=\"token punctuation\">:</span>00<span class=\"token punctuation\">:</span>00     \n extras                                                                        | 2.9 kB  00<span class=\"token punctuation\">:</span>00<span class=\"token punctuation\">:</span>00     \n updates                                                                       | 2.9 kB  00<span class=\"token punctuation\">:</span>00<span class=\"token punctuation\">:</span>00     \n updates/7/x86_64/primary_db                                                   | 3.0 MB  00<span class=\"token punctuation\">:</span>00<span class=\"token punctuation\">:</span>02     \n Package cifs-utils-6.2-10.el7.x86_64 already installed and latest version\n Nothing to do\n\n------------------------\n\n[root@user01 /]# yum -y install samba-client\nLoaded <span class=\"token property\">plugins</span><span class=\"token punctuation\">:</span> fastestmirror<span class=\"token punctuation\">,</span> langpacks\nLoading mirror speeds from cached hostfile\n * <span class=\"token property\">base</span><span class=\"token punctuation\">:</span> mirror.kakao.com\n * <span class=\"token property\">extras</span><span class=\"token punctuation\">:</span> mirror.kakao.com\n * <span class=\"token property\">updates</span><span class=\"token punctuation\">:</span> ftp.iij.ad.jp\n Package samba-client-4.10.4-11.el7_8.x86_64 already installed and latest version\n Nothing to do</code></pre></div>\n<br/>\n<h3 id=\"공유-영역-탐색\" style=\"position:relative;\"><a href=\"#%EA%B3%B5%EC%9C%A0-%EC%98%81%EC%97%AD-%ED%83%90%EC%83%89\" aria-label=\"공유 영역 탐색 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>공유 영역 탐색</h3>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">smb.conf의 \nbrowseable = yes 설정이 no로 되어있다면 탐색이 되지 않는다.\n\nroot@user01 /]# smbclient -L 192.168.56.101 -U smuser\nEnter SAMBA\\smuser's <span class=\"token property\">password</span><span class=\"token punctuation\">:</span> \n\nSharename       Type      Comment\n---------       ----      -------\nprint$          Disk      Printer Drivers\ndata            Disk      won testing                 ----- 확인.\nIPC$            IPC       IPC Service <span class=\"token punctuation\">(</span>Samba 4.10.4<span class=\"token punctuation\">)</span>\nsmuser          Disk      Home Directories\nReconnecting with SMB1 for workgroup listing.\n\nServer               Comment\n---------            -------\n\nWorkgroup            Master\n---------            -------\nSAMBA                CENTOS</code></pre></div>\n<br/>\n<h3 id=\"마운트-포인트-생성\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%9A%B4%ED%8A%B8-%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%83%9D%EC%84%B1\" aria-label=\"마운트 포인트 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마운트 포인트 생성</h3>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">[root@user01 /]# mkdir -p /samba/sambatest\n[root@user01 /]# ls -alrt samba/sambatest/\n합계 0\ndrwxr-xr-x. 3 root root 23  7월 17 14<span class=\"token punctuation\">:</span>59 ..\ndrwxr-xr-x. 2 root root  6  7월 17 14<span class=\"token punctuation\">:</span>59 .</code></pre></div>\n<br/>\n<h3 id=\"수동마운트\" style=\"position:relative;\"><a href=\"#%EC%88%98%EB%8F%99%EB%A7%88%EC%9A%B4%ED%8A%B8\" aria-label=\"수동마운트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>수동마운트</h3>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">SMB 공유 스토리지에 연결하기 위한 mount 명령 형식은 다음과 같습니다.\n\n# mount -o auth-infomation //server-addr/smb-share-name mount-poing\n\n1. <span class=\"token property\">auth-infomation</span> <span class=\"token punctuation\">:</span> 인증정보를 지정합니다.\n   따로 username=smbuser<span class=\"token punctuation\">,</span>password=123 으로 명령어를 입력해도 된다.\n          \n# 인증파일 내용\n[root@user01 ~]# cat /root/smb-auth \nusername=smuser\npassword=123\ndomain=SAMBA\n\n2. //server-addr/<span class=\"token property\">section-name</span> <span class=\"token punctuation\">:</span> 삼바서버의 IP 혹은 DOMAIN을 지정.\n   //를 두개 붙여주는 <span class=\"token property\">이유</span> <span class=\"token punctuation\">:</span> 리눅스와 윈도우의 \\ / 특수기호 처리 때문.\n\n3. <span class=\"token property\">smb-share-name</span> <span class=\"token punctuation\">:</span> 공유 디렉토리 이름\n --------------------------------------------</code></pre></div>\n<br/>\n<h3 id=\"공유-디렉토리가-마운트-됨을-확인\" style=\"position:relative;\"><a href=\"#%EA%B3%B5%EC%9C%A0-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC%EA%B0%80-%EB%A7%88%EC%9A%B4%ED%8A%B8-%EB%90%A8%EC%9D%84-%ED%99%95%EC%9D%B8\" aria-label=\"공유 디렉토리가 마운트 됨을 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>공유 디렉토리가 마운트 됨을 확인.</h3>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">[root@user01 /]# mount -t cifs //192.168.56.101/data /samba -o user=smuser<span class=\"token punctuation\">,</span>vers=1.0\nPassword for smuser@//192.168.56.101/<span class=\"token property\">data</span><span class=\"token punctuation\">:</span>  *\n[root@user01 /]# df -h\nFilesystem               Size  Used Avail Use% Mounted on\ndevtmpfs                 479M     0  479M   0% /dev\ntmpfs                    496M     0  496M   0% /dev/shm\ntmpfs                    496M  7.5M  489M   2% /run\ntmpfs                    496M     0  496M   0% /sys/fs/cgroup\n/dev/mapper/centos-root   41G  4.4G   37G  11% /\n/dev/sda1               1014M  171M  844M  17% /boot\ntmpfs                    100M   12K  100M   1% /run/user/42\ntmpfs                    100M     0  100M   0% /run/user/0\n//192.168.56.101/data     17G  4.3G   13G  25% /samba\n[root@user01 /]# cd /samba/\n[root@user01 samba]# ls -l\n합계 4\n-rw-r--r--. 1 1006 1009 16  7월 20 11<span class=\"token punctuation\">:</span>17 111  \n-> // test 용으로 만든 111파일 동기화 확인</code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-smb-server-message-block%EC%9D%B4%EB%9E%80-\">✔ SMB (Server Message Block)이란 ?</a></li>\n<li>\n<p><a href=\"#-smb-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%EA%B5%AC%EC%B6%95\">✌ SMB 스토리지 구축</a></p>\n<ul>\n<li><a href=\"#samba-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%84%A4%EC%B9%98\">SAMBA 패키지 설치</a></li>\n<li><a href=\"#cofig-%ED%99%95%EC%9D%B8-etcsambasmbconf\">Cofig 확인 /etc/samba/smb.conf</a></li>\n<li><a href=\"#samba-test%EB%A5%BC-%EC%9C%84%ED%95%9C-user-%EB%B0%8F-%EA%B7%B8%EB%A3%B9-%EC%83%9D%EC%84%B1\">SAMBA TEST를 위한 USER 및 그룹 생성</a></li>\n<li><a href=\"#%EA%B3%B5%EC%9C%A0-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EC%84%A4%EC%A0%95\">공유 디렉토리 생성 및 설정</a></li>\n<li><a href=\"#selinux-%EC%BB%A8%ED%83%9D%EC%8A%A4%ED%8A%B8-%EC%84%A4%EC%A0%95\">SELinux 컨택스트 설정</a></li>\n<li><a href=\"#%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC%EC%97%90-%EC%9C%A0%EC%A0%80-%EB%93%B1%EB%A1%9D\">설정 파일에 유저 등록</a></li>\n<li><a href=\"#%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8B%9C%EC%9E%91-%EB%B0%8F-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%84%A4%EC%A0%95\">서비스 시작 및 방화벽 설정</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-smb-client-%EC%97%B0%EA%B2%B0\">👏 SMB Client 연결</a></p>\n<ul>\n<li><a href=\"#client-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%84%A4%EC%B9%98-cifsutils-samba-client\">Client 패키지 설치 cifs.utils, samba-client</a></li>\n<li><a href=\"#%EA%B3%B5%EC%9C%A0-%EC%98%81%EC%97%AD-%ED%83%90%EC%83%89\">공유 영역 탐색</a></li>\n<li><a href=\"#%EB%A7%88%EC%9A%B4%ED%8A%B8-%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%83%9D%EC%84%B1\">마운트 포인트 생성</a></li>\n<li><a href=\"#%EC%88%98%EB%8F%99%EB%A7%88%EC%9A%B4%ED%8A%B8\">수동마운트</a></li>\n<li><a href=\"#%EA%B3%B5%EC%9C%A0-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC%EA%B0%80-%EB%A7%88%EC%9A%B4%ED%8A%B8-%EB%90%A8%EC%9D%84-%ED%99%95%EC%9D%B8\">공유 디렉토리가 마운트 됨을 확인.</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 23, 2021","title":"[LINUX] - SMB","categories":"LINUX","author":"nasa1515","emoji":"🤦‍♂️"},"fields":{"slug":"/linux-smb/"}},"site":{"siteMetadata":{"siteUrl":"https://nasa1515.com","comments":{"utterances":{"repo":"nasa1515/nasablog"}}}}},"pageContext":{"slug":"/linux-nfs/","nextSlug":"/linux-dns/","prevSlug":"/linux-smb/"}},"staticQueryHashes":["1073350324","2938748437"]}